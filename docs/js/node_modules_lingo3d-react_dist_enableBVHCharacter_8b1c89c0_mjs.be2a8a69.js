"use strict";(self.webpackChunksourcedao_pc_dapp=self.webpackChunksourcedao_pc_dapp||[]).push([["node_modules_lingo3d-react_dist_enableBVHCharacter_8b1c89c0_mjs"],{41006:(t,e,a)=>{a.d(e,{P:()=>n});var s=Object.defineProperty,i=(t,e,a)=>(((t,e,a)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a})(t,"symbol"!=typeof e?e+"":e,a),a);class n{constructor(){i(this,"x",!1),i(this,"y",!1),i(this,"z",!1)}updateX(){this.x=!0}updateY(){this.x=!0}updateZ(){this.x=!0}updateXYZ(){this.x=this.y=this.z=!0}updateXZ(){this.x=this.z=!0}reset(){this.x=this.y=this.z=!1}}},41466:(t,e,a)=>{a.d(e,{b:()=>h,d:()=>d,g:()=>n,i:()=>o});var s=a(51231);const[i,n]=(0,s.aM)(0),o=()=>i(n()+1),d=()=>i(n()-1),h=new WeakMap},4997:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var s=a(51231),i=a(6998),n=a(41466),o=a(41006);a(44441),a(48099);const d=new Set,h=()=>new WeakSet;function r(t){if(t.done)return;s.b8.attach(this.outerObject3d),this instanceof s.bq&&(this.width=this.depth=Math.min(this.width,this.depth)),this.rotationUpdate=new o.P,this.positionUpdate=new o.P;const e=(0,s.br)(this).multiplyScalar(.5);this.bvhHalfHeight=Math.max(e.y,.5),this.bvhRadius=Math.max(e.x,.5),this.bvhVelocity=new s.a,d.add(this),t.then((()=>{d.delete(this),this.rotationUpdate=void 0,this.positionUpdate=void 0}))}(0,s.aD)((function(){if((0,s.b6)()||!(0,s.bk)()||(0,n.g)())return;const t=(0,i.g)();if(!t.length)return;const e=(0,s.bh)(),a=(0,s.bi)(),o=.02,r=(0,s.bj)(),c=(0,s.aE)((()=>{s.bl.clear();for(const i of d){const d=i.bvhVelocity,c=i.outerObject3d,b=i.bvhHalfHeight,l=r?b:i.bvhRadius;r?d.add(i.bvhOnGround||!1===i._gravity?s.bm:(0,s.bn)(c).normalize().multiplyScalar(o*-e*s.bo[0])):d.y+=i.bvhOnGround||!1===i._gravity?0:o*-e*s.bo[0];const u=i.positionUpdate;u.x&&(d.x=0),u.y&&(d.y=0),u.z&&(d.z=0),u.reset(),c.position.addScaledVector(d,o),c.updateMatrixWorld();const{start:p,end:y}=s.aJ;y.copy(p.copy(c.position));const v=Math.max(b-l,0);y.y+=v,p.y-=v;const m=p.clone();s.aI.setFromCenterAndSize(c.position,s.bp.set(2*l,2*b,2*l));const f=s.aK,g=s.aL;let x,w,z=0,O=!1;for(const e of t)w=n.b.get(e),e.shapecast({intersectsBounds:t=>t.intersectsBox(s.aI),intersectsTriangle:t=>{z=t.closestPointToSegment(s.aJ,f,g),z<l&&(O=!0,x=g.sub(f).normalize().multiplyScalar(l-z),p.add(x),y.add(x))}});O&&w&&(0,s.w)(s.bl,i,h).add(w);const _=p.sub(m);r?i.bvhOnGround=O:(i.bvhOnGround=_.y>Math.abs(o*d.y*.25),a&&i.bvhOnGround&&Math.abs(_.y/(_.x+_.z+Number.EPSILON))<a&&(i.bvhOnGround=!1));const M=Math.max(0,_.length()-1e-5);_.normalize().multiplyScalar(M),c.position.add(_),i.bvhOnGround?d.set(0,0,0):(_.normalize(),d.addScaledVector(_,-_.dot(d)))}}));return()=>{c.cancel()}}),[i.g,s.bh,s.bi,s.bj,s.b6,s.bk,n.g])},6998:(t,e,a)=>{a.d(e,{a:()=>d,g:()=>n,p:()=>o});var s=a(51231);const[i,n]=(0,s.aM)([]),o=(0,s.aN)(i,n),d=(0,s.aO)(i,n)}}]);
//# sourceMappingURL=node_modules_lingo3d-react_dist_enableBVHCharacter_8b1c89c0_mjs.be2a8a69.js.map