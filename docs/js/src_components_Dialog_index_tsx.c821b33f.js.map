{"version":3,"file":"js/src_components_Dialog_index_tsx.c821b33f.js","mappings":"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","sources":["webpack://sourcedao-pc-dapp/./src/components/Customization/TextField.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Stream/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Wallte/index.tsx","webpack://sourcedao-pc-dapp/./src/assets/images/wallte/senderWalletIcon.jpeg","webpack://sourcedao-pc-dapp/./src/components/Dialog/Register/index.tsx","webpack://sourcedao-pc-dapp/./src/constants/exhibition.ts","webpack://sourcedao-pc-dapp/./src/components/Dialog/Meta/Lingo3D/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Meta/Menu/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Meta/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Room/CreateRoom/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Room/SendNft/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Room/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/Nft/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Dialog/index.tsx","webpack://sourcedao-pc-dapp/./src/utils/ipfs.ts"],"sourcesContent":["import { TextField } from '@mui/material'\r\n\r\nimport { styled } from '@mui/material/styles'\r\n\r\nexport default styled(TextField)(({ theme }) => ({\r\n  '& .MuiInputBase-input': {\r\n    color: '#fff',\r\n  },\r\n  '& .MuiOutlinedInput-root': {\r\n    '& fieldset': {\r\n      borderColor: theme.palette.primary.main,\r\n    },\r\n    '&:hover fieldset': {\r\n      borderColor: theme.palette.primary.main,\r\n    },\r\n  },\r\n}))\r\n","import React, { useEffect, useRef } from 'react'\r\n\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Box,\r\n  Slide,\r\n  Typography,\r\n  IconButton,\r\n  Skeleton,\r\n  CircularProgress,\r\n} from '@mui/material'\r\n\r\nimport { useAppSelector, useAppDispatch } from '@store/index'\r\nimport { initWebRTCState, creatAnswer } from '@store/modules/webRTC'\r\nimport { setMeta } from '@store/modules/dialog'\r\n\r\nimport { path } from '@utils/ipfs'\r\n\r\nimport type { TransitionProps } from '@mui/material/transitions'\r\nimport type { Friends } from '@store/modules/friends'\r\n\r\nimport './index.less'\r\n\r\nimport { Call, CallEnd } from '@mui/icons-material'\r\n\r\nconst Transition = React.forwardRef(\r\n  (\r\n    props: TransitionProps & {\r\n      children: React.ReactElement\r\n    },\r\n    ref: React.Ref<unknown>\r\n  ) => {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />\r\n  }\r\n)\r\n\r\nexport default (): JSX.Element => {\r\n  const { streamOpen } = useAppSelector((store) => store.dialog)\r\n  const {\r\n    friend,\r\n    pc,\r\n    isOffer,\r\n    isAnswer,\r\n    stream,\r\n    isVideo,\r\n    localStream,\r\n    isMeta,\r\n    dataChannel,\r\n    candidate\r\n  } = useAppSelector((store) => store.webRTC)\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const audioRef = useRef<HTMLAudioElement>(null)\r\n  const videoRef = useRef<HTMLVideoElement>(null)\r\n  const videoLocalRef = useRef<HTMLVideoElement>(null)\r\n\r\n  const handleAnswer = () => {\r\n    dispatch(creatAnswer())\r\n  }\r\n\r\n  const handleClose = () => {\r\n    dispatch(initWebRTCState())\r\n  }\r\n\r\n  const isUse = isOffer || isAnswer\r\n  const connected = pc && stream && dataChannel && candidate\r\n\r\n  const createAudio = (friend: Friends) => (\r\n    <>\r\n      <img\r\n        style={{ width: '100px', marginBottom: '16px' }}\r\n        src={path(friend.image)}\r\n      />\r\n      <Typography sx={{ color: '#000' }}>{friend.name}</Typography>\r\n      <audio className=\"audio\" ref={audioRef} autoPlay></audio>\r\n    </>\r\n  )\r\n\r\n  const creatVideo = () => (\r\n    <Box sx={{ width: '100%', position: 'relative' }}>\r\n      <video\r\n        className=\"local_video\"\r\n        ref={videoLocalRef}\r\n        autoPlay\r\n        muted={true}\r\n      ></video>\r\n      <video className=\"remote_video\" ref={videoRef} autoPlay></video>\r\n    </Box>\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (!stream) return\r\n    if (!connected) return\r\n    if (isVideo) {\r\n      videoRef.current!.srcObject = stream\r\n      videoLocalRef.current!.srcObject = localStream!\r\n    } else {\r\n      audioRef.current!.srcObject = stream\r\n    }\r\n    if (isMeta) dispatch(setMeta(true))\r\n  }, [stream, pc?.connectionState])\r\n\r\n  return (\r\n    <div>\r\n      <Dialog open={streamOpen} TransitionComponent={Transition} keepMounted>\r\n        <DialogContent>\r\n          <Box\r\n            sx={{\r\n              width: 552,\r\n              height: 400,\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              overflow: 'hidden',\r\n            }}\r\n          >\r\n            {friend ? (\r\n              connected ? (\r\n                isVideo ? (\r\n                  creatVideo()\r\n                ) : (\r\n                  createAudio(friend)\r\n                )\r\n              ) : (\r\n                createAudio(friend)\r\n              )\r\n            ) : (\r\n              <>\r\n                <Skeleton\r\n                  variant=\"rectangular\"\r\n                  width={100}\r\n                  height={100}\r\n                  sx={{ mb: 2 }}\r\n                />\r\n                <Skeleton\r\n                  variant=\"text\"\r\n                  sx={{ width: '80px', fontSize: '1.5em' }}\r\n                />\r\n              </>\r\n            )}\r\n            {!connected && <CircularProgress color=\"inherit\" sx={{ mt: 6 }} />}\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions\r\n          sx={{\r\n            pl: 10,\r\n            pr: 10,\r\n            mb: 2,\r\n            display: 'flex',\r\n            justifyContent: isUse ? 'center' : 'space-between',\r\n          }}\r\n        >\r\n          {!isUse && (\r\n            <IconButton size=\"large\" onClick={handleAnswer}>\r\n              <Call color=\"success\" />\r\n            </IconButton>\r\n          )}\r\n          <IconButton size=\"large\" onClick={handleClose}>\r\n            <CallEnd color=\"error\" />\r\n          </IconButton>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Avatar,\r\n  IconButton,\r\n} from '@mui/material'\r\n\r\nimport { styled, ThemeProvider, createTheme } from '@mui/material/styles'\r\n\r\nimport CloseIcon from '@mui/icons-material/Close'\r\n\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport langHook from '@hooks/localHook'\r\n\r\nimport { walletLang } from '@langs/index'\r\n\r\nimport { useAppSelector, useAppDispatch } from '@store/index'\r\n\r\nimport {\r\n  setDialogOpen,\r\n  connectWallet,\r\n  setConnecting,\r\n  WalletState,\r\n} from '@store/modules/wallet'\r\n\r\nimport { getNearWallet } from '@utils/wallets'\r\n\r\nimport senderWalletIcon from '@images/wallte/senderWalletIcon.jpeg'\r\n\r\ninterface Wallte {\r\n  icon: string\r\n  text: string\r\n}\r\n\r\nconst BootstrapDialog = styled(Dialog)(({ theme }) => ({\r\n  '& .MuiPaper-root': {\r\n    paddingLeft: theme.spacing(4),\r\n    paddingRight: theme.spacing(4),\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n}))\r\n\r\nexport default (): JSX.Element => {\r\n  const theme = createTheme({\r\n    typography: {\r\n      body1: {\r\n        color: '#000',\r\n      },\r\n    },\r\n  })\r\n\r\n  const { enqueueSnackbar } = useSnackbar()\r\n\r\n  const { dialogOpen, connecting } = useAppSelector((state) => state.wallet)\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const local = langHook()\r\n\r\n  const walltes: Wallte[] = [\r\n    {\r\n      icon: '',\r\n      text: 'Sender',\r\n    },\r\n  ]\r\n\r\n  const handleClose = () => {\r\n    if (connecting) return\r\n    dispatch(setDialogOpen(false))\r\n  }\r\n\r\n  const handleListItemClick = async (wallte: Wallte) => {\r\n    if (connecting) return\r\n\r\n    const { text } = wallte\r\n\r\n    dispatch(setConnecting(true))\r\n\r\n    const isConnected = getNearWallet(text)\r\n\r\n    if (isConnected) {\r\n      const { payload } = await dispatch(connectWallet(text))\r\n\r\n      if ((payload as WalletState).accountAddress)\r\n        enqueueSnackbar(local(walletLang.connected), { variant: 'success' })\r\n    } else {\r\n      window.open('https://senderwallet.io/')\r\n      dispatch(setConnecting(false))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <BootstrapDialog onClose={handleClose} open={dialogOpen}>\r\n      <DialogTitle\r\n        sx={{\r\n          pl: 0,\r\n          pb: 5,\r\n          color: '#000'\r\n        }}\r\n      >\r\n        {local(walletLang.wallet)}\r\n        <IconButton\r\n          aria-label=\"close\"\r\n          onClick={handleClose}\r\n          sx={{\r\n            position: 'absolute',\r\n            right: 8,\r\n            top: 8,\r\n            color: (theme) => theme.palette.grey[500],\r\n          }}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      <List sx={{ pt: 0 }}>\r\n        {walltes.map((wallte, index) => (\r\n          <ListItem\r\n            disabled={connecting}\r\n            button\r\n            onClick={() => handleListItemClick(wallte)}\r\n            key={index}\r\n            sx={{\r\n              border: '1px solid rgba(0, 0, 0, 0.12)',\r\n              borderRadius: 4,\r\n              width: 360,\r\n            }}\r\n          >\r\n            <ListItemAvatar>\r\n              <Avatar variant=\"rounded\" src={senderWalletIcon} />\r\n            </ListItemAvatar>\r\n            <ThemeProvider theme={theme}>\r\n              <ListItemText primary={wallte.text} />\r\n              <ListItemText\r\n                primary={local(\r\n                  connecting ? walletLang.connecting : walletLang.connect\r\n                )}\r\n                sx={{\r\n                  flexGrow: 0,\r\n                }}\r\n              />\r\n            </ThemeProvider>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </BootstrapDialog>\r\n  )\r\n}\r\n","export default \"data:image/jpeg;base64,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\"","import React, { ChangeEvent, forwardRef, useState } from 'react'\r\n\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  IconButton,\r\n  Slide,\r\n  Toolbar,\r\n} from '@mui/material'\r\n\r\nimport { styled } from '@mui/material/styles'\r\n\r\nimport LoadingButton from '@mui/lab/LoadingButton'\r\n\r\nimport { TransitionProps } from '@mui/material/transitions'\r\n\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { useAppSelector, useAppDispatch } from '@store/index'\r\nimport { setUser, setDialogOpen } from '@store/modules/user'\r\n\r\nimport langHook from '@hooks/localHook'\r\nimport { registerLang } from '@langs/index'\r\n\r\nimport { truncateMiddle } from '@utils/index'\r\nimport { add } from '@utils/ipfs'\r\n\r\nimport { userApi, ContractError } from '@api/index'\r\n\r\nimport { TextField } from '@components/Customization'\r\n\r\nimport { PhotoCamera, ContentCopy, Close } from '@mui/icons-material'\r\n\r\nconst Transition = forwardRef(\r\n  (\r\n    props: TransitionProps & {\r\n      children: React.ReactElement\r\n    },\r\n    ref: React.Ref<unknown>\r\n  ) => {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />\r\n  }\r\n)\r\n\r\nconst BootstrapDialog = styled(Dialog)(() => ({\r\n  '& .MuiPaper-root': {\r\n    backgroundColor: '#000',\r\n  },\r\n}))\r\n\r\nexport default (): JSX.Element => {\r\n  const { enqueueSnackbar } = useSnackbar()\r\n\r\n  const { accountAddress } = useAppSelector((state) => state.wallet)\r\n  const user = useAppSelector((state) => state.user)\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const local = langHook()\r\n\r\n  const [headerImg, setHeaderImg] = useState(user.headerImg)\r\n  const [nickname, setNickname] = useState(user.nickname)\r\n  const [helperText, setHelperText] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const handleCopy = () => {\r\n    navigator.clipboard.writeText(accountAddress)\r\n    enqueueSnackbar(local(registerLang.copied), {\r\n      variant: 'success',\r\n    })\r\n  }\r\n\r\n  const handleHeaderImg = async (event: ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files\r\n    if (!files) return\r\n    const file = files[0]\r\n    const hash = await add(file)\r\n    setHeaderImg(hash)\r\n  }\r\n\r\n  const handleNickname = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setHelperText('')\r\n    setNickname(event.target.value)\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    if (!nickname) {\r\n      setHelperText(local(registerLang.required))\r\n      return\r\n    }\r\n    setLoading(true)\r\n    try {\r\n      await userApi.register(nickname, headerImg)\r\n      dispatch(setUser({ headerImg, nickname }))\r\n    } catch (error) {\r\n      enqueueSnackbar((error as ContractError).kind.ExecutionError, {\r\n        variant: 'error',\r\n        autoHideDuration: 5000,\r\n      })\r\n    }\r\n    setLoading(false)\r\n  }\r\n  return (\r\n    <BootstrapDialog\r\n      fullScreen\r\n      open={user.dialogOpen}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <AppBar sx={{ display: 'flex', alignItems: 'end' }}>\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"primary\"\r\n            onClick={() => dispatch(setDialogOpen(false))}\r\n            aria-label=\"close\"\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Box\r\n        sx={{\r\n          height: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          // justifyContent: 'center',\r\n          alignItems: 'center',\r\n          pt: 30,\r\n        }}\r\n      >\r\n        {/* headerImg */}\r\n        <Box\r\n          sx={{\r\n            position: 'relative',\r\n            width: 100,\r\n            height: 100,\r\n            mb: 2,\r\n          }}\r\n        >\r\n          <img\r\n            style={{ width: '100%', height: '100%', borderRadius: '12px' }}\r\n            src={`https://ipfs.io/ipfs/${headerImg}`}\r\n          />\r\n          <Box\r\n            sx={{\r\n              position: 'absolute',\r\n              left: 0,\r\n              top: 0,\r\n              width: '100%',\r\n              height: '100%',\r\n              backgroundColor: 'rgba(255, 255, 255, 0.6)',\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              opacity: 0,\r\n              transition: 'opacity 0.8s',\r\n              borderRadius: '12px',\r\n              '&:hover': {\r\n                opacity: 1,\r\n              },\r\n            }}\r\n          >\r\n            <IconButton color=\"inherit\" size=\"large\" component=\"label\">\r\n              <input\r\n                hidden\r\n                accept=\"image/*\"\r\n                type=\"file\"\r\n                onChange={handleHeaderImg}\r\n              />\r\n              <PhotoCamera />\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n        {/* accountAddress */}\r\n        <Button\r\n          color=\"primary\"\r\n          sx={{ pb: 6 }}\r\n          endIcon={<ContentCopy />}\r\n          onClick={handleCopy}\r\n        >\r\n          {truncateMiddle(accountAddress, 5)}\r\n        </Button>\r\n        {/* nickname */}\r\n        <TextField\r\n          error={!!helperText}\r\n          label={local(registerLang.nickname)}\r\n          value={nickname}\r\n          onChange={handleNickname}\r\n          helperText={helperText}\r\n          sx={{ mb: 8 }}\r\n        />\r\n        <LoadingButton\r\n          variant=\"contained\"\r\n          loading={loading}\r\n          onClick={handleSubmit}\r\n        >\r\n          {local(registerLang.submitted)}\r\n        </LoadingButton>\r\n      </Box>\r\n    </BootstrapDialog>\r\n  )\r\n}\r\n","export const NFTS = [\r\n  {\r\n    name: 'Object_1686',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1688',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1690',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1704',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1672',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1670',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1674',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1676',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1698',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1702',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1682',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1678',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1680',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1708',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1700',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1660',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1662',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1658',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1664',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1666',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1668',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1694',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1696',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1684',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1652',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1706',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  \r\n  \r\n  \r\n  // 2\r\n  {\r\n    name: 'Object_61',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1692',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_63',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_65',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_67',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_69',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_71',\r\n    texture: '',\r\n    z: 50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_59',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_49',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_47',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_51',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_53',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_55',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_57',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_45',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_41',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_43',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: -180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_37',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_39',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_27',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_31',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 90,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_29',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: -180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_33',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_35',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_25',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_23',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_17',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_21',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_19',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1656',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n  {\r\n    name: 'Object_1654',\r\n    texture: '',\r\n    z: -50,\r\n    rotationX: 180,\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n]\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nimport {\r\n  Cube,\r\n  Dummy,\r\n  Find,\r\n  HTML,\r\n  keyboard,\r\n  Model,\r\n  Plane,\r\n  Reticle,\r\n  ThirdPersonCamera,\r\n  useLoop,\r\n  usePreload,\r\n  useSpring,\r\n  useWindowSize,\r\n  World,\r\n  HTMLMesh,\r\n} from 'lingo3d-react'\r\n\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { useAppSelector, useAppDispatch } from '@store/index'\r\nimport {\r\n  setAnswerChannel,\r\n  Play,\r\n  // removePlay,\r\n  addPlay,\r\n  setConnected,\r\n  setModel,\r\n} from '@store/modules/room'\r\n\r\nimport { NFTS } from '@constants/exhibition'\r\n\r\nimport { STATIC } from '@api/config'\r\n\r\nimport { getImgWH } from '@utils/index'\r\nimport { offer } from '@utils/webRTC'\r\n\r\nimport type {\r\n  Dummy as GameDummy,\r\n  ThirdPersonCamera as GameThirdPersonCamera,\r\n  HTMLMesh as GameHTMLMesh,\r\n} from 'lingo3d'\r\n\r\nimport './index.less'\r\n\r\nimport { VolumeUp } from '@mui/icons-material'\r\n\r\ntype aniModelVal = { idle: string, walking: string }\r\n\r\nconst path = (name: string): string => `${STATIC}/model/${name}`\r\nconst initX = 165\r\nconst initY = -360\r\nconst initZ = -186\r\nconst fbxs = ['kazama.fbx', 'ARASHI.fbx', 'AYA.fbx']\r\nconst aniModel: Record<string, aniModelVal> = {\r\n  'kazama.fbx': {\r\n    idle: 'Idle.fbx',\r\n    walking: 'Walking.fbx'\r\n  },\r\n  'ARASHI.fbx': {\r\n    idle: 'ARASHI_Idle.fbx',\r\n    walking: 'ARASHI_Walking.fbx'\r\n  },\r\n  'AYA.fbx': {\r\n    idle: 'Idle.fbx',\r\n    walking: 'Walking.fbx'\r\n  },\r\n}\r\n\r\nconst dancers = [\r\n  {\r\n    dancer: 'MIYU.fbx',\r\n    dance: 'MIYU_Dance.fbx',\r\n    x: -560,\r\n    y: initY,\r\n    z: -220,\r\n    lookAt: [8000, 0, 0],\r\n  },\r\n  {\r\n    dancer: 'NANA.fbx',\r\n    dance: 'NANA_Dance.fbx',\r\n    x: -30,\r\n    y: initY,\r\n    z: -690,\r\n    lookAt: [0, 0, 8000],\r\n  },\r\n  {\r\n    dancer: 'SHO.fbx',\r\n    dance: 'SHO_Dance.fbx',\r\n    x: -33,\r\n    y: initY,\r\n    z: 248,\r\n    lookAt: [0, 0, -8000],\r\n  },\r\n]\r\n\r\ninterface Position {\r\n  x: number\r\n  y: number\r\n  z: number\r\n}\r\n\r\nexport default (): JSX.Element => {\r\n  let timer: NodeJS.Timeout | undefined\r\n\r\n  const modules = [...fbxs, ...fbxs, ...fbxs, ...fbxs, ...fbxs]\r\n\r\n  const progress = usePreload(\r\n    [\r\n      path('env.hdr'),\r\n      path('galleryBK.glb'),\r\n      path('kazama.fbx'),\r\n      path('ARASHI.fbx'),\r\n      path('AYA.fbx'),\r\n      path('Idle.fbx'),\r\n      path('Walking.fbx'),\r\n      path('ARASHI_Idle.fbx'),\r\n      path('ARASHI_Walking.fbx'),\r\n      path('MIYU.fbx'),\r\n      path('MIYU_Dance.fbx'),\r\n      path('NANA.fbx'),\r\n      path('NANA_Dance.fbx'),\r\n      path('SHO.fbx'),\r\n      path('SHO_Dance.fbx'),\r\n    ],\r\n    '62mb'\r\n  )\r\n\r\n  const { enqueueSnackbar } = useSnackbar()\r\n\r\n  const { nickname, socket } = useAppSelector((store) => store.user)\r\n  const { playes, room, initPlays } = useAppSelector((store) => store.room)\r\n  const { accountAddress } = useAppSelector((store) => store.wallet)\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [position, setPosition] = useState<Record<string, Position>>({})\r\n  const [walking, setWalking] = useState<Record<string, boolean>>({})\r\n  const [talking, setTalking] = useState<Record<string, boolean>>({})\r\n\r\n  // 玩家聚焦相框视角调整\r\n  const [mouseOver, setMouseOver] = useState<boolean[]>(\r\n    new Array(NFTS.length).fill(false)\r\n  )\r\n  const mouseOverState = mouseOver.some((item) => item)\r\n  const camX = mouseOverState ? 50 : 0\r\n  const camY = mouseOverState ? 100 : 100\r\n  const camZ = mouseOverState ? 100 : 300\r\n  const xSpring = useSpring({ to: camX, bounce: 0 })\r\n  const ySpring = useSpring({ to: camY, bounce: 0 })\r\n  const zSpring = useSpring({ to: camZ, bounce: 0 })\r\n  const changeMouseOver = (index: number, state: boolean) => {\r\n    const _mouseOver = [...mouseOver]\r\n    _mouseOver.splice(index, 1, state)\r\n    setMouseOver(_mouseOver)\r\n  }\r\n\r\n  // adjust camera FOV based on window size\r\n  // 根据窗口大小调整相机的FOV\r\n  const windowSize = useWindowSize()\r\n  const fov = windowSize.width < windowSize.height ? 100 : 90\r\n\r\n  const dummyRef = useRef<GameDummy>(null)\r\n  const cameraRef = useRef<GameThirdPersonCamera>(null)\r\n  const nameRef = useRef<GameHTMLMesh>(null)\r\n  const remoteDummyRef = useRef<Record<string, GameDummy | null>>({})\r\n  const remoteNameRef = useRef<Record<string, GameHTMLMesh | null>>({})\r\n  const remoteAudioRef = useRef<Record<string, HTMLAudioElement | null>>({})\r\n\r\n  // 其他玩家碰撞到位置后停止移动，并瞬移到结束的位置上\r\n  const handleIntersect = (key: string) => {\r\n    setTimeout(() => {\r\n      const { x, y, z } = position[key]\r\n      remoteDummyRef.current[key]!.x = x\r\n      remoteDummyRef.current[key]!.y = y\r\n      remoteDummyRef.current[key]!.z = z\r\n    }, 300)\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n      timer = undefined\r\n      const _walking = { ...walking }\r\n      _walking[key] = false\r\n      setWalking(_walking)\r\n    }, 300)\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const message = (event: MessageEvent<any>) => {\r\n    const { type, data } = JSON.parse(event.data)\r\n    if (type === 'position') {\r\n      const { x, y, z, key } = data\r\n      remoteDummyRef.current[key]?.lookAt({ x, y, z })\r\n      const _positions = { ...position }\r\n      _positions[key] = { x, y, z }\r\n      setPosition(_positions)\r\n      const _walking = { ...walking }\r\n      _walking[key] = true\r\n      setWalking(_walking)\r\n    } else if (type === 'init') {\r\n      const { key, model, position } = data\r\n      dispatch(setModel([key, model, position]))\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!room) return\r\n    // nft\r\n    NFTS.forEach(async (nft, index) => {\r\n      const url = room.nft[index]\r\n      const [width, height] = await getImgWH(url)\r\n      nft.texture = url\r\n      nft.width = width\r\n      nft.height = height\r\n    })\r\n\r\n    // join online play\r\n    initPlays.forEach(async (play) => {\r\n      const media = { video: false, audio: true }\r\n      const isMeta = true\r\n      const toId = play.id\r\n      const type = 'room'\r\n\r\n      const { pc, dataChannel, localStream } = await offer({ media, isMeta })\r\n      const _play: Play = {\r\n        ...play,\r\n        identity: 'answer',\r\n        pc,\r\n        dataChannel,\r\n        localStream: localStream!,\r\n        audioContext: new AudioContext(),\r\n        stream: undefined,\r\n        connected: false,\r\n      }\r\n      dispatch(addPlay(_play))\r\n\r\n      pc.onicecandidate = (event) => {\r\n        if (event.candidate)\r\n          socket?.emit('candidate', {\r\n            type,\r\n            candidate: event.candidate,\r\n            toId,\r\n          })\r\n      }\r\n\r\n      socket?.emit('offer', {\r\n        offer: pc.localDescription,\r\n        toId,\r\n        type,\r\n        media,\r\n        isMeta,\r\n        play: {\r\n          name: nickname,\r\n          id: accountAddress\r\n        },\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // 键盘WASD控制\r\n    keyboard.onKeyPress = (_, keys) => {\r\n      const dummy = dummyRef.current\r\n      const speed = 2.4\r\n      if (!dummy) return\r\n\r\n      if (keys.has('w')) {\r\n        dummy.strideForward = -speed\r\n      } else if (keys.has('s')) {\r\n        dummy.strideForward = speed\r\n      } else if (keys.has('a')) {\r\n        dummy.strideRight = speed\r\n      } else if (keys.has('d')) {\r\n        dummy.strideRight = -speed\r\n      } else {\r\n        dummy.strideForward = 0\r\n        dummy.strideRight = 0\r\n      }\r\n\r\n      const { x, y, z } = dummy\r\n\r\n      const data = {\r\n        type: 'position',\r\n        data: { x, y, z, key: accountAddress },\r\n      }\r\n      const value = JSON.stringify(data)\r\n      Object.keys(playes).forEach((key) => {\r\n        const play = playes[key]\r\n        console.log(`send ${play?.name} type ${data.type}`)\r\n        try {\r\n          if (play && play.connected) play.dataChannel?.send(value)\r\n        } catch (error) {\r\n\r\n        }\r\n      })\r\n    }\r\n\r\n    const keys = Object.keys(playes)\r\n    console.log(playes, 'playes')\r\n    \r\n    keys.forEach((key) => {\r\n      const play = playes[key]\r\n      if (!play.pc) return\r\n      play.pc.ondatachannel = (event) => {\r\n        const dataChannel = event.channel\r\n        if (!play.dataChannel) dispatch(setAnswerChannel({ key, dataChannel }))\r\n      }\r\n\r\n      if (play.dataChannel)\r\n        play.dataChannel.onmessage = message\r\n\r\n      if (play.pc?.connectionState !== 'connected' && play.candidate) {\r\n        play.pc?.addIceCandidate(new RTCIceCandidate(play.candidate))\r\n      }\r\n\r\n      const _positions = { ...position }\r\n      _positions[key] = { x: 0, y: 0, z: 0 }\r\n      setPosition(_positions)\r\n      const _walking = { ...walking }\r\n      _walking[key] = false\r\n      setWalking(_walking)\r\n      const _talking = { ...talking }\r\n      _talking[key] = false\r\n      setTalking(_talking)\r\n\r\n      // 音频\r\n      if (remoteAudioRef.current[key] && play.stream) {\r\n        const { stream, audioContext } = play\r\n        remoteAudioRef.current[key]!.srcObject = stream\r\n\r\n        // 音频收集\r\n        const mediaStreamSource = audioContext.createMediaStreamSource(stream)\r\n        const scriptProcessor = audioContext.createScriptProcessor(4096, 1, 1)\r\n        mediaStreamSource.connect(scriptProcessor)\r\n        scriptProcessor.connect(audioContext.destination)\r\n        scriptProcessor.onaudioprocess = (e) => {\r\n          const buffer = e.inputBuffer.getChannelData(0)\r\n          // 获取缓冲区中最大的音量值\r\n          // eslint-disable-next-line prefer-spread\r\n          const maxVal = Math.max.apply(Math, buffer as unknown as number[])\r\n          // 显示音量值\r\n          const _talking = { ...talking }\r\n          _talking[key] = Math.ceil(maxVal * 100) > 10\r\n          setTalking({ ..._talking })\r\n        }\r\n      }\r\n    })\r\n\r\n  }, [playes])\r\n\r\n  // 其他玩家移动帧\r\n  useLoop(\r\n    () => {\r\n      Object.keys(walking).forEach((key) => {\r\n        if (!walking[key]) return\r\n        const dummy = remoteDummyRef.current[key]\r\n        dummy?.moveForward(-2.3)\r\n      })\r\n    },\r\n    Object.values(walking).some((walk) => walk)\r\n  )\r\n  useLoop(\r\n    () => {\r\n      const _playes = { ...playes }\r\n      Object.keys(_playes).forEach((key) => {\r\n        const play = playes[key]\r\n        if (play.pc?.connectionState === 'connected' && !play.connected) {\r\n          dispatch(setConnected(key))\r\n          const data = {\r\n            type: 'init',\r\n            data: {\r\n              key: accountAddress,\r\n              model: modules[initPlays.length],\r\n              position: {\r\n                x: dummyRef.current ? dummyRef.current.x : initX,\r\n                y: dummyRef.current ? dummyRef.current.y + 15 : initY,\r\n                z: dummyRef.current ? dummyRef.current.z : initX,\r\n              }\r\n            }\r\n          }\r\n          play.dataChannel?.send(JSON.stringify(data))\r\n          if (play.identity === 'offer') {\r\n            enqueueSnackbar(`Join In ${play.name}`, {\r\n              variant: 'success',\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    Object.values(playes).some((playe) => !playe.connected)\r\n  )\r\n\r\n  useLoop(() => {\r\n    if (!cameraRef.current || !nameRef.current) return\r\n    nameRef.current.lookAt(cameraRef.current)\r\n    Object.values(remoteNameRef.current).forEach((remoteName) =>\r\n      remoteName?.lookAt(cameraRef.current!)\r\n    )\r\n  }, true)\r\n\r\n  return (\r\n    <>\r\n      {progress < 100 ? (\r\n        <div className=\"meta_loading\">loading {Math.floor(progress)}%</div>\r\n      ) : (\r\n        <World\r\n          defaultLight={path('env.hdr')}\r\n          skybox={path('env.hdr')}\r\n          bloom\r\n          // bloomStrength={0.2}\r\n          bloomRadius={1}\r\n          bloomThreshold={0.8}\r\n          // repulsion={1}\r\n          outlineColor=\"gold\"\r\n          outlineHiddenColor=\"white\"\r\n          outlinePulse={1000}\r\n        >\r\n          {/* gallery model */}\r\n          {/* 艺术馆模型 */}\r\n          <Model\r\n            onClick={(e) => console.log(e.point)}\r\n            metalnessFactor={-1.1}\r\n            roughnessFactor={1.5}\r\n            src={path('galleryBK.glb')}\r\n            scale={10}\r\n            physics=\"map\"\r\n          >\r\n            {/* find the artwork of name \"a6_CRN.a6_0\" */}\r\n            {/* 找到名称为 \"a6_CRN.a6_0\" 的艺术品 */}\r\n            {NFTS.map((nft, index) => (\r\n              <Find\r\n                key={index}\r\n                name={nft.name}\r\n                outline={mouseOver[index]}\r\n                onMouseOver={() => changeMouseOver(index, true)}\r\n                onMouseOut={() => changeMouseOver(index, false)}\r\n              >\r\n                <Plane\r\n                  texture={nft.texture}\r\n                  z={nft.z}\r\n                  rotationZ={180}\r\n                  rotationX={nft.rotationX}\r\n                />\r\n                {mouseOver[index] && (\r\n                  <HTML>\r\n                    <div className=\"nft_big_img\">\r\n                      {nft.width > nft.height ? (\r\n                        <img src={nft.texture} width={nft.width} />\r\n                      ) : (\r\n                        <img src={nft.texture} height={nft.height} />\r\n                      )}\r\n                    </div>\r\n                  </HTML>\r\n                )}\r\n              </Find>\r\n            ))}\r\n          </Model>\r\n\r\n          <ThirdPersonCamera\r\n            ref={cameraRef}\r\n            mouseControl\r\n            active\r\n            innerY={ySpring}\r\n            innerZ={zSpring}\r\n            innerX={xSpring}\r\n            fov={fov}\r\n            lockTargetRotation=\"dynamic-lock\"\r\n          >\r\n            <Dummy\r\n              ref={dummyRef}\r\n              physics=\"character\"\r\n              x={initX}\r\n              y={initY}\r\n              z={initZ}\r\n              width={15}\r\n              height={65}\r\n              scale={2}\r\n              lookAt={[-8000, 0, 0]}\r\n              roughnessFactor={0}\r\n              metalnessFactor={0.3}\r\n              // src={path('kazama.fbx')}\r\n              src={path(modules[initPlays.length])}\r\n              animations={{\r\n                idle: path(aniModel[modules[initPlays.length]].idle),\r\n                running: path(aniModel[modules[initPlays.length]].walking),\r\n              }}\r\n              strideMove\r\n            >\r\n              <HTMLMesh ref={nameRef} y={42} scale={0.6}>\r\n                <p style={{ fontSize: '12px' }}>{nickname}</p>\r\n              </HTMLMesh>\r\n            </Dummy>\r\n          </ThirdPersonCamera>\r\n          {/* 其他玩家 */}\r\n          {Object.keys(playes).map((key) => {\r\n            const play = playes[key]\r\n            if (play.connected && play.model) {\r\n              return (\r\n                <Dummy\r\n                  key={key}\r\n                  ref={(el) => (remoteDummyRef.current[key] = el)}\r\n                  physics=\"character\"\r\n                  x={play.position?.x}\r\n                  y={play.position?.y}\r\n                  z={play.position?.z}\r\n                  width={15}\r\n                  height={65}\r\n                  scale={2}\r\n                  roughnessFactor={0}\r\n                  metalnessFactor={0.3}\r\n                  animation={walking[key] ? 'walking' : 'idle'}\r\n                  strideMove\r\n                  intersectIds={[`cursor-${key}`]}\r\n                  onIntersect={() => handleIntersect(key)}\r\n                  src={path(play.model)}\r\n                  animations={{\r\n                    idle: path(aniModel[play.model].idle),\r\n                    walking: path(aniModel[play.model].walking),\r\n                  }}\r\n                >\r\n                  <HTML>\r\n                    {talking[key] && <VolumeUp className=\"player_talk\" />}\r\n                    <audio\r\n                      style={{\r\n                        position: 'absolute',\r\n                        left: '-2000px',\r\n                        visibility: 'hidden',\r\n                      }}\r\n                      ref={(el) => (remoteAudioRef.current[key] = el)}\r\n                      autoPlay\r\n                    ></audio>\r\n                  </HTML>\r\n                  <div>\r\n                    <HTMLMesh\r\n                      ref={(el) => (remoteNameRef.current[key] = el)}\r\n                      y={42}\r\n                      scale={0.6}\r\n                    >\r\n                      <p style={{ fontSize: '12px' }}>{play.name}</p>\r\n                    </HTMLMesh>\r\n                  </div>\r\n                </Dummy>\r\n              )\r\n            } else {\r\n              return <Cube key={play.id + 'dummy'} visible={false} />\r\n            }\r\n          })}\r\n          {/* 其他玩家移动位置 */}\r\n          {Object.keys(playes).map((key) => {\r\n            const play = playes[key]\r\n            const connected = play.connected\r\n            return (\r\n              <Cube\r\n                key={key}\r\n                id={`cursor-${key}`}\r\n                visible={false}\r\n                scale={0.1}\r\n                x={connected ? position[key].x : 0}\r\n                y={connected ? position[key].y : 0}\r\n                z={connected ? position[key].z : 0}\r\n              />\r\n            )\r\n          })}\r\n          {/* 准星 */}\r\n          <Reticle />\r\n          {/* 舞者 */}\r\n          {\r\n            dancers.map((dancer, index) =>\r\n              <Dummy\r\n                key={index}\r\n                physics=\"character\"\r\n                x={dancer.x}\r\n                y={dancer.y}\r\n                z={dancer.z}\r\n                width={15}\r\n                height={65}\r\n                scale={2}\r\n                lookAt={dancer.lookAt}\r\n                roughnessFactor={0}\r\n                metalnessFactor={0.3}\r\n                src={path(dancer.dancer)}\r\n                animations={{\r\n                  idle: path(dancer.dance),\r\n                }}\r\n                strideMove\r\n              />\r\n            )\r\n          }\r\n        </World>\r\n      )}\r\n    </>\r\n  )\r\n}","import React from 'react'\r\n\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  styled,\r\n  Button,\r\n} from '@mui/material'\r\n\r\nimport { useAppDispatch, useAppSelector } from '@store/index'\r\nimport { initWebRTCState } from '@store/modules/webRTC'\r\nimport { initRoom } from '@store/modules/room'\r\n\r\nimport langHook from '@hooks/localHook'\r\nimport { metaLang } from '@langs/index'\r\n\r\nexport interface MwnuProps {\r\n  open: boolean\r\n  setOpen: (value: boolean) => void\r\n}\r\n\r\nconst BootstrapDialog = styled(Dialog)(() => ({\r\n  '& .MuiPaper-root': {\r\n    backgroundColor: '#000',\r\n  },\r\n}))\r\n\r\nexport default ({ open, setOpen }: MwnuProps): JSX.Element => {\r\n  const { roomOpen } = useAppSelector((store) => store.dialog)\r\n  const { room } = useAppSelector((store) => store.room)\r\n  const { socket } = useAppSelector((store) => store.user)\r\n  const dispatch = useAppDispatch()\r\n\r\n  const loacl = langHook()\r\n\r\n  const handleClose = () => {\r\n    if (roomOpen) {\r\n      socket?.emit('quit', { room: room?.id })\r\n      dispatch(initRoom())\r\n    } else {\r\n      dispatch(initWebRTCState())\r\n    }\r\n\r\n    setOpen(false)\r\n  }\r\n\r\n  return (\r\n    <BootstrapDialog onClose={() => setOpen(false)} open={open}>\r\n      <DialogTitle>{loacl(metaLang.menu)}</DialogTitle>\r\n      <DialogContent>\r\n        <Button\r\n          variant=\"outlined\"\r\n          size=\"large\"\r\n          sx={{ width: 200 }}\r\n          onClick={handleClose}\r\n        >\r\n          {loacl(metaLang.close)}\r\n        </Button>\r\n      </DialogContent>\r\n    </BootstrapDialog>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport { Dialog, DialogContent, IconButton, Slide, styled } from '@mui/material'\r\n\r\nimport { useAppSelector } from '@store/index'\r\n\r\nimport Lingo3D from './Lingo3D'\r\nimport Menu from './Menu'\r\n\r\nimport type { TransitionProps } from '@mui/material/transitions'\r\n\r\nimport { DensityMedium } from '@mui/icons-material'\r\n\r\nconst Transition = React.forwardRef(function Transition(\r\n  props: TransitionProps & {\r\n    children: React.ReactElement\r\n  },\r\n  ref: React.Ref<unknown>\r\n) {\r\n  return <Slide direction=\"down\" ref={ref} {...props} />\r\n})\r\n\r\nconst BootstrapDialog = styled(Dialog)(() => ({\r\n  '& .MuiPaper-root': {\r\n    backgroundColor: '#000'\r\n  },\r\n}))\r\n\r\nexport default (): JSX.Element => {\r\n  const { metaOpen } = useAppSelector((store) => store.dialog)\r\n\r\n  const [open, setOpen] = useState(false)\r\n\r\n  return (\r\n    <>\r\n      <BootstrapDialog fullScreen open={metaOpen} TransitionComponent={Transition}>\r\n        <DialogContent sx={{ position: 'relative' }}>\r\n          <Lingo3D />\r\n          <IconButton\r\n            sx={{\r\n              position: 'absolute',\r\n              right: 16,\r\n              top: 16,\r\n            }}\r\n            onClick={() => setOpen(true)}\r\n          >\r\n            <DensityMedium sx={{ color: '#fff' }} />\r\n          </IconButton>\r\n        </DialogContent>\r\n      </BootstrapDialog>\r\n      <Menu open={open} setOpen={setOpen} />\r\n    </>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from '@mui/material'\r\n\r\nimport { NFTS } from '@constants/exhibition'\r\n\r\nimport { userApi } from '@api/index'\r\n\r\ninterface CreateRoomProps {\r\n  open: boolean\r\n  setOpen: (value: boolean) => void\r\n}\r\n\r\nexport default ({ open, setOpen }: CreateRoomProps): JSX.Element => {\r\n  const [name, setName] = useState('')\r\n  const [nfts, setNfts] = useState<string[]>(new Array(NFTS.length).fill(''))\r\n\r\n  const changeNft = (index: number, value: string) => {\r\n    const _nfts = [...nfts]\r\n    _nfts.splice(index, 1, value)\r\n    setNfts(_nfts)\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setOpen(false)\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    if (!name) return\r\n    const res = await userApi.create_room(name, nfts)\r\n    if (res) handleClose()\r\n  }\r\n\r\n  return (\r\n    <Dialog fullWidth open={open} onClose={handleClose}>\r\n      <DialogTitle>Create Room</DialogTitle>\r\n      <DialogContent>\r\n        <TextField\r\n          margin=\"dense\"\r\n          id=\"name\"\r\n          label=\"Room Name\"\r\n          fullWidth\r\n          variant=\"standard\"\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        {nfts.map((_, index) => (\r\n          <TextField\r\n            key={index}\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label={`#${index + 1} nft`}\r\n            fullWidth\r\n            variant=\"standard\"\r\n            onChange={(e) => changeNft(index, e.target.value)}\r\n          />\r\n        ))}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <Button onClick={handleSubmit}>Create</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControl,\r\n  FormGroup,\r\n  FormControlLabel,\r\n  Checkbox,\r\n} from '@mui/material'\r\n\r\nimport { useAppSelector } from '@store/index'\r\n\r\nimport { nftApi } from '@api/index'\r\n\r\ninterface CreateRoomProps {\r\n  open: boolean\r\n  setOpen: (value: boolean) => void\r\n}\r\n\r\nexport default ({ open, setOpen }: CreateRoomProps): JSX.Element => {\r\n  const { friends } = useAppSelector((store) => store.friends)\r\n  const [nfts, setNfts] = useState<string[]>([])\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const _nfts = [...nfts]\r\n    const name = event.target.name\r\n    if (event.target.checked) {\r\n      _nfts.push(name)\r\n    } else {\r\n      const index = _nfts.findIndex((nft) => nft === name)\r\n      _nfts.splice(index, 1)\r\n    }\r\n    setNfts(_nfts)\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setOpen(false)\r\n  }\r\n\r\n  const handleSend = async () => {\r\n    const res = await nftApi.nft_mint(nfts)\r\n    if (res) handleClose()\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose}>\r\n      <DialogTitle>Send NFT</DialogTitle>\r\n      <DialogContent>\r\n        <FormControl sx={{ m: 3 }} component=\"fieldset\" variant=\"standard\">\r\n          <FormGroup>\r\n            {friends.map((friend) => (\r\n              <FormControlLabel\r\n                key={friend.account_id}\r\n                control={\r\n                  <Checkbox\r\n                    // checked={gilad}\r\n                    onChange={handleChange}\r\n                    name={friend.account_id}\r\n                  />\r\n                }\r\n                label={friend.name}\r\n              />\r\n            ))}\r\n          </FormGroup>\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n        <Button onClick={handleSend}>Send</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport {\r\n  AppBar,\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  Dialog,\r\n  DialogContent,\r\n  Fab,\r\n  IconButton,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from '@mui/material'\r\n\r\nimport { ThemeProvider, createTheme } from '@mui/material/styles'\r\n\r\nimport { userApi } from '@api/index'\r\n\r\nimport { useAppSelector, useAppDispatch } from '@store/index'\r\nimport { setRoom, setMeta } from '@store/modules/dialog'\r\nimport { changeRoom, setInitPlays } from '@store/modules/room'\r\n\r\nimport CreateRoom from './CreateRoom'\r\nimport SendNft from './SendNft'\r\n\r\nimport type { TransitionProps } from '@mui/material/transitions'\r\nimport type { Room } from '@store/modules/room'\r\n\r\nimport { Add, Close } from '@mui/icons-material'\r\n\r\nconst Transition = React.forwardRef(function Transition(\r\n  props: TransitionProps & {\r\n    children: React.ReactElement\r\n  },\r\n  ref: React.Ref<unknown>\r\n) {\r\n  return <Slide direction=\"left\" ref={ref} {...props} />\r\n})\r\n\r\nexport default (): JSX.Element => {\r\n  const theme = createTheme({\r\n    palette: {\r\n      primary: {\r\n        main: '#000000',\r\n      },\r\n    },\r\n  })\r\n\r\n  const { roomOpen } = useAppSelector((store) => store.dialog)\r\n  const { accountAddress } = useAppSelector((store) => store.wallet)\r\n  const { room } = useAppSelector((store) => store.room)\r\n  const { socket, nickname } = useAppSelector((store) => store.user)\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [open, setOpen] = useState(false)\r\n  const [openNft, setOpenNft] = useState(false)\r\n  const [roomList, setRoomList] = useState<Room[]>([])\r\n\r\n  const getList = async () => {\r\n    const _list = await userApi.get_room_list()\r\n    setRoomList(_list.map((item) => item[1]))\r\n  }\r\n\r\n  const handleRemoveRoom = async (id: number) => {\r\n    const res = await userApi.destory_room(id)\r\n    if (res) getList()\r\n  }\r\n\r\n  const handleJoin = async (room: Room) => {\r\n    socket?.emit('join', {\r\n      room: room.id,\r\n      play: {\r\n        name: nickname,\r\n        id: accountAddress\r\n      }\r\n    })\r\n    socket?.on('join', ({plays}) => {\r\n      if (!plays) return \r\n      dispatch(changeRoom(room))\r\n      dispatch(setInitPlays(plays))\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!open && roomOpen) getList()\r\n  }, [open])\r\n\r\n  useEffect(() => {\r\n    if (roomOpen) getList()\r\n  }, [roomOpen])\r\n\r\n  useEffect(() => {\r\n    if (room) dispatch(setMeta(true))\r\n  }, [room])\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Dialog fullScreen open={roomOpen} TransitionComponent={Transition}>\r\n        <AppBar\r\n          sx={{ display: 'flex', alignItems: 'end', position: 'relative' }}\r\n        >\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              onClick={() => dispatch(setRoom(false))}\r\n              aria-label=\"close\"\r\n            >\r\n              <Close />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent\r\n          sx={{\r\n            position: 'relative',\r\n            backgroundColor: '#f0f2f5',\r\n            display: 'flex',\r\n            flexWrap: 'wrap',\r\n          }}\r\n        >\r\n          {roomList.map((room) => (\r\n            <Card key={room.id} sx={{ width: 300, height: 120, ml: 5, mb: 5 }}>\r\n              <CardContent>\r\n                <Typography variant=\"h5\" component=\"div\">\r\n                  {room.name}\r\n                </Typography>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button size=\"small\" onClick={() => handleJoin(room)}>\r\n                  Join in\r\n                </Button>\r\n                {accountAddress === room.owner && (\r\n                  <>\r\n                    <Button\r\n                      color=\"error\"\r\n                      size=\"small\"\r\n                      onClick={() => handleRemoveRoom(room.id)}\r\n                    >\r\n                      Remove Room\r\n                    </Button>\r\n                    <Button\r\n                      size=\"small\"\r\n                      onClick={() => setOpenNft(true)}\r\n                    >\r\n                      Send NFT\r\n                    </Button>\r\n                  </>\r\n                )}\r\n              </CardActions>\r\n            </Card>\r\n          ))}\r\n          <Fab\r\n            sx={{\r\n              position: 'absolute',\r\n              bottom: 32,\r\n              right: 32,\r\n            }}\r\n            onClick={() => setOpen(true)}\r\n          >\r\n            <Add />\r\n          </Fab>\r\n        </DialogContent>\r\n      </Dialog>\r\n      <CreateRoom open={open} setOpen={setOpen} />\r\n      <SendNft open={openNft} setOpen={setOpenNft} />\r\n    </ThemeProvider>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport {\r\n  AppBar,\r\n  Card,\r\n  CardContent,\r\n  Dialog,\r\n  DialogContent,\r\n  IconButton,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from '@mui/material'\r\n\r\nimport { ThemeProvider, createTheme } from '@mui/material/styles'\r\n\r\nimport { nftApi } from '@api/index'\r\n\r\nimport { useAppSelector, useAppDispatch } from '@store/index'\r\nimport { setNft } from '@store/modules/dialog'\r\n\r\nimport type { TransitionProps } from '@mui/material/transitions'\r\nimport type { Token } from '@api/nft'\r\n\r\nimport { Close } from '@mui/icons-material'\r\n\r\nconst Transition = React.forwardRef(function Transition(\r\n  props: TransitionProps & {\r\n    children: React.ReactElement\r\n  },\r\n  ref: React.Ref<unknown>\r\n) {\r\n  return <Slide direction=\"left\" ref={ref} {...props} />\r\n})\r\n\r\nexport default (): JSX.Element => {\r\n  const theme = createTheme({\r\n    palette: {\r\n      primary: {\r\n        main: '#000000',\r\n      },\r\n    },\r\n  })\r\n\r\n  const { nftOpen } = useAppSelector((store) => store.dialog)\r\n  const { accountAddress } = useAppSelector((store) => store.wallet)\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [nftList, setNftList] = useState<Token[]>([])\r\n\r\n  const getSelfNft = async () => {\r\n    const _nftList = await nftApi.nft_tokens_owner(accountAddress)\r\n    setNftList(_nftList)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (nftOpen) getSelfNft()\r\n  }, [nftOpen])\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Dialog fullScreen open={nftOpen} TransitionComponent={Transition}>\r\n        <AppBar\r\n          sx={{ display: 'flex', alignItems: 'end', position: 'relative' }}\r\n        >\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              onClick={() => dispatch(setNft(false))}\r\n              aria-label=\"close\"\r\n            >\r\n              <Close />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent\r\n          sx={{\r\n            position: 'relative',\r\n            backgroundColor: '#f0f2f5',\r\n            display: 'flex',\r\n            flexWrap: 'wrap',\r\n          }}\r\n        >\r\n          {nftList.map((nft) => (\r\n            <Card key={nft.token_id} sx={{ height: 260, ml: 5, mb: 5 }}>\r\n              <CardContent>\r\n                <Typography component=\"p\">{nft.metadata.title}</Typography>\r\n                <img\r\n                  src={nft.metadata.media}\r\n                  style={{ width: '217px', height: '200px', marginTop: '8px' }}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </ThemeProvider>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport Stream from './Stream'\r\nimport Wallte from './Wallte'\r\nimport Register from './Register'\r\nimport Meta from './Meta'\r\nimport Room from './Room'\r\nimport Nft from './Nft'\r\n\r\nexport default (): JSX.Element => {\r\n  return (\r\n    <>\r\n      <Stream />\r\n      <Wallte />\r\n      <Register />\r\n      <Register />\r\n      <Meta />\r\n      <Room />\r\n      <Nft />\r\n    </>\r\n  )\r\n}\r\n","import { create, IPFS } from 'ipfs-core'\r\n\r\nlet _ipfs: IPFS | undefined = undefined\r\n\r\nconst createIpfs = async () => {\r\n  if (_ipfs) return _ipfs\r\n  return (_ipfs = await create())\r\n}\r\n\r\nexport const add = async (file: File): Promise<string> => {\r\n  const ipfs = await createIpfs()\r\n\r\n  try {\r\n    const added = await ipfs.add(file)\r\n    return added.cid.toString()\r\n  } catch (error) {\r\n    throw Error(error as string)\r\n  }\r\n}\r\n\r\nexport const cat = async <T>(cids: string[]): Promise<T[]> => {\r\n  const ipfs = await createIpfs()\r\n\r\n  const examJson: Promise<T>[] = []\r\n\r\n  cids.forEach((cid) => {\r\n    examJson.push(\r\n      new Promise(async (resolve) => {\r\n        const cated = await ipfs.cat(cid)\r\n        for await (const current of cated) {\r\n          resolve(JSON.parse(utf8ArrayToStr(current)))\r\n        }\r\n      })\r\n    )\r\n  })\r\n\r\n  return await Promise.all(examJson)\r\n}\r\n\r\nexport const path = (hash: string): string => `https://ipfs.io/ipfs/${hash}`\r\n\r\nconst utf8ArrayToStr = (array: Uint8Array): string => {\r\n  const len = array.length\r\n  let out, i, c, char2, char3\r\n\r\n  out = ''\r\n\r\n  i = 0\r\n  while (i < len) {\r\n    c = array[i++]\r\n    switch (c >> 4) {\r\n      case 0:\r\n      case 1:\r\n      case 2:\r\n      case 3:\r\n      case 4:\r\n      case 5:\r\n      case 6:\r\n      case 7:\r\n        out += String.fromCharCode(c)\r\n        break\r\n      case 12:\r\n      case 13:\r\n        char2 = array[i++]\r\n        out += String.fromCharCode(((c & 0x1f) << 6) | (char2 & 0x3f))\r\n        break\r\n      case 14:\r\n        char2 = array[i++]\r\n        char3 = array[i++]\r\n        out += String.fromCharCode(\r\n          ((c & 0x0f) << 12) | ((char2 & 0x3f) << 6) | ((char3 & 0x3f) << 0)\r\n        )\r\n        break\r\n    }\r\n  }\r\n\r\n  return out\r\n}\r\n"],"names":["styled","TextField","theme","color","borderColor","palette","primary","main","Transition","React","props","ref","Slide","direction","streamOpen","useAppSelector","store","dialog","webRTC","friend","pc","isOffer","isAnswer","stream","isVideo","localStream","isMeta","dataChannel","candidate","dispatch","useAppDispatch","audioRef","useRef","videoRef","videoLocalRef","isUse","connected","useEffect","current","srcObject","setMeta","connectionState","Dialog","open","TransitionComponent","keepMounted","DialogContent","Box","sx","width","height","display","flexDirection","justifyContent","alignItems","overflow","position","className","autoPlay","muted","style","marginBottom","src","path","image","Typography","name","createAudio","Skeleton","variant","mb","fontSize","CircularProgress","mt","DialogActions","pl","pr","IconButton","size","onClick","creatAnswer","Call","initWebRTCState","CallEnd","BootstrapDialog","paddingLeft","spacing","paddingRight","paddingTop","paddingBottom","createTheme","typography","body1","enqueueSnackbar","useSnackbar","state","wallet","dialogOpen","connecting","local","langHook","handleClose","setDialogOpen","handleListItemClick","wallte","text","setConnecting","getNearWallet","connectWallet","payload","accountAddress","walletLang","window","onClose","DialogTitle","pb","right","top","grey","Close","List","pt","icon","map","index","ListItem","disabled","button","key","border","borderRadius","ListItemAvatar","Avatar","ThemeProvider","ListItemText","flexGrow","forwardRef","backgroundColor","user","useState","headerImg","setHeaderImg","nickname","setNickname","helperText","setHelperText","loading","setLoading","handleHeaderImg","event","files","target","file","add","hash","handleSubmit","registerLang","userApi","setUser","kind","ExecutionError","autoHideDuration","fullScreen","AppBar","Toolbar","edge","left","opacity","transition","component","hidden","accept","type","onChange","PhotoCamera","Button","endIcon","ContentCopy","navigator","clipboard","writeText","truncateMiddle","error","label","value","LoadingButton","NFTS","texture","z","rotationX","STATIC","initY","fbxs","aniModel","idle","walking","dancers","dancer","dance","x","y","lookAt","timer","modules","progress","usePreload","socket","room","playes","initPlays","setPosition","setWalking","talking","setTalking","Array","length","fill","mouseOver","setMouseOver","mouseOverState","some","item","camX","camZ","xSpring","useSpring","to","bounce","ySpring","zSpring","changeMouseOver","_mouseOver","splice","windowSize","useWindowSize","fov","dummyRef","cameraRef","nameRef","remoteDummyRef","remoteNameRef","remoteAudioRef","message","JSON","parse","data","_positions","_walking","model","setModel","forEach","nft","url","getImgWH","play","media","video","audio","toId","id","offer","_play","identity","audioContext","AudioContext","undefined","addPlay","onicecandidate","emit","localDescription","keyboard","_","keys","dummy","has","strideForward","strideRight","stringify","Object","console","log","send","ondatachannel","channel","setAnswerChannel","onmessage","addIceCandidate","RTCIceCandidate","_talking","mediaStreamSource","createMediaStreamSource","scriptProcessor","createScriptProcessor","connect","destination","onaudioprocess","e","buffer","inputBuffer","getChannelData","maxVal","Math","max","apply","ceil","useLoop","moveForward","values","walk","_playes","setConnected","playe","remoteName","floor","defaultLight","skybox","bloom","bloomRadius","bloomThreshold","outlineColor","outlineHiddenColor","outlinePulse","point","metalnessFactor","roughnessFactor","scale","physics","outline","onMouseOver","onMouseOut","rotationZ","mouseControl","active","innerY","innerZ","innerX","lockTargetRotation","animations","running","strideMove","el","animation","intersectIds","onIntersect","setTimeout","clearTimeout","handleIntersect","VolumeUp","visibility","visible","setOpen","roomOpen","loacl","metaLang","initRoom","metaOpen","Lingo3D","DensityMedium","Menu","setName","nfts","setNfts","fullWidth","margin","_nfts","changeNft","friends","handleChange","checked","push","findIndex","handleSend","nftApi","FormControl","m","FormGroup","FormControlLabel","account_id","control","Checkbox","openNft","setOpenNft","roomList","setRoomList","getList","_list","handleRemoveRoom","handleJoin","on","plays","changeRoom","setInitPlays","setRoom","flexWrap","Card","ml","CardContent","CardActions","owner","Fab","bottom","Add","CreateRoom","SendNft","nftOpen","nftList","setNftList","getSelfNft","_nftList","setNft","token_id","metadata","title","marginTop","Stream","Wallte","Register","Meta","Room","Nft","_ipfs","createIpfs","create","ipfs","added","cid","toString","Error"],"sourceRoot":""}