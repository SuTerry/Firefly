/*! For license information please see vendors-node_modules_mui_icons-material_esm_Close_js-node_modules_mui_icons-material_esm_Cont-bec458.46280c4e.js.LICENSE.txt */
(self.webpackChunksourcedao_pc_dapp=self.webpackChunksourcedao_pc_dapp||[]).push([["vendors-node_modules_mui_icons-material_esm_Close_js-node_modules_mui_icons-material_esm_Cont-bec458"],{12200:(e,t,n)=>{"use strict";var r=n(82784);const s="undefined"!=typeof BigUint64Array,i=Symbol(),a=1024;function o(e,t){const n=new Uint32Array(e),r=new Uint16Array(e);var s=n[t+-4>>>2]>>>1,i=t>>>1;if(s<=a)return String.fromCharCode.apply(String,r.subarray(i,i+s));const o=[];do{const e=r[i+a-1],t=e>=55296&&e<56320?1023:a;o.push(String.fromCharCode.apply(String,r.subarray(i,i+=t))),s-=t}while(s>a);return o.join("")+String.fromCharCode.apply(String,r.subarray(i,i+s))}function c(e){const t={};function n(e,t){return e?o(e.buffer,t):"<yet unknown>"}const s=e.env=e.env||{};return s.abort=s.abort||function(e,r,i,a){const o=t.memory||s.memory;throw Error("abort: "+n(o,e)+" at "+n(o,r)+":"+i+":"+a)},s.trace=s.trace||function(e,i){const a=t.memory||s.memory;r.log("trace: "+n(a,e)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function d(e,t){const n=t.exports,r=n.memory,i=n.table,a=n.__alloc,c=n.__retain,d=n.__rtti_base||-1;function l(e){const t=new Uint32Array(r.buffer);if((e>>>=0)>=t[d>>>2])throw Error("invalid id: "+e);return t[(d+4>>>2)+2*e]}function u(e){const t=new Uint32Array(r.buffer);if((e>>>=0)>=t[d>>>2])throw Error("invalid id: "+e);return t[(d+4>>>2)+2*e+1]}function h(e){return 31-Math.clz32(e>>>5&31)}function f(e,t,n){const s=r.buffer;if(n)switch(e){case 2:return new Float32Array(s);case 3:return new Float64Array(s)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(s);case 1:return new(t?Int16Array:Uint16Array)(s);case 2:return new(t?Int32Array:Uint32Array)(s);case 3:return new(t?BigInt64Array:BigUint64Array)(s)}throw Error("unsupported align: "+e)}function m(e){const t=new Uint32Array(r.buffer),n=t[e+-8>>>2],s=l(n);if(!(1&s))throw Error("not an array: "+n);const i=h(s);var a=t[e+4>>>2];const o=2&s?t[e+12>>>2]:t[a+-4>>>2]>>>i;return f(i,1024&s,2048&s).subarray(a>>>=i,a+o)}function _(e,t,n){return new e(y(e,t,n))}function y(e,t,n){const s=r.buffer,i=new Uint32Array(s),a=i[n+4>>>2];return new e(s,a,i[a+-4>>>2]>>>t)}return e.__allocString=function(e){const t=e.length,n=a(t<<1,1),s=new Uint16Array(r.buffer);for(var i=0,o=n>>>1;i<t;++i)s[o+i]=e.charCodeAt(i);return n},e.__getString=function(e){const t=r.buffer;if(1!==new Uint32Array(t)[e+-8>>>2])throw Error("not a string: "+e);return o(t,e)},e.__allocArray=function(e,t){const n=l(e);if(!(3&n))throw Error("not an array: "+e+" @ "+n);const s=h(n),i=t.length,o=a(i<<s,0),d=a(2&n?16:12,e),u=new Uint32Array(r.buffer);u[d+0>>>2]=c(o),u[d+4>>>2]=o,u[d+8>>>2]=i<<s,2&n&&(u[d+12>>>2]=i);const p=f(s,1024&n,2048&n);if(8192&n)for(let e=0;e<i;++e)p[(o>>>s)+e]=c(t[e]);else p.set(t,o>>>s);return d},e.__getArrayView=m,e.__getArray=function(e){const t=m(e),n=t.length,r=new Array(n);for(let e=0;e<n;e++)r[e]=t[e];return r},e.__getArrayBuffer=function(e){const t=r.buffer,n=new Uint32Array(t)[e+-4>>>2];return t.slice(e,e+n)},e.__getInt8Array=_.bind(null,Int8Array,0),e.__getInt8ArrayView=y.bind(null,Int8Array,0),e.__getUint8Array=_.bind(null,Uint8Array,0),e.__getUint8ArrayView=y.bind(null,Uint8Array,0),e.__getUint8ClampedArray=_.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=y.bind(null,Uint8ClampedArray,0),e.__getInt16Array=_.bind(null,Int16Array,1),e.__getInt16ArrayView=y.bind(null,Int16Array,1),e.__getUint16Array=_.bind(null,Uint16Array,1),e.__getUint16ArrayView=y.bind(null,Uint16Array,1),e.__getInt32Array=_.bind(null,Int32Array,2),e.__getInt32ArrayView=y.bind(null,Int32Array,2),e.__getUint32Array=_.bind(null,Uint32Array,2),e.__getUint32ArrayView=y.bind(null,Uint32Array,2),s&&(e.__getInt64Array=_.bind(null,BigInt64Array,3),e.__getInt64ArrayView=y.bind(null,BigInt64Array,3),e.__getUint64Array=_.bind(null,BigUint64Array,3),e.__getUint64ArrayView=y.bind(null,BigUint64Array,3)),e.__getFloat32Array=_.bind(null,Float32Array,2),e.__getFloat32ArrayView=y.bind(null,Float32Array,2),e.__getFloat64Array=_.bind(null,Float64Array,3),e.__getFloat64ArrayView=y.bind(null,Float64Array,3),e.__instanceof=function(e,t){const n=new Uint32Array(r.buffer);var s=n[e+-8>>>2];if(s<=n[d>>>2])do{if(s==t)return!0}while(s=u(s));return!1},e.memory=e.memory||r,e.table=e.table||i,p(n,e)}function l(e){return"undefined"!=typeof Response&&e instanceof Response}async function u(e,t){return l(e=await e)?h(e,t):d(c(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}async function h(e,t){return WebAssembly.instantiateStreaming?d(c(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance):u(l(e=await e)?e.arrayBuffer():e,t)}function p(e,t){var n=t?Object.create(t):{},r=e.__argumentsLength?function(t){e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||function(){};for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const s=e[t];let a=t.split("."),o=n;for(;a.length>1;){let e=a.shift();Object.prototype.hasOwnProperty.call(o,e)||(o[e]={}),o=o[e]}let c=a[0],d=c.indexOf("#");if(d>=0){let n=c.substring(0,d),a=o[n];if(void 0===a||!a.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function(){return this[i]}},e.wrap=function(t){return Object.create(e.prototype,{[i]:{value:t,writable:!1}})},a&&Object.getOwnPropertyNames(a).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t)))),o[n]=e}if(c=c.substring(d+1),o=o[n].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(o,c=c.substring(4))){let n=e[t.replace("set:","get:")],r=e[t.replace("get:","set:")];Object.defineProperty(o,c,{get:function(){return n(this[i])},set:function(e){r(this[i],e)},enumerable:!0})}}else"constructor"===c?(o[c]=(...e)=>(r(e.length),s(...e))).original=s:(o[c]=function(...e){return r(e.length),s(this[i],...e)}).original=s}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(o,c=c.substring(4))||Object.defineProperty(o,c,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:!0}):"function"==typeof s&&s!==r?(o[c]=(...e)=>(r(e.length),s(...e))).original=s:o[c]=s}return n}t.instantiate=u,t.instantiateSync=function(e,t){return d(c(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))},t.instantiateStreaming=h,t.demangle=p},43161:(e,t,n)=>{"use strict";e.exports=n(7758)},7758:(e,t,n)=>{"use strict";var r=t;function s(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(14640),r.BufferWriter=n(39429),r.Reader=n(69375),r.BufferReader=n(12626),r.util=n(42427),r.rpc=n(68029),r.roots=n(88346),r.configure=s,s()},69375:(e,t,n)=>{"use strict";e.exports=c;var r,s=n(42427),i=s.LongBits,a=s.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var d,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return s.Buffer?function(e){return(c.create=function(e){return s.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,c.prototype.uint32=(d=4294967295,function(){if(d=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return d;if(d=(d|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return d;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return d}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=s.Long?"toLong":"toNumber";s.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},12626:(e,t,n)=>{"use strict";e.exports=i;var r=n(69375);(i.prototype=Object.create(r.prototype)).constructor=i;var s=n(42427);function i(e){r.call(this,e)}i._configure=function(){s.Buffer&&(i.prototype._slice=s.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},88346:e=>{"use strict";e.exports={}},68029:(e,t,n)=>{"use strict";t.Service=n(6830)},6830:(e,t,n)=>{"use strict";e.exports=s;var r=n(42427);function s(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(s.prototype=Object.create(r.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,n,s,i,a){if(!i)throw TypeError("request must be specified");var o=this;if(!a)return r.asPromise(e,o,t,n,s,i);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return o.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof s))try{n=s[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",n,t),a(null,n)}o.end(!0)}))}catch(e){return o.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},25212:(e,t,n)=>{"use strict";e.exports=s;var r=n(42427);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=s.zero=new s(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new s(n,r)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(r.isString(e)){if(!r.Long)return s.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):i},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;s.fromHash=function(e){return e===a?i:new s((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},42427:function(e,t,n){"use strict";var r=t;function s(e,t,n){for(var r=Object.keys(t),s=0;s<r.length;++s)void 0!==e[r[s]]&&n||(e[r[s]]=t[r[s]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&s(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(12835),r.base64=n(82968),r.EventEmitter=n(25560),r.float=n(14278),r.inquire=n(33149),r.utf8=n(48301),r.pool=n(66765),r.LongBits=n(25212),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=s,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},14640:(e,t,n)=>{"use strict";e.exports=u;var r,s=n(42427),i=s.LongBits,a=s.base64,o=s.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function d(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(d,0,0),this.tail=this.head,this.states=null}var h=function(){return s.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function _(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=h(),u.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(u.alloc=s.pool(u.alloc,s.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(m,10,i.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=i.from(e);return this._push(m,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(m,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=i.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var y=s.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var n=u.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(d,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(d,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=h(),r._configure()}},39429:(e,t,n)=>{"use strict";e.exports=i;var r=n(14640);(i.prototype=Object.create(r.prototype)).constructor=i;var s=n(42427);function i(){r.call(this)}function a(e,t,n){e.length<40?s.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=s._Buffer_allocUnsafe,i.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},i._configure()},66919:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5622),s=n(17774);const i=(0,r.Z)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},68506:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5622),s=n(17774);const i=(0,r.Z)((0,s.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy")},37285:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5622),s=n(17774);const i=(0,r.Z)([(0,s.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,s.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera")},74267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(93244),s=n(53669),i=n(44441),a=n(3055),o=n(65049),c=n(18157),d=n(40113),l=n(76120),u=n(41764),h=n(9795),p=n(418),f=n(48908),m=n(96420);function _(e){return(0,m.Z)("MuiCircularProgress",e)}(0,f.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var y=n(17774);const g=["className","color","disableShrink","size","style","thickness","value","variant"];let w,b,v,k,M=e=>e;const E=(0,p.F4)(w||(w=M`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),L=(0,p.F4)(b||(b=M`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),S=(0,d.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,a.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>(0,s.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,p.iv)(v||(v=M`
      animation: ${0} 1.4s linear infinite;
    `),E))),D=(0,d.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),T=(0,d.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,a.Z)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,s.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,p.iv)(k||(k=M`
      animation: ${0} 1.4s ease-in-out infinite;
    `),L))),R=i.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:d=!1,size:u=40,style:p,thickness:f=3.6,value:m=0,variant:w="indeterminate"}=n,b=(0,r.Z)(n,g),v=(0,s.Z)({},n,{color:o,disableShrink:d,size:u,thickness:f,value:m,variant:w}),k=(e=>{const{classes:t,variant:n,color:r,disableShrink:s}=e,i={root:["root",n,`color${(0,a.Z)(r)}`],svg:["svg"],circle:["circle",`circle${(0,a.Z)(n)}`,s&&"circleDisableShrink"]};return(0,c.Z)(i,_,t)})(v),M={},E={},L={};if("determinate"===w){const e=2*Math.PI*((44-f)/2);M.strokeDasharray=e.toFixed(3),L["aria-valuenow"]=Math.round(m),M.strokeDashoffset=`${((100-m)/100*e).toFixed(3)}px`,E.transform="rotate(-90deg)"}return(0,y.jsx)(S,(0,s.Z)({className:(0,h.Z)(k.root,i),style:(0,s.Z)({width:u,height:u},E,p),ownerState:v,ref:t,role:"progressbar"},L,b,{children:(0,y.jsx)(D,{className:k.svg,ownerState:v,viewBox:"22 22 44 44",children:(0,y.jsx)(T,{className:k.circle,style:M,ownerState:v,cx:44,cy:44,r:(44-f)/2,fill:"none",strokeWidth:f})})}))}));function P(e){return(0,m.Z)("MuiLoadingButton",e)}const I=(0,f.Z)("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),A=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],Y=(0,d.ZP)(u.Z,{shouldForwardProp:e=>(e=>"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e&&"classes"!==e)(e)||"classes"===e,name:"MuiLoadingButton",slot:"Root",overridesResolver:(e,t)=>[t.root,t.startIconLoadingStart&&{[`& .${I.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${I.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})((({ownerState:e,theme:t})=>(0,s.Z)({[`& .${I.startIconLoadingStart}, & .${I.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},"center"===e.loadingPosition&&{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${I.loading}`]:{color:"transparent"}},"start"===e.loadingPosition&&e.fullWidth&&{[`& .${I.startIconLoadingStart}, & .${I.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginRight:-8}},"end"===e.loadingPosition&&e.fullWidth&&{[`& .${I.startIconLoadingStart}, & .${I.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginLeft:-8}}))),O=(0,d.ZP)("div",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.loadingIndicator,t[`loadingIndicator${(0,a.Z)(n.loadingPosition)}`]]}})((({theme:e,ownerState:t})=>(0,s.Z)({position:"absolute",visibility:"visible",display:"flex"},"start"===t.loadingPosition&&("outlined"===t.variant||"contained"===t.variant)&&{left:"small"===t.size?10:14},"start"===t.loadingPosition&&"text"===t.variant&&{left:6},"center"===t.loadingPosition&&{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled},"end"===t.loadingPosition&&("outlined"===t.variant||"contained"===t.variant)&&{right:"small"===t.size?10:14},"end"===t.loadingPosition&&"text"===t.variant&&{right:6},"start"===t.loadingPosition&&t.fullWidth&&{position:"relative",left:-10},"end"===t.loadingPosition&&t.fullWidth&&{position:"relative",right:-10}))),N=i.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiLoadingButton"}),{children:i,disabled:d=!1,id:u,loading:h=!1,loadingIndicator:p,loadingPosition:f="center",variant:m="text"}=n,_=(0,r.Z)(n,A),g=(0,o.Z)(u),w=null!=p?p:(0,y.jsx)(R,{"aria-labelledby":g,color:"inherit",size:16}),b=(0,s.Z)({},n,{disabled:d,loading:h,loadingIndicator:w,loadingPosition:f,variant:m}),v=(e=>{const{loading:t,loadingPosition:n,classes:r}=e,i={root:["root",t&&"loading"],startIcon:[t&&`startIconLoading${(0,a.Z)(n)}`],endIcon:[t&&`endIconLoading${(0,a.Z)(n)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${(0,a.Z)(n)}`]},o=(0,c.Z)(i,P,r);return(0,s.Z)({},r,o)})(b),k=h?(0,y.jsx)(O,{className:v.loadingIndicator,ownerState:b,children:w}):null;return(0,y.jsxs)(Y,(0,s.Z)({disabled:d||h,id:g,ref:t},_,{variant:m,classes:v,ownerState:b,children:["end"===b.loadingPosition?i:k,"end"===b.loadingPosition?k:i]}))}))},35897:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(93244),s=n(53669),i=n(44441),a=n(9795),o=n(18157),c=n(13547),d=n(3055),l=n(88153),u=n(94744),h=n(82816),p=n(76120),f=n(40113),m=n(48908),_=n(96420);function y(e){return(0,_.Z)("MuiDialog",e)}const g=(0,m.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var w=n(81036),b=n(33198),v=n(17091),k=n(17774);const M=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],E=(0,f.ZP)(b.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),L=(0,f.ZP)(l.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),S=(0,f.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,d.Z)(n.scroll)}`]]}})((({ownerState:e})=>(0,s.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),D=(0,f.ZP)(h.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,d.Z)(n.scroll)}`],t[`paperWidth${(0,d.Z)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((({theme:e,ownerState:t})=>(0,s.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${g.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${g.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${g.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}))),T=i.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiDialog"}),l=(0,v.Z)(),f={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{"aria-describedby":m,"aria-labelledby":_,BackdropComponent:g,BackdropProps:b,children:T,className:R,disableEscapeKeyDown:P=!1,fullScreen:I=!1,fullWidth:A=!1,maxWidth:Y="sm",onBackdropClick:O,onClose:N,open:x,PaperComponent:C=h.Z,PaperProps:H={},scroll:j="paper",TransitionComponent:B=u.Z,transitionDuration:z=f,TransitionProps:U}=n,F=(0,r.Z)(n,M),V=(0,s.Z)({},n,{disableEscapeKeyDown:P,fullScreen:I,fullWidth:A,maxWidth:Y,scroll:j}),W=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:s,fullScreen:i}=e,a={root:["root"],container:["container",`scroll${(0,d.Z)(n)}`],paper:["paper",`paperScroll${(0,d.Z)(n)}`,`paperWidth${(0,d.Z)(String(r))}`,s&&"paperFullWidth",i&&"paperFullScreen"]};return(0,o.Z)(a,y,t)})(V),$=i.useRef(),G=(0,c.Z)(_),q=i.useMemo((()=>({titleId:G})),[G]);return(0,k.jsx)(L,(0,s.Z)({className:(0,a.Z)(W.root,R),closeAfterTransition:!0,components:{Backdrop:E},componentsProps:{backdrop:(0,s.Z)({transitionDuration:z,as:g},b)},disableEscapeKeyDown:P,onClose:N,open:x,ref:t,onClick:e=>{$.current&&($.current=null,O&&O(e),N&&N(e,"backdropClick"))},ownerState:V},F,{children:(0,k.jsx)(B,(0,s.Z)({appear:!0,in:x,timeout:z,role:"presentation"},U,{children:(0,k.jsx)(S,{className:(0,a.Z)(W.container),onMouseDown:e=>{$.current=e.target===e.currentTarget},ownerState:V,children:(0,k.jsx)(D,(0,s.Z)({as:C,elevation:24,role:"dialog","aria-describedby":m,"aria-labelledby":G},H,{className:(0,a.Z)(W.paper,H.className),ownerState:V,children:(0,k.jsx)(w.Z.Provider,{value:q,children:T})}))})}))}))}))},81036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(44441).createContext)({})},3024:(e,t)=>{"use strict";const n=Math.exp;e.exports=function(e){if("number"!=typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,r,s=0,i=0,a=0,o={push:function(o,c){if(r){const d=1-n(-(o-r)/e),l=c-t;t=d*c+(1-d)*t,s=(1-d)*(s+l*(d*l)),i=Math.sqrt(s),a=t+d*l}else t=c;r=o},movingAverage:function(){return t},variance:function(){return s},deviation:function(){return i},forecast:function(){return a}};return o}},12618:(e,t,n)=>{"use strict";const{fromCallback:r}=n(39874),s=n(39296),{getCallback:i,getOptions:a}=n(53862),o=Symbol("promise"),c=Symbol("status"),d=Symbol("operations"),l=Symbol("finishClose"),u=Symbol("closeCallbacks");t.AbstractChainedBatch=class{constructor(e){if("object"!=typeof e||null===e)throw new TypeError("The first argument must be an abstract-level database, received "+(null===e?"null":typeof e));this[d]=[],this[u]=[],this[c]="open",this[l]=this[l].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[d].length}put(e,t,n){if("open"!==this[c])throw new s("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;const i=n&&null!=n.sublevel?n.sublevel:this.db,a=n,o=i.keyEncoding(n&&n.keyEncoding),l=i.valueEncoding(n&&n.valueEncoding),u=o.format;n={...n,keyEncoding:u,valueEncoding:l.format},i!==this.db&&(n.sublevel=null);const h=i.prefixKey(o.encode(e),u),p=l.encode(t);return this._put(h,p,n),this[d].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if("open"!==this[c])throw new s("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const r=t&&null!=t.sublevel?t.sublevel:this.db,i=t,a=r.keyEncoding(t&&t.keyEncoding),o=a.format;return t={...t,keyEncoding:o},r!==this.db&&(t.sublevel=null),this._del(r.prefixKey(a.encode(e),o),t),this[d].push({...i,type:"del",key:e}),this}_del(e,t){}clear(){if("open"!==this[c])throw new s("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[d]=[],this}_clear(){}write(e,t){return t=i(e,t),t=r(t,o),e=a(e),"open"!==this[c]?this.nextTick(t,new s("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(t):(this[c]="writing",this._write(e,(e=>{this[c]="closing",this[u].push((()=>t(e))),e||this.db.emit("batch",this[d]),this._close(this[l])}))),t[o]}_write(e,t){}close(e){return e=r(e,o),"closing"===this[c]?this[u].push(e):"closed"===this[c]?this.nextTick(e):(this[u].push(e),"writing"!==this[c]&&(this[c]="closing",this._close(this[l]))),e[o]}_close(e){this.nextTick(e)}[l](){this[c]="closed",this.db.detachResource(this);const e=this[u];this[u]=[];for(const t of e)t()}}},40060:(e,t,n)=>{"use strict";var r=n(82784);const{fromCallback:s}=n(39874),i=n(39296),{getOptions:a,getCallback:o}=n(53862),c=Symbol("promise"),d=Symbol("callback"),l=Symbol("working"),u=Symbol("handleOne"),h=Symbol("handleMany"),p=Symbol("autoClose"),f=Symbol("finishWork"),m=Symbol("returnMany"),_=Symbol("closing"),y=Symbol("handleClose"),g=Symbol("closed"),w=Symbol("closeCallbacks"),b=Symbol("keyEncoding"),v=Symbol("valueEncoding"),k=Symbol("abortOnClose"),M=Symbol("legacy"),E=Symbol("keys"),L=Symbol("values"),S=Symbol("limit"),D=Symbol("count"),T=Object.freeze({}),R=()=>{};let P=!1;class I{constructor(e,t,n){if("object"!=typeof e||null===e)throw new TypeError("The first argument must be an abstract-level database, received "+(null===e?"null":typeof e));if("object"!=typeof t||null===t)throw new TypeError("The second argument must be an options object");this[g]=!1,this[w]=[],this[l]=!1,this[_]=!1,this[p]=!1,this[d]=null,this[u]=this[u].bind(this),this[h]=this[h].bind(this),this[y]=this[y].bind(this),this[b]=t[b],this[v]=t[v],this[M]=n,this[S]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[D]=0,this[k]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[D]}get limit(){return this[S]}next(e){let t;if(void 0===e)t=new Promise(((t,n)=>{e=(e,r,s)=>{e?n(e):this[M]?void 0===r&&void 0===s?t():t([r,s]):t(r)}}));else if("function"!=typeof e)throw new TypeError("Callback must be a function");return this[_]?this.nextTick(e,new i("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[l]?this.nextTick(e,new i("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[l]=!0,this[d]=e,this[D]>=this[S]?this.nextTick(this[u],null):this._next(this[u])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=o(t,n),n=s(n,c),t=a(t,T),Number.isInteger(e)?(this[_]?this.nextTick(n,new i("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[l]?this.nextTick(n,new i("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[S]<1/0&&(e=Math.min(e,this[S]-this[D])),this[l]=!0,this[d]=n,e<=0?this.nextTick(this[h],null,[]):this._nextv(e,t,this[h])),n[c]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[c])}_nextv(e,t,n){const r=[],s=(t,i,a)=>t?n(t):(this[M]?void 0===i&&void 0===a:void 0===i)?n(null,r):(r.push(this[M]?[i,a]:i),void(r.length===e?n(null,r):this._next(s)));this._next(s)}all(e,t){return t=o(e,t),t=s(t,c),e=a(e,T),this[_]?this.nextTick(t,new i("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[l]?this.nextTick(t,new i("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[l]=!0,this[d]=t,this[p]=!0,this[D]>=this[S]?this.nextTick(this[h],null,[]):this._all(e,this[h])),t[c]}_all(e,t){let n=this[D];const r=[],s=()=>{const e=this[S]<1/0?Math.min(1e3,this[S]-n):1e3;e<=0?this.nextTick(t,null,r):this._nextv(e,T,i)},i=(e,i)=>{e?t(e):0===i.length?t(null,r):(r.push.apply(r,i),n+=i.length,s())};s()}[f](){const e=this[d];return this[k]&&null===e?R:(this[l]=!1,this[d]=null,this[_]&&this._close(this[y]),e)}[m](e,t,n){this[p]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=a(t,T),this[_]);else{if(this[l])throw new i("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(t.keyEncoding||this[b]),r=n.format;t.keyEncoding!==r&&(t={...t,keyEncoding:r});const s=this.db.prefixKey(n.encode(e),r);this._seek(s,t)}}}_seek(e,t){throw new i("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=s(e,c),this[g]?this.nextTick(e):this[_]?this[w].push(e):(this[_]=!0,this[w].push(e),this[l]?this[k]&&this[f]()(new i("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[y])),e[c]}_close(e){this.nextTick(e)}[y](){this[g]=!0,this.db.detachResource(this);const e=this[w];this[w]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;void 0!==(e=await this.next());)yield e}finally{this[g]||await this.close()}}}class A extends I{constructor(e,t){super(e,t,!0),this[E]=!1!==t.keys,this[L]=!1!==t.values}[u](e,t,n){const r=this[f]();if(e)return r(e);try{t=this[E]&&void 0!==t?this[b].decode(t):void 0,n=this[L]&&void 0!==n?this[v].decode(n):void 0}catch(e){return r(new Y("entry",e))}void 0===t&&void 0===n||this[D]++,r(null,t,n)}[h](e,t){const n=this[f]();if(e)return this[m](n,e);try{for(const e of t){const t=e[0],n=e[1];e[0]=this[E]&&void 0!==t?this[b].decode(t):void 0,e[1]=this[L]&&void 0!==n?this[v].decode(n):void 0}}catch(e){return this[m](n,new Y("entries",e))}this[D]+=t.length,this[m](n,null,t)}end(e){return P||void 0===r||(P=!0,r.warn(new i("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class Y extends i{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const e of["_ended property","_nexting property","_end method"])Object.defineProperty(A.prototype,e.split(" ")[0],{get(){throw new i(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new i(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});A.keyEncoding=b,A.valueEncoding=v,t.AbstractIterator=A,t.AbstractKeyIterator=class extends I{constructor(e,t){super(e,t,!1)}[u](e,t){const n=this[f]();if(e)return n(e);try{t=void 0!==t?this[b].decode(t):void 0}catch(e){return n(new Y("key",e))}void 0!==t&&this[D]++,n(null,t)}[h](e,t){const n=this[f]();if(e)return this[m](n,e);try{for(let e=0;e<t.length;e++){const n=t[e];t[e]=void 0!==n?this[b].decode(n):void 0}}catch(e){return this[m](n,new Y("keys",e))}this[D]+=t.length,this[m](n,null,t)}},t.AbstractValueIterator=class extends I{constructor(e,t){super(e,t,!1)}[u](e,t){const n=this[f]();if(e)return n(e);try{t=void 0!==t?this[v].decode(t):void 0}catch(e){return n(new Y("value",e))}void 0!==t&&this[D]++,n(null,t)}[h](e,t){const n=this[f]();if(e)return this[m](n,e);try{for(let e=0;e<t.length;e++){const n=t[e];t[e]=void 0!==n?this[v].decode(n):void 0}}catch(e){return this[m](n,new Y("values",e))}this[D]+=t.length,this[m](n,null,t)}}},35028:(e,t,n)=>{"use strict";const{supports:r}=n(28976),{Transcoder:s}=n(29893),{EventEmitter:i}=n(3894),{fromCallback:a}=n(39874),o=n(39296),{AbstractIterator:c}=n(40060),{DefaultKeyIterator:d,DefaultValueIterator:l}=n(81350),{DeferredIterator:u,DeferredKeyIterator:h,DeferredValueIterator:p}=n(26760),{DefaultChainedBatch:f}=n(97341),{getCallback:m,getOptions:_}=n(53862),y=n(10646),g=Symbol("promise"),w=Symbol("landed"),b=Symbol("resources"),v=Symbol("closeResources"),k=Symbol("operations"),M=Symbol("undefer"),E=Symbol("deferOpen"),L=Symbol("options"),S=Symbol("status"),D=Symbol("defaultOptions"),T=Symbol("transcoder"),R=Symbol("keyEncoding"),P=Symbol("valueEncoding"),I=()=>{};class A extends i{constructor(e,t){if(super(),"object"!=typeof e||null===e)throw new TypeError("The first argument 'manifest' must be an object");t=_(t);const{keyEncoding:n,valueEncoding:i,passive:a,...o}=t;this[b]=new Set,this[k]=[],this[E]=!0,this[L]=o,this[S]="opening",this.supports=r(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==e.snapshots,permanence:!1!==e.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[T]=new s(N(this)),this[R]=this[T].encoding(n||"utf8"),this[P]=this[T].encoding(i||"utf8");for(const e of this[T].encodings())this.supports.encodings[e.commonName]||(this.supports.encodings[e.commonName]=!0);this[D]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[R].commonName,valueEncoding:this[P].commonName}),key:Object.freeze({keyEncoding:this[R].commonName})},this.nextTick((()=>{this[E]&&this.open({passive:!1},I)}))}get status(){return this[S]}keyEncoding(e){return this[T].encoding(null!=e?e:this[R])}valueEncoding(e){return this[T].encoding(null!=e?e:this[P])}open(e,t){t=m(e,t),t=a(t,g),(e={...this[L],..._(e)}).createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists;const n=e=>{"closing"===this[S]||"opening"===this[S]?this.once(w,e?()=>n(e):n):"open"!==this[S]?t(new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:e})):t()};return e.passive?"opening"===this[S]?this.once(w,n):this.nextTick(n):"closed"===this[S]||this[E]?(this[E]=!1,this[S]="opening",this.emit("opening"),this._open(e,(e=>{if(e)return this[S]="closed",this[v]((()=>{this.emit(w),n(e)})),void this[M]();this[S]="open",this[M](),this.emit(w),"open"===this[S]&&this.emit("open"),"open"===this[S]&&this.emit("ready"),n()}))):"open"===this[S]?this.nextTick(n):this.once(w,(()=>this.open(e,t))),t[g]}_open(e,t){this.nextTick(t)}close(e){e=a(e,g);const t=n=>{"opening"===this[S]||"closing"===this[S]?this.once(w,n?t(n):t):"closed"!==this[S]?e(new o("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if("open"===this[S]){this[S]="closing",this.emit("closing");const e=e=>{this[S]="open",this[M](),this.emit(w),t(e)};this[v]((()=>{this._close((n=>{if(n)return e(n);this[S]="closed",this[M](),this.emit(w),"closed"===this[S]&&this.emit("closed"),t()}))}))}else"closed"===this[S]?this.nextTick(t):this.once(w,(()=>this.close(e)));return e[g]}[v](e){if(0===this[b].size)return this.nextTick(e);let t=this[b].size,n=!0;const r=()=>{0==--t&&(n?this.nextTick(e):e())};for(const e of this[b])e.close(r);n=!1,this[b].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=m(t,n),n=a(n,g),t=_(t,this[D].entry),"opening"===this[S])return this.defer((()=>this.get(e,t,n))),n[g];if(O(this,n))return n[g];const r=this._checkKey(e);if(r)return this.nextTick(n,r),n[g];const s=this.keyEncoding(t.keyEncoding),i=this.valueEncoding(t.valueEncoding),c=s.format,d=i.format;return t.keyEncoding===c&&t.valueEncoding===d||(t=Object.assign({},t,{keyEncoding:c,valueEncoding:d})),this._get(this.prefixKey(s.encode(e),c),t,((e,t)=>{if(e)return("LEVEL_NOT_FOUND"===e.code||e.notFound||/NotFound/i.test(e))&&(e.code||(e.code="LEVEL_NOT_FOUND"),e.notFound||(e.notFound=!0),e.status||(e.status=404)),n(e);try{t=i.decode(t)}catch(e){return n(new o("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:e}))}n(null,t)})),n[g]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=m(t,n),n=a(n,g),t=_(t,this[D].entry),"opening"===this[S])return this.defer((()=>this.getMany(e,t,n))),n[g];if(O(this,n))return n[g];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[g];if(0===e.length)return this.nextTick(n,null,[]),n[g];const r=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),i=r.format,c=s.format;t.keyEncoding===i&&t.valueEncoding===c||(t=Object.assign({},t,{keyEncoding:i,valueEncoding:c}));const d=new Array(e.length);for(let t=0;t<e.length;t++){const s=e[t],a=this._checkKey(s);if(a)return this.nextTick(n,a),n[g];d[t]=this.prefixKey(r.encode(s),i)}return this._getMany(d,t,((e,t)=>{if(e)return n(e);try{for(let e=0;e<t.length;e++)void 0!==t[e]&&(t[e]=s.decode(t[e]))}catch(e){return n(new o(`Could not decode one or more of ${t.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:e}))}n(null,t)})),n[g]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,r){if(r=m(n,r),r=a(r,g),n=_(n,this[D].entry),"opening"===this[S])return this.defer((()=>this.put(e,t,n,r))),r[g];if(O(this,r))return r[g];const s=this._checkKey(e)||this._checkValue(t);if(s)return this.nextTick(r,s),r[g];const i=this.keyEncoding(n.keyEncoding),o=this.valueEncoding(n.valueEncoding),c=i.format,d=o.format;n.keyEncoding===c&&n.valueEncoding===d||(n=Object.assign({},n,{keyEncoding:c,valueEncoding:d}));const l=this.prefixKey(i.encode(e),c),u=o.encode(t);return this._put(l,u,n,(n=>{if(n)return r(n);this.emit("put",e,t),r()})),r[g]}_put(e,t,n,r){this.nextTick(r)}del(e,t,n){if(n=m(t,n),n=a(n,g),t=_(t,this[D].key),"opening"===this[S])return this.defer((()=>this.del(e,t,n))),n[g];if(O(this,n))return n[g];const r=this._checkKey(e);if(r)return this.nextTick(n,r),n[g];const s=this.keyEncoding(t.keyEncoding),i=s.format;return t.keyEncoding!==i&&(t=Object.assign({},t,{keyEncoding:i})),this._del(this.prefixKey(s.encode(e),i),t,(t=>{if(t)return n(t);this.emit("del",e),n()})),n[g]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if("opening"===this[S])return new f(this);if("open"!==this[S])throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(n="function"==typeof e?e:m(t,n),n=a(n,g),t=_(t,this[D].empty),"opening"===this[S])return this.defer((()=>this.batch(e,t,n))),n[g];if(O(this,n))return n[g];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[g];if(0===e.length)return this.nextTick(n),n[g];const r=new Array(e.length),{keyEncoding:s,valueEncoding:i,...c}=t;for(let t=0;t<e.length;t++){if("object"!=typeof e[t]||null===e[t])return this.nextTick(n,new TypeError("A batch operation must be an object")),n[g];const a=Object.assign({},e[t]);if("put"!==a.type&&"del"!==a.type)return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[g];const o=this._checkKey(a.key);if(o)return this.nextTick(n,o),n[g];const c=null!=a.sublevel?a.sublevel:this,d=c.keyEncoding(a.keyEncoding||s),l=d.format;if(a.key=c.prefixKey(d.encode(a.key),l),a.keyEncoding=l,"put"===a.type){const e=this._checkValue(a.value);if(e)return this.nextTick(n,e),n[g];const t=c.valueEncoding(a.valueEncoding||i);a.value=t.encode(a.value),a.valueEncoding=t.format}c!==this&&(a.sublevel=null),r[t]=a}return this._batch(r,c,(t=>{if(t)return n(t);this.emit("batch",e),n()})),n[g]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,Y.defaults(t))}_sublevel(e,t){return new Y(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=m(e,t),t=a(t,g),e=_(e,this[D].empty),"opening"===this[S])return this.defer((()=>this.clear(e,t))),t[g];if(O(this,t))return t[g];const n=e,r=this.keyEncoding(e.keyEncoding);return(e=y(e,r)).keyEncoding=r.format,0===e.limit?this.nextTick(t):this._clear(e,(e=>{if(e)return t(e);this.emit("clear",n),t()})),t[g]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if((e=y(e,t)).keys=!1!==e.keys,e.values=!1!==e.values,e[c.keyEncoding]=t,e[c.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,"opening"===this[S])return new u(this,e);if("open"!==this[S])throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new c(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if((e=y(e,t))[c.keyEncoding]=t,e[c.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,"opening"===this[S])return new h(this,e);if("open"!==this[S])throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new d(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if((e=y(e,t))[c.keyEncoding]=t,e[c.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,"opening"===this[S])return new p(this,e);if("open"!==this[S])throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new l(this,e)}defer(e){if("function"!=typeof e)throw new TypeError("The first argument must be a function");this[k].push(e)}[M](){if(0===this[k].length)return;const e=this[k];this[k]=[];for(const t of e)t()}attachResource(e){if("object"!=typeof e||null===e||"function"!=typeof e.close)throw new TypeError("The first argument must be a resource object");this[b].add(e)}detachResource(e){this[b].delete(e)}_chainedBatch(){return new f(this)}_checkKey(e){if(null==e)return new o("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(null==e)return new o("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}A.prototype.nextTick=n(30919);const{AbstractSublevel:Y}=n(9728)({AbstractLevel:A});t.AbstractLevel=A,t.AbstractSublevel=Y;const O=function(e,t){return"open"!==e[S]&&(e.nextTick(t,new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},N=function(e){return Object.keys(e.supports.encodings).filter((t=>!!e.supports.encodings[t]))}},61206:(e,t,n)=>{"use strict";t.AbstractLevel=n(35028).AbstractLevel,t.AbstractSublevel=n(35028).AbstractSublevel,t.AbstractIterator=n(40060).AbstractIterator,t.AbstractKeyIterator=n(40060).AbstractKeyIterator,t.AbstractValueIterator=n(40060).AbstractValueIterator,t.AbstractChainedBatch=n(12618).AbstractChainedBatch},12422:(e,t,n)=>{"use strict";const{AbstractIterator:r,AbstractKeyIterator:s,AbstractValueIterator:i}=n(40060),a=Symbol("unfix"),o=Symbol("iterator"),c=Symbol("handleOne"),d=Symbol("handleMany"),l=Symbol("callback");class u extends r{constructor(e,t,n,r){super(e,t),this[o]=n,this[a]=r,this[c]=this[c].bind(this),this[d]=this[d].bind(this),this[l]=null}[c](e,t,n){const r=this[l];if(e)return r(e);void 0!==t&&(t=this[a](t)),r(e,t,n)}[d](e,t){const n=this[l];if(e)return n(e);for(const e of t){const t=e[0];void 0!==t&&(e[0]=this[a](t))}n(e,t)}}class h extends s{constructor(e,t,n,r){super(e,t),this[o]=n,this[a]=r,this[c]=this[c].bind(this),this[d]=this[d].bind(this),this[l]=null}[c](e,t){const n=this[l];if(e)return n(e);void 0!==t&&(t=this[a](t)),n(e,t)}[d](e,t){const n=this[l];if(e)return n(e);for(let e=0;e<t.length;e++){const n=t[e];void 0!==n&&(t[e]=this[a](n))}n(e,t)}}class p extends i{constructor(e,t,n){super(e,t),this[o]=n}}for(const e of[u,h])e.prototype._next=function(e){this[l]=e,this[o].next(this[c])},e.prototype._nextv=function(e,t,n){this[l]=n,this[o].nextv(e,t,this[d])},e.prototype._all=function(e,t){this[l]=t,this[o].all(e,this[d])};for(const e of[p])e.prototype._next=function(e){this[o].next(e)},e.prototype._nextv=function(e,t,n){this[o].nextv(e,t,n)},e.prototype._all=function(e,t){this[o].all(e,t)};for(const e of[u,h,p])e.prototype._seek=function(e,t){this[o].seek(e,t)},e.prototype._close=function(e){this[o].close(e)};t.AbstractSublevelIterator=u,t.AbstractSublevelKeyIterator=h,t.AbstractSublevelValueIterator=p},9728:(e,t,n)=>{"use strict";const r=n(39296),{Buffer:s}=n(83107)||{},{AbstractSublevelIterator:i,AbstractSublevelKeyIterator:a,AbstractSublevelValueIterator:o}=n(12422),c=Symbol("prefix"),d=Symbol("upperBound"),l=Symbol("prefixRange"),u=Symbol("parent"),h=Symbol("unfix"),p=new TextEncoder,f={separator:"!"};e.exports=function({AbstractLevel:e}){class t extends e{static defaults(e){if("string"==typeof e)throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?f:e.separator?e:{...e,separator:"!"}}constructor(e,n,s){const{separator:i,manifest:a,...o}=t.defaults(s);n=w(n,i);const l=i.charCodeAt(0)+1,f=e[u]||e;if(!p.encode(n).every((e=>e>l&&e<127)))throw new r(`Prefix must use bytes > ${l} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(m(f,a),o);const _=(e.prefix||"")+i+n+i,b=_.slice(0,-1)+String.fromCharCode(l);this[u]=f,this[c]=new y(_),this[d]=new y(b),this[h]=new g,this.nextTick=f.nextTick}prefixKey(e,t){if("utf8"===t)return this[c].utf8+e;if(0===e.byteLength)return this[c][t];if("view"===t){const t=this[c].view,n=new Uint8Array(t.byteLength+e.byteLength);return n.set(t,0),n.set(e,t.byteLength),n}{const t=this[c].buffer;return s.concat([t,e],t.byteLength+e.byteLength)}}[l](e,t){void 0!==e.gte?e.gte=this.prefixKey(e.gte,t):void 0!==e.gt?e.gt=this.prefixKey(e.gt,t):e.gte=this[c][t],void 0!==e.lte?e.lte=this.prefixKey(e.lte,t):void 0!==e.lt?e.lt=this.prefixKey(e.lt,t):e.lte=this[d][t]}get prefix(){return this[c].utf8}get db(){return this[u]}_open(e,t){this[u].open({passive:!0},t)}_put(e,t,n,r){this[u].put(e,t,n,r)}_get(e,t,n){this[u].get(e,t,n)}_getMany(e,t,n){this[u].getMany(e,t,n)}_del(e,t,n){this[u].del(e,t,n)}_batch(e,t,n){this[u].batch(e,t,n)}_clear(e,t){this[l](e,e.keyEncoding),this[u].clear(e,t)}_iterator(e){this[l](e,e.keyEncoding);const t=this[u].iterator(e),n=this[h].get(this[c].utf8.length,e.keyEncoding);return new i(this,e,t,n)}_keys(e){this[l](e,e.keyEncoding);const t=this[u].keys(e),n=this[h].get(this[c].utf8.length,e.keyEncoding);return new a(this,e,t,n)}_values(e){this[l](e,e.keyEncoding);const t=this[u].values(e);return new o(this,e,t)}}return{AbstractSublevel:t}};const m=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:_(e,"utf8"),buffer:_(e,"buffer"),view:_(e,"view")}}},_=function(e,t){return!!e.supports.encodings[t]&&e.keyEncoding(t).name===t};class y{constructor(e){this.utf8=e,this.view=p.encode(e),this.buffer=s?s.from(this.view.buffer,0,this.view.byteLength):{}}}class g{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return void 0===n&&(n="view"===t?function(e,t){return t.subarray(e)}.bind(null,e):function(e,t){return t.slice(e)}.bind(null,e),this.cache.set(t,n)),n}}const w=function(e,t){let n=0,r=e.length;for(;n<r&&e[n]===t;)n++;for(;r>n&&e[r-1]===t;)r--;return e.slice(n,r)}},53862:(e,t)=>{"use strict";t.getCallback=function(e,t){return"function"==typeof e?e:t},t.getOptions=function(e,t){return"object"==typeof e&&null!==e?e:void 0!==t?t:{}}},97341:(e,t,n)=>{"use strict";const{AbstractChainedBatch:r}=n(12618),s=n(39296),i=Symbol("encoded");t.DefaultChainedBatch=class extends r{constructor(e){super(e),this[i]=[]}_put(e,t,n){this[i].push({...n,type:"put",key:e,value:t})}_del(e,t){this[i].push({...t,type:"del",key:e})}_clear(){this[i]=[]}_write(e,t){"opening"===this.db.status?this.db.defer((()=>this._write(e,t))):"open"===this.db.status?0===this[i].length?this.nextTick(t):this.db._batch(this[i],e,t):this.nextTick(t,new s("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}},81350:(e,t,n)=>{"use strict";const{AbstractKeyIterator:r,AbstractValueIterator:s}=n(40060),i=Symbol("iterator"),a=Symbol("callback"),o=Symbol("handleOne"),c=Symbol("handleMany");class d extends r{constructor(e,t){super(e,t),this[i]=e.iterator({...t,keys:!0,values:!1}),this[o]=this[o].bind(this),this[c]=this[c].bind(this)}}class l extends s{constructor(e,t){super(e,t),this[i]=e.iterator({...t,keys:!1,values:!0}),this[o]=this[o].bind(this),this[c]=this[c].bind(this)}}for(const e of[d,l]){const t=e===d,n=t?e=>e[0]:e=>e[1];e.prototype._next=function(e){this[a]=e,this[i].next(this[o])},e.prototype[o]=function(e,n,r){const s=this[a];e?s(e):s(null,t?n:r)},e.prototype._nextv=function(e,t,n){this[a]=n,this[i].nextv(e,t,this[c])},e.prototype._all=function(e,t){this[a]=t,this[i].all(e,this[c])},e.prototype[c]=function(e,t){const r=this[a];e?r(e):r(null,t.map(n))},e.prototype._seek=function(e,t){this[i].seek(e,t)},e.prototype._close=function(e){this[i].close(e)}}t.DefaultKeyIterator=d,t.DefaultValueIterator=l},26760:(e,t,n)=>{"use strict";const{AbstractIterator:r,AbstractKeyIterator:s,AbstractValueIterator:i}=n(40060),a=n(39296),o=Symbol("nut"),c=Symbol("undefer"),d=Symbol("factory");class l extends r{constructor(e,t){super(e,t),this[o]=null,this[d]=()=>e.iterator(t),this.db.defer((()=>this[c]()))}}class u extends s{constructor(e,t){super(e,t),this[o]=null,this[d]=()=>e.keys(t),this.db.defer((()=>this[c]()))}}class h extends i{constructor(e,t){super(e,t),this[o]=null,this[d]=()=>e.values(t),this.db.defer((()=>this[c]()))}}for(const e of[l,u,h])e.prototype[c]=function(){"open"===this.db.status&&(this[o]=this[d]())},e.prototype._next=function(e){null!==this[o]?this[o].next(e):"opening"===this.db.status?this.db.defer((()=>this._next(e))):this.nextTick(e,new a("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(e,t,n){null!==this[o]?this[o].nextv(e,t,n):"opening"===this.db.status?this.db.defer((()=>this._nextv(e,t,n))):this.nextTick(n,new a("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(e,t){null!==this[o]?this[o].all(t):"opening"===this.db.status?this.db.defer((()=>this._all(e,t))):this.nextTick(t,new a("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(e,t){null!==this[o]?this[o]._seek(e,t):"opening"===this.db.status&&this.db.defer((()=>this._seek(e,t)))},e.prototype._close=function(e){null!==this[o]?this[o].close(e):"opening"===this.db.status?this.db.defer((()=>this._close(e))):this.nextTick(e)};t.DeferredIterator=l,t.DeferredKeyIterator=u,t.DeferredValueIterator=h},30919:(e,t,n)=>{"use strict";const r=n(94715);e.exports=function(e,...t){0===t.length?r(e):r((()=>e(...t)))}},10646:(e,t,n)=>{"use strict";const r=n(39296),s=Object.prototype.hasOwnProperty,i=new Set(["lt","lte","gt","gte"]);e.exports=function(e,t){const n={};for(const a in e)if(s.call(e,a)&&"keyEncoding"!==a&&"valueEncoding"!==a){if("start"===a||"end"===a)throw new r(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===a)throw new r("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});i.has(a)?n[a]=t.encode(e[a]):n[a]=e[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}},16276:e=>{"use strict";e.exports=async e=>{const t=[];for await(const n of e)t.push(n);return t}},80630:e=>{"use strict";e.exports=async e=>{for await(const t of e);}},19418:e=>{"use strict";e.exports=async function*(e,t){for await(const n of e)await t(n)&&(yield n)}},68274:(e,t,n)=>{"use strict";const{AbstractLevel:r}=n(61206),s=n(39296),i=n(25161),{fromCallback:a}=n(39874),{Iterator:o}=n(77655),c=n(64741),d=n(57034),l=n(5644),u="level-js-",h=Symbol("idb"),p=Symbol("namePrefix"),f=Symbol("location"),m=Symbol("version"),_=Symbol("store"),y=Symbol("onComplete"),g=Symbol("promise");class w extends r{constructor(e,t,n){if("function"==typeof t||"function"==typeof n)throw new s("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:r,version:i,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),"string"!=typeof e)throw new Error("constructor requires a location string argument");this[f]=e,this[p]=null==r?u:r,this[m]=parseInt(i||1,10),this[h]=null}get location(){return this[f]}get namePrefix(){return this[p]}get version(){return this[m]}get db(){return this[h]}get type(){return"browser-level"}_open(e,t){const n=indexedDB.open(this[p]+this[f],this[m]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[h]=n.result,t()},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this[f])||t.createObjectStore(this[f])}}[_](e){return this[h].transaction([this[f]],e).objectStore(this[f])}[y](e,t){const n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){const r=this[_]("readonly");let i;try{i=r.get(e)}catch(e){return this.nextTick(n,e)}this[y](i,(function(e,t){return e?n(e):void 0===t?n(new s("Entry not found",{code:"LEVEL_NOT_FOUND"})):void n(null,c(t))}))}_getMany(e,t,n){const r=this[_]("readonly"),s=e.map((e=>t=>{let n;try{n=r.get(e)}catch(e){return t(e)}n.onsuccess=()=>{const e=n.result;t(null,void 0===e?e:c(e))},n.onerror=e=>{e.stopPropagation(),t(n.error)}}));i(s,16,n)}_del(e,t,n){const r=this[_]("readwrite");let s;try{s=r.delete(e)}catch(e){return this.nextTick(n,e)}this[y](s,n)}_put(e,t,n,r){const s=this[_]("readwrite");let i;try{i=s.put(t,e)}catch(e){return this.nextTick(r,e)}this[y](i,r)}_iterator(e){return new o(this,this[f],e)}_batch(e,t,n){const r=this[_]("readwrite"),s=r.transaction;let i,a=0;s.onabort=function(){n(i||s.error||new Error("aborted by user"))},s.oncomplete=function(){n()},function t(){const n=e[a++],o=n.key;let c;try{c="del"===n.type?r.delete(o):r.put(n.value,o)}catch(e){return i=e,void s.abort()}a<e.length?c.onsuccess=t:"function"==typeof s.commit&&s.commit()}()}_clear(e,t){let n,r;try{n=l(e)}catch(e){return this.nextTick(t)}if(e.limit>=0)return d(this,this[f],n,e,t);try{const e=this[_]("readwrite");r=n?e.delete(n):e.clear()}catch(e){return this.nextTick(t,e)}this[y](r,t)}_close(e){this[h].close(),this.nextTick(e)}}w.destroy=function(e,t,n){"function"==typeof t&&(n=t,t=u),n=a(n,g);const r=indexedDB.deleteDatabase(t+e);return r.onsuccess=function(){n()},r.onerror=function(e){n(e)},n[g]},t.BrowserLevel=w},77655:(e,t,n)=>{"use strict";const{AbstractIterator:r}=n(61206),s=n(5644),i=n(64741),a=Symbol("cache"),o=Symbol("finished"),c=Symbol("options"),d=Symbol("currentOptions"),l=Symbol("position"),u=Symbol("location"),h=Symbol("first"),p={};function f(e){"function"==typeof e.commit&&e.commit()}t.Iterator=class extends r{constructor(e,t,n){super(e,n),this[a]=[],this[o]=0===this.limit,this[c]=n,this[d]={...n},this[l]=void 0,this[u]=t,this[h]=!0}_nextv(e,t,n){if(this[h]=!1,this[o])return this.nextTick(n,null,[]);if(this[a].length>0)return e=Math.min(e,this[a].length),this.nextTick(n,null,this[a].splice(0,e));let r;void 0!==this[l]&&(this[c].reverse?(this[d].lt=this[l],this[d].lte=void 0):(this[d].gt=this[l],this[d].gte=void 0));try{r=s(this[d])}catch(e){return this[o]=!0,this.nextTick(n,null,[])}const p=this.db.db.transaction([this[u]],"readonly"),m=p.objectStore(this[u]),_=[];if(this[c].reverse)m[!this[c].values&&m.openKeyCursor?"openKeyCursor":"openCursor"](r,"prev").onsuccess=t=>{const n=t.target.result;if(n){const{key:t,value:r}=n;this[l]=t,_.push([this[c].keys&&void 0!==t?i(t):void 0,this[c].values&&void 0!==r?i(r):void 0]),_.length<e?n.continue():f(p)}else this[o]=!0};else{let t,n;const s=()=>{if(void 0===t||void 0===n)return;const r=Math.max(t.length,n.length);0===r||e===1/0?this[o]=!0:this[l]=t[r-1],_.length=r;for(let e=0;e<r;e++){const r=t[e],s=n[e];_[e]=[this[c].keys&&void 0!==r?i(r):void 0,this[c].values&&void 0!==s?i(s):void 0]}f(p)};this[c].keys||e<1/0?m.getAllKeys(r,e<1/0?e:void 0).onsuccess=e=>{t=e.target.result,s()}:(t=[],this.nextTick(s)),this[c].values?m.getAll(r,e<1/0?e:void 0).onsuccess=e=>{n=e.target.result,s()}:(n=[],this.nextTick(s))}p.onabort=()=>{n(p.error||new Error("aborted by user")),n=null},p.oncomplete=()=>{n(null,_),n=null}}_next(e){if(this[a].length>0){const[t,n]=this[a].shift();this.nextTick(e,null,t,n)}else if(this[o])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[h]&&(this[h]=!1,t=1),this._nextv(t,p,((t,n)=>{if(t)return e(t);this[a]=n,this._next(e)}))}}_all(e,t){this[h]=!1;const n=this[a].splice(0,this[a].length),r=this.limit-this.count-n.length;if(r<=0)return this.nextTick(t,null,n);this._nextv(r,p,((e,r)=>{if(e)return t(e);n.length>0&&(r=n.concat(r)),t(null,r)}))}_seek(e,t){let n;this[h]=!0,this[a]=[],this[o]=!1,this[l]=void 0,this[d]={...this[c]};try{n=s(this[c])}catch(e){return void(this[o]=!0)}null===n||n.includes(e)?this[c].reverse?this[d].lte=e:this[d].gte=e:this[o]=!0}}},57034:e=>{"use strict";e.exports=function(e,t,n,r,s){if(0===r.limit)return e.nextTick(s);const i=e.db.transaction([t],"readwrite"),a=i.objectStore(t);let o=0;i.oncomplete=function(){s()},i.onabort=function(){s(i.error||new Error("aborted by user"))};const c=a.openKeyCursor?"openKeyCursor":"openCursor",d=r.reverse?"prev":"next";a[c](n,d).onsuccess=function(e){const t=e.target.result;t&&(a.delete(t.key).onsuccess=function(){(r.limit<=0||++o<r.limit)&&t.continue()})}}},64741:e=>{"use strict";const t=new TextEncoder;e.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)}},5644:e=>{"use strict";e.exports=function(e){const t=void 0!==e.gte?e.gte:void 0!==e.gt?e.gt:void 0,n=void 0!==e.lte?e.lte:void 0!==e.lt?e.lt:void 0,r=void 0===e.gte,s=void 0===e.lte;return void 0!==t&&void 0!==n?IDBKeyRange.bound(t,n,r,s):void 0!==t?IDBKeyRange.lowerBound(t,r):void 0!==n?IDBKeyRange.upperBound(n,s):null}},13434:e=>{"use strict";e.exports=function(e,t){return"string"==typeof e?a(e):"number"==typeof e?i(e,t):null},e.exports.format=i,e.exports.parse=a;var t=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},s=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,s){if(!Number.isFinite(e))return null;var i=Math.abs(e),a=s&&s.thousandsSeparator||"",o=s&&s.unitSeparator||"",c=s&&void 0!==s.decimalPlaces?s.decimalPlaces:2,d=Boolean(s&&s.fixedDecimals),l=s&&s.unit||"";l&&r[l.toLowerCase()]||(l=i>=r.pb?"PB":i>=r.tb?"TB":i>=r.gb?"GB":i>=r.mb?"MB":i>=r.kb?"KB":"B");var u=(e/r[l.toLowerCase()]).toFixed(c);return d||(u=u.replace(n,"$1")),a&&(u=u.split(".").map((function(e,n){return 0===n?e.replace(t,a):e})).join(".")),u+o+l}function a(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=s.exec(e),i="b";return n?(t=parseFloat(n[1]),i=n[4].toLowerCase()):(t=parseInt(e,10),i="b"),isNaN(t)?null:Math.floor(r[i]*t)}},39874:(e,t,n)=>{"use strict";var r=n(31728);t.fromCallback=function(e,t){if(void 0===e){var n=new Promise((function(t,n){e=function(e,r){e?n(e):t(r)}}));e[void 0!==t?t:"promise"]=n}else if("function"!=typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){r((()=>t(null,e)))})).catch((function(e){r((()=>t(e)))}))}},31728:e=>{e.exports="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e)},51006:(e,t,n)=>{var r=n(86189),s=n(41015),i=n(29122),a=n(30831),o=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in o||s(e,"flags")||!i(o,e)?t:r(a,e)}},23803:(e,t,n)=>{"use strict";var r=n(85863).PROPER,s=n(94678),i=n(48127),a=n(48303),o=n(91073),c=n(51006),d="toString",l=RegExp.prototype[d],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=r&&l.name!=d;(u||h)&&s(RegExp.prototype,d,(function(){var e=i(this);return"/"+a(e.source)+"/"+a(c(e))}),{unsafe:!0})},63246:e=>{"use strict";e.exports=async function*(e,t){for await(const n of e)yield t(n)}},86119:(e,t,n)=>{"use strict";const r=n(53204);e.exports=async function*(...e){const t=r();setTimeout((async()=>{try{await Promise.all(e.map((async e=>{for await(const n of e)t.push(n)}))),t.end()}catch(e){t.end(e)}}),0),yield*t}},53204:(e,t,n)=>{const r=n(98502);e.exports=e=>{let t;"function"==typeof(e=e||{})?(t=e,e={}):t=e.onEnd;let n,s,i,a=new r;const o=e=>s?s(e):(a.push(e),n),c=e=>i?n:o({done:!1,value:e}),d=e=>i?n:(i=!0,e?(e=>(a=new r,s?s({error:e}):(a.push({error:e}),n)))(e):o({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:()=>{if(!a.isEmpty()){if(e.writev){let e;const t=[];for(;!a.isEmpty();){if(e=a.shift(),e.error)throw e.error;t.push(e.value)}return{done:e.done,value:t}}const t=a.shift();if(t.error)throw t.error;return t}return i?{done:!0}:new Promise(((t,r)=>{s=i=>(s=null,i.error?r(i.error):e.writev&&!i.done?t({done:i.done,value:[i.value]}):t(i),n)}))},return:()=>(a=new r,d(),{done:!0}),throw:e=>(d(e),{done:!0}),push:c,end:d},!t)return n;const l=n;return n={[Symbol.asyncIterator](){return this},next:()=>l.next(),throw:e=>(l.throw(e),t&&(t(e),t=null),{done:!0}),return:()=>(l.return(),t&&(t(),t=null),{done:!0}),push:c,end:e=>(l.end(e),t&&(t(e),t=null),n)},n}},19301:e=>{"use strict";function t(e,t){t=t||{},this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var s,i=this._list[t];if(e<n/2){for(s=e;s>0;s--)this._list[t]=this._list[t=t-1+r&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(s=n-1-e;s>0;s--)this._list[t]=this._list[t=t+1+r&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+r&this._capacityMask}return i}}},t.prototype.remove=function(e,t){var n,r=e,s=t;if(r===(0|r)&&this._head!==this._tail){var i=this.size(),a=this._list.length;if(!(r>=i||r<-i||t<1)){if(r<0&&(r+=i),1===t||!t)return(n=new Array(1))[0]=this.removeOne(r),n;if(0===r&&r+t>=i)return n=this.toArray(),this.clear(),n;var o;for(r+t>i&&(t=i-r),n=new Array(t),o=0;o<t;o++)n[o]=this._list[this._head+r+o&this._capacityMask];if(r=this._head+r&this._capacityMask,e+t===i){for(this._tail=this._tail-t+a&this._capacityMask,o=t;o>0;o--)this._list[r=r+1+a&this._capacityMask]=void 0;return n}if(0===e){for(this._head=this._head+t+a&this._capacityMask,o=t-1;o>0;o--)this._list[r=r+1+a&this._capacityMask]=void 0;return n}if(r<i/2){for(this._head=this._head+e+t+a&this._capacityMask,o=e;o>0;o--)this.unshift(this._list[r=r-1+a&this._capacityMask]);for(r=this._head-1+a&this._capacityMask;s>0;)this._list[r=r-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=r)}else{for(this._tail=r,r=r+t+a&this._capacityMask,o=i-(t+e);o>0;o--)this.push(this._list[r++]);for(r=this._tail;s>0;)this._list[r=r+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}},t.prototype.splice=function(e,t){var n=e;if(n===(0|n)){var r=this.size();if(n<0&&(n+=r),!(n>r)){if(arguments.length>2){var s,i,a,o=arguments.length,c=this._list.length,d=2;if(!r||n<r/2){for(i=new Array(n),s=0;s<n;s++)i[s]=this._list[this._head+s&this._capacityMask];for(0===t?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);o>d;)this.unshift(arguments[--o]);for(s=n;s>0;s--)this.unshift(i[s-1])}else{var l=(i=new Array(r-(n+t))).length;for(s=0;s<l;s++)i[s]=this._list[this._head+n+t+s&this._capacityMask];for(0===t?(a=[],n!=r&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._tail=this._tail-l+c&this._capacityMask);d<o;)this.push(arguments[d++]);for(s=0;s<l;s++)this.push(i[s])}return a}return this.remove(n,t)}}},t.prototype.clear=function(){this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},t.prototype._copyArray=function(e){var t,n=[],r=this._list,s=r.length;if(e||this._head>this._tail){for(t=this._head;t<s;t++)n.push(r[t]);for(t=0;t<this._tail;t++)n.push(r[t])}else for(t=this._head;t<this._tail;t++)n.push(r[t]);return n},t.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=t},93765:function(e){e.exports=function(e,t,n,r,s){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:s;return e===s?n:e}},122:(e,t)=>{"use strict";function n(e,t=n.BASE){const r=e.length;for(let n=0;n<r;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),n.BASE=2166136261,t.default=n,e.exports=n},26205:e=>{e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,n=Object.create(null),r=Object.create(null);function s(s,i){n[s]=i,++t>=e&&(t=0,r=n,n=Object.create(null))}return{has:function(e){return void 0!==n[e]||void 0!==r[e]},remove:function(e){void 0!==n[e]&&(n[e]=void 0),void 0!==r[e]&&(r[e]=void 0)},get:function(e){var t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(s(e,t),t):void 0},set:function(e,t){void 0!==n[e]?n[e]=t:s(e,t)},clear:function(){n=Object.create(null),r=Object.create(null)}}}},27697:(e,t,n)=>{"use strict";var r=n(46039);const s=n(66830),i="object"==typeof window&&"object"==typeof document&&9===document.nodeType,a=s(),o=i&&!a,c=a&&!i,d=a&&i,l=void 0!==r&&void 0!==r.release&&"node"===r.release.name&&!a,u="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h=void 0!==r&&void 0!==r.env&&!1,p="undefined"!=typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:h,isElectron:a,isElectronMain:c,isElectronRenderer:d,isNode:l,isBrowser:o,isWebWorker:u,isEnvWithDom:i,isReactNative:p}},97119:(e,t,n)=>{"use strict";e.exports=n(81661)},36074:(e,t,n)=>{"use strict";const r=n(6963);async function*s(e,t){const n=new r,s=await n.get(e,t);yield*s.iterator()}e.exports=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:s(e,t)})},6963:(e,t,n)=>{"use strict";const{fetch:r,Request:s,Headers:i}=n(72349),{TimeoutError:a,HTTPError:o}=n(2228),c=n(76768).bind({ignoreUndefined:!0}),{URL:d,URLSearchParams:l}=n(21963),u=n(92360),h={throwHttpErrors:!0,credentials:"same-origin"};class p{constructor(e={}){this.opts=c(h,e)}async fetch(e,t={}){const n=c(this.opts,t),h=new i(n.headers);if("string"!=typeof e&&!(e instanceof d||e instanceof s))throw new TypeError("`resource` must be a string, URL, or Request");const p=new d(e.toString(),n.base),{searchParams:_,transformSearchParams:y,json:g}=n;_&&(p.search="function"==typeof y?y(new l(n.searchParams)):new l(n.searchParams)),g&&(n.body=JSON.stringify(n.json),h.set("content-type","application/json"));const w=new AbortController,b=u([w.signal,n.signal]),v=await((e,t,n)=>{if(void 0===t)return e;const r=Date.now(),s=()=>Date.now()-r>=t;return new Promise(((r,i)=>{const o=setTimeout((()=>{s()&&(i(new a),n.abort())}),t),c=e=>t=>{clearTimeout(o),s()?i(new a):e(t)};e.then(c(r),c(i))}))})(r(p.toString(),{...n,signal:b,timeout:void 0,headers:h}),n.timeout,w);if(!v.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(v),new o(v);return v.iterator=async function*(){yield*m(v.body)},v.ndjson=async function*(){for await(const e of f(v.iterator()))t.transform?yield t.transform(e):yield e},v}post(e,t={}){return this.fetch(e,{...t,method:"POST"})}get(e,t={}){return this.fetch(e,{...t,method:"GET"})}put(e,t={}){return this.fetch(e,{...t,method:"PUT"})}delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}options(e,t={}){return this.fetch(e,{...t,method:"OPTIONS"})}}const f=async function*(e){const t=new TextDecoder;let n="";for await(const r of e){n+=t.decode(r,{stream:!0});const e=n.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const n=e[t].trim();n.length>0&&(yield JSON.parse(n))}n=e[e.length-1]}n+=t.decode(),n=n.trim(),0!==n.length&&(yield JSON.parse(n))},m=e=>{if(g(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:t.next.bind(t),return:n=>(e.destroy(),"function"==typeof t.return?t.return():Promise.resolve({done:!0,value:n}))})}}if(y(e)){const t=e.getReader();return async function*(){try{for(;;){const{done:e,value:n}=await t.read();if(e)return;n&&(yield n)}}finally{t.releaseLock()}}()}if(_(e))return e;throw new TypeError("Body can't be converted to AsyncIterable")},_=e=>"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator],y=e=>e&&"function"==typeof e.getReader,g=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");p.HTTPError=o,p.TimeoutError=a,p.streamToAsyncIterator=m,p.post=(e,t)=>new p(t).post(e,t),p.get=(e,t)=>new p(t).get(e,t),p.put=(e,t)=>new p(t).put(e,t),p.delete=(e,t)=>new p(t).delete(e,t),p.options=(e,t)=>new p(t).options(e,t),e.exports=p},2228:(e,t)=>{"use strict";class n extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}t.TimeoutError=n;class r extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}t.AbortError=r;class s extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}t.HTTPError=s},72349:(e,t,n)=>{"use strict";const{TimeoutError:r,AbortError:s}=n(2228),{Response:i,Request:a,Headers:o,default:c}=n(97119),d=c,l=e=>{const t=new o;for(const n of e.trim().split(/[\r\n]+/)){const e=n.indexOf(": ");e>0&&t.set(n.slice(0,e),n.slice(e+1))}return t};class u extends i{constructor(e,t,n){super(t,n),Object.defineProperty(this,"url",{value:e})}}e.exports={fetch:(e,t={})=>null!=t.onUploadProgress?((e,t={})=>{const n=new XMLHttpRequest;n.open(t.method||"GET",e.toString(),!0);const{timeout:a,headers:c}=t;if(a&&a>0&&a<1/0&&(n.timeout=a),null!=t.overrideMimeType&&n.overrideMimeType(t.overrideMimeType),c)for(const[e,t]of new o(c))n.setRequestHeader(e,t);return t.signal&&(t.signal.onabort=()=>n.abort()),t.onUploadProgress&&(n.upload.onprogress=t.onUploadProgress),n.responseType="arraybuffer",new Promise(((e,a)=>{const o=t=>{switch(t.type){case"error":e(i.error());break;case"load":e(new u(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:l(n.getAllResponseHeaders())}));break;case"timeout":a(new r);break;case"abort":a(new s)}};n.onerror=o,n.onload=o,n.ontimeout=o,n.onabort=o,n.send(t.body)}))})(e,t):d(e,t),Request:a,Headers:o}},20757:e=>{"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,n){if(null==n&&(n=!1),e.length<2)return!1;if(e.length>255)return!1;var r=e[e.length-1];if(n){if("."!==r)return!1}else if("."===r)return!1;return t.test(e)}},78814:e=>{"use strict";e.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:8,RTLD_LOCAL:4,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGINFO:29,SIGSYS:12,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,UV_FS_O_FILEMAP:0,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_DSYNC:4194304,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488383,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},26665:(e,t,n)=>{"use strict";const r=n(68239),{EventEmitter:s}=n(3894);function i(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n)if(e[n]!==t[n])return!1;return!0}function a(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class o extends s{constructor(e={}){super(),this.localNodeId=e.localNodeId||r(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||o.distance,this.arbiter=e.arbiter||o.arbiter,this.metadata=Object.assign({},e.metadata),a("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let n=0,r=0;const s=Math.min(e.length,t.length),i=Math.max(e.length,t.length);for(;r<s;++r)n=256*n+(e[r]^t[r]);for(;r<i;++r)n=256*n+255;return n}add(e){a("contact.id",(e||{}).id);let t=0,n=this.root;for(;null===n.contacts;)n=this._determineNode(n,e.id,t++);const r=this._indexOf(n,e.id);return r>=0?(this._update(n,r,e),this):n.contacts.length<this.numberOfNodesPerKBucket?(n.contacts.push(e),this.emit("added",e),this):n.dontSplit?(this.emit("ping",n.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(n,t),this.add(e))}closest(e,t=1/0){if(a("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let n=[];for(let r=[this.root],s=0;r.length>0&&n.length<t;){const t=r.pop();if(null===t.contacts){const n=this._determineNode(t,e,s++);r.push(t.left===n?t.right:t.left),r.push(n)}else n=n.concat(t.contacts)}return n.map((t=>[this.distance(t.id,e),t])).sort(((e,t)=>e[0]-t[0])).slice(0,t).map((e=>e[1]))}count(){let e=0;for(const t=[this.root];t.length>0;){const n=t.pop();null===n.contacts?t.push(n.right,n.left):e+=n.contacts.length}return e}_determineNode(e,t,n){const r=n>>3,s=n%8;return t.length<=r&&0!==s?e.left:t[r]&1<<7-s?e.right:e.left}get(e){a("id",e);let t=0,n=this.root;for(;null===n.contacts;)n=this._determineNode(n,e,t++);const r=this._indexOf(n,e);return r>=0?n.contacts[r]:null}_indexOf(e,t){for(let n=0;n<e.contacts.length;++n)if(i(e.contacts[n].id,t))return n;return-1}remove(e){a("the id as parameter 1",e);let t=0,n=this.root;for(;null===n.contacts;)n=this._determineNode(n,e,t++);const r=this._indexOf(n,e);if(r>=0){const e=n.contacts.splice(r,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};for(const n of e.contacts)this._determineNode(e,n.id,t).contacts.push(n);e.contacts=null;const n=this._determineNode(e,this.localNodeId,t);(e.left===n?e.right:e.left).dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const n=t.pop();null===n.contacts?t.push(n.right,n.left):e=e.concat(n.contacts)}return e}*toIterable(){for(const e=[this.root];e.length>0;){const t=e.pop();null===t.contacts?e.push(t.right,t.left):yield*t.contacts}}_update(e,t,n){if(!i(e.contacts[t].id,n.id))throw new Error("wrong index for _update");const r=e.contacts[t],s=this.arbiter(r,n);s===r&&r!==n||(e.contacts.splice(t,1),e.contacts.push(s),this.emit("updated",r,s))}}e.exports=o},28976:(e,t)=>{"use strict";t.supports=function(...e){const t=e.reduce(((e,t)=>Object.assign(e,t)),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}},29893:(e,t,n)=>{"use strict";const r=n(39296),s=n(94697),{Encoding:i}=n(2333),{BufferFormat:a,ViewFormat:o,UTF8Format:c}=n(50396),d=Symbol("formats"),l=Symbol("encodings"),u=new Set(["buffer","view","utf8"]);t.Transcoder=class{constructor(e){if(!Array.isArray(e))throw new TypeError("The first argument 'formats' must be an array");if(!e.every((e=>u.has(e))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[l]=new Map,this[d]=new Set(e);for(const e in s)try{this.encoding(e)}catch(e){if("LEVEL_ENCODING_NOT_SUPPORTED"!==e.code)throw e}}encodings(){return Array.from(new Set(this[l].values()))}encoding(e){let t=this[l].get(e);if(void 0===t){if("string"==typeof e&&""!==e){if(t=p[e],!t)throw new r(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof e||null===e)throw new TypeError("First argument 'encoding' must be a string or object");t=function(e){if(e instanceof i)return e;const t="type"in e&&"string"==typeof e.type?e.type:void 0,n=e.name||t||"anonymous-"+f++;switch(function(e){return"format"in e&&void 0!==e.format?e.format:"buffer"in e&&"boolean"==typeof e.buffer?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}(e)){case"view":return new o({...e,name:n});case"utf8":return new c({...e,name:n});case"buffer":return new a({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(e)}const{name:n,format:s}=t;if(!this[d].has(s))if(this[d].has("view"))t=t.createViewTranscoder();else if(this[d].has("buffer"))t=t.createBufferTranscoder();else{if(!this[d].has("utf8"))throw new r(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});t=t.createUTF8Transcoder()}for(const r of[e,n,t.name,t.commonName])this[l].set(r,t)}return t}};const h={binary:s.buffer,"utf-8":s.utf8},p={...s,...h};let f=0},2333:(e,t,n)=>{"use strict";const r=n(39296),s=new Set(["buffer","view","utf8"]);t.Encoding=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!s.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new r(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new r(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new r(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}},94697:(e,t,n)=>{"use strict";const{Buffer:r}=n(83107)||{Buffer:{isBuffer:()=>!1}},{textEncoder:s,textDecoder:i}=n(58833)(),{BufferFormat:a,ViewFormat:o,UTF8Format:c}=n(50396),d=e=>e;t.utf8=new c({encode:function(e){return r.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?i.decode(e):String(e)},decode:d,name:"utf8",createViewTranscoder(){return new o({encode:function(e){return ArrayBuffer.isView(e)?e:s.encode(e)},decode:function(e){return i.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new a({encode:function(e){return r.isBuffer(e)?e:ArrayBuffer.isView(e)?r.from(e.buffer,e.byteOffset,e.byteLength):r.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}}),t.json=new c({encode:JSON.stringify,decode:JSON.parse,name:"json"}),t.buffer=new a({encode:function(e){return r.isBuffer(e)?e:ArrayBuffer.isView(e)?r.from(e.buffer,e.byteOffset,e.byteLength):r.from(String(e),"utf8")},decode:d,name:"buffer",createViewTranscoder(){return new o({encode:function(e){return ArrayBuffer.isView(e)?e:r.from(String(e),"utf8")},decode:function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}}),t.view=new o({encode:function(e){return ArrayBuffer.isView(e)?e:s.encode(e)},decode:d,name:"view",createBufferTranscoder(){return new a({encode:function(e){return r.isBuffer(e)?e:ArrayBuffer.isView(e)?r.from(e.buffer,e.byteOffset,e.byteLength):r.from(String(e),"utf8")},decode:d,name:`${this.name}+buffer`})}}),t.hex=new a({encode:function(e){return r.isBuffer(e)?e:r.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"}),t.base64=new a({encode:function(e){return r.isBuffer(e)?e:r.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})},50396:(e,t,n)=>{"use strict";const{Buffer:r}=n(83107)||{},{Encoding:s}=n(2333),i=n(58833);class a extends s{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new o({encode:this.encode,decode:e=>this.decode(r.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class o extends s{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new a({encode:e=>{const t=this.encode(e);return r.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}t.BufferFormat=a,t.ViewFormat=o,t.UTF8Format=class extends s{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new a({encode:e=>r.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=i();return new o({encode:t=>e.encode(this.encode(t)),decode:e=>this.decode(t.decode(e)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}},58833:e=>{"use strict";let t=null;e.exports=function(){return null===t&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t}},35562:(e,t,n)=>{t.Level=n(68274).BrowserLevel},39296:e=>{"use strict";e.exports=class extends Error{constructor(e,t){super(e||""),"object"==typeof t&&null!==t&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},37947:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(39288))},35399:function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},r=function(e){return function(r,s,i,a){var o=t(r),c=n[e][t(r)];return 2===o&&(c=c[s?0:1]),c.replace(/%d/i,r)}},s=["","","","","","","","","","","",""];e.defineLocale("ar-dz",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:0,doy:4}})}(n(39288))},42551:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(39288))},72622:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},s=function(e){return function(t,s,i,a){var o=n(t),c=r[e][n(t)];return 2===o&&(c=c[s?0:1]),c.replace(/%d/i,t)}},i=["","","","","","","","","","","",""];e.defineLocale("ar-ly",{months:i,monthsShort:i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:s("s"),ss:s("s"),m:s("m"),mm:s("m"),h:s("h"),hh:s("h"),d:s("d"),dd:s("d"),M:s("M"),MM:s("M"),y:s("y"),yy:s("y")},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(39288))},64579:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(39288))},21718:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(39288))},48602:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(39288))},60029:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},s={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(e){return function(t,n,i,a){var o=r(t),c=s[e][r(t)];return 2===o&&(c=c[n?0:1]),c.replace(/%d/i,t)}},a=["","","","","","","","","","","",""];e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(39288))},84703:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"bir ne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10;return e+(t[n]||t[e%100-n]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(39288))},80094:function(e,t,n){!function(e){"use strict";function t(e,t,n){return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+(r=+e,s={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),r%10==1&&r%100!=11?s[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?s[1]:s[2]);var r,s}e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:t,mm:t,h:t,hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(39288))},96384:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",w:"",ww:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(39288))},46779:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(39288))},96590:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn-bd",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t||""===t?e:""===t?e>=3?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<6?"":e<12?"":e<15?"":e<18?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},18962:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},67347:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShortRegex:/^(\d{1,2})/,monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},6629:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){return e>9?n(e%10):e}var r=[/^gen/i,/^c[\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],s=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,i=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:i,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:i,monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dech da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:function(e){switch(n(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(39288))},65893:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+(1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi");case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+(1===e?"minuta":2===e||3===e||4===e?"minute":"minuta");case"h":return t?"jedan sat":"jednog sata";case"hh":return r+(1===e?"sat":2===e||3===e||4===e?"sata":"sati");case"dd":return r+(1===e?"dan":"dana");case"MM":return r+(1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci");case"yy":return r+(1===e?"godina":2===e||3===e||4===e?"godine":"godina")}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},92428:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(39288))},29464:function(e,t,n){!function(e){"use strict";var t={format:"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),standalone:"ledna_nora_bezna_dubna_kvtna_ervna_ervence_srpna_z_jna_listopadu_prosince".split("_")},n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),r=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],s=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function i(e){return e>1&&e<5&&1!=~~(e/10)}function a(e,t,n,r){var s=e+" ";switch(n){case"s":return t||r?"pr sekund":"pr sekundami";case"ss":return t||r?s+(i(e)?"sekundy":"sekund"):s+"sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":return t||r?s+(i(e)?"minuty":"minut"):s+"minutami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?s+(i(e)?"hodiny":"hodin"):s+"hodinami";case"d":return t||r?"den":"dnem";case"dd":return t||r?s+(i(e)?"dny":"dn"):s+"dny";case"M":return t||r?"msc":"mscem";case"MM":return t||r?s+(i(e)?"msce":"msc"):s+"msci";case"y":return t||r?"rok":"rokem";case"yy":return t||r?s+(i(e)?"roky":"let"):s+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},37650:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(39288))},983:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(39288))},97793:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},62381:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[n][0]:s[n][1]}e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},89691:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[n][0]:s[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},23453:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[n][0]:s[n][1]}e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},23241:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(39288))},89282:function(e,t,n){!function(e){"use strict";e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){return 6===this.day()?"[ ] dddd [{}] LT":"[ ] dddd [{}] LT"},sameElse:"L"},calendar:function(e,t){var n,r=this._calendarEl[e],s=t&&t.hours();return n=r,("undefined"!=typeof Function&&n instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(r=r.apply(t)),r.replace("{}",s%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},59114:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(39288))},864:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(39288))},41966:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(39288))},27865:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(39288))},42822:function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(39288))},13122:function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(39288))},96061:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(39288))},85696:function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(39288))},62844:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_ag_sept_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(39288))},86593:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},8556:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:4},invalidDate:"Fecha invlida"})}(n(39288))},87942:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(39288))},67579:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"})}(n(39288))},4609:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["mne sekundi","mni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?s[n][2]?s[n][2]:s[n][1]:r?s[n][0]:s[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},50407:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},31343:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(39288))},59250:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];function r(e,r,s,i){var a="";switch(s){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"ss":a=i?"sekunnin":"sekuntia";break;case"m":return i?"minuutin":"minuutti";case"mm":a=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":a=i?"tunnin":"tuntia";break;case"d":return i?"pivn":"piv";case"dd":a=i?"pivn":"piv";break;case"M":return i?"kuukauden":"kuukausi";case"MM":a=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":a=i?"vuoden":"vuotta"}return function(e,r){return e<10?r?n[e]:t[e]:e}(e,i)+" "+a}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},48897:function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(39288))},35811:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},1390:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(39288))},8322:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(39288))},29720:function(e,t,n){!function(e){"use strict";var t=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,n=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i];e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:t,monthsShortRegex:t,monthsStrictRegex:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,monthsShortStrictRegex:/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(39288))},56525:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(39288))},28771:function(e,t,n){!function(e){"use strict";e.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Meitheamh","Iil","Lnasa","Men Fmhair","Deireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","Mrt","Aib","Beal","Meith","Iil","Ln","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Sathairn"],weekdaysShort:["Domh","Luan","Mirt","Cad","Dar","Aoine","Sath"],weekdaysMin:["Do","Lu","M","C","D","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d monna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(39288))},12220:function(e,t,n){!function(e){"use strict";e.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(39288))},48618:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},34427:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:[" "," "],ss:[e+" ",e+" "],m:[" "," "],mm:[e+" ",e+" "],h:[" "," "],hh:[e+" ",e+" "],d:[" "," "],dd:[e+" ",e+" "],M:[" "," "],MM:[e+" ",e+" "],y:[" "," "],yy:[e+" ",e+" "]};return r?s[n][0]:s[n][1]}e.defineLocale("gom-deva",{months:{standalone:"___________".split("_"),format:"___________".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm []",LTS:"A h:mm:ss []",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm []",LLLL:"dddd, MMMM Do, YYYY, A h:mm []",llll:"ddd, D MMM YYYY, A h:mm []"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e,t){return"D"===t?e+"":e},week:{dow:0,doy:3},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>12?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<12?"":e<16?"":e<20?"":""}})}(n(39288))},33188:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return r?s[n][0]:s[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(39288))},75678:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},72114:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){return e<5?" ":e<10?"":e<12?n?'"':" ":e<18?n?'"':" ":""}})}(n(39288))},86460:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=[/^/i,/^|/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^|/i,/^/i,/^|/i,/^|/i];e.defineLocale("hi",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},monthsParse:r,longMonthsParse:r,shortMonthsParse:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],monthsRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsShortRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsStrictRegex:/^(?||?|?|?|?|?|?|?|||?\.?||\.?||?||?)/i,monthsShortStrictRegex:/^(\.?|\.?|?|\.?|?|?|\.?|\.?|\.?|\.?|\.?|\.?)/i,calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},98477:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+(1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi");case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+(1===e?"minuta":2===e||3===e||4===e?"minute":"minuta");case"h":return t?"jedan sat":"jednog sata";case"hh":return r+(1===e?"sat":2===e||3===e||4===e?"sata":"sati");case"dd":return r+(1===e?"dan":"dana");case"MM":return r+(1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci");case"yy":return r+(1===e?"godina":2===e||3===e||4===e?"godine":"godina")}}e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prolu] [nedjelju] [u] LT";case 3:return"[prolu] [srijedu] [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},11918:function(e,t,n){!function(e){"use strict";var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(e,t,n,r){var s=e;switch(n){case"s":return r||t?"nhny msodperc":"nhny msodperce";case"ss":return s+(r||t)?" msodperc":" msodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return s+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" ra":" rja");case"hh":return s+(r||t?" ra":" rja");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return s+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hnap":" hnapja");case"MM":return s+(r||t?" hnap":" hnapja");case"y":return"egy"+(r||t?" v":" ve");case"yy":return s+(r||t?" v":" ve")}return""}function r(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan._feb._mrc._pr._mj._jn._jl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},10229:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})}(n(39288))},44663:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(39288))},14266:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,r,s){var i=e+" ";switch(r){case"s":return n||s?"nokkrar sekndur":"nokkrum sekndum";case"ss":return t(e)?i+(n||s?"sekndur":"sekndum"):i+"seknda";case"m":return n?"mnta":"mntu";case"mm":return t(e)?i+(n||s?"mntur":"mntum"):n?i+"mnta":i+"mntu";case"hh":return t(e)?i+(n||s?"klukkustundir":"klukkustundum"):i+"klukkustund";case"d":return n?"dagur":s?"dag":"degi";case"dd":return t(e)?n?i+"dagar":i+(s?"daga":"dgum"):n?i+"dagur":i+(s?"dag":"degi");case"M":return n?"mnuur":s?"mnu":"mnui";case"MM":return t(e)?n?i+"mnuir":i+(s?"mnui":"mnuum"):n?i+"mnuur":i+(s?"mnu":"mnui");case"y":return n||s?"r":"ri";case"yy":return t(e)?i+(n||s?"r":"rum"):i+(n||s?"r":"ri")}}e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},14841:function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},25732:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},71812:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(e,t){return""===t[1]?1:parseInt(t[1]||e,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"y":return 1===e?"":e+"";case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(39288))},22715:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(39288))},78067:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(|||||)(|)/,(function(e,t,n){return""===n?t+"":t+n+""}))},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):e},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}})}(n(39288))},13609:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(39288))},38506:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(39288))},49782:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e){return e+""},week:{dow:0,doy:6}})}(n(39288))},55978:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""}})}(n(39288))},29238:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=[" ","","","","","","","",""," "," "," "];e.defineLocale("ku",{months:r,monthsShort:r,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return//.test(e)},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(39288))},89428:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(39288))},32687:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?s[n][0]:s[n][1]}function n(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return n(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return n(e)}return n(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return n(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return n(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},30459:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}})}(n(39288))},57162:function(e,t,n){!function(e){"use strict";var t={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(e,t,n,r){return t?s(n)[0]:r?s(n)[1]:s(n)[2]}function r(e){return e%10==0||e>10&&e<20}function s(e){return t[e].split("_")}function i(e,t,i,a){var o=e+" ";return 1===e?o+n(0,t,i[0],a):t?o+(r(e)?s(i)[1]:s(i)[0]):a?o+s(i)[1]:o+(r(e)?s(i)[1]:s(i)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(e,t,n,r){return t?"kelios sekunds":r?"keli sekundi":"kelias sekundes"},ss:i,m:n,mm:i,h:n,hh:i,d:n,dd:i,M:n,MM:i,y:n,yy:i},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(39288))},70703:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function r(e,r,s){return e+" "+n(t[s],e,r)}function s(e,r,s){return n(t[s],e,r)}e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(e,t){return t?"daas sekundes":"dam sekundm"},ss:r,m:s,mm:r,h:s,hh:r,d:s,dd:r,M:s,MM:r,y:s,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},17600:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var s=t.words[r];return 1===r.length?n?s[0]:s[1]:e+" "+t.correctGrammaticalCase(e,s)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},86185:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},7770:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(39288))},67655:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||" "===t||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})}(n(39288))},47539:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){switch(n){case"s":return t?" ":" ";case"ss":return e+(t?" ":" ");case"m":case"mm":return e+(t?" ":" ");case"h":case"hh":return e+(t?" ":" ");case"d":case"dd":return e+(t?" ":" ");case"M":case"MM":return e+(t?" ":" ");case"y":case"yy":return e+(t?" ":" ");default:return e}}e.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" ";default:return e}}})}(n(39288))},97098:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function r(e,t,n,r){var s="";if(t)switch(n){case"s":s=" ";break;case"ss":s="%d ";break;case"m":s=" ";break;case"mm":s="%d ";break;case"h":s=" ";break;case"hh":s="%d ";break;case"d":s=" ";break;case"dd":s="%d ";break;case"M":s=" ";break;case"MM":s="%d ";break;case"y":s=" ";break;case"yy":s="%d "}else switch(n){case"s":s=" ";break;case"ss":s="%d ";break;case"m":s=" ";break;case"mm":s="%d ";break;case"h":s=" ";break;case"hh":s="%d ";break;case"d":s=" ";break;case"dd":s="%d ";break;case"M":s=" ";break;case"MM":s="%d ";break;case"y":s=" ";break;case"yy":s="%d "}return s.replace(/%d/i,e)}e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t?e:""===t||""===t||""===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"":e<12?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},68789:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(39288))},120:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(39288))},11415:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},92352:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(39288))},52375:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},93336:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(39288))},87186:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],s=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(39288))},27853:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],s=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(39288))},66543:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},61119:function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genir_febrir_mar_abril_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),format:"de genir_de febrir_de mar_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[ui a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ir a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(39288))},60574:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},55631:function(e,t,n){!function(e){"use strict";var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),r=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function s(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var r=e+" ";switch(n){case"ss":return r+(s(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut";case"mm":return r+(s(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return r+(s(e)?"godziny":"godzin");case"ww":return r+(s(e)?"tygodnie":"tygodni");case"MM":return r+(s(e)?"miesice":"miesicy");case"yy":return r+(s(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,r){return e?/D MMMM/.test(r)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:i,m:i,mm:i,h:i,hh:i,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:i,M:"miesic",MM:i,y:"rok",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},96851:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"do_2_3_4_5_6_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",invalidDate:"Data invlida"})}(n(39288))},77222:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},5849:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"sptmni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:t,m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,w:"o sptmn",ww:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(39288))},85822:function(e,t,n){!function(e){"use strict";function t(e,t,n){return"m"===n?t?"":"":e+" "+(r=+e,s={ss:t?"__":"__",mm:t?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"}[n].split("_"),r%10==1&&r%100!=11?s[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?s[1]:s[2]);var r,s}var n=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:t,m:t,mm:t,h:"",hh:t,d:"",dd:t,w:"",ww:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:4}})}(n(39288))},51075:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(39288))},89991:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},78022:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,n){return e>11?n?"..":" ":n?"..":" "}})}(n(39288))},77768:function(e,t,n){!function(e){"use strict";var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function r(e){return e>1&&e<5}function s(e,t,n,s){var i=e+" ";switch(n){case"s":return t||s?"pr seknd":"pr sekundami";case"ss":return t||s?i+(r(e)?"sekundy":"seknd"):i+"sekundami";case"m":return t?"minta":s?"mintu":"mintou";case"mm":return t||s?i+(r(e)?"minty":"mint"):i+"mintami";case"h":return t?"hodina":s?"hodinu":"hodinou";case"hh":return t||s?i+(r(e)?"hodiny":"hodn"):i+"hodinami";case"d":return t||s?"de":"dom";case"dd":return t||s?i+(r(e)?"dni":"dn"):i+"dami";case"M":return t||s?"mesiac":"mesiacom";case"MM":return t||s?i+(r(e)?"mesiace":"mesiacov"):i+"mesiacmi";case"y":return t||s?"rok":"rokom";case"yy":return t||s?i+(r(e)?"roky":"rokov"):i+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:case 4:case 5:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s,ss:s,m:s,mm:s,h:s,hh:s,d:s,dd:s,M:s,MM:s,y:s,yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},13455:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"ss":return s+(1===e?t?"sekundo":"sekundi":2===e?t||r?"sekundi":"sekundah":e<5?t||r?"sekunde":"sekundah":"sekund");case"m":return t?"ena minuta":"eno minuto";case"mm":return s+(1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami");case"h":return t?"ena ura":"eno uro";case"hh":return s+(1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami");case"d":return t||r?"en dan":"enim dnem";case"dd":return s+(1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi");case"M":return t||r?"en mesec":"enim mesecem";case"MM":return s+(1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci");case"y":return t||r?"eno leto":"enim letom";case"yy":return s+(1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti")}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},50840:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},83478:function(e,t,n){!function(e){"use strict";var t={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],d:[" "," "],dd:["","",""],M:[" "," "],MM:["","",""],y:[" "," "],yy:["","",""]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,r,s){var i,a=t.words[r];return 1===r.length?"y"===r&&n?" ":s||n?a[0]:a[1]:(i=t.correctGrammaticalCase(e,a),"yy"===r&&n&&""===i?e+" ":e+" "+i)}};e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},80330:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,r,s){var i,a=t.words[r];return 1===r.length?"y"===r&&n?"jedna godina":s||n?a[0]:a[1]:(i=t.correctGrammaticalCase(e,a),"yy"===r&&n&&"godinu"===i?e+" godina":e+" "+i)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(39288))},71601:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(39288))},19292:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t||2===t?":a":":e")},week:{dow:1,doy:4}})}(n(39288))},61498:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(39288))},65210:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||||/,meridiem:function(e,t,n){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t||""===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(39288))},4968:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(39288))},27285:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(39288))},12961:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("tg",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=11?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<11?"":e<16?"":e<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(39288))},40043:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(39288))},64282:function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'nji",4:"'nji",100:"'nji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"anwar_Fewral_Mart_Aprel_Ma_Iun_Iul_Awgust_Sentabr_Oktabr_Noabr_Dekabr".split("_"),monthsShort:"an_Few_Mar_Apr_Ma_In_Il_Awg_Sen_Okt_No_Dek".split("_"),weekdays:"ekenbe_Duenbe_Sienbe_arenbe_Penenbe_Anna_enbe".split("_"),weekdaysShort:"ek_Du_Si_ar_Pen_Ann_en".split("_"),weekdaysMin:"k_D_S_r_Pn_An_n".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s so",past:"%s ",s:"birne sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gn",dd:"%d gn",M:"bir a",MM:"%d a",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var r=e%10;return e+(t[r]||t[e%100-r]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(39288))},60082:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(39288))},29422:function(e,t,n){!function(e){"use strict";var t="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e,n,r,s){var i=function(e){var n=Math.floor(e%1e3/100),r=Math.floor(e%100/10),s=e%10,i="";return n>0&&(i+=t[n]+"vatlh"),r>0&&(i+=(""!==i?" ":"")+t[r]+"maH"),s>0&&(i+=(""!==i?" ":"")+t[s]),""===i?"pagh":i}(e);switch(r){case"ss":return i+" lup";case"mm":return i+" tup";case"hh":return i+" rep";case"dd":return i+" jaj";case"MM":return i+" jar";case"yy":return i+" DIS"}}e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:n,m:"wa tup",mm:n,h:"wa rep",hh:n,d:"wa jaj",dd:n,M:"wa jar",MM:n,y:"wa DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},84546:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"":"":n?"s":"S"},meridiemParse:/||s|S/,isPM:function(e){return"s"===e||"S"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'nc";var r=e%10;return e+(t[r]||t[e%100-r]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(39288))},61153:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return r||t?s[n][0]:s[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(39288))},82853:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(39288))},57358:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(39288))},92639:function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(e,t){return 12===e&&(e=0)," "===t||""===t||" "===t?e:" "===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?" ":r<900?"":r<1130?" ":r<1230?"":r<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-";case"w":case"W":return e+"-";default:return e}},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(39288))},55188:function(e,t,n){!function(e){"use strict";function t(e,t,n){return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+(r=+e,s={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),r%10==1&&r%100!=11?s[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?s[1]:s[2]);var r,s}function n(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:n("[ "),nextDay:n("[ "),lastDay:n("[ "),nextWeek:n("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[] dddd [").call(this);case 1:case 2:case 4:return n("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:t,m:t,mm:t,h:"",hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(39288))},6726:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(39288))},36619:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(39288))},10780:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(39288))},39404:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(39288))},94720:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(39288))},21051:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(39288))},50717:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddLT":"[]dddLT"},lastDay:"[]LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddLT":"[]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(39288))},92824:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1200?"":1200===r?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(39288))},47819:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"D/M/YYYY",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(39288))},23503:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(39288))},39288:function(e,t,n){e=n.nmd(e);var r=n(82784);e.exports=function(){"use strict";var t,s;function i(){return t.apply(null,arguments)}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(c(e,t))return!1;return!0}function l(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var n,r=[],s=e.length;for(n=0;n<s;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t,n,r){return St(e,t,n,r,!0).utc()}function _(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function y(e){if(null==e._isValid){var t=_(e),n=s.call(t.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=m(NaN);return null!=e?f(_(t),e):_(t).userInvalidated=!0,t}s=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var w=i.momentProperties=[],b=!1;function v(e,t){var n,r,s,i=w.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=_(t)),l(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)l(s=t[r=w[n]])||(e[r]=s);return e}function k(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,i.updateOffset(this),b=!1)}function M(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function E(e){!1===i.suppressDeprecationWarnings&&void 0!==r&&r.warn&&r.warn("Deprecation warning: "+e)}function L(e,t){var n=!0;return f((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,s,a,o=[],d=arguments.length;for(s=0;s<d;s++){if(r="","object"==typeof arguments[s]){for(a in r+="\n["+s+"] ",arguments[0])c(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[s];o.push(r)}E(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var S,D={};function T(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),D[e]||(E(t),D[e]=!0)}function R(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function P(e,t){var n,r=f({},e);for(n in t)c(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&o(e[n])&&(r[n]=f({},r[n]));return r}function I(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};function A(e,t,n){var r=""+Math.abs(e),s=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var Y=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},x={};function C(e,t,n,r){var s=r;"string"==typeof r&&(s=function(){return this[r]()}),e&&(x[e]=s),t&&(x[t[0]]=function(){return A(s.apply(this,arguments),t[1],t[2])}),n&&(x[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function H(e,t){return e.isValid()?(t=j(t,e.localeData()),N[t]=N[t]||function(e){var t,n,r,s=e.match(Y);for(t=0,n=s.length;t<n;t++)x[s[t]]?s[t]=x[s[t]]:s[t]=(r=s[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,i="";for(r=0;r<n;r++)i+=R(s[r])?s[r].call(t,e):s[r];return i}}(t),N[t](e)):e.localeData().invalidDate()}function j(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(O.lastIndex=0;n>=0&&O.test(e);)e=e.replace(O,r),O.lastIndex=0,n-=1;return e}var B={};function z(e,t){var n=e.toLowerCase();B[n]=B[n+"s"]=B[t]=e}function U(e){return"string"==typeof e?B[e]||B[e.toLowerCase()]:void 0}function F(e){var t,n,r={};for(n in e)c(e,n)&&(t=U(n))&&(r[t]=e[n]);return r}var V={};function W(e,t){V[e]=t}function $(e){return e%4==0&&e%100!=0||e%400==0}function G(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function q(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=G(t)),n}function K(e,t){return function(n){return null!=n?(J(this,e,n),i.updateOffset(this,t),this):Z(this,e)}}function Z(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function J(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&$(e.year())&&1===e.month()&&29===e.date()?(n=q(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Me(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var Q,X=/\d/,ee=/\d\d/,te=/\d{3}/,ne=/\d{4}/,re=/[+-]?\d{6}/,se=/\d\d?/,ie=/\d\d\d\d?/,ae=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,ce=/\d{1,4}/,de=/[+-]?\d{1,6}/,le=/\d+/,ue=/[+-]?\d+/,he=/Z|[+-]\d\d:?\d\d/gi,pe=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function me(e,t,n){Q[e]=R(t)?t:function(e,r){return e&&n?n:t}}function _e(e,t){return c(Q,e)?Q[e](t._strict,t._locale):new RegExp(ye(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,s){return t||n||r||s}))))}function ye(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Q={};var ge={};function we(e,t){var n,r,s=t;for("string"==typeof e&&(e=[e]),u(t)&&(s=function(e,n){n[t]=q(e)}),r=e.length,n=0;n<r;n++)ge[e[n]]=s}function be(e,t){we(e,(function(e,n,r,s){r._w=r._w||{},t(e,r._w,r,s)}))}function ve(e,t,n){null!=t&&c(ge,e)&&ge[e](t,n._a,n,e)}var ke;function Me(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?$(e)?29:28:31-r%7%2}ke=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C("M",["MM",2],"Mo",(function(){return this.month()+1})),C("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),C("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),z("month","M"),W("month",8),me("M",se),me("MM",se,ee),me("MMM",(function(e,t){return t.monthsShortRegex(e)})),me("MMMM",(function(e,t){return t.monthsRegex(e)})),we(["M","MM"],(function(e,t){t[1]=q(e)-1})),we(["MMM","MMMM"],(function(e,t,n,r){var s=n._locale.monthsParse(e,r,n._strict);null!=s?t[1]=s:_(n).invalidMonth=e}));var Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Le="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,De=fe,Te=fe;function Re(e,t,n){var r,s,i,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=m([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=ke.call(this._shortMonthsParse,a))?s:null:-1!==(s=ke.call(this._longMonthsParse,a))?s:null:"MMM"===t?-1!==(s=ke.call(this._shortMonthsParse,a))||-1!==(s=ke.call(this._longMonthsParse,a))?s:null:-1!==(s=ke.call(this._longMonthsParse,a))||-1!==(s=ke.call(this._shortMonthsParse,a))?s:null}function Pe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=q(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Me(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ie(e){return null!=e?(Pe(this,e),i.updateOffset(this,!0),this):Z(this,"Month")}function Ae(){function e(e,t){return t.length-e.length}var t,n,r=[],s=[],i=[];for(t=0;t<12;t++)n=m([2e3,t]),r.push(this.monthsShort(n,"")),s.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),s.sort(e),i.sort(e),t=0;t<12;t++)r[t]=ye(r[t]),s[t]=ye(s[t]);for(t=0;t<24;t++)i[t]=ye(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ye(e){return $(e)?366:365}C("Y",0,0,(function(){var e=this.year();return e<=9999?A(e,4):"+"+e})),C(0,["YY",2],0,(function(){return this.year()%100})),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),z("year","y"),W("year",1),me("Y",ue),me("YY",se,ee),me("YYYY",ce,ne),me("YYYYY",de,re),me("YYYYYY",de,re),we(["YYYYY","YYYYYY"],0),we("YYYY",(function(e,t){t[0]=2===e.length?i.parseTwoDigitYear(e):q(e)})),we("YY",(function(e,t){t[0]=i.parseTwoDigitYear(e)})),we("Y",(function(e,t){t[0]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return q(e)+(q(e)>68?1900:2e3)};var Oe=K("FullYear",!0);function Ne(e,t,n,r,s,i,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,s,i,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,s,i,a),o}function xe(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ce(e,t,n){var r=7+t-n;return-(7+xe(e,0,r).getUTCDay()-t)%7+r-1}function He(e,t,n,r,s){var i,a,o=1+7*(t-1)+(7+n-r)%7+Ce(e,r,s);return o<=0?a=Ye(i=e-1)+o:o>Ye(e)?(i=e+1,a=o-Ye(e)):(i=e,a=o),{year:i,dayOfYear:a}}function je(e,t,n){var r,s,i=Ce(e.year(),t,n),a=Math.floor((e.dayOfYear()-i-1)/7)+1;return a<1?r=a+Be(s=e.year()-1,t,n):a>Be(e.year(),t,n)?(r=a-Be(e.year(),t,n),s=e.year()+1):(s=e.year(),r=a),{week:r,year:s}}function Be(e,t,n){var r=Ce(e,t,n),s=Ce(e+1,t,n);return(Ye(e)-r+s)/7}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),W("week",5),W("isoWeek",5),me("w",se),me("ww",se,ee),me("W",se),me("WW",se,ee),be(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=q(e)}));function ze(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("d",0,"do","day"),C("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),C("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),C("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),me("d",se),me("e",se),me("E",se),me("dd",(function(e,t){return t.weekdaysMinRegex(e)})),me("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),me("dddd",(function(e,t){return t.weekdaysRegex(e)})),be(["dd","ddd","dddd"],(function(e,t,n,r){var s=n._locale.weekdaysParse(e,r,n._strict);null!=s?t.d=s:_(n).invalidWeekday=e})),be(["d","e","E"],(function(e,t,n,r){t[r]=q(e)}));var Ue="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ve="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),We=fe,$e=fe,Ge=fe;function qe(e,t,n){var r,s,i,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=m([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=ke.call(this._weekdaysParse,a))?s:null:"ddd"===t?-1!==(s=ke.call(this._shortWeekdaysParse,a))?s:null:-1!==(s=ke.call(this._minWeekdaysParse,a))?s:null:"dddd"===t?-1!==(s=ke.call(this._weekdaysParse,a))||-1!==(s=ke.call(this._shortWeekdaysParse,a))||-1!==(s=ke.call(this._minWeekdaysParse,a))?s:null:"ddd"===t?-1!==(s=ke.call(this._shortWeekdaysParse,a))||-1!==(s=ke.call(this._weekdaysParse,a))||-1!==(s=ke.call(this._minWeekdaysParse,a))?s:null:-1!==(s=ke.call(this._minWeekdaysParse,a))||-1!==(s=ke.call(this._weekdaysParse,a))||-1!==(s=ke.call(this._shortWeekdaysParse,a))?s:null}function Ke(){function e(e,t){return t.length-e.length}var t,n,r,s,i,a=[],o=[],c=[],d=[];for(t=0;t<7;t++)n=m([2e3,1]).day(t),r=ye(this.weekdaysMin(n,"")),s=ye(this.weekdaysShort(n,"")),i=ye(this.weekdays(n,"")),a.push(r),o.push(s),c.push(i),d.push(r),d.push(s),d.push(i);a.sort(e),o.sort(e),c.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ze(){return this.hours()%12||12}function Je(e,t){C(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Qe(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Ze),C("k",["kk",2],0,(function(){return this.hours()||24})),C("hmm",0,0,(function(){return""+Ze.apply(this)+A(this.minutes(),2)})),C("hmmss",0,0,(function(){return""+Ze.apply(this)+A(this.minutes(),2)+A(this.seconds(),2)})),C("Hmm",0,0,(function(){return""+this.hours()+A(this.minutes(),2)})),C("Hmmss",0,0,(function(){return""+this.hours()+A(this.minutes(),2)+A(this.seconds(),2)})),Je("a",!0),Je("A",!1),z("hour","h"),W("hour",13),me("a",Qe),me("A",Qe),me("H",se),me("h",se),me("k",se),me("HH",se,ee),me("hh",se,ee),me("kk",se,ee),me("hmm",ie),me("hmmss",ae),me("Hmm",ie),me("Hmmss",ae),we(["H","HH"],3),we(["k","kk"],(function(e,t,n){var r=q(e);t[3]=24===r?0:r})),we(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),we(["h","hh"],(function(e,t,n){t[3]=q(e),_(n).bigHour=!0})),we("hmm",(function(e,t,n){var r=e.length-2;t[3]=q(e.substr(0,r)),t[4]=q(e.substr(r)),_(n).bigHour=!0})),we("hmmss",(function(e,t,n){var r=e.length-4,s=e.length-2;t[3]=q(e.substr(0,r)),t[4]=q(e.substr(r,2)),t[5]=q(e.substr(s)),_(n).bigHour=!0})),we("Hmm",(function(e,t,n){var r=e.length-2;t[3]=q(e.substr(0,r)),t[4]=q(e.substr(r))})),we("Hmmss",(function(e,t,n){var r=e.length-4,s=e.length-2;t[3]=q(e.substr(0,r)),t[4]=q(e.substr(r,2)),t[5]=q(e.substr(s))}));var Xe=K("Hours",!0);var et,tt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ee,monthsShort:Le,week:{dow:0,doy:6},weekdays:Ue,weekdaysMin:Ve,weekdaysShort:Fe,meridiemParse:/[ap]\.?m?\.?/i},nt={},rt={};function st(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function it(e){return e?e.toLowerCase().replace("_","-"):e}function at(t){var r=null;if(void 0===nt[t]&&e&&e.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(t))try{r=et._abbr,n(46700)("./"+t),ot(r)}catch(e){nt[t]=null}return nt[t]}function ot(e,t){var n;return e&&((n=l(t)?dt(e):ct(e,t))?et=n:void 0!==r&&r.warn&&r.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function ct(e,t){if(null!==t){var n,r=tt;if(t.abbr=e,null!=nt[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=nt[e]._config;else if(null!=t.parentLocale)if(null!=nt[t.parentLocale])r=nt[t.parentLocale]._config;else{if(null==(n=at(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;r=n._config}return nt[e]=new I(P(r,t)),rt[e]&&rt[e].forEach((function(e){ct(e.name,e.config)})),ot(e),nt[e]}return delete nt[e],null}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!a(e)){if(t=at(e))return t;e=[e]}return function(e){for(var t,n,r,s,i=0;i<e.length;){for(t=(s=it(e[i]).split("-")).length,n=(n=it(e[i+1]))?n.split("-"):null;t>0;){if(r=at(s.slice(0,t).join("-")))return r;if(n&&n.length>=t&&st(s,n)>=t-1)break;t--}i++}return et}(e)}function lt(e){var t,n=e._a;return n&&-2===_(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Me(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,_(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),_(e)._overflowWeeks&&-1===t&&(t=7),_(e)._overflowWeekday&&-1===t&&(t=8),_(e).overflow=t),e}var ut=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],mt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_t=/^\/?Date\((-?\d+)/i,yt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wt(e){var t,n,r,s,i,a,o=e._i,c=ut.exec(o)||ht.exec(o),d=ft.length,l=mt.length;if(c){for(_(e).iso=!0,t=0,n=d;t<n;t++)if(ft[t][1].exec(c[1])){s=ft[t][0],r=!1!==ft[t][2];break}if(null==s)return void(e._isValid=!1);if(c[3]){for(t=0,n=l;t<n;t++)if(mt[t][1].exec(c[3])){i=(c[2]||" ")+mt[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(c[4]){if(!pt.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=s+(i||"")+(a||""),Et(e)}else e._isValid=!1}function bt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function vt(e){var t,n,r,s,i,a,o,c,d=yt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(d){if(n=d[4],r=d[3],s=d[2],i=d[5],a=d[6],o=d[7],c=[bt(n),Le.indexOf(r),parseInt(s,10),parseInt(i,10),parseInt(a,10)],o&&c.push(parseInt(o,10)),t=c,!function(e,t,n){return!e||Fe.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(_(n).weekdayMismatch=!0,n._isValid=!1,!1)}(d[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return gt[e];if(t)return 0;var r=parseInt(n,10),s=r%100;return(r-s)/100*60+s}(d[8],d[9],d[10]),e._d=xe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),_(e).rfc2822=!0}else e._isValid=!1}function kt(e,t,n){return null!=e?e:null!=t?t:n}function Mt(e){var t,n,r,s,a,o=[];if(!e._d){for(r=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,r,s,i,a,o,c,d;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,a=4,n=kt(t.GG,e._a[0],je(Dt(),1,4).year),r=kt(t.W,1),((s=kt(t.E,1))<1||s>7)&&(c=!0)):(i=e._locale._week.dow,a=e._locale._week.doy,d=je(Dt(),i,a),n=kt(t.gg,e._a[0],d.year),r=kt(t.w,d.week),null!=t.d?((s=t.d)<0||s>6)&&(c=!0):null!=t.e?(s=t.e+i,(t.e<0||t.e>6)&&(c=!0)):s=i),r<1||r>Be(n,i,a)?_(e)._overflowWeeks=!0:null!=c?_(e)._overflowWeekday=!0:(o=He(n,r,s,i,a),e._a[0]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=kt(e._a[0],r[0]),(e._dayOfYear>Ye(a)||0===e._dayOfYear)&&(_(e)._overflowDayOfYear=!0),n=xe(a,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?xe:Ne).apply(null,o),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(_(e).weekdayMismatch=!0)}}function Et(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],_(e).empty=!0;var t,n,r,s,a,o,c,d=""+e._i,l=d.length,u=0;for(c=(r=j(e._f,e._locale).match(Y)||[]).length,t=0;t<c;t++)s=r[t],(n=(d.match(_e(s,e))||[])[0])&&((a=d.substr(0,d.indexOf(n))).length>0&&_(e).unusedInput.push(a),d=d.slice(d.indexOf(n)+n.length),u+=n.length),x[s]?(n?_(e).empty=!1:_(e).unusedTokens.push(s),ve(s,n,e)):e._strict&&!n&&_(e).unusedTokens.push(s);_(e).charsLeftOver=l-u,d.length>0&&_(e).unusedInput.push(d),e._a[3]<=12&&!0===_(e).bigHour&&e._a[3]>0&&(_(e).bigHour=void 0),_(e).parsedDateParts=e._a.slice(0),_(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(o=_(e).era)&&(e._a[0]=e._locale.erasConvertYear(o,e._a[0])),Mt(e),lt(e)}else vt(e);else wt(e)}function Lt(e){var t=e._i,n=e._f;return e._locale=e._locale||dt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),M(t)?new k(lt(t)):(h(t)?e._d=t:a(n)?function(e){var t,n,r,s,i,a,o=!1,c=e._f.length;if(0===c)return _(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<c;s++)i=0,a=!1,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],Et(t),y(t)&&(a=!0),i+=_(t).charsLeftOver,i+=10*_(t).unusedTokens.length,_(t).score=i,o?i<r&&(r=i,n=t):(null==r||i<r||a)&&(r=i,n=t,a&&(o=!0));f(e,n||t)}(e):n?Et(e):function(e){var t=e._i;l(t)?e._d=new Date(i.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=_t.exec(e._i);null===t?(wt(e),!1===e._isValid&&(delete e._isValid,vt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):a(t)?(e._a=p(t.slice(0),(function(e){return parseInt(e,10)})),Mt(e)):o(t)?function(e){if(!e._d){var t=F(e._i),n=void 0===t.day?t.date:t.day;e._a=p([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Mt(e)}}(e):u(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),y(e)||(e._d=null),e))}function St(e,t,n,r,s){var i,c={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&d(e)||a(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=n,c._i=e,c._f=t,c._strict=r,(i=new k(lt(Lt(c))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function Dt(e,t,n,r){return St(e,t,n,r,!1)}i.createFromInputFallback=L("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Tt=L("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Rt=L("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Pt(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Dt();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var It=["year","quarter","month","week","day","hour","minute","second","millisecond"];function At(e){var t=F(e),n=t.year||0,r=t.quarter||0,s=t.month||0,i=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,d=t.minute||0,l=t.second||0,u=t.millisecond||0;this._isValid=function(e){var t,n,r=!1,s=It.length;for(t in e)if(c(e,t)&&(-1===ke.call(It,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<s;++n)if(e[It[n]]){if(r)return!1;parseFloat(e[It[n]])!==q(e[It[n]])&&(r=!0)}return!0}(t),this._milliseconds=+u+1e3*l+6e4*d+1e3*o*60*60,this._days=+a+7*i,this._months=+s+3*r+12*n,this._data={},this._locale=dt(),this._bubble()}function Yt(e){return e instanceof At}function Ot(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Nt(e,t){C(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+A(~~(e/60),2)+t+A(~~e%60,2)}))}Nt("Z",":"),Nt("ZZ",""),me("Z",pe),me("ZZ",pe),we(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Ct(pe,e)}));var xt=/([\+\-]|\d\d)/gi;function Ct(e,t){var n,r,s=(t||"").match(e);return null===s?null:0===(r=60*(n=((s[s.length-1]||[])+"").match(xt)||["-",0,0])[1]+q(n[2]))?0:"+"===n[0]?r:-r}function Ht(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(M(e)||h(e)?e.valueOf():Dt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Dt(e).local()}function jt(e){return-Math.round(e._d.getTimezoneOffset())}function Bt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var zt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ut=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ft(e,t){var n,r,s,i,a,o,d=e,l=null;return Yt(e)?d={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(d={},t?d[t]=+e:d.milliseconds=+e):(l=zt.exec(e))?(n="-"===l[1]?-1:1,d={y:0,d:q(l[2])*n,h:q(l[3])*n,m:q(l[4])*n,s:q(l[5])*n,ms:q(Ot(1e3*l[6]))*n}):(l=Ut.exec(e))?(n="-"===l[1]?-1:1,d={y:Vt(l[2],n),M:Vt(l[3],n),w:Vt(l[4],n),d:Vt(l[5],n),h:Vt(l[6],n),m:Vt(l[7],n),s:Vt(l[8],n)}):null==d?d={}:"object"==typeof d&&("from"in d||"to"in d)&&(i=Dt(d.from),a=Dt(d.to),s=i.isValid()&&a.isValid()?(a=Ht(a,i),i.isBefore(a)?o=Wt(i,a):((o=Wt(a,i)).milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0},(d={}).ms=s.milliseconds,d.M=s.months),r=new At(d),Yt(e)&&c(e,"_locale")&&(r._locale=e._locale),Yt(e)&&c(e,"_isValid")&&(r._isValid=e._isValid),r}function Vt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Wt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(e,t){return function(n,r){var s;return null===r||isNaN(+r)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),Gt(this,Ft(n,r),e),this}}function Gt(e,t,n,r){var s=t._milliseconds,a=Ot(t._days),o=Ot(t._months);e.isValid()&&(r=null==r||r,o&&Pe(e,Z(e,"Month")+o*n),a&&J(e,"Date",Z(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),r&&i.updateOffset(e,a||o))}Ft.fn=At.prototype,Ft.invalid=function(){return Ft(NaN)};var qt=$t(1,"add"),Kt=$t(-1,"subtract");function Zt(e){return"string"==typeof e||e instanceof String}function Jt(e){return M(e)||h(e)||Zt(e)||u(e)||function(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Zt(e)})).length),t&&n}(e)||function(e){var t,n,r=o(e)&&!d(e),s=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a=i.length;for(t=0;t<a;t+=1)n=i[t],s=s||c(e,n);return r&&s}(e)||null==e}function Qt(e){var t,n=o(e)&&!d(e),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)r=r||c(e,s[t]);return n&&r}function Xt(e,t){if(e.date()<t.date())return-Xt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function en(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tn=L("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function nn(){return this._locale}var rn=1e3,sn=6e4,an=36e5,on=126227808e5;function cn(e,t){return(e%t+t)%t}function dn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-on:new Date(e,t,n).valueOf()}function ln(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-on:Date.UTC(e,t,n)}function un(e,t){return t.erasAbbrRegex(e)}function hn(){var e,t,n=[],r=[],s=[],i=[],a=this.eras();for(e=0,t=a.length;e<t;++e)r.push(ye(a[e].name)),n.push(ye(a[e].abbr)),s.push(ye(a[e].narrow)),i.push(ye(a[e].name)),i.push(ye(a[e].abbr)),i.push(ye(a[e].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function pn(e,t){C(0,[e,e.length],0,t)}function fn(e,t,n,r,s){var i;return null==e?je(this,r,s).year:(t>(i=Be(e,r,s))&&(t=i),mn.call(this,e,t,n,r,s))}function mn(e,t,n,r,s){var i=He(e,t,n,r,s),a=xe(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),me("N",un),me("NN",un),me("NNN",un),me("NNNN",(function(e,t){return t.erasNameRegex(e)})),me("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),we(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var s=n._locale.erasParse(e,r,n._strict);s?_(n).era=s:_(n).invalidEra=e})),me("y",le),me("yy",le),me("yyy",le),me("yyyy",le),me("yo",(function(e,t){return t._eraYearOrdinalRegex||le})),we(["y","yy","yyy","yyyy"],0),we(["yo"],(function(e,t,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,s):t[0]=parseInt(e,10)})),C(0,["gg",2],0,(function(){return this.weekYear()%100})),C(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),pn("gggg","weekYear"),pn("ggggg","weekYear"),pn("GGGG","isoWeekYear"),pn("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),me("G",ue),me("g",ue),me("GG",se,ee),me("gg",se,ee),me("GGGG",ce,ne),me("gggg",ce,ne),me("GGGGG",de,re),me("ggggg",de,re),be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=q(e)})),be(["gg","GG"],(function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)})),C("Q",0,"Qo","quarter"),z("quarter","Q"),W("quarter",7),me("Q",X),we("Q",(function(e,t){t[1]=3*(q(e)-1)})),C("D",["DD",2],"Do","date"),z("date","D"),W("date",9),me("D",se),me("DD",se,ee),me("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),we(["D","DD"],2),we("Do",(function(e,t){t[2]=q(e.match(se)[0])}));var _n=K("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),W("dayOfYear",4),me("DDD",oe),me("DDDD",te),we(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=q(e)})),C("m",["mm",2],0,"minute"),z("minute","m"),W("minute",14),me("m",se),me("mm",se,ee),we(["m","mm"],4);var yn=K("Minutes",!1);C("s",["ss",2],0,"second"),z("second","s"),W("second",15),me("s",se),me("ss",se,ee),we(["s","ss"],5);var gn,wn,bn=K("Seconds",!1);for(C("S",0,0,(function(){return~~(this.millisecond()/100)})),C(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),C(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),C(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),C(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),C(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),C(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),z("millisecond","ms"),W("millisecond",16),me("S",oe,X),me("SS",oe,ee),me("SSS",oe,te),gn="SSSS";gn.length<=9;gn+="S")me(gn,le);function vn(e,t){t[6]=q(1e3*("0."+e))}for(gn="S";gn.length<=9;gn+="S")we(gn,vn);wn=K("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var kn=k.prototype;function Mn(e){return e}kn.add=qt,kn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Jt(arguments[0])?(e=arguments[0],t=void 0):Qt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Dt(),r=Ht(n,this).startOf("day"),s=i.calendarFormat(this,r)||"sameElse",a=t&&(R(t[s])?t[s].call(this,n):t[s]);return this.format(a||this.localeData().calendar(s,this,Dt(n)))},kn.clone=function(){return new k(this)},kn.diff=function(e,t,n){var r,s,i;if(!this.isValid())return NaN;if(!(r=Ht(e,this)).isValid())return NaN;switch(s=6e4*(r.utcOffset()-this.utcOffset()),t=U(t)){case"year":i=Xt(this,r)/12;break;case"month":i=Xt(this,r);break;case"quarter":i=Xt(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-s)/864e5;break;case"week":i=(this-r-s)/6048e5;break;default:i=this-r}return n?i:G(i)},kn.endOf=function(e){var t,n;if(void 0===(e=U(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?ln:dn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=an-cn(t+(this._isUTC?0:this.utcOffset()*sn),an)-1;break;case"minute":t=this._d.valueOf(),t+=sn-cn(t,sn)-1;break;case"second":t=this._d.valueOf(),t+=rn-cn(t,rn)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},kn.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)},kn.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Dt(e).isValid())?Ft({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},kn.fromNow=function(e){return this.from(Dt(),e)},kn.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Dt(e).isValid())?Ft({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},kn.toNow=function(e){return this.to(Dt(),e)},kn.get=function(e){return R(this[e=U(e)])?this[e]():this},kn.invalidAt=function(){return _(this).overflow},kn.isAfter=function(e,t){var n=M(e)?e:Dt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=U(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},kn.isBefore=function(e,t){var n=M(e)?e:Dt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=U(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},kn.isBetween=function(e,t,n,r){var s=M(e)?e:Dt(e),i=M(t)?t:Dt(t);return!!(this.isValid()&&s.isValid()&&i.isValid())&&("("===(r=r||"()")[0]?this.isAfter(s,n):!this.isBefore(s,n))&&(")"===r[1]?this.isBefore(i,n):!this.isAfter(i,n))},kn.isSame=function(e,t){var n,r=M(e)?e:Dt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=U(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},kn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},kn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},kn.isValid=function(){return y(this)},kn.lang=tn,kn.locale=en,kn.localeData=nn,kn.max=Rt,kn.min=Tt,kn.parsingFlags=function(){return f({},_(this))},kn.set=function(e,t){if("object"==typeof e){var n,r=function(e){var t,n=[];for(t in e)c(e,t)&&n.push({unit:t,priority:V[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=F(e)),s=r.length;for(n=0;n<s;n++)this[r[n].unit](e[r[n].unit])}else if(R(this[e=U(e)]))return this[e](t);return this},kn.startOf=function(e){var t,n;if(void 0===(e=U(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?ln:dn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=cn(t+(this._isUTC?0:this.utcOffset()*sn),an);break;case"minute":t=this._d.valueOf(),t-=cn(t,sn);break;case"second":t=this._d.valueOf(),t-=cn(t,rn)}return this._d.setTime(t),i.updateOffset(this,!0),this},kn.subtract=Kt,kn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},kn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},kn.toDate=function(){return new Date(this.valueOf())},kn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},kn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r="moment",s="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",n=s+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(kn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),kn.toJSON=function(){return this.isValid()?this.toISOString():null},kn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},kn.unix=function(){return Math.floor(this.valueOf()/1e3)},kn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},kn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},kn.eraName=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""},kn.eraNarrow=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""},kn.eraAbbr=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""},kn.eraYear=function(){var e,t,n,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return(this.year()-i(s[e].since).year())*n+s[e].offset;return this.year()},kn.year=Oe,kn.isLeapYear=function(){return $(this.year())},kn.weekYear=function(e){return fn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},kn.isoWeekYear=function(e){return fn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},kn.quarter=kn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},kn.month=Ie,kn.daysInMonth=function(){return Me(this.year(),this.month())},kn.week=kn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},kn.isoWeek=kn.isoWeeks=function(e){var t=je(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},kn.weeksInYear=function(){var e=this.localeData()._week;return Be(this.year(),e.dow,e.doy)},kn.weeksInWeekYear=function(){var e=this.localeData()._week;return Be(this.weekYear(),e.dow,e.doy)},kn.isoWeeksInYear=function(){return Be(this.year(),1,4)},kn.isoWeeksInISOWeekYear=function(){return Be(this.isoWeekYear(),1,4)},kn.date=_n,kn.day=kn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},kn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},kn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},kn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},kn.hour=kn.hours=Xe,kn.minute=kn.minutes=yn,kn.second=kn.seconds=bn,kn.millisecond=kn.milliseconds=wn,kn.utcOffset=function(e,t,n){var r,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ct(pe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=jt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),s!==e&&(!t||this._changeInProgress?Gt(this,Ft(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:jt(this)},kn.utc=function(e){return this.utcOffset(0,e)},kn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jt(this),"m")),this},kn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ct(he,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},kn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Dt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},kn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},kn.isLocal=function(){return!!this.isValid()&&!this._isUTC},kn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},kn.isUtc=Bt,kn.isUTC=Bt,kn.zoneAbbr=function(){return this._isUTC?"UTC":""},kn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},kn.dates=L("dates accessor is deprecated. Use date instead.",_n),kn.months=L("months accessor is deprecated. Use month instead",Ie),kn.years=L("years accessor is deprecated. Use year instead",Oe),kn.zone=L("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),kn.isDSTShifted=L("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return v(t,this),(t=Lt(t))._a?(e=t._isUTC?m(t._a):Dt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var r,s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(r=0;r<s;r++)(n&&e[r]!==t[r]||!n&&q(e[r])!==q(t[r]))&&a++;return a+i}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var En=I.prototype;function Ln(e,t,n,r){var s=dt(),i=m().set(r,t);return s[n](i,e)}function Sn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return Ln(e,t,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=Ln(e,r,n,"month");return s}function Dn(e,t,n,r){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var s,i=dt(),a=e?i._week.dow:0,o=[];if(null!=n)return Ln(t,(n+a)%7,r,"day");for(s=0;s<7;s++)o[s]=Ln(t,(s+a)%7,r,"day");return o}En.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return R(r)?r.call(t,n):r},En.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(Y).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},En.invalidDate=function(){return this._invalidDate},En.ordinal=function(e){return this._ordinal.replace("%d",e)},En.preparse=Mn,En.postformat=Mn,En.relativeTime=function(e,t,n,r){var s=this._relativeTime[n];return R(s)?s(e,t,n,r):s.replace(/%d/i,e)},En.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return R(n)?n(t):n.replace(/%s/i,t)},En.set=function(e){var t,n;for(n in e)c(e,n)&&(R(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},En.eras=function(e,t){var n,r,s,a=this._eras||dt("en")._eras;for(n=0,r=a.length;n<r;++n)switch("string"==typeof a[n].since&&(s=i(a[n].since).startOf("day"),a[n].since=s.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":s=i(a[n].until).startOf("day").valueOf(),a[n].until=s.valueOf()}return a},En.erasParse=function(e,t,n){var r,s,i,a,o,c=this.eras();for(e=e.toUpperCase(),r=0,s=c.length;r<s;++r)if(i=c[r].name.toUpperCase(),a=c[r].abbr.toUpperCase(),o=c[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return c[r];break;case"NNNN":if(i===e)return c[r];break;case"NNNNN":if(o===e)return c[r]}else if([i,a,o].indexOf(e)>=0)return c[r]},En.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n},En.erasAbbrRegex=function(e){return c(this,"_erasAbbrRegex")||hn.call(this),e?this._erasAbbrRegex:this._erasRegex},En.erasNameRegex=function(e){return c(this,"_erasNameRegex")||hn.call(this),e?this._erasNameRegex:this._erasRegex},En.erasNarrowRegex=function(e){return c(this,"_erasNarrowRegex")||hn.call(this),e?this._erasNarrowRegex:this._erasRegex},En.months=function(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Se).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone},En.monthsShort=function(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Se.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},En.monthsParse=function(e,t,n){var r,s,i;if(this._monthsParseExact)return Re.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=m([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},En.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ae.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Te),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},En.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ae.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=De),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},En.week=function(e){return je(e,this._week.dow,this._week.doy).week},En.firstDayOfYear=function(){return this._week.doy},En.firstDayOfWeek=function(){return this._week.dow},En.weekdays=function(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?ze(n,this._week.dow):e?n[e.day()]:n},En.weekdaysMin=function(e){return!0===e?ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},En.weekdaysShort=function(e){return!0===e?ze(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},En.weekdaysParse=function(e,t,n){var r,s,i;if(this._weekdaysParseExact)return qe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=m([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},En.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=We),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},En.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$e),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},En.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ge),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},En.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},En.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ot("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===q(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=L("moment.lang is deprecated. Use moment.locale instead.",ot),i.langData=L("moment.langData is deprecated. Use moment.localeData instead.",dt);var Tn=Math.abs;function Rn(e,t,n,r){var s=Ft(t,n);return e._milliseconds+=r*s._milliseconds,e._days+=r*s._days,e._months+=r*s._months,e._bubble()}function Pn(e){return e<0?Math.floor(e):Math.ceil(e)}function In(e){return 4800*e/146097}function An(e){return 146097*e/4800}function Yn(e){return function(){return this.as(e)}}var On=Yn("ms"),Nn=Yn("s"),xn=Yn("m"),Cn=Yn("h"),Hn=Yn("d"),jn=Yn("w"),Bn=Yn("M"),zn=Yn("Q"),Un=Yn("y");function Fn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Vn=Fn("milliseconds"),Wn=Fn("seconds"),$n=Fn("minutes"),Gn=Fn("hours"),qn=Fn("days"),Kn=Fn("months"),Zn=Fn("years");var Jn=Math.round,Qn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Xn(e,t,n,r,s){return s.relativeTime(t||1,!!n,e,r)}var er=Math.abs;function tr(e){return(e>0)-(e<0)||+e}function nr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,s,i,a,o,c=er(this._milliseconds)/1e3,d=er(this._days),l=er(this._months),u=this.asSeconds();return u?(e=G(c/60),t=G(e/60),c%=60,e%=60,n=G(l/12),l%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",s=u<0?"-":"",i=tr(this._months)!==tr(u)?"-":"",a=tr(this._days)!==tr(u)?"-":"",o=tr(this._milliseconds)!==tr(u)?"-":"",s+"P"+(n?i+n+"Y":"")+(l?i+l+"M":"")+(d?a+d+"D":"")+(t||e||c?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(c?o+r+"S":"")):"P0D"}var rr=At.prototype;return rr.isValid=function(){return this._isValid},rr.abs=function(){var e=this._data;return this._milliseconds=Tn(this._milliseconds),this._days=Tn(this._days),this._months=Tn(this._months),e.milliseconds=Tn(e.milliseconds),e.seconds=Tn(e.seconds),e.minutes=Tn(e.minutes),e.hours=Tn(e.hours),e.months=Tn(e.months),e.years=Tn(e.years),this},rr.add=function(e,t){return Rn(this,e,t,1)},rr.subtract=function(e,t){return Rn(this,e,t,-1)},rr.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=U(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+In(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(An(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},rr.asMilliseconds=On,rr.asSeconds=Nn,rr.asMinutes=xn,rr.asHours=Cn,rr.asDays=Hn,rr.asWeeks=jn,rr.asMonths=Bn,rr.asQuarters=zn,rr.asYears=Un,rr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},rr._bubble=function(){var e,t,n,r,s,i=this._milliseconds,a=this._days,o=this._months,c=this._data;return i>=0&&a>=0&&o>=0||i<=0&&a<=0&&o<=0||(i+=864e5*Pn(An(o)+a),a=0,o=0),c.milliseconds=i%1e3,e=G(i/1e3),c.seconds=e%60,t=G(e/60),c.minutes=t%60,n=G(t/60),c.hours=n%24,a+=G(n/24),o+=s=G(In(a)),a-=Pn(An(s)),r=G(o/12),o%=12,c.days=a,c.months=o,c.years=r,this},rr.clone=function(){return Ft(this)},rr.get=function(e){return e=U(e),this.isValid()?this[e+"s"]():NaN},rr.milliseconds=Vn,rr.seconds=Wn,rr.minutes=$n,rr.hours=Gn,rr.days=qn,rr.weeks=function(){return G(this.days()/7)},rr.months=Kn,rr.years=Zn,rr.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,s=!1,i=Qn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(s=e),"object"==typeof t&&(i=Object.assign({},Qn,t),null!=t.s&&null==t.ss&&(i.ss=t.s-1)),r=function(e,t,n,r){var s=Ft(e).abs(),i=Jn(s.as("s")),a=Jn(s.as("m")),o=Jn(s.as("h")),c=Jn(s.as("d")),d=Jn(s.as("M")),l=Jn(s.as("w")),u=Jn(s.as("y")),h=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(h=h||l<=1&&["w"]||l<n.w&&["ww",l]),(h=h||d<=1&&["M"]||d<n.M&&["MM",d]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=r,Xn.apply(null,h)}(this,!s,i,n=this.localeData()),s&&(r=n.pastFuture(+this,r)),n.postformat(r)},rr.toISOString=nr,rr.toString=nr,rr.toJSON=nr,rr.locale=en,rr.localeData=nn,rr.toIsoString=L("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nr),rr.lang=tn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),me("x",ue),me("X",/[+-]?\d+(\.\d{1,3})?/),we("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),we("x",(function(e,t,n){n._d=new Date(q(e))})),i.version="2.29.4",t=Dt,i.fn=kn,i.min=function(){return Pt("isBefore",[].slice.call(arguments,0))},i.max=function(){return Pt("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=m,i.unix=function(e){return Dt(1e3*e)},i.months=function(e,t){return Sn(e,t,"months")},i.isDate=h,i.locale=ot,i.invalid=g,i.duration=Ft,i.isMoment=M,i.weekdays=function(e,t,n){return Dn(e,t,n,"weekdays")},i.parseZone=function(){return Dt.apply(null,arguments).parseZone()},i.localeData=dt,i.isDuration=Yt,i.monthsShort=function(e,t){return Sn(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return Dn(e,t,n,"weekdaysMin")},i.defineLocale=ct,i.updateLocale=function(e,t){if(null!=t){var n,r,s=tt;null!=nt[e]&&null!=nt[e].parentLocale?nt[e].set(P(nt[e]._config,t)):(null!=(r=at(e))&&(s=r._config),t=P(s,t),null==r&&(t.abbr=e),(n=new I(t)).parentLocale=nt[e],nt[e]=n),ot(e)}else null!=nt[e]&&(null!=nt[e].parentLocale?(nt[e]=nt[e].parentLocale,e===ot()&&ot(e)):null!=nt[e]&&delete nt[e]);return nt[e]},i.locales=function(){return S(nt)},i.weekdaysShort=function(e,t,n){return Dn(e,t,n,"weekdaysShort")},i.normalizeUnits=U,i.relativeTimeRounding=function(e){return void 0===e?Jn:"function"==typeof e&&(Jn=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==Qn[e]&&(void 0===t?Qn[e]:(Qn[e]=t,"s"===e&&(Qn.ss=t-1),!0))},i.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=kn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},11042:(e,t,n)=>{e.exports=n(16822)},16822:function(e,t){!function(n,r){"use strict";var s={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function c(e){return e=a(e^=e>>>16,2246822507),(e=a(e^=e>>>13,3266489909))^e>>>16}function d(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function f(e){return e=p(e,[0,e[0]>>>1]),e=p(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),p(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}s.x86.hash32=function(e,t){if(s.inputValidation&&!i(e))return r;t=t||0;for(var n=e.length%4,d=e.length-n,l=t,u=0,h=3432918353,p=461845907,f=0;f<d;f+=4)u=a(u=e[f]|e[f+1]<<8|e[f+2]<<16|e[f+3]<<24,h),u=a(u=o(u,15),p),l=a(l=o(l^=u,13),5)+3864292196;switch(u=0,n){case 3:u^=e[f+2]<<16;case 2:u^=e[f+1]<<8;case 1:u=a(u^=e[f],h),l^=u=a(u=o(u,15),p)}return(l=c(l^=e.length))>>>0},s.x86.hash128=function(e,t){if(s.inputValidation&&!i(e))return r;t=t||0;for(var n=e.length%16,d=e.length-n,l=t,u=t,h=t,p=t,f=0,m=0,_=0,y=0,g=597399067,w=2869860233,b=951274213,v=2716044179,k=0;k<d;k+=16)f=e[k]|e[k+1]<<8|e[k+2]<<16|e[k+3]<<24,m=e[k+4]|e[k+5]<<8|e[k+6]<<16|e[k+7]<<24,_=e[k+8]|e[k+9]<<8|e[k+10]<<16|e[k+11]<<24,y=e[k+12]|e[k+13]<<8|e[k+14]<<16|e[k+15]<<24,f=o(f=a(f,g),15),l=o(l^=f=a(f,w),19),l=a(l+=u,5)+1444728091,m=o(m=a(m,w),16),u=o(u^=m=a(m,b),17),u=a(u+=h,5)+197830471,_=o(_=a(_,b),17),h=o(h^=_=a(_,v),15),h=a(h+=p,5)+2530024501,y=o(y=a(y,v),18),p=o(p^=y=a(y,g),13),p=a(p+=l,5)+850148119;switch(f=0,m=0,_=0,y=0,n){case 15:y^=e[k+14]<<16;case 14:y^=e[k+13]<<8;case 13:y=a(y^=e[k+12],v),p^=y=a(y=o(y,18),g);case 12:_^=e[k+11]<<24;case 11:_^=e[k+10]<<16;case 10:_^=e[k+9]<<8;case 9:_=a(_^=e[k+8],b),h^=_=a(_=o(_,17),v);case 8:m^=e[k+7]<<24;case 7:m^=e[k+6]<<16;case 6:m^=e[k+5]<<8;case 5:m=a(m^=e[k+4],w),u^=m=a(m=o(m,16),b);case 4:f^=e[k+3]<<24;case 3:f^=e[k+2]<<16;case 2:f^=e[k+1]<<8;case 1:f=a(f^=e[k],g),l^=f=a(f=o(f,15),w)}return l^=e.length,l+=u^=e.length,l+=h^=e.length,u+=l+=p^=e.length,h+=l,p+=l,l=c(l),l+=u=c(u),l+=h=c(h),u+=l+=p=c(p),h+=l,p+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},s.x64.hash128=function(e,t){if(s.inputValidation&&!i(e))return r;t=t||0;for(var n=e.length%16,a=e.length-n,o=[0,t],c=[0,t],m=[0,0],_=[0,0],y=[2277735313,289559509],g=[1291169091,658871167],w=0;w<a;w+=16)m=[e[w+4]|e[w+5]<<8|e[w+6]<<16|e[w+7]<<24,e[w]|e[w+1]<<8|e[w+2]<<16|e[w+3]<<24],_=[e[w+12]|e[w+13]<<8|e[w+14]<<16|e[w+15]<<24,e[w+8]|e[w+9]<<8|e[w+10]<<16|e[w+11]<<24],m=u(m=l(m,y),31),o=d(o=u(o=p(o,m=l(m,g)),27),c),o=d(l(o,[0,5]),[0,1390208809]),_=u(_=l(_,g),33),c=d(c=u(c=p(c,_=l(_,y)),31),o),c=d(l(c,[0,5]),[0,944331445]);switch(m=[0,0],_=[0,0],n){case 15:_=p(_,h([0,e[w+14]],48));case 14:_=p(_,h([0,e[w+13]],40));case 13:_=p(_,h([0,e[w+12]],32));case 12:_=p(_,h([0,e[w+11]],24));case 11:_=p(_,h([0,e[w+10]],16));case 10:_=p(_,h([0,e[w+9]],8));case 9:_=l(_=p(_,[0,e[w+8]]),g),c=p(c,_=l(_=u(_,33),y));case 8:m=p(m,h([0,e[w+7]],56));case 7:m=p(m,h([0,e[w+6]],48));case 6:m=p(m,h([0,e[w+5]],40));case 5:m=p(m,h([0,e[w+4]],32));case 4:m=p(m,h([0,e[w+3]],24));case 3:m=p(m,h([0,e[w+2]],16));case 2:m=p(m,h([0,e[w+1]],8));case 1:m=l(m=p(m,[0,e[w]]),y),o=p(o,m=l(m=u(m,31),g))}return o=d(o=p(o,[0,e.length]),c=p(c,[0,e.length])),c=d(c,o),o=d(o=f(o),c=f(c)),c=d(c,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=s),t.murmurHash3=s}()},97975:e=>{"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}e.exports=function(e){var n=void 0,r=void 0;function s(e){if(!(e instanceof Object))throw new Error('Target "'+e+'" is not an object');r=e}function i(e){Object.keys(e).forEach((function(t){var n=e[t];if("function"!=typeof n)throw new Error('Trap "'+t+": "+n+'" is not a function');if(!Reflect[t])throw new Error('Trap "'+t+": "+n+'" is not a valid trap')})),n=e}s((function(){})),e&&s(e),i(Reflect);var a=new Proxy({},{get:function(e,s){return function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];return n[s].apply(null,[r].concat(t(i.slice(1))))}}});return{setTarget:s,setHandler:i,getTarget:function(){return r},getHandler:function(){return n},proxy:new Proxy(r,a)}}},81661:(e,t,n)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:n(52515).default,Headers:n(52515).Headers,Request:n(52515).Request,Response:n(52515).Response}},52515:(e,t)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},39026:(e,t,n)=>{"use strict";e.exports=n(43228)},43228:(e,t,n)=>{"use strict";var r=t;function s(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(74374),r.BufferWriter=n(71913),r.Reader=n(6418),r.BufferReader=n(42250),r.util=n(96259),r.rpc=n(45260),r.roots=n(11497),r.configure=s,s()},11497:e=>{"use strict";e.exports={}},45260:(e,t,n)=>{"use strict";t.Service=n(34245)},34245:(e,t,n)=>{"use strict";e.exports=s;var r=n(96259);function s(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(s.prototype=Object.create(r.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,n,s,i,a){if(!i)throw TypeError("request must be specified");var o=this;if(!a)return r.asPromise(e,o,t,n,s,i);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return o.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof s))try{n=s[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",n,t),a(null,n)}o.end(!0)}))}catch(e){return o.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},94715:(e,t,n)=>{let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},45125:(e,t,n)=>{const{instantiate:r}=n(12200);function s(e={}){if(!s.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([t],{type:"application/wasm"})),e)}s.supported="undefined"!=typeof WebAssembly,e.exports=s},28232:(e,t,n)=>{const r=n(92673),s=n(45125);e.exports={Rabin:r,create:async(e,t,n,i,a)=>{const o=await s();return new r(o,e,t,n,i,a)}}},92673:e=>{e.exports=class{constructor(e,t=12,n=8192,r=32768,s=64,i){this.bits=t,this.min=n,this.max=r,this.asModule=e,this.rabin=new e.Rabin(t,n,r,s,i),this.polynomial=i}fingerprint(e){const{__retain:t,__release:n,__allocArray:r,__getInt32Array:s,Int32Array_ID:i,Uint8Array_ID:a}=this.asModule,o=t(r(i,new Int32Array(Math.ceil(e.length/this.min)))),c=t(r(a,e)),d=s(this.rabin.fingerprint(c,o));n(c),n(o);const l=d.indexOf(0);return l>=0?d.subarray(0,l):d}}},68239:(e,t,n)=>{"use strict";var r=n(46039),s=65536,i=n(62666).Buffer,a=n.g.crypto||n.g.msCrypto;a&&a.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>s)for(var o=0;o<e;o+=s)a.getRandomValues(n.slice(o,o+s));else a.getRandomValues(n);return"function"==typeof t?r.nextTick((function(){t(null,n)})):n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},25161:(e,t,n)=>{e.exports=function(e,t,n){if("number"!=typeof t)throw new Error("second argument must be a Number");let s,i,a,o,c,d,l=!0;function u(e){function t(){n&&n(e,s),n=null}l?r(t):t()}function h(t,n,r){if(s[t]=r,n&&(c=!0),0==--a||n)u(n);else if(!c&&d<i){let t;o?(t=o[d],d+=1,e[t]((function(e,n){h(t,e,n)}))):(t=d,d+=1,e[t]((function(e,n){h(t,e,n)})))}}Array.isArray(e)?(s=[],a=i=e.length):(o=Object.keys(e),s={},a=i=o.length),d=t,a?o?o.some((function(n,r){return e[n]((function(e,t){h(n,e,t)})),r===t-1})):e.some((function(e,n){return e((function(e,t){h(n,e,t)})),n===t-1})):u(null),l=!1};const r=n(94715)},92891:e=>{"use strict";function t(e,t){return e+n(t)}function n(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function r(e,t){return e[0]-t[0]}function s(e){return e[1]}e.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(void 0===t)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(e),this._changedData=!0):r=!0,this._setInternalPos(n,e,t,r),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,r=t;for(;n<this.length;)r=e(r,this.get(n),n),n++;return r}find(e){let t,n,r=0;for(;r<this.length&&!t;)n=this.get(r),t=e(n),r++;return t?n:void 0}_internalPositionFor(e,r){const s=this._bytePosFor(e,r);if(s>=this._bitArrays.length)return-1;const i=this._bitArrays[s],a=e-7*s;return(i&1<<a)>0?this._bitArrays.slice(0,s).reduce(t,0)+n(i&~(4294967295<<a+1))-1:-1}_bytePosFor(e,t){const n=Math.floor(e/7),r=n+1;for(;!t&&this._bitArrays.length<r;)this._bitArrays.push(0);return n}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,n,r){const s=this._data,i=[t,n];if(r)this._sortData(),s[e]=i;else{if(s.length)if(s[s.length-1][0]>=t)s.push(i);else if(s[0][0]<=t)s.unshift(i);else{const e=Math.round(s.length/2);this._data=s.slice(0,e).concat(i).concat(s.slice(e))}else this._data.push(i);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(r),this._changedData=!1}bitField(){const e=[];let t,n=8,r=0,s=0;const i=this._bitArrays.slice();for(;i.length||r;){0===r&&(t=i.shift(),r=7);const a=Math.min(r,n);s|=(t&~(255<<a))<<8-n,t>>>=a,r-=a,n-=a,n&&(r||i.length)||(e.push(s),s=0,n=8)}for(var a=e.length-1;a>0&&0===e[a];a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(s)}}},18901:e=>{e.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)return;yield n}}finally{t.releaseLock()}}();throw new Error("unknown stream")}},77877:e=>{e.exports=function e(t,n){var r,s=0,i=0,a=n=n||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],s+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return e.bytes=a-n,s}},96608:e=>{e.exports=function e(n,r,s){r=r||[];for(var i=s=s||0;n>=t;)r[s++]=255&n|128,n/=128;for(;-128&n;)r[s++]=255&n|128,n>>>=7;return r[s]=0|n,e.bytes=s-i+1,r};var t=Math.pow(2,31)},70393:(e,t,n)=>{e.exports={encode:n(96608),decode:n(77877),encodingLength:n(38559)}},38559:e=>{var t=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),s=Math.pow(2,28),i=Math.pow(2,35),a=Math.pow(2,42),o=Math.pow(2,49),c=Math.pow(2,56),d=Math.pow(2,63);e.exports=function(e){return e<t?1:e<n?2:e<r?3:e<s?4:e<i?5:e<a?6:e<o?7:e<c?8:e<d?9:10}},56566:(e,t,n)=>{"use strict";const r=n(70393);e.exports=e=>{if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const t=[];for(;e.length>0;){const n=r.decode(e);t.push(n),e=e.slice(r.decode.bytes)}return t}},64482:function(e,t,n){"use strict";var r,s,i;s=[n(43161)],void 0===(i="function"==typeof(r=function(e){var t=e.Reader,n=e.Writer,r=e.util,s=e.roots.default||(e.roots.default={});return s.RPC=function(){function i(e){if(this.subscriptions=[],this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.subscriptions=r.emptyArray,i.prototype.messages=r.emptyArray,i.prototype.control=null,Object.defineProperty(i.prototype,"_control",{get:r.oneOfGetter(a=["control"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){if(t||(t=n.create()),null!=e.subscriptions&&e.subscriptions.length)for(var r=0;r<e.subscriptions.length;++r)s.RPC.SubOpts.encode(e.subscriptions[r],t.uint32(10).fork()).ldelim();if(null!=e.messages&&e.messages.length)for(r=0;r<e.messages.length;++r)s.RPC.Message.encode(e.messages[r],t.uint32(18).fork()).ldelim();return null!=e.control&&Object.hasOwnProperty.call(e,"control")&&s.RPC.ControlMessage.encode(e.control,t.uint32(26).fork()).ldelim(),t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.subscriptions&&i.subscriptions.length||(i.subscriptions=[]),i.subscriptions.push(s.RPC.SubOpts.decode(e,e.uint32()));break;case 2:i.messages&&i.messages.length||(i.messages=[]),i.messages.push(s.RPC.Message.decode(e,e.uint32()));break;case 3:i.control=s.RPC.ControlMessage.decode(e,e.uint32());break;default:e.skipType(7&a)}}return i},i.fromObject=function(e){if(e instanceof s.RPC)return e;var t=new s.RPC;if(e.subscriptions){if(!Array.isArray(e.subscriptions))throw TypeError(".RPC.subscriptions: array expected");t.subscriptions=[];for(var n=0;n<e.subscriptions.length;++n){if("object"!=typeof e.subscriptions[n])throw TypeError(".RPC.subscriptions: object expected");t.subscriptions[n]=s.RPC.SubOpts.fromObject(e.subscriptions[n])}}if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".RPC.messages: array expected");for(t.messages=[],n=0;n<e.messages.length;++n){if("object"!=typeof e.messages[n])throw TypeError(".RPC.messages: object expected");t.messages[n]=s.RPC.Message.fromObject(e.messages[n])}}if(null!=e.control){if("object"!=typeof e.control)throw TypeError(".RPC.control: object expected");t.control=s.RPC.ControlMessage.fromObject(e.control)}return t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.subscriptions=[],n.messages=[]),e.subscriptions&&e.subscriptions.length){n.subscriptions=[];for(var r=0;r<e.subscriptions.length;++r)n.subscriptions[r]=s.RPC.SubOpts.toObject(e.subscriptions[r],t)}if(e.messages&&e.messages.length)for(n.messages=[],r=0;r<e.messages.length;++r)n.messages[r]=s.RPC.Message.toObject(e.messages[r],t);return null!=e.control&&e.hasOwnProperty("control")&&(n.control=s.RPC.ControlMessage.toObject(e.control,t),t.oneofs&&(n._control="control")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i.SubOpts=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.subscribe=null,i.prototype.topic=null,Object.defineProperty(i.prototype,"_subscribe",{get:r.oneOfGetter(a=["subscribe"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_topic",{get:r.oneOfGetter(a=["topic"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){return t||(t=n.create()),null!=e.subscribe&&Object.hasOwnProperty.call(e,"subscribe")&&t.uint32(8).bool(e.subscribe),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(18).string(e.topic),t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.SubOpts;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.subscribe=e.bool();break;case 2:i.topic=e.string();break;default:e.skipType(7&a)}}return i},i.fromObject=function(e){if(e instanceof s.RPC.SubOpts)return e;var t=new s.RPC.SubOpts;return null!=e.subscribe&&(t.subscribe=Boolean(e.subscribe)),null!=e.topic&&(t.topic=String(e.topic)),t},i.toObject=function(e,t){t||(t={});var n={};return null!=e.subscribe&&e.hasOwnProperty("subscribe")&&(n.subscribe=e.subscribe,t.oneofs&&(n._subscribe="subscribe")),null!=e.topic&&e.hasOwnProperty("topic")&&(n.topic=e.topic,t.oneofs&&(n._topic="topic")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.Message=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.from=null,i.prototype.data=null,i.prototype.seqno=null,i.prototype.topic="",i.prototype.signature=null,i.prototype.key=null,Object.defineProperty(i.prototype,"_from",{get:r.oneOfGetter(a=["from"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_data",{get:r.oneOfGetter(a=["data"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_seqno",{get:r.oneOfGetter(a=["seqno"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_signature",{get:r.oneOfGetter(a=["signature"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_key",{get:r.oneOfGetter(a=["key"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){return t||(t=n.create()),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(10).bytes(e.from),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.seqno&&Object.hasOwnProperty.call(e,"seqno")&&t.uint32(26).bytes(e.seqno),t.uint32(34).string(e.topic),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(50).bytes(e.key),t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var i=void 0===n?e.len:e.pos+n,a=new s.RPC.Message;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:a.from=e.bytes();break;case 2:a.data=e.bytes();break;case 3:a.seqno=e.bytes();break;case 4:a.topic=e.string();break;case 5:a.signature=e.bytes();break;case 6:a.key=e.bytes();break;default:e.skipType(7&o)}}if(!a.hasOwnProperty("topic"))throw r.ProtocolError("missing required 'topic'",{instance:a});return a},i.fromObject=function(e){if(e instanceof s.RPC.Message)return e;var t=new s.RPC.Message;return null!=e.from&&("string"==typeof e.from?r.base64.decode(e.from,t.from=r.newBuffer(r.base64.length(e.from)),0):e.from.length&&(t.from=e.from)),null!=e.data&&("string"==typeof e.data?r.base64.decode(e.data,t.data=r.newBuffer(r.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.seqno&&("string"==typeof e.seqno?r.base64.decode(e.seqno,t.seqno=r.newBuffer(r.base64.length(e.seqno)),0):e.seqno.length&&(t.seqno=e.seqno)),null!=e.topic&&(t.topic=String(e.topic)),null!=e.signature&&("string"==typeof e.signature?r.base64.decode(e.signature,t.signature=r.newBuffer(r.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),null!=e.key&&("string"==typeof e.key?r.base64.decode(e.key,t.key=r.newBuffer(r.base64.length(e.key)),0):e.key.length&&(t.key=e.key)),t},i.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.topic=""),null!=e.from&&e.hasOwnProperty("from")&&(n.from=t.bytes===String?r.base64.encode(e.from,0,e.from.length):t.bytes===Array?Array.prototype.slice.call(e.from):e.from,t.oneofs&&(n._from="from")),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?r.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data,t.oneofs&&(n._data="data")),null!=e.seqno&&e.hasOwnProperty("seqno")&&(n.seqno=t.bytes===String?r.base64.encode(e.seqno,0,e.seqno.length):t.bytes===Array?Array.prototype.slice.call(e.seqno):e.seqno,t.oneofs&&(n._seqno="seqno")),null!=e.topic&&e.hasOwnProperty("topic")&&(n.topic=e.topic),null!=e.signature&&e.hasOwnProperty("signature")&&(n.signature=t.bytes===String?r.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature,t.oneofs&&(n._signature="signature")),null!=e.key&&e.hasOwnProperty("key")&&(n.key=t.bytes===String?r.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key,t.oneofs&&(n._key="key")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.ControlMessage=function(){function i(e){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.ihave=r.emptyArray,i.prototype.iwant=r.emptyArray,i.prototype.graft=r.emptyArray,i.prototype.prune=r.emptyArray,i.encode=function(e,t){if(t||(t=n.create()),null!=e.ihave&&e.ihave.length)for(var r=0;r<e.ihave.length;++r)s.RPC.ControlIHave.encode(e.ihave[r],t.uint32(10).fork()).ldelim();if(null!=e.iwant&&e.iwant.length)for(r=0;r<e.iwant.length;++r)s.RPC.ControlIWant.encode(e.iwant[r],t.uint32(18).fork()).ldelim();if(null!=e.graft&&e.graft.length)for(r=0;r<e.graft.length;++r)s.RPC.ControlGraft.encode(e.graft[r],t.uint32(26).fork()).ldelim();if(null!=e.prune&&e.prune.length)for(r=0;r<e.prune.length;++r)s.RPC.ControlPrune.encode(e.prune[r],t.uint32(34).fork()).ldelim();return t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.ControlMessage;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.ihave&&i.ihave.length||(i.ihave=[]),i.ihave.push(s.RPC.ControlIHave.decode(e,e.uint32()));break;case 2:i.iwant&&i.iwant.length||(i.iwant=[]),i.iwant.push(s.RPC.ControlIWant.decode(e,e.uint32()));break;case 3:i.graft&&i.graft.length||(i.graft=[]),i.graft.push(s.RPC.ControlGraft.decode(e,e.uint32()));break;case 4:i.prune&&i.prune.length||(i.prune=[]),i.prune.push(s.RPC.ControlPrune.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return i},i.fromObject=function(e){if(e instanceof s.RPC.ControlMessage)return e;var t=new s.RPC.ControlMessage;if(e.ihave){if(!Array.isArray(e.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");t.ihave=[];for(var n=0;n<e.ihave.length;++n){if("object"!=typeof e.ihave[n])throw TypeError(".RPC.ControlMessage.ihave: object expected");t.ihave[n]=s.RPC.ControlIHave.fromObject(e.ihave[n])}}if(e.iwant){if(!Array.isArray(e.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");for(t.iwant=[],n=0;n<e.iwant.length;++n){if("object"!=typeof e.iwant[n])throw TypeError(".RPC.ControlMessage.iwant: object expected");t.iwant[n]=s.RPC.ControlIWant.fromObject(e.iwant[n])}}if(e.graft){if(!Array.isArray(e.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");for(t.graft=[],n=0;n<e.graft.length;++n){if("object"!=typeof e.graft[n])throw TypeError(".RPC.ControlMessage.graft: object expected");t.graft[n]=s.RPC.ControlGraft.fromObject(e.graft[n])}}if(e.prune){if(!Array.isArray(e.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");for(t.prune=[],n=0;n<e.prune.length;++n){if("object"!=typeof e.prune[n])throw TypeError(".RPC.ControlMessage.prune: object expected");t.prune[n]=s.RPC.ControlPrune.fromObject(e.prune[n])}}return t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.ihave=[],n.iwant=[],n.graft=[],n.prune=[]),e.ihave&&e.ihave.length){n.ihave=[];for(var r=0;r<e.ihave.length;++r)n.ihave[r]=s.RPC.ControlIHave.toObject(e.ihave[r],t)}if(e.iwant&&e.iwant.length)for(n.iwant=[],r=0;r<e.iwant.length;++r)n.iwant[r]=s.RPC.ControlIWant.toObject(e.iwant[r],t);if(e.graft&&e.graft.length)for(n.graft=[],r=0;r<e.graft.length;++r)n.graft[r]=s.RPC.ControlGraft.toObject(e.graft[r],t);if(e.prune&&e.prune.length)for(n.prune=[],r=0;r<e.prune.length;++r)n.prune[r]=s.RPC.ControlPrune.toObject(e.prune[r],t);return n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.ControlIHave=function(){function i(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.topicID=null,i.prototype.messageIDs=r.emptyArray,Object.defineProperty(i.prototype,"_topicID",{get:r.oneOfGetter(a=["topicID"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){if(t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.messageIDs&&e.messageIDs.length)for(var r=0;r<e.messageIDs.length;++r)t.uint32(18).bytes(e.messageIDs[r]);return t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.ControlIHave;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.topicID=e.string();break;case 2:i.messageIDs&&i.messageIDs.length||(i.messageIDs=[]),i.messageIDs.push(e.bytes());break;default:e.skipType(7&a)}}return i},i.fromObject=function(e){if(e instanceof s.RPC.ControlIHave)return e;var t=new s.RPC.ControlIHave;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");t.messageIDs=[];for(var n=0;n<e.messageIDs.length;++n)"string"==typeof e.messageIDs[n]?r.base64.decode(e.messageIDs[n],t.messageIDs[n]=r.newBuffer(r.base64.length(e.messageIDs[n])),0):e.messageIDs[n].length&&(t.messageIDs[n]=e.messageIDs[n])}return t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messageIDs=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(n.topicID=e.topicID,t.oneofs&&(n._topicID="topicID")),e.messageIDs&&e.messageIDs.length){n.messageIDs=[];for(var s=0;s<e.messageIDs.length;++s)n.messageIDs[s]=t.bytes===String?r.base64.encode(e.messageIDs[s],0,e.messageIDs[s].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[s]):e.messageIDs[s]}return n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.ControlIWant=function(){function i(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return i.prototype.messageIDs=r.emptyArray,i.encode=function(e,t){if(t||(t=n.create()),null!=e.messageIDs&&e.messageIDs.length)for(var r=0;r<e.messageIDs.length;++r)t.uint32(10).bytes(e.messageIDs[r]);return t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.ControlIWant;e.pos<r;){var a=e.uint32();a>>>3==1?(i.messageIDs&&i.messageIDs.length||(i.messageIDs=[]),i.messageIDs.push(e.bytes())):e.skipType(7&a)}return i},i.fromObject=function(e){if(e instanceof s.RPC.ControlIWant)return e;var t=new s.RPC.ControlIWant;if(e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");t.messageIDs=[];for(var n=0;n<e.messageIDs.length;++n)"string"==typeof e.messageIDs[n]?r.base64.decode(e.messageIDs[n],t.messageIDs[n]=r.newBuffer(r.base64.length(e.messageIDs[n])),0):e.messageIDs[n].length&&(t.messageIDs[n]=e.messageIDs[n])}return t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messageIDs=[]),e.messageIDs&&e.messageIDs.length){n.messageIDs=[];for(var s=0;s<e.messageIDs.length;++s)n.messageIDs[s]=t.bytes===String?r.base64.encode(e.messageIDs[s],0,e.messageIDs[s].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[s]):e.messageIDs[s]}return n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.ControlGraft=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.topicID=null,Object.defineProperty(i.prototype,"_topicID",{get:r.oneOfGetter(a=["topicID"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){return t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.ControlGraft;e.pos<r;){var a=e.uint32();a>>>3==1?i.topicID=e.string():e.skipType(7&a)}return i},i.fromObject=function(e){if(e instanceof s.RPC.ControlGraft)return e;var t=new s.RPC.ControlGraft;return null!=e.topicID&&(t.topicID=String(e.topicID)),t},i.toObject=function(e,t){t||(t={});var n={};return null!=e.topicID&&e.hasOwnProperty("topicID")&&(n.topicID=e.topicID,t.oneofs&&(n._topicID="topicID")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.ControlPrune=function(){function i(e){if(this.peers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.topicID=null,i.prototype.peers=r.emptyArray,i.prototype.backoff=null,Object.defineProperty(i.prototype,"_topicID",{get:r.oneOfGetter(a=["topicID"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_backoff",{get:r.oneOfGetter(a=["backoff"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){if(t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.peers&&e.peers.length)for(var r=0;r<e.peers.length;++r)s.RPC.PeerInfo.encode(e.peers[r],t.uint32(18).fork()).ldelim();return null!=e.backoff&&Object.hasOwnProperty.call(e,"backoff")&&t.uint32(24).uint64(e.backoff),t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.ControlPrune;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.topicID=e.string();break;case 2:i.peers&&i.peers.length||(i.peers=[]),i.peers.push(s.RPC.PeerInfo.decode(e,e.uint32()));break;case 3:i.backoff=e.uint64();break;default:e.skipType(7&a)}}return i},i.fromObject=function(e){if(e instanceof s.RPC.ControlPrune)return e;var t=new s.RPC.ControlPrune;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.peers){if(!Array.isArray(e.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");t.peers=[];for(var n=0;n<e.peers.length;++n){if("object"!=typeof e.peers[n])throw TypeError(".RPC.ControlPrune.peers: object expected");t.peers[n]=s.RPC.PeerInfo.fromObject(e.peers[n])}}return null!=e.backoff&&(r.Long?(t.backoff=r.Long.fromValue(e.backoff)).unsigned=!0:"string"==typeof e.backoff?t.backoff=parseInt(e.backoff,10):"number"==typeof e.backoff?t.backoff=e.backoff:"object"==typeof e.backoff&&(t.backoff=new r.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0))),t},i.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.peers=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(n.topicID=e.topicID,t.oneofs&&(n._topicID="topicID")),e.peers&&e.peers.length){n.peers=[];for(var i=0;i<e.peers.length;++i)n.peers[i]=s.RPC.PeerInfo.toObject(e.peers[i],t)}return null!=e.backoff&&e.hasOwnProperty("backoff")&&("number"==typeof e.backoff?n.backoff=t.longs===String?String(e.backoff):e.backoff:n.backoff=t.longs===String?r.Long.prototype.toString.call(e.backoff):t.longs===Number?new r.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0):e.backoff,t.oneofs&&(n._backoff="backoff")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i.PeerInfo=function(){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a;return i.prototype.peerID=null,i.prototype.signedPeerRecord=null,Object.defineProperty(i.prototype,"_peerID",{get:r.oneOfGetter(a=["peerID"]),set:r.oneOfSetter(a)}),Object.defineProperty(i.prototype,"_signedPeerRecord",{get:r.oneOfGetter(a=["signedPeerRecord"]),set:r.oneOfSetter(a)}),i.encode=function(e,t){return t||(t=n.create()),null!=e.peerID&&Object.hasOwnProperty.call(e,"peerID")&&t.uint32(10).bytes(e.peerID),null!=e.signedPeerRecord&&Object.hasOwnProperty.call(e,"signedPeerRecord")&&t.uint32(18).bytes(e.signedPeerRecord),t},i.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,i=new s.RPC.PeerInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.peerID=e.bytes();break;case 2:i.signedPeerRecord=e.bytes();break;default:e.skipType(7&a)}}return i},i.fromObject=function(e){if(e instanceof s.RPC.PeerInfo)return e;var t=new s.RPC.PeerInfo;return null!=e.peerID&&("string"==typeof e.peerID?r.base64.decode(e.peerID,t.peerID=r.newBuffer(r.base64.length(e.peerID)),0):e.peerID.length&&(t.peerID=e.peerID)),null!=e.signedPeerRecord&&("string"==typeof e.signedPeerRecord?r.base64.decode(e.signedPeerRecord,t.signedPeerRecord=r.newBuffer(r.base64.length(e.signedPeerRecord)),0):e.signedPeerRecord.length&&(t.signedPeerRecord=e.signedPeerRecord)),t},i.toObject=function(e,t){t||(t={});var n={};return null!=e.peerID&&e.hasOwnProperty("peerID")&&(n.peerID=t.bytes===String?r.base64.encode(e.peerID,0,e.peerID.length):t.bytes===Array?Array.prototype.slice.call(e.peerID):e.peerID,t.oneofs&&(n._peerID="peerID")),null!=e.signedPeerRecord&&e.hasOwnProperty("signedPeerRecord")&&(n.signedPeerRecord=t.bytes===String?r.base64.encode(e.signedPeerRecord,0,e.signedPeerRecord.length):t.bytes===Array?Array.prototype.slice.call(e.signedPeerRecord):e.signedPeerRecord,t.oneofs&&(n._signedPeerRecord="signedPeerRecord")),n},i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},i}(),i}(),s})?r.apply(t,s):r)||(e.exports=i)},43478:e=>{!function(){e.exports=_;var t=86400,n=3200,r=1168776,s=t*r,i=1e3*s,a=864e13,o=4294967296,c=1e6,d="000000000",l=Math.trunc||function(e){var t=e-e%1;return 0==t&&(e<0||0===e&&1/e!=1/0)?-0:t},u=_.prototype,h=(_.fromDate=function(e){return new _(+e)},_.fromInt64BE=v(0,1,2,3,0,4),_.fromInt64LE=v(3,2,1,0,4,0),_.fromString=function(e){var t,n=new _;if(e=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=1970+((e=+e)-1970)%400;return n.year=e-t,t})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,n,r){return n<0&&(r*=-1),t=6e4*(60*+n+ +r),""})).replace(/\.\d+$/,(function(e){return n.nano=+(e+d).substr(1,9),""})).split(/\D+/),1<e.length?e[1]--:e[1]=0,n.time=t=Date.UTC.apply(Date,e)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return y(n)},_.fromTimeT=function(e){return w(e,0)},u.year=0,u.time=0,u.nano=0,u.addNano=function(e){return this.nano+=+e||0,this},u.getNano=function(){var e=y(this);return(e.time%1e3*c+ +e.nano+1e9)%1e9},u.getTimeT=function(){var e=y(this),s=Math.floor(e.time/1e3);return(e=e.year)&&(s+=e*r*t/n),s},u.getYear=function(){return this.toDate().getUTCFullYear()+this.year},u.toDate=function(){return g(y(this).time)},u.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},u.toString=function(e){var t=this,n=t.toDate(),r={H:function(){return M(n.getUTCHours())},L:function(){return E(n.getUTCMilliseconds(),3)},M:function(){return M(n.getUTCMinutes())},N:function(){return E(t.getNano(),9)},S:function(){return M(n.getUTCSeconds())},Y:function(){var e=t.getYear();return 999999<e?"+"+e:9999<e?"+"+E(e,6):0<=e?E(e,4):-999999<=e?"-"+E(-e,6):e},a:function(){return f[n.getUTCDay()]},b:function(){return p[n.getUTCMonth()]},d:function(){return M(n.getUTCDate())},e:function(){return function(e){return(9<e?"":" ")+(0|e)}(n.getUTCDate())},m:function(){return M(n.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var n=t[1],s=m[n];return n=r[n],s?e(s):n?n():t}))}(e||h)},u.writeInt64BE=b(0,1,2,3,0,4),u.writeInt64LE=b(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return _;function _(e,t,n){var r=this;if(!(r instanceof _))return new _(e,t,n);r.time=+e||0,r.nano=+t||0,r.year=+n||0,y(r)}function y(e){var t,r,s,o=e.year,d=e.time,u=e.nano,h=((u<0||c<=u)&&(u-=(r=Math.floor(u/c))*c,d+=r,r=1),o%n);return(d<-a||a<d||h)&&((t=l(d/i))&&(o+=t*n,d-=t*i),(s=g(d)).setUTCFullYear(h+s.getUTCFullYear()),s=(d=+s)+(t=l((o-=h)/n))*i,t&&-a<=s&&s<=a&&(o-=t*n,d=s),r=1),r&&(e.year=o,e.time=d,e.nano=u),e}function g(e){var t=new Date(0);return t.setTime(e),t}function w(e,t){e=+e||0;var r=l((t=(0|t)*o)/s)+l(e/s);return(e=l((t=t%s+e%s)/s))&&(r+=e,t-=e*s),new _(1e3*t,0,r*n)}function b(e,s,i,a,c,d){return function(e,s){var i=y(this);k(e=e||new Array(8),s|=0);var a=Math.floor(i.time/1e3),h=(i=i.year*(r*t/n),l(i/o)+l(a/o));return i=i%o+a%o,(a=Math.floor(i/o))&&(h+=a,i-=a*o),u(e,s+c,h),u(e,s+d,i),e};function u(t,n,r){t[n+e]=r>>24&255,t[n+s]=r>>16&255,t[n+i]=r>>8&255,t[n+a]=255&r}}function v(e,t,n,r,s,i){return function(e,t){k(e,t|=0);var n=a(e,t+s);return w(a(e,t+i),n)};function a(s,i){return 16777216*s[i+e]+(s[i+t]<<16|s[i+n]<<8|s[i+r])}}function k(e,t){if(null==(e=e&&e.length))throw new TypeError("Invalid Buffer");if(e<t+8)throw new RangeError("Out of range")}function M(e){return(9<e?"":"0")+(0|e)}function E(e,t){return(d+(0|e)).substr(-t)}}()},76538:(e,t,n)=>{"use strict";n.d(t,{Ue:()=>UT});var r={};n.r(r),n.d(r,{code:()=>Le,createLink:()=>Me,createNode:()=>ke,decode:()=>De,encode:()=>Se,name:()=>Ee,prepare:()=>be,validate:()=>ve});var s={};n.r(s),n.d(s,{code:()=>nn,decode:()=>sn,encode:()=>rn,name:()=>tn});var i={};n.r(i),n.d(i,{code:()=>_n,decode:()=>gn,encode:()=>yn,format:()=>wn,name:()=>mn,parse:()=>vn,stringify:()=>wn});var a={};n.r(a),n.d(a,{code:()=>Pn,decode:()=>Nn,encode:()=>On,name:()=>Rn,toGeneral:()=>Yn});var o={};n.r(o),n.d(o,{InvalidValueError:()=>Gf,MissingRepoOptionsError:()=>qf,NonReversibleMigrationError:()=>Vf,NotInitializedRepoError:()=>Wf,RequiredParameterError:()=>$f});var c={};n.r(c),n.d(c,{identity:()=>M_});var d={};n.r(d),n.d(d,{base2:()=>E_});var l={};n.r(l),n.d(l,{base8:()=>L_});var u={};n.r(u),n.d(u,{base10:()=>S_});var h={};n.r(h),n.d(h,{base16:()=>D_,base16upper:()=>T_});var p={};n.r(p),n.d(p,{base32:()=>R_,base32hex:()=>Y_,base32hexpad:()=>N_,base32hexpadupper:()=>x_,base32hexupper:()=>O_,base32pad:()=>I_,base32padupper:()=>A_,base32upper:()=>P_,base32z:()=>C_});var f={};n.r(f),n.d(f,{base36:()=>H_,base36upper:()=>j_});var m={};n.r(m),n.d(m,{base58btc:()=>B_,base58flickr:()=>z_});var _={};n.r(_),n.d(_,{base64:()=>U_,base64pad:()=>F_,base64url:()=>V_,base64urlpad:()=>W_});var y={};n.r(y),n.d(y,{base256emoji:()=>K_});var g={};n.r(g),n.d(g,{sha256:()=>my,sha512:()=>_y});var w={};n.r(w),n.d(w,{identity:()=>gy});var b={};n.r(b),n.d(b,{code:()=>by,decode:()=>ky,encode:()=>vy,name:()=>wy});var v={};n.r(v),n.d(v,{code:()=>Sy,decode:()=>Ty,encode:()=>Dy,name:()=>Ly});var k={};n.r(k),n.d(k,{identity:()=>Ig});var M={};n.r(M),n.d(M,{base2:()=>Ag});var E={};n.r(E),n.d(E,{base8:()=>Yg});var L={};n.r(L),n.d(L,{base10:()=>Og});var S={};n.r(S),n.d(S,{base16:()=>Ng,base16upper:()=>xg});var D={};n.r(D),n.d(D,{base32:()=>Cg,base32hex:()=>zg,base32hexpad:()=>Fg,base32hexpadupper:()=>Vg,base32hexupper:()=>Ug,base32pad:()=>jg,base32padupper:()=>Bg,base32upper:()=>Hg,base32z:()=>Wg});var T={};n.r(T),n.d(T,{base36:()=>$g,base36upper:()=>Gg});var R={};n.r(R),n.d(R,{base58btc:()=>qg,base58flickr:()=>Kg});var P={};n.r(P),n.d(P,{base64:()=>Zg,base64pad:()=>Jg,base64url:()=>Qg,base64urlpad:()=>Xg});var I={};n.r(I),n.d(I,{base256emoji:()=>rw});var A={};n.r(A),n.d(A,{sha256:()=>Mw,sha512:()=>Ew});var Y={};n.r(Y),n.d(Y,{identity:()=>Sw});var O={};n.r(O),n.d(O,{code:()=>Tw,decode:()=>Pw,encode:()=>Rw,name:()=>Dw});var N={};n.r(N),n.d(N,{code:()=>Ow,decode:()=>xw,encode:()=>Nw,name:()=>Yw});var x={};n.r(x),n.d(x,{abortedError:()=>DT,notFoundError:()=>ST});var C=n(40726),H=n(27697),j=n(16099),B=n(77514),z=n(39026);const U=z.Reader,F=z.Writer,V=z.util,W=z.roots["ipfs-unixfs"]||(z.roots["ipfs-unixfs"]={}),$=W.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Type=0,e.prototype.Data=V.newBuffer([]),e.prototype.filesize=V.Long?V.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=V.emptyArray,e.prototype.hashType=V.Long?V.Long.fromBits(0,0,!0):0,e.prototype.fanout=V.Long?V.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=F.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var n=0;n<e.blocksizes.length;++n)t.uint32(32).uint64(e.blocksizes[n]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&W.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new W.Data;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.Type=e.int32();break;case 2:r.Data=e.bytes();break;case 3:r.filesize=e.uint64();break;case 4:if(r.blocksizes&&r.blocksizes.length||(r.blocksizes=[]),2==(7&s))for(var i=e.uint32()+e.pos;e.pos<i;)r.blocksizes.push(e.uint64());else r.blocksizes.push(e.uint64());break;case 5:r.hashType=e.uint64();break;case 6:r.fanout=e.uint64();break;case 7:r.mode=e.uint32();break;case 8:r.mtime=W.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("Type"))throw V.ProtocolError("missing required 'Type'",{instance:r});return r},e.fromObject=function(e){if(e instanceof W.Data)return e;var t=new W.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"==typeof e.Data?V.base64.decode(e.Data,t.Data=V.newBuffer(V.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(V.Long?(t.filesize=V.Long.fromValue(e.filesize)).unsigned=!0:"string"==typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"==typeof e.filesize?t.filesize=e.filesize:"object"==typeof e.filesize&&(t.filesize=new V.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var n=0;n<e.blocksizes.length;++n)V.Long?(t.blocksizes[n]=V.Long.fromValue(e.blocksizes[n])).unsigned=!0:"string"==typeof e.blocksizes[n]?t.blocksizes[n]=parseInt(e.blocksizes[n],10):"number"==typeof e.blocksizes[n]?t.blocksizes[n]=e.blocksizes[n]:"object"==typeof e.blocksizes[n]&&(t.blocksizes[n]=new V.LongBits(e.blocksizes[n].low>>>0,e.blocksizes[n].high>>>0).toNumber(!0))}if(null!=e.hashType&&(V.Long?(t.hashType=V.Long.fromValue(e.hashType)).unsigned=!0:"string"==typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"==typeof e.hashType?t.hashType=e.hashType:"object"==typeof e.hashType&&(t.hashType=new V.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(V.Long?(t.fanout=V.Long.fromValue(e.fanout)).unsigned=!0:"string"==typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"==typeof e.fanout?t.fanout=e.fanout:"object"==typeof e.fanout&&(t.fanout=new V.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!=typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=W.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocksizes=[]),t.defaults){if(n.Type=t.enums===String?"Raw":0,t.bytes===String?n.Data="":(n.Data=[],t.bytes!==Array&&(n.Data=V.newBuffer(n.Data))),V.Long){var r=new V.Long(0,0,!0);n.filesize=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.filesize=t.longs===String?"0":0;V.Long?(r=new V.Long(0,0,!0),n.hashType=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.hashType=t.longs===String?"0":0,V.Long?(r=new V.Long(0,0,!0),n.fanout=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.fanout=t.longs===String?"0":0,n.mode=0,n.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(n.Type=t.enums===String?W.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(n.Data=t.bytes===String?V.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"==typeof e.filesize?n.filesize=t.longs===String?String(e.filesize):e.filesize:n.filesize=t.longs===String?V.Long.prototype.toString.call(e.filesize):t.longs===Number?new V.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){n.blocksizes=[];for(var s=0;s<e.blocksizes.length;++s)"number"==typeof e.blocksizes[s]?n.blocksizes[s]=t.longs===String?String(e.blocksizes[s]):e.blocksizes[s]:n.blocksizes[s]=t.longs===String?V.Long.prototype.toString.call(e.blocksizes[s]):t.longs===Number?new V.LongBits(e.blocksizes[s].low>>>0,e.blocksizes[s].high>>>0).toNumber(!0):e.blocksizes[s]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"==typeof e.hashType?n.hashType=t.longs===String?String(e.hashType):e.hashType:n.hashType=t.longs===String?V.Long.prototype.toString.call(e.hashType):t.longs===Number?new V.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"==typeof e.fanout?n.fanout=t.longs===String?String(e.fanout):e.fanout:n.fanout=t.longs===String?V.Long.prototype.toString.call(e.fanout):t.longs===Number?new V.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(n.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(n.mtime=W.UnixTime.toObject(e.mtime,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})(),G=(W.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Seconds=V.Long?V.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=F.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new W.UnixTime;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.Seconds=e.int64();break;case 2:r.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("Seconds"))throw V.ProtocolError("missing required 'Seconds'",{instance:r});return r},e.fromObject=function(e){if(e instanceof W.UnixTime)return e;var t=new W.UnixTime;return null!=e.Seconds&&(V.Long?(t.Seconds=V.Long.fromValue(e.Seconds)).unsigned=!1:"string"==typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"==typeof e.Seconds?t.Seconds=e.Seconds:"object"==typeof e.Seconds&&(t.Seconds=new V.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(V.Long){var r=new V.Long(0,0,!1);n.Seconds=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.Seconds=t.longs===String?"0":0;n.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"==typeof e.Seconds?n.Seconds=t.longs===String?String(e.Seconds):e.Seconds:n.Seconds=t.longs===String?V.Long.prototype.toString.call(e.Seconds):t.longs===Number?new V.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=e.FractionalNanoseconds),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),W.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=F.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof U||(e=U.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new W.Metadata;e.pos<n;){var s=e.uint32();s>>>3==1?r.MimeType=e.string():e.skipType(7&s)}return r},e.fromObject=function(e){if(e instanceof W.Metadata)return e;var t=new W.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(n.MimeType=e.MimeType),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),$),q=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],K=["directory","hamt-sharded-directory"],Z=parseInt("0644",8),J=parseInt("0755",8);function Q(e){if(null!=e)return"number"==typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function X(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const n=e.getTime(),r=Math.floor(n/1e3);t={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw B(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}class ee{static unmarshal(e){const t=G.decode(e),n=G.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),r=new ee({type:q[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return r._originalMode=n.mode||0,r}constructor(e={type:"file"}){const{type:t,data:n,blockSizes:r,hashType:s,fanout:i,mtime:a,mode:o}=e;if(t&&!q.includes(t))throw B(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=s,this.fanout=i,this.blockSizes=r||[],this._originalMode=0,this.mode=Q(o),a&&(this.mtime=X(a),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?J:Z;const t=Q(e);void 0!==t&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&K.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach((t=>{e+=t})),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=G.DataType.Raw;break;case"directory":e=G.DataType.Directory;break;case"file":e=G.DataType.File;break;case"metadata":e=G.DataType.Metadata;break;case"symlink":e=G.DataType.Symlink;break;case"hamt-sharded-directory":e=G.DataType.HAMTShard;break;default:throw B(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t,n,r=this.data;if(this.data&&this.data.length||(r=void 0),null!=this.mode&&(t=4294963200&this._originalMode|(Q(this.mode)||0),t!==Z||this.isDirectory()||(t=void 0),t===J&&this.isDirectory()&&(t=void 0)),null!=this.mtime){const e=X(this.mtime);e&&(n={Seconds:e.secs,FractionalNanoseconds:e.nsecs},0===n.FractionalNanoseconds&&delete n.FractionalNanoseconds)}const s={Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:n};return G.encode(s).finish()}}var te=n(96582);const ne=new TextDecoder;function re(e,t){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const s=e[t++];if(n+=r<28?(127&s)<<r:(127&s)*2**r,s<128)break}return[n,t]}function se(e,t){let n;[n,t]=re(e,t);const r=t+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function ie(e,t){let n;return[n,t]=re(e,t),[7&n,n>>3,t]}function ae(e){const t={},n=e.length;let r=0;for(;r<n;){let n,s;if([n,s,r]=ie(e,r),1===s){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,r]=se(e,r)}else if(2===s){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,r]=se(e,r),t.Name=ne.decode(s)}else{if(3!==s)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[t.Tsize,r]=re(e,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const oe=new TextEncoder,ce=2**32;function de(e,t){let n=t.length;if("number"==typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");n=ue(t,n,e.Tsize)-1,t[n]=24}if("string"==typeof e.Name){const r=oe.encode(e.Name);n-=r.length,t.set(r,n),n=ue(t,n,r.length)-1,t[n]=18}return e.Hash&&(n-=e.Hash.length,t.set(e.Hash,n),n=ue(t,n,e.Hash.length)-1,t[n]=10),t.length-n}function le(e){let t=0;if(e.Hash){const n=e.Hash.length;t+=1+n+he(n)}if("string"==typeof e.Name){const n=oe.encode(e.Name).length;t+=1+n+he(n)}return"number"==typeof e.Tsize&&(t+=1+he(e.Tsize)),t}function ue(e,t,n){const r=t-=he(n);for(;n>=2147483648;)e[t++]=127&n|128,n/=128;for(;n>=128;)e[t++]=127&n|128,n>>>=7;return e[t]=n,r}function he(e){return e%2==0&&e++,Math.floor((function(e){let t=0;return e>=ce&&(e=Math.floor(e/ce),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+pe[e]}(e)+6)/7)}const pe=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],fe=["Data","Links"],me=["Hash","Name","Tsize"],_e=new TextEncoder;function ye(e,t){if(e===t)return 0;const n=e.Name?_e.encode(e.Name):[],r=t.Name?_e.encode(t.Name):[];let s=n.length,i=r.length;for(let e=0,t=Math.min(s,i);e<t;++e)if(n[e]!==r[e]){s=n[e],i=r[e];break}return s<i?-1:i<s?1:0}function ge(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function we(e){if("object"==typeof e.asCID){const t=te.k.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let n=te.k.asCID(e.Hash);try{n||("string"==typeof e.Hash?n=te.k.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=te.k.decode(e.Hash)))}catch(e){throw new TypeError(`Invalid DAG-PB form: ${e.message}`)}n&&(t.Hash=n)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof e.Name&&(t.Name=e.Name),"number"==typeof e.Tsize&&(t.Tsize=e.Tsize),t}function be(e){if((e instanceof Uint8Array||"string"==typeof e)&&(e={Data:e}),"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"==typeof e.Data)t.Data=_e.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(we),t.Links.sort(ye)}else t.Links=[];return t}function ve(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!ge(e,fe))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){const n=e.Links[t];if(!n||"object"!=typeof n||Array.isArray(n))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!ge(n,me))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash.asCID!==n.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!=typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize&&("number"!=typeof n.Tsize||n.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===ye(n,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function ke(e,t=[]){return be({Data:e,Links:t})}function Me(e,t,n){return we({Hash:n,Name:e,Tsize:t})}const Ee="dag-pb",Le=112;function Se(e){ve(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),function(e){const t=function(e){let t=0;if(e.Data){const n=e.Data.length;t+=1+n+he(n)}if(e.Links)for(const n of e.Links){const e=le(n);t+=1+e+he(e)}return t}(e),n=new Uint8Array(t);let r=t;if(e.Data&&(r-=e.Data.length,n.set(e.Data,r),r=ue(n,r,e.Data.length)-1,n[r]=10),e.Links)for(let t=e.Links.length-1;t>=0;t--){const s=de(e.Links[t],n.subarray(0,r));r-=s,r=ue(n,r,s)-1,n[r]=18}return n}(t)}function De(e){const t=function(e){const t=e.length;let n,r,s=0,i=!1;for(;s<t;){let t,a;if([t,a,s]=ie(e,s),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===a){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,s]=se(e,s),n&&(i=!0)}else{if(2!==a)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`);{if(i)throw new Error("protobuf: (PBNode) duplicate Links section");let t;n||(n=[]),[t,s]=se(e,s),n.push(ae(t))}}}if(s>t)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return r&&(a.Data=r),a.Links=n||[],a}(e),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map((e=>{const t={};try{t.Hash=te.k.decode(e.Hash)}catch(e){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),n}const Te=["string","number","bigint","symbol"],Re=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class Pe{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Pe.uint=new Pe(0,"uint",!0),Pe.negint=new Pe(1,"negint",!0),Pe.bytes=new Pe(2,"bytes",!0),Pe.string=new Pe(3,"string",!0),Pe.array=new Pe(4,"array",!1),Pe.map=new Pe(5,"map",!1),Pe.tag=new Pe(6,"tag",!1),Pe.float=new Pe(7,"float",!0),Pe.false=new Pe(7,"false",!0),Pe.true=new Pe(7,"true",!0),Pe.null=new Pe(7,"null",!0),Pe.undefined=new Pe(7,"undefined",!0),Pe.break=new Pe(7,"break",!0);class Ie{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ae=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,Ye=new TextDecoder,Oe=new TextEncoder;function Ne(e){return Ae&&globalThis.Buffer.isBuffer(e)}function xe(e){return e instanceof Uint8Array?Ne(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const Ce=Ae?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Ve(e,t,n):(e,t,n)=>n-t>64?Ye.decode(e.subarray(t,n)):Ve(e,t,n),He=Ae?e=>e.length>64?globalThis.Buffer.from(e):Fe(e):e=>e.length>64?Oe.encode(e):Fe(e),je=e=>Uint8Array.from(e),Be=Ae?(e,t,n)=>Ne(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),ze=Ae?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),xe(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let t of e)r+t.length>n.length&&(t=t.subarray(0,n.length-r)),n.set(t,r),r+=t.length;return n},Ue=Ae?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Fe(e,t=1/0){let n;const r=e.length;let s=null;const i=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Ve(e,t,n){const r=[];for(;t<n;){const s=e[t];let i=null,a=s>239?4:s>223?3:s>191?2:1;if(t+a<=n){let n,r,o,c;switch(a){case 1:s<128&&(i=s);break;case 2:n=e[t+1],128==(192&n)&&(c=(31&s)<<6|63&n,c>127&&(i=c));break;case 3:n=e[t+1],r=e[t+2],128==(192&n)&&128==(192&r)&&(c=(15&s)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=e[t+1],r=e[t+2],o=e[t+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&(c=(15&s)<<18|(63&n)<<12|(63&r)<<6|63&o,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),t+=a}return We(r)}function We(e){const t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}class $e{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Ue(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Be(n,0,this.cursor)}else t=ze(this.chunks,this.cursor);return e&&this.reset(),t}}const Ge="CBOR decode error:",qe="CBOR encode error:",Ke=[];function Ze(e,t,n){if(e.length-t<n)throw new Error(`${Ge} not enough data for type`)}Ke[23]=1,Ke[24]=2,Ke[25]=3,Ke[26]=5,Ke[27]=9;const Je=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Qe(e,t,n){Ze(e,t,1);const r=e[t];if(!0===n.strict&&r<Je[0])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);return r}function Xe(e,t,n){Ze(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<Je[1])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);return r}function et(e,t,n){Ze(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<Je[2])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);return r}function tt(e,t,n){Ze(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],s=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(s);if(!0===n.strict&&i<Je[3])throw new Error(`${Ge} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${Ge} integers outside of the safe integer range are not supported`)}function nt(e,t){return rt(e,0,t.value)}function rt(e,t,n){if(n<Je[0]){const r=Number(n);e.push([t|r])}else if(n<Je[1]){const r=Number(n);e.push([24|t,r])}else if(n<Je[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<Je[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<Je[4]))throw new Error(`${Ge} encountered BigInt larger than allowable range`);{const n=[27|t,0,0,0,0,0,0,0];let s=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&s,s>>=8,n[7]=255&s,s>>=8,n[6]=255&s,s>>=8,n[5]=255&s,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,e.push(n)}}}nt.encodedSize=function(e){return rt.encodedSize(e.value)},rt.encodedSize=function(e){return e<Je[0]?1:e<Je[1]?2:e<Je[2]?3:e<Je[3]?5:9},nt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const st=BigInt(-1),it=BigInt(1);function at(e,t){const n=t.value,r="bigint"==typeof n?n*st-it:-1*n-1;rt(e,t.type.majorEncoded,r)}function ot(e,t,n,r){Ze(e,t,n+r);const s=Be(e,t+n,t+n+r);return new Ie(Pe.bytes,s,n+r)}function ct(e,t,n,r){return ot(e,t,1,n)}function dt(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Pe.string?He(e.value):e.value),e.encodedBytes}function lt(e,t){const n=dt(t);rt(e,t.type.majorEncoded,n.length),e.push(n)}function ut(e,t,n,r,s){const i=n+r;Ze(e,t,i);const a=new Ie(Pe.string,Ce(e,t+n,t+i),i);return!0===s.retainStringBytes&&(a.byteValue=Be(e,t+n,t+i)),a}function ht(e,t,n,r){return ut(e,t,1,n,r)}at.encodedSize=function(e){const t=e.value,n="bigint"==typeof t?t*st-it:-1*t-1;return n<Je[0]?1:n<Je[1]?2:n<Je[2]?3:n<Je[3]?5:9},at.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},lt.encodedSize=function(e){const t=dt(e);return rt.encodedSize(t.length)+t.length},lt.compareTokens=function(e,t){return n=dt(e),r=dt(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(Ne(e)&&Ne(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const pt=lt;function ft(e,t,n,r){return new Ie(Pe.array,r,n)}function mt(e,t,n,r){return ft(0,0,1,n)}function _t(e,t){rt(e,Pe.array.majorEncoded,t.value)}function yt(e,t,n,r){return new Ie(Pe.map,r,n)}function gt(e,t,n,r){return yt(0,0,1,n)}function wt(e,t){rt(e,Pe.map.majorEncoded,t.value)}function bt(e,t,n,r){return new Ie(Pe.tag,n,1)}function vt(e,t){rt(e,Pe.tag.majorEncoded,t.value)}function kt(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${Ge} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${Ge} Infinity values are not supported`)}return new Ie(Pe.float,e,t)}function Mt(e,t,n){const r=t.value;if(!1===r)e.push([20|Pe.float.majorEncoded]);else if(!0===r)e.push([21|Pe.float.majorEncoded]);else if(null===r)e.push([22|Pe.float.majorEncoded]);else if(void 0===r)e.push([23|Pe.float.majorEncoded]);else{let t,i=!1;n&&!0===n.float64||(Dt(r),t=Tt(St,1),r===t||Number.isNaN(r)?(St[0]=249,e.push(St.slice(0,3)),i=!0):(Rt(r),t=Pt(St,1),r===t&&(St[0]=250,e.push(St.slice(0,5)),i=!0))),i||(s=r,Lt.setFloat64(0,s,!1),t=It(St,1),St[0]=251,e.push(St.slice(0,9)))}var s}_t.compareTokens=nt.compareTokens,_t.encodedSize=function(e){return rt.encodedSize(e.value)},wt.compareTokens=nt.compareTokens,wt.encodedSize=function(e){return rt.encodedSize(e.value)},vt.compareTokens=nt.compareTokens,vt.encodedSize=function(e){return rt.encodedSize(e.value)},Mt.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null==n)return 1;if(!t||!0!==t.float64){Dt(n);let e=Tt(St,1);if(n===e||Number.isNaN(n))return 3;if(Rt(n),e=Pt(St,1),n===e)return 5}return 9};const Et=new ArrayBuffer(9),Lt=new DataView(Et,1),St=new Uint8Array(Et,0);function Dt(e){if(e===1/0)Lt.setUint16(0,31744,!1);else if(e===-1/0)Lt.setUint16(0,64512,!1);else if(Number.isNaN(e))Lt.setUint16(0,32256,!1);else{Lt.setFloat32(0,e);const t=Lt.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Lt.setUint16(0,31744,!1);else if(0===n)Lt.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?Lt.setUint16(0,0):e<-14?Lt.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Lt.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function Tt(e,t){if(e.length-t<2)throw new Error(`${Ge} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,s=1023&n;let i;return i=0===r?s*2**-24:31!==r?(s+1024)*2**(r-25):0===s?1/0:NaN,32768&n?-i:i}function Rt(e){Lt.setFloat32(0,e,!1)}function Pt(e,t){if(e.length-t<4)throw new Error(`${Ge} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function It(e,t){if(e.length-t<8)throw new Error(`${Ge} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function At(e,t,n){throw new Error(`${Ge} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Yt(e){return()=>{throw new Error(`${Ge} ${e}`)}}Mt.compareTokens=nt.compareTokens;const Ot=[];for(let e=0;e<=23;e++)Ot[e]=At;Ot[24]=function(e,t,n,r){return new Ie(Pe.uint,Qe(e,t+1,r),2)},Ot[25]=function(e,t,n,r){return new Ie(Pe.uint,Xe(e,t+1,r),3)},Ot[26]=function(e,t,n,r){return new Ie(Pe.uint,et(e,t+1,r),5)},Ot[27]=function(e,t,n,r){return new Ie(Pe.uint,tt(e,t+1,r),9)},Ot[28]=At,Ot[29]=At,Ot[30]=At,Ot[31]=At;for(let e=32;e<=55;e++)Ot[e]=At;Ot[56]=function(e,t,n,r){return new Ie(Pe.negint,-1-Qe(e,t+1,r),2)},Ot[57]=function(e,t,n,r){return new Ie(Pe.negint,-1-Xe(e,t+1,r),3)},Ot[58]=function(e,t,n,r){return new Ie(Pe.negint,-1-et(e,t+1,r),5)},Ot[59]=function(e,t,n,r){const s=tt(e,t+1,r);if("bigint"!=typeof s){const e=-1-s;if(e>=Number.MIN_SAFE_INTEGER)return new Ie(Pe.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${Ge} integers outside of the safe integer range are not supported`);return new Ie(Pe.negint,st-BigInt(s),9)},Ot[60]=At,Ot[61]=At,Ot[62]=At,Ot[63]=At;for(let e=64;e<=87;e++)Ot[e]=ct;Ot[88]=function(e,t,n,r){return ot(e,t,2,Qe(e,t+1,r))},Ot[89]=function(e,t,n,r){return ot(e,t,3,Xe(e,t+1,r))},Ot[90]=function(e,t,n,r){return ot(e,t,5,et(e,t+1,r))},Ot[91]=function(e,t,n,r){const s=tt(e,t+1,r);if("bigint"==typeof s)throw new Error(`${Ge} 64-bit integer bytes lengths not supported`);return ot(e,t,9,s)},Ot[92]=At,Ot[93]=At,Ot[94]=At,Ot[95]=Yt("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)Ot[e]=ht;Ot[120]=function(e,t,n,r){return ut(e,t,2,Qe(e,t+1,r),r)},Ot[121]=function(e,t,n,r){return ut(e,t,3,Xe(e,t+1,r),r)},Ot[122]=function(e,t,n,r){return ut(e,t,5,et(e,t+1,r),r)},Ot[123]=function(e,t,n,r){const s=tt(e,t+1,r);if("bigint"==typeof s)throw new Error(`${Ge} 64-bit integer string lengths not supported`);return ut(e,t,9,s,r)},Ot[124]=At,Ot[125]=At,Ot[126]=At,Ot[127]=Yt("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)Ot[e]=mt;Ot[152]=function(e,t,n,r){return ft(0,0,2,Qe(e,t+1,r))},Ot[153]=function(e,t,n,r){return ft(0,0,3,Xe(e,t+1,r))},Ot[154]=function(e,t,n,r){return ft(0,0,5,et(e,t+1,r))},Ot[155]=function(e,t,n,r){const s=tt(e,t+1,r);if("bigint"==typeof s)throw new Error(`${Ge} 64-bit integer array lengths not supported`);return ft(0,0,9,s)},Ot[156]=At,Ot[157]=At,Ot[158]=At,Ot[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${Ge} indefinite length items not allowed`);return ft(0,0,1,1/0)};for(let e=160;e<=183;e++)Ot[e]=gt;Ot[184]=function(e,t,n,r){return yt(0,0,2,Qe(e,t+1,r))},Ot[185]=function(e,t,n,r){return yt(0,0,3,Xe(e,t+1,r))},Ot[186]=function(e,t,n,r){return yt(0,0,5,et(e,t+1,r))},Ot[187]=function(e,t,n,r){const s=tt(e,t+1,r);if("bigint"==typeof s)throw new Error(`${Ge} 64-bit integer map lengths not supported`);return yt(0,0,9,s)},Ot[188]=At,Ot[189]=At,Ot[190]=At,Ot[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${Ge} indefinite length items not allowed`);return yt(0,0,1,1/0)};for(let e=192;e<=215;e++)Ot[e]=bt;Ot[216]=function(e,t,n,r){return new Ie(Pe.tag,Qe(e,t+1,r),2)},Ot[217]=function(e,t,n,r){return new Ie(Pe.tag,Xe(e,t+1,r),3)},Ot[218]=function(e,t,n,r){return new Ie(Pe.tag,et(e,t+1,r),5)},Ot[219]=function(e,t,n,r){return new Ie(Pe.tag,tt(e,t+1,r),9)},Ot[220]=At,Ot[221]=At,Ot[222]=At,Ot[223]=At;for(let e=224;e<=243;e++)Ot[e]=Yt("simple values are not supported");Ot[244]=At,Ot[245]=At,Ot[246]=At,Ot[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${Ge} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new Ie(Pe.null,null,1):new Ie(Pe.undefined,void 0,1)},Ot[248]=Yt("simple values are not supported"),Ot[249]=function(e,t,n,r){return kt(Tt(e,t+1),3,r)},Ot[250]=function(e,t,n,r){return kt(Pt(e,t+1),5,r)},Ot[251]=function(e,t,n,r){return kt(It(e,t+1),9,r)},Ot[252]=At,Ot[253]=At,Ot[254]=At,Ot[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${Ge} indefinite length items not allowed`);return new Ie(Pe.break,void 0,1)};const Nt=[];for(let e=0;e<24;e++)Nt[e]=new Ie(Pe.uint,e,1);for(let e=-1;e>=-24;e--)Nt[31-e]=new Ie(Pe.negint,e,1);Nt[64]=new Ie(Pe.bytes,new Uint8Array(0),1),Nt[96]=new Ie(Pe.string,"",1),Nt[128]=new Ie(Pe.array,0,1),Nt[160]=new Ie(Pe.map,0,1),Nt[244]=new Ie(Pe.false,!1,1),Nt[245]=new Ie(Pe.true,!0,1),Nt[246]=new Ie(Pe.null,null,1);var xt=n(82784);const Ct={float64:!1,mapSorter:function(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const s=n.type.major,i=Ht[s].compareTokens(n,r);return 0===i&&xt.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i},quickEncodeToken:function(e){switch(e.type){case Pe.false:return je([244]);case Pe.true:return je([245]);case Pe.null:return je([246]);case Pe.bytes:return e.value.length?void 0:je([64]);case Pe.string:return""===e.value?je([96]):void 0;case Pe.array:return 0===e.value?je([128]):void 0;case Pe.map:return 0===e.value?je([160]):void 0;case Pe.uint:return e.value<24?je([Number(e.value)]):void 0;case Pe.negint:if(e.value>=-24)return je([31-Number(e.value)])}}},Ht=function(){const e=[];return e[Pe.uint.major]=nt,e[Pe.negint.major]=at,e[Pe.bytes.major]=lt,e[Pe.string.major]=pt,e[Pe.array.major]=_t,e[Pe.map.major]=wt,e[Pe.tag.major]=vt,e[Pe.float.major]=Mt,e}(),jt=new $e;class Bt{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${qe} object contains circular references`);return new Bt(t,e)}}const zt={null:new Ie(Pe.null,null),undefined:new Ie(Pe.undefined,void 0),true:new Ie(Pe.true,!0),false:new Ie(Pe.false,!1),emptyArray:new Ie(Pe.array,0),emptyMap:new Ie(Pe.map,0)},Ut={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new Ie(e>=0?Pe.uint:Pe.negint,e):new Ie(Pe.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new Ie(Pe.uint,e):new Ie(Pe.negint,e),Uint8Array:(e,t,n,r)=>new Ie(Pe.bytes,e),string:(e,t,n,r)=>new Ie(Pe.string,e),boolean:(e,t,n,r)=>e?zt.true:zt.false,null:(e,t,n,r)=>zt.null,undefined:(e,t,n,r)=>zt.undefined,ArrayBuffer:(e,t,n,r)=>new Ie(Pe.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new Ie(Pe.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[zt.emptyArray,new Ie(Pe.break)]:zt.emptyArray;r=Bt.createCheck(r,e);const s=[];let i=0;for(const t of e)s[i++]=Ft(t,n,r);return n.addBreakTokens?[new Ie(Pe.array,e.length),s,new Ie(Pe.break)]:[new Ie(Pe.array,e.length),s]},Object(e,t,n,r){const s="Object"!==t,i=s?e.keys():Object.keys(e),a=s?e.size:i.length;if(!a)return!0===n.addBreakTokens?[zt.emptyMap,new Ie(Pe.break)]:zt.emptyMap;r=Bt.createCheck(r,e);const o=[];let c=0;for(const t of i)o[c++]=[Ft(t,n,r),Ft(s?e.get(t):e[t],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(o,n),n.addBreakTokens?[new Ie(Pe.map,a),o,new Ie(Pe.break)]:[new Ie(Pe.map,a),o]}};Ut.Map=Ut.Object,Ut.Buffer=Ut.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ut[`${e}Array`]=Ut.DataView;function Ft(e,t={},n){const r=function(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(Te.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";return function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(Re.includes(t))return t}(e)||"Object"}(e),s=t&&t.typeEncoders&&t.typeEncoders[r]||Ut[r];if("function"==typeof s){const i=s(e,r,t,n);if(null!=i)return i}const i=Ut[r];if(!i)throw new Error(`${qe} unsupported type: ${r}`);return i(e,r,t,n)}function Vt(e,t,n,r){if(Array.isArray(t))for(const s of t)Vt(e,s,n,r);else n[t.type.major](e,t,r)}function Wt(e,t,n){const r=Ft(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const e=n.quickEncodeToken(r);if(e)return e;const s=t[r.type.major];if(s.encodedSize){const e=s.encodedSize(r,n),t=new $e(e);if(s(t,r,n),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return xe(t.chunks[0])}}return jt.reset(),Vt(jt,r,t,n),jt.toBytes(!0)}function $t(e,t){return t=Object.assign({},Ct,t),Wt(e,Ht,t)}const Gt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class qt{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=Nt[e];if(void 0===t){const n=Ot[e];if(!n)throw new Error(`${Ge} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this.pos,r,this.options)}return this.pos+=t.encodedLength,t}}const Kt=Symbol.for("DONE"),Zt=Symbol.for("BREAK");function Jt(e,t){if(e.done())return Kt;const n=e.next();if(n.type===Pe.break)return Zt;if(n.type.terminal)return n.value;if(n.type===Pe.array)return function(e,t,n){const r=[];for(let s=0;s<e.value;s++){const i=Jt(t,n);if(i===Zt){if(e.value===1/0)break;throw new Error(`${Ge} got unexpected break to lengthed array`)}if(i===Kt)throw new Error(`${Ge} found array but not enough entries (got ${s}, expected ${e.value})`);r[s]=i}return r}(n,e,t);if(n.type===Pe.map)return function(e,t,n){const r=!0===n.useMaps,s=r?void 0:{},i=r?new Map:void 0;for(let a=0;a<e.value;a++){const o=Jt(t,n);if(o===Zt){if(e.value===1/0)break;throw new Error(`${Ge} got unexpected break to lengthed map`)}if(o===Kt)throw new Error(`${Ge} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(!0!==r&&"string"!=typeof o)throw new Error(`${Ge} non-string keys not supported (got ${typeof o})`);const c=Jt(t,n);if(c===Kt)throw new Error(`${Ge} found map but not enough entries (got ${a} [no value], expected ${e.value})`);r?i.set(o,c):s[o]=c}return r?i:s}(n,e,t);if(n.type===Pe.tag){if(t.tags&&"function"==typeof t.tags[n.value]){const r=Jt(e,t);return t.tags[n.value](r)}throw new Error(`${Ge} tag not supported (${n.value})`)}throw new Error("unsupported")}function Qt(e,t){if(!(e instanceof Uint8Array))throw new Error(`${Ge} data to decode must be a Uint8Array`);const n=(t=Object.assign({},Gt,t)).tokenizer||new qt(e,t),r=Jt(n,t);if(r===Kt)throw new Error(`${Ge} did not find any content to decode`);if(r===Zt)throw new Error(`${Ge} got unexpected break`);if(!n.done())throw new Error(`${Ge} too many terminals, data makes no sense`);return r}const Xt={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=te.k.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new Ie(Pe.tag,42),new Ie(Pe.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},en={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};en.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return te.k.decode(e.subarray(1))};const tn="dag-cbor",nn=113,rn=e=>$t(e,Xt),sn=e=>Qt(e,en);var an=n(61058),on=n(47408);class cn extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Pe.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Pe.map&&(t.elements++,1!==t.elements&&(t.elements%2==1?e.push([44]):e.push([58]))))}[Pe.uint.major](e,t){this.prefix(e);const n=String(t.value),r=[];for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);e.push(r)}[Pe.negint.major](e,t){this[Pe.uint.major](e,t)}[Pe.bytes.major](e,t){throw new Error(`${qe} unsupported type: Uint8Array`)}[Pe.string.major](e,t){this.prefix(e);const n=He(JSON.stringify(t.value));e.push(n.length>32?xe(n):n)}[Pe.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Pe.array,elements:0}),e.push([91])}[Pe.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Pe.map,elements:0}),e.push([123])}[Pe.tag.major](e,t){}[Pe.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===Pe.array)e.push([93]);else{if(t.type!==Pe.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${qe} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const n=String(t.value),r=[];let s=!1;for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e),s||46!==r[e]&&101!==r[e]&&69!==r[e]||(s=!0);s||(r.push(46),r.push(48)),e.push(r)}}const dn={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${qe} complex map keys are not supported`);const n=e[0],r=t[0];if(n.type!==Pe.string||r.type!==Pe.string)throw new Error(`${qe} non-string map keys are not supported`);if(n<r)return-1;if(n>r)return 1;throw new Error(`${qe} unexpected duplicate map keys, this is not supported`)}};class ln{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${Ge} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${Ge} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,n=!1;const r=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this.pos++}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new Ie(Pe.uint,0,this.pos-e);this.pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${Ge} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(n)throw new Error(`${Ge} unexpected token at position ${this.pos}`);n=!0,this.pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,r([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),i=parseFloat(s);return n?new Ie(Pe.float,i,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(i)?new Ie(i>=0?Pe.uint:Pe.negint,i,this.pos-e):new Ie(i>=0?Pe.uint:Pe.negint,BigInt(s),this.pos-e)}parseString(){if(34!==this.ch())throw new Error(`${Ge} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let e=this.pos,t=0;e<this.data.length&&t<65536;e++,t++){const n=this.data[e];if(92===n||n<32||n>=128)break;if(34===n){const n=String.fromCharCode.apply(null,this.data.subarray(this.pos,e));return this.pos=e+1,new Ie(Pe.string,n,t)}}const e=this.pos,t=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${Ge} unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${Ge} unexpected unicode escape character at position ${this.pos}`);t=t-65+10}e=16*e+t,this.pos++}return e},r=()=>{const e=this.ch();let n,r,s,i,a=null,o=e>239?4:e>223?3:e>191?2:1;if(this.pos+o>this.data.length)throw new Error(`${Ge} unexpected unicode sequence at position ${this.pos}`);switch(o){case 1:e<128&&(a=e);break;case 2:n=this.data[this.pos+1],128==(192&n)&&(i=(31&e)<<6|63&n,i>127&&(a=i));break;case 3:n=this.data[this.pos+1],r=this.data[this.pos+2],128==(192&n)&&128==(192&r)&&(i=(15&e)<<12|(63&n)<<6|63&r,i>2047&&(i<55296||i>57343)&&(a=i));break;case 4:n=this.data[this.pos+1],r=this.data[this.pos+2],s=this.data[this.pos+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(i=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,i>65535&&i<1114112&&(a=i))}null===a?(a=65533,o=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|1023&a),t.push(a),this.pos+=o};for(;!this.done();){const s=this.ch();let i;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${Ge} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:t.push(i);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${Ge} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Ie(Pe.string,We(t),this.pos-e);default:if(s<32)throw new Error(`${Ge} invalid control character at position ${this.pos}`);s<128?(t.push(s),this.pos++):r()}}throw new Error(`${Ge} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Ie(Pe.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Ie(Pe.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Ie(Pe.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Ie(Pe.false,!1,5);case 116:return this.expect([116,114,117,101]),new Ie(Pe.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${Ge} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new Ie(Pe.break,void 0,1);if(44!==this.ch())throw new Error(`${Ge} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new Ie(Pe.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Ie(Pe.break,void 0,1);if(44!==this.ch())throw new Error(`${Ge} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new Ie(Pe.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${Ge} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${Ge} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function un(e){const t=on.base64.encode(e).slice(1);return[new Ie(Pe.map,1/0,1),new Ie(Pe.string,"/",1),new Ie(Pe.map,1/0,1),new Ie(Pe.string,"bytes",5),new Ie(Pe.string,t,t.length),new Ie(Pe.break,void 0,1),new Ie(Pe.break,void 0,1)]}const hn={typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=an.k0.asCID(e);if(!t)return null;const n=t.toString();return[new Ie(Pe.map,1/0,1),new Ie(Pe.string,"/",1),new Ie(Pe.string,n,n.length),new Ie(Pe.break,void 0,1)]},Uint8Array:un,Buffer:un,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class pn extends ln{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Pe.map){const e=this._next();if(e.type===Pe.string&&"/"===e.value){const e=this._next();if(e.type===Pe.string){if(this._next().type!==Pe.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new Ie(Pe.tag,42,0)}if(e.type===Pe.map){const e=this._next();if(e.type===Pe.string&&"bytes"===e.value){const e=this._next();if(e.type===Pe.string){for(let e=0;e<2;e++)if(this._next().type!==Pe.break)throw new Error("Invalid encoded Bytes form");const t=on.base64.decode(`m${e.value}`);return new Ie(Pe.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const fn={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};fn.tags[42]=an.k0.parse;const mn="dag-json",_n=297,yn=e=>{return t=e,n=hn,n=Object.assign({},dn,n),Wt(t,new cn,n);var t,n},gn=e=>function(e,t){return Qt(e,t=Object.assign({tokenizer:new ln(e,t)},t))}(e,Object.assign(fn,{tokenizer:new pn(e,fn)})),wn=e=>bn.decode(yn(e)),bn=new TextDecoder,vn=e=>gn(kn.encode(e)),kn=new TextEncoder;function Mn(e){return on.base64url.encode(e).slice(1)}function En(e){return on.base64url.decode(`u${e}`)}function Ln(e){const t={signature:En(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=En(e.protected)),t}function Sn(e){const t={signature:Mn(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Mn(e.protected)),t}function Dn(e){const t={};return e.encrypted_key&&(t.encrypted_key=En(e.encrypted_key)),e.header&&(t.header=e.header),t}function Tn(e){const t={};return e.encrypted_key&&(t.encrypted_key=Mn(e.encrypted_key)),e.header&&(t.header=e.header),t}const Rn="dag-jose",Pn=133;function In(e){return"payload"in e&&"string"==typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function An(e){return"ciphertext"in e&&"string"==typeof e.ciphertext&&"iv"in e&&"string"==typeof e.iv&&"protected"in e&&"string"==typeof e.protected&&"tag"in e&&"string"==typeof e.tag}function Yn(e){if("string"==typeof e){const t=e.split(".");if(3===t.length)return function(e){const[t,n,r]=e;return{payload:n,signatures:[{protected:t,signature:r}],link:te.k.decode(En(n))}}(t);if(5===t.length)return function(e){const[t,n,r,s,i]=e,a={ciphertext:s,iv:r,protected:t,tag:i};return n&&(a.recipients=[{encrypted_key:n}]),a}(t);throw new Error("Not a valid JOSE string")}if(In(e)||An(e))return e;throw new Error("Not a valid unencoded JOSE object")}function On(e){let t;if("string"==typeof e&&(e=Yn(e)),In(e))t=function(e){const t=En(e.payload);try{te.k.decode(t)}catch(e){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(Ln)}}(e);else{if(!An(e))throw new Error("Not a valid JOSE object");t=function(e){const t={ciphertext:En(e.ciphertext),protected:En(e.protected),iv:En(e.iv),tag:En(e.tag)};return e.aad&&(t.aad=En(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Dn)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}return new Uint8Array(rn(t))}function Nn(e){let t;try{t=sn(e)}catch(e){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(n=t)&&n.payload instanceof Uint8Array&&"signatures"in n&&Array.isArray(n.signatures))return function(e){const t={payload:Mn(e.payload),signatures:e.signatures.map(Sn)};return t.link=te.k.decode(new Uint8Array(e.payload)),t}(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){const t={ciphertext:Mn(e.ciphertext),protected:Mn(e.protected),iv:Mn(e.iv),tag:Mn(e.tag)};return e.aad&&(t.aad=Mn(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Tn)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object");var n}var xn=n(39797),Cn=n(14957);class Hn extends Error{constructor(e="not initialized"){super(e),this.name="NotInitializedError",this.code=Hn.code}}Hn.code="ERR_NOT_INITIALIZED";class jn extends Error{constructor(e="cannot initialize an initializing node"){super(e),this.name="AlreadyInitializingError",this.code=Bn.code}}jn.code="ERR_ALREADY_INITIALIZING";class Bn extends Error{constructor(e="cannot re-initialize an initialized node"){super(e),this.name="AlreadyInitializedError",this.code=Bn.code}}Bn.code="ERR_ALREADY_INITIALIZED";class zn extends Error{constructor(e="not started"){super(e),this.name="NotStartedError",this.code=zn.code}}zn.code="ERR_NOT_STARTED";class Un extends Error{constructor(e="cannot start, already startin"){super(e),this.name="AlreadyStartingError",this.code=Un.code}}Un.code="ERR_ALREADY_STARTING";class Fn extends Error{constructor(e="cannot start, already started"){super(e),this.name="AlreadyStartedError",this.code=Fn.code}}Fn.code="ERR_ALREADY_STARTED";class Vn extends Error{constructor(e="not enabled"){super(e),this.name="NotEnabledError",this.code=Vn.code}}Vn.code="ERR_NOT_ENABLED";var Wn=n(53376),$n=n(12964),Gn=n(79350),qn=n(55574),Kn=n(15378),Zn=n(31587),Jn=n(32152),Qn=n(21963),Xn=n(50973);const er=/^\/(ip[fn]s)\/([^/?#]+)/,tr=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,nr=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function rr(e){try{return ar(e)?Boolean(te.k.parse(e)):e instanceof Uint8Array?Boolean(te.k.decode(e)):Boolean(te.k.asCID(e))}catch{return!1}}function sr(e,t,n=1,r=2){const s=or(e);if(!1===s)return!1;const i=s.match(t);if(null==i)return!1;if("ipfs"!==i[n])return!1;let a=i[r];return null!=a&&t===tr&&(a=a.toLowerCase()),rr(a)}function ir(e,t,n=1,r=2){const s=or(e);if(!1===s)return!1;const i=s.match(t);if(null==i)return!1;if("ipns"!==i[n])return!1;let a=i[r];if(null!=a&&t===tr){if(a=a.toLowerCase(),rr(a))return!0;try{!a.includes(".")&&a.includes("-")&&(a=a.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:e}=new Qn.URL(`http://${a}`);return nr.test(e)}catch(e){return!1}}return!0}function ar(e){return"string"==typeof e}function or(e){return e instanceof Uint8Array?(0,Xn.B)(e,"base58btc"):!!ar(e)&&e}const cr=e=>sr(e,er)||ir(e,er),dr=e=>ir(e,er);var lr=n(48443),ur=n(92360);let hr=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function pr(e="",t="ms"){var n=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(hr,(function(e,t,r){(r=fr(r))&&(n=(n||0)+parseFloat(t,10)*r)})),n&&n/(fr(t)||1)}function fr(e){return pr[e]||pr[e.toLowerCase().replace(/s$/,"")]}pr.nanosecond=pr.ns=1e-6,pr["s"]=pr["s"]=pr.us=pr.microsecond=.001,pr.millisecond=pr.ms=pr[""]=1,pr.second=pr.sec=pr.s=1e3*pr.ms,pr.minute=pr.min=pr.m=60*pr.s,pr.hour=pr.hr=pr.h=60*pr.m,pr.day=pr.d=24*pr.h,pr.week=pr.wk=pr.w=7*pr.d,pr.month=pr.b=30.4375*pr.d,pr.year=pr.yr=pr.y=365.25*pr.d;const mr=pr;class _r extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=_r.code}}function yr(e,t){return(...n)=>{const r=n[null==t?n.length-1:t];if(!r||!r.timeout)return e(...n);const s="string"==typeof r.timeout?mr(r.timeout):r.timeout,i=new $n.TimeoutController(s);r.signal=(0,ur.anySignal)([r.signal,i.signal]);const a=e(...n),o=new Promise(((e,t)=>{i.signal.addEventListener("abort",(()=>{t(new _r)}))})),c=Date.now(),d=()=>{if(i.signal.aborted)throw new _r;if(Date.now()-c>s)throw i.abort(),new _r};return a[Symbol.asyncIterator]?async function*(){const e=a[Symbol.asyncIterator]();try{for(;;){const{value:t,done:n}=await Promise.race([e.next(),o]);if(n)break;d(),yield t}}catch(e){throw d(),e}finally{i.clear(),e.return&&e.return()}}():(async()=>{try{const e=await Promise.race([a,o]);return d(),e}catch(e){throw d(),e}finally{i.clear()}})()}}_r.code="ERR_TIMEOUT";const gr="/ipfs/";function wr(e){if(e instanceof Uint8Array)try{e=te.k.decode(e)}catch(e){throw B(e,"ERR_INVALID_CID")}let t=te.k.asCID(e);if(t)return{cid:t,path:void 0};(e=e.toString()).startsWith(gr)&&(e=e.substring(gr.length));const n=e.split("/");let r;try{t=te.k.parse(n.shift()||"")}catch(e){throw B(e,"ERR_INVALID_CID")}return n.length&&(r=`/${n.join("/")}`),{cid:t,path:r}}const br="This command must be run in online mode. Try running 'ipfs daemon' first.",vr=new lr.s("/local/filesroot"),kr=262144,Mr=e=>e instanceof Uint8Array?te.k.decode(e).toString():(0===(e=e.toString()).indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),Er=async function(e,t,n,r={}){const{cid:s,path:i}=wr(n);i&&(r.path=i);let a=s,o=r.path||"";if(o.startsWith("/")&&(o=o.substring(1)),r.path)try{for await(const{value:n,remainderPath:i}of Dr(s,r.path,t,e,{signal:r.signal})){if(!te.k.asCID(n))break;o=i,a=n}}catch(e){throw e.message.startsWith("Object has no property")&&(e.message=`no link named "${o.split("/")[0]}" under ${a}`,e.code="ERR_NO_LINK"),e}return{cid:a,remainderPath:o||""}},Lr=e=>{if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error(`Unknown node type '${e.type}'`);const t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},Sr=yr((async(e,t)=>await e)),Dr=async function*(e,t,n,r,s){const i=async e=>{const t=await n.getCodec(e.code),i=await r.blocks.get(e,s);return t.decode(i)},a=t.split("/").filter(Boolean);let o=await i(e),c=e;for(;a.length;){const n=a.shift();if(!n)throw B(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(e.code===Le&&Array.isArray(o.Links)){const e=o.Links.find((e=>e.Name===n));if(e){yield{value:e.Hash,remainderPath:a.join("/")},o=await i(e.Hash),c=e.Hash;continue}}if(!Object.prototype.hasOwnProperty.call(o,n))throw B(new Error(`no link named "${n}" under ${c}`),"ERR_NO_LINK");o=o[n],yield{value:o,remainderPath:a.join("/")},te.k.asCID(o)&&(c=o,o=await i(o))}yield{value:o,remainderPath:""}};class Tr{static create({start:e,stop:t}){return new Tr(e,t)}static async start(e,t){const{state:n,activate:r}=e;switch(n.status){case"stopped":try{const n=r(t);e.state={status:"starting",ready:n};const s=await n;return e.state={status:"started",value:s},s}catch(t){throw e.state={status:"stopped"},t}case"starting":throw new Un;case"started":throw new Fn;case"stopping":return await n.ready,await Tr.start(e,t);default:return Tr.panic(e)}}static async stop(e){const{state:t,deactivate:n}=e;switch(t.status){case"stopped":break;case"starting":try{await t.ready}catch(e){}return await Tr.stop(e);case"stopping":return await t.ready;case"started":n&&await n(t.value),e.state={status:"stopped"};break;default:Tr.panic(t)}}static try({state:e}){return"started"===e.status?e.value:null}static async use({state:e},t){switch(e.status){case"started":return e.value;case"starting":return await Sr(e.ready,t);default:throw new zn}}static panic({state:e}){const t=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${t}, should never happen if you see this please report a bug`)}constructor(e,t){this.activate=e,this.deactivate=t,this.state={status:"stopped"}}async use(e){return await Tr.use(this,e)}try(){return Tr.try(this)}}var Rr=n(26205),Pr=n(77026),Ir=n(6963);const Ar=new class{constructor(e){this.lru=Rr(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,n){this.lru.set(e,{value:t,expire:Date.now()+n})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}(1e3),Yr=new(Pr.Z.default?Pr.Z.default:Pr.Z)({concurrency:4}),Or=e=>{if(e.Path)return e.Path;throw new Error(e.Message)};var Nr=n(44141);async function xr(e){let t;for await(const n of e)t=n;return t}async function*Cr(e){if(null==e)throw B(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");const t=te.k.asCID(e);if(t)yield Hr({cid:t});else{if(!(e instanceof String||"string"==typeof e)){if(null!=e.cid||null!=e.path)return yield Hr(e);if(Symbol.iterator in e){const t=e[Symbol.iterator](),n=t.next();if(n.done)return t;if(te.k.asCID(n.value)||n.value instanceof String||"string"==typeof n.value){yield Hr({cid:n.value});for(const e of t)yield Hr({cid:e});return}if(null!=n.value.cid||null!=n.value.path){yield Hr(n.value);for(const e of t)yield Hr(e);return}throw B(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done)return t;if(te.k.asCID(n.value)||n.value instanceof String||"string"==typeof n.value){yield Hr({cid:n.value});for await(const e of t)yield Hr({cid:e});return}if(null!=n.value.cid||null!=n.value.path){yield Hr(n.value);for await(const e of t)yield Hr(e);return}throw B(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw B(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}yield Hr({path:e})}}function Hr(e){const t=e.cid||`${e.path}`;if(!t)throw B(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const n={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(n.metadata=e.metadata),n}const jr={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function Br(e,t,n){const r={type:e,cid:t};return n&&(r.metadata=n),r}class zr{constructor({codecs:e,repo:t}){const n=function({repo:e,codecs:t}){return yr((async function*(n,r={}){const s=async function*(){for await(const{path:r,recursive:s,metadata:i}of Cr(n)){const{cid:n}=await Er(e,t,r),{reason:a}=await e.pins.isPinnedWithType(n,[jr.recursive,jr.direct]);if("recursive"===a&&!s)throw new Error(`${n} already pinned recursively`);s?await e.pins.pinRecursively(n,{metadata:i}):await e.pins.pinDirectly(n,{metadata:i}),yield n}};if(!Boolean(r.lock))return void(yield*s());const i=await e.gcLock.readLock();try{yield*s()}finally{i()}}))}({codecs:e,repo:t});this.addAll=n,this.add=function({addAll:e}){return(t,n={})=>{let r;const s=te.k.asCID(t);return r=e(s?[{cid:s,...n}]:[{path:t.toString(),...n}],n),xr(r)}}({addAll:n});const r=function({repo:e,codecs:t}){return yr((async function*(n,r={}){const s=await e.gcLock.readLock();try{for await(const{path:r,recursive:s}of Cr(n)){const{cid:n}=await Er(e,t,r),{pinned:i,reason:a}=await e.pins.isPinnedWithType(n,jr.all);if(!i)throw new Error(`${n} is not pinned`);switch(a){case jr.recursive:if(!s)throw new Error(`${n} is pinned recursively`);await e.pins.unpin(n),yield n;break;case jr.direct:await e.pins.unpin(n),yield n;break;default:throw new Error(`${n} is pinned indirectly under ${a}`)}}}finally{s()}}))}({codecs:e,repo:t});this.rmAll=r,this.rm=function({rmAll:e}){return async function(t,n={}){const r=await xr(e([{path:t,...n}],n));if(!r)throw new Error("CID expected");return r}}({rmAll:r}),this.ls=function({repo:e,codecs:t}){return yr((async function*(n={}){let r=jr.all;if(n.type&&(r=n.type,!Object.keys(jr).includes(r)))throw B(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(n.paths){let s=!1;for await(const{path:i}of Cr(n.paths)){const{cid:n}=await Er(e,t,i),{reason:a,pinned:o,parent:c,metadata:d}=await e.pins.isPinnedWithType(n,r);if(!o)throw B(new Error(`path '${i}' is not pinned`),"ERR_NOT_PINNED");switch(a){case jr.direct:case jr.recursive:s=!0,yield Br(a,n,d);break;default:s=!0,yield Br(`${jr.indirect} through ${c}`,n,d)}}if(!s)throw new Error("No match found")}else{if(r===jr.recursive||r===jr.all)for await(const{cid:t,metadata:n}of e.pins.recursiveKeys())yield Br(jr.recursive,t,n);if(r===jr.indirect||r===jr.all)for await(const t of e.pins.indirectKeys(n))yield Br(jr.indirect,t);if(r===jr.direct||r===jr.all)for await(const{cid:t,metadata:n}of e.pins.directKeys())yield Br(jr.direct,t,n)}}))}({codecs:e,repo:t}),this.remote={add:(e,t={})=>Promise.reject(new Error("Not implemented")),ls:async function*(e,t={}){return Promise.reject(new Error("Not implemented"))},rm:(e,t={})=>Promise.reject(new Error("Not implemented")),rmAll:(e,t={})=>Promise.reject(new Error("Not implemented")),service:{add:(e,t)=>Promise.reject(new Error("Not implemented")),rm:(e,t={})=>Promise.reject(new Error("Not implemented")),ls:(e={})=>Promise.reject(new Error("Not implemented"))}}}}var Ur=n(22915),Fr=n(93613),Vr=n(6245),Wr=n(43478),$r=n(17619);const Gr="ERR_UNRECOGNIZED_VALIDITY",qr="ERR_SIGNATURE_VERIFICATION",Kr="ERR_UNDEFINED_PARAMETER";var Zr,Jr=n(92255);!function(e){let t,n,r;!function(e){e.EOL="EOL"}(t=e.ValidityType||(e.ValidityType={})),function(e){e[e.EOL=0]="EOL"}(n||(n={})),function(e){e.codec=()=>(0,Jr.Ji)(n)}(t=e.ValidityType||(e.ValidityType={})),e.codec=()=>(null==r&&(r=(0,Jr.yw)(((t,n,r={})=>{!1!==r.lengthDelimited&&n.fork(),null!=t.value&&(n.uint32(10),n.bytes(t.value)),null!=t.signature&&(n.uint32(18),n.bytes(t.signature)),null!=t.validityType&&(n.uint32(24),e.ValidityType.codec().encode(t.validityType,n)),null!=t.validity&&(n.uint32(34),n.bytes(t.validity)),null!=t.sequence&&(n.uint32(40),n.uint64(t.sequence)),null!=t.ttl&&(n.uint32(48),n.uint64(t.ttl)),null!=t.pubKey&&(n.uint32(58),n.bytes(t.pubKey)),null!=t.signatureV2&&(n.uint32(66),n.bytes(t.signatureV2)),null!=t.data&&(n.uint32(74),n.bytes(t.data)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={},s=null==n?t.len:t.pos+n;for(;t.pos<s;){const n=t.uint32();switch(n>>>3){case 1:r.value=t.bytes();break;case 2:r.signature=t.bytes();break;case 3:r.validityType=e.ValidityType.codec().decode(t);break;case 4:r.validity=t.bytes();break;case 5:r.sequence=t.uint64();break;case 6:r.ttl=t.uint64();break;case 7:r.pubKey=t.bytes();break;case 8:r.signatureV2=t.bytes();break;case 9:r.data=t.bytes();break;default:t.skipType(7&n)}}return r}))),r),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(Zr||(Zr={}));var Qr=n(44527);const Xr=(0,j.kg)("ipns:utils"),es=(0,Wn.m)("/ipns/");function ts(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),n=String(e).trim().match(t);if(null==n)throw new Error("Invalid format");const r=parseInt(n[1],10),s=parseInt(n[2],10)-1,i=parseInt(n[3],10),a=parseInt(n[4],10),o=parseInt(n[5],10),c=parseInt(n[6],10),d=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(r,s,i,a,o,c,d))}const ns=e=>{const t=(0,Wn.m)("ipns-signature:");return(0,Qr.z)([t,e])},rs=e=>{const t=Zr.decode(e);return null!=t.sequence&&(t.sequence=BigInt(t.sequence)),null!=t.ttl&&(t.ttl=BigInt(t.ttl)),{value:t.value??new Uint8Array(0),signature:t.signature??new Uint8Array(0),validityType:t.validityType??Zr.ValidityType.EOL,validity:t.validity??new Uint8Array(0),sequence:t.sequence??0n,pubKey:t.pubKey,ttl:t.ttl??void 0,signatureV2:t.signatureV2,data:t.data}},ss=e=>(0,Qr.z)([es,e.toBytes()]),is=(0,j.kg)("ipns"),as=xn.identity.code,os="/ipns/",cs=os.length,ds=e=>new lr.s(`/ipns/${(e=>qn.base32upper.encode(e).slice(1))(e)}`),ls=async(e,t,n,r)=>{try{const s=((e,t,n)=>{const r=(0,Wn.m)(t);return(0,Qr.z)([e,n,r])})(t,n,r);return await e.sign(s)}catch(e){throw is.error("record signature creation failed",e),B(new Error("record signature creation failed"),"ERR_SIGNATURE_CREATION")}},us=(0,j.kg)("ipfs:ipns:publisher"),hs=(0,Fr.notFoundError)().code,ps=36e5;class fs{constructor(e,t){this._routing=e,this._datastore=t}async publishWithEOL(e,t,n,r){const s=await this._updateOrCreateRecord(e,t,n,r);return this._putRecordToRouting(s,e,r)}publish(e,t,n){return this.publishWithEOL(e,t,ps,n)}async _putRecordToRouting(e,t,n){if(!(0,Ur.I)(t)){const e="peerId received is not valid";throw us.error(e),B(new Error(e),"ERR_INVALID_PEER_ID")}if(null==t.publicKey)throw B(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");const r=ss(t);return await this._publishEntry(r,e,n),e}async _publishEntry(e,t,n){try{const r=await this._routing.put(e,t,n);return us(`ipns record for ${(0,Xn.B)(e,"base32")} was stored in the routing`),r}catch(t){const n=`ipns record for ${(0,Xn.B)(e,"base32")} could not be stored in the routing - ${t.stack}`;throw us.error(n),us.error(t),B(new Error(n),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,t={}){if(!(0,Ur.I)(e)){const e="peerId received is not valid";throw us.error(e),B(new Error(e),"ERR_INVALID_PEER_ID")}const n=!1!==t.checkRouting;try{const t=await this._datastore.get(ds(e.toBytes()));return this._unmarshalData(t)}catch(t){if(t.code!==hs){const t=`unexpected error getting the ipns record ${e.toString()} from datastore`;throw us.error(t),B(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!n)throw B(t,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{const t=ss(e),n=await this._routing.get(t);return this._unmarshalData(n)}catch(e){throw us.error(e),e}}}_unmarshalData(e){try{return rs(e)}catch(e){throw B(e,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,t,n,r){if(!(0,Ur.I)(e)){const e="peerId received is not valid";throw us.error(e),B(new Error(e),"ERR_INVALID_PEER_ID")}const s={checkRouting:!0};let i;try{i=await this._getPublished(e,s)}catch(t){if(t.code!==hs){const n=`unexpected error when determining the last published IPNS record for ${e.toString()} ${t.stack}`;throw us.error(n),B(new Error(n),"ERR_DETERMINING_PUBLISHED_RECORD")}}let a,o=0n;i&&void 0!==i.sequence&&(o=(0,Vr.f)(i.value,t)?i.sequence:i.sequence+BigInt(1));try{a=await(async(e,t,n,r)=>{const s=new Wr(Date.now()+Number(r)),i=Zr.ValidityType.EOL,[a,o]=r.toString().split("."),c=BigInt(a)*BigInt(1e5)+BigInt(o??"0");return await(async(e,t,n,r,s,i)=>{n=BigInt(n);const a=(0,Wn.m)(s.toString());if(null==e.privateKey)throw B(new Error("Missing private key"),"ERR_MISSING_PRIVATE_KEY");const o=await(0,$r.unmarshalPrivateKey)(e.privateKey),c=await ls(o,t,r,a),d=((e,t,n,r,s)=>{let i;if(n!==Zr.ValidityType.EOL)throw B(new Error("Unknown validity type"),Gr);return i=0,$t({Value:e,Validity:t,ValidityType:0,Sequence:r,TTL:s})})(t,a,r,n,i),l=ns(d),u={value:t,signature:c,validityType:r,validity:a,sequence:n,ttl:i,signatureV2:await o.sign(l),data:d};if(null!=e.publicKey){const t=Kn.Jx(e.toBytes());t.code===as&&(0,Vr.f)(e.publicKey,t.digest)||(u.pubKey=e.publicKey)}return is("ipns entry for %b created",t),u})(e,t,n,i,s,c)})(e,t,o,n)}catch(e){const n=`ipns record for ${t} could not be created`;throw us.error(e),B(new Error(n),"ERR_CREATING_IPNS_RECORD")}try{const n=(c=a,Zr.encode(c));return await this._datastore.put(ds(e.toBytes()),n,r),us(`ipns record for ${(0,Xn.B)(t,"base32")} was stored in the datastore`),n}catch(e){const n=`ipns record for ${t} could not be stored in the datastore`;throw us.error(n),B(new Error(n),"ERR_STORING_IN_DATASTORE")}var c}}fs.defaultRecordLifetime=ps;const ms=(0,j.kg)("ipfs:ipns:republisher");class _s{constructor(e,t,n,r,s={pass:""}){this._publisher=e,this._datastore=t,this._peerId=n,this._keychain=r,this._options=s,this._republishHandle=null}async start(){if(this._republishHandle)throw B(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:t=>{e._timeoutId=setTimeout((async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(t)}catch(e){ms.error(e)}}),t())},cancel:async()=>{null!=e._timeoutId&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{pass:t}=this._options;let n=!0;e._task=async()=>{const e=new $n.TimeoutController(3e4);try{await this._republishEntries(this._peerId,t,{signal:e.signal})}finally{e.clear()}},e.runPeriodically((()=>n?(n=!1,this._options.initialBroadcastInterval||6e4):this._options.broadcastInterval||144e5)),this._republishHandle=e}async stop(){const e=this._republishHandle;if(!e)throw B(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,t,n){try{await this._republishEntry(e,n)}catch(e){const t="cannot republish entry for the node's private key";return void ms.error(t)}if(t)try{const e=await this._keychain.listKeys();for(const r of e){if("self"===r.name)continue;const e=await this._keychain.exportKey(r.name,t),s=await(0,$r.importKey)(e,t),i=await(0,Nr.y5)(s.public.bytes,s.bytes);await this._republishEntry(i,n)}}catch(e){ms.error(e)}}async _republishEntry(e,t){try{const n=await this._getPreviousValue(e);await this._publisher.publishWithEOL(e,n,864e5,t)}catch(e){if("ERR_NO_ENTRY_FOUND"===e.code)return;throw e}}async _getPreviousValue(e){if(!(0,Ur.I)(e))throw B(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const t=await this._datastore.get(ds(e.toBytes()));if(!(t instanceof Uint8Array))throw B(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return rs(t).value}catch(e){throw ms.error(e),B(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(t){if(t&&t.notFound)throw B(new Error(`no previous entry for record with id: ${e.toString()}`),"ERR_NO_ENTRY_FOUND");throw t}}}const ys=(0,j.kg)("ipns:validator"),gs=async(e,t)=>{const n=(e=>(0,Nr.cv)(e.slice(es.length)))(e),r=rs(t),s=await(async(e,t)=>{if(null==t||null==e){const e=new Error("one or more of the provided parameters are not defined");throw Xr.error(e),B(e,Kr)}let n;if(null!=t.pubKey){try{n=(0,$r.unmarshalPublicKey)(t.pubKey)}catch(e){throw Xr.error(e),e}if(!(await(0,Nr.y5)(t.pubKey)).equals(e))throw B(new Error("Embedded public key did not match PeerID"),"ERR_INVALID_EMBEDDED_KEY")}else null!=e.publicKey&&(n=(0,$r.unmarshalPublicKey)(e.publicKey));if(null!=n)return n;throw B(new Error("no public key is available"),Kr)})(n,r);await(async(e,t)=>{const{value:n,validityType:r,validity:s}=t;let i,a,o;if(null==t.signatureV2||null==t.data)throw B(new Error("missing data or signatureV2"),qr);a=t.signatureV2,i=ns(t.data),(e=>{if(null==e.data)throw B(new Error("Record data is missing"),"ERR_INVALID_RECORD_DATA");const t=(e=>{const t=Qt(e);if(0!==t.ValidityType)throw B(new Error("Unknown validity type"),Gr);return t.ValidityType=Zr.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t})(e.data);if(!(0,Vr.f)(t.Value,e.value))throw B(new Error('Field "value" did not match between protobuf and CBOR'),qr);if(!(0,Vr.f)(t.Validity,e.validity))throw B(new Error('Field "validity" did not match between protobuf and CBOR'),qr);if(t.ValidityType!==e.validityType)throw B(new Error('Field "validityType" did not match between protobuf and CBOR'),qr);if(t.Sequence!==e.sequence)throw B(new Error('Field "sequence" did not match between protobuf and CBOR'),qr);if(t.TTL!==e.ttl)throw B(new Error('Field "ttl" did not match between protobuf and CBOR'),qr)})(t);try{o=await e.verify(i,a)}catch(e){o=!1}if(!o)throw ys.error("record signature verification failed"),B(new Error("record signature verification failed"),qr);if(null!=s&&r===Zr.ValidityType.EOL){let e;try{e=ts((0,Xn.B)(s))}catch(e){throw ys.error("unrecognized validity format (not an rfc3339 format)"),B(new Error("unrecognized validity format (not an rfc3339 format)"),"ERR_UNRECOGNIZED_FORMAT")}if(e.getTime()<Date.now())throw ys.error("record has expired"),B(new Error("record has expired"),"ERR_IPNS_EXPIRED_RECORD")}else if(null!=r)throw ys.error("unrecognized validity type"),B(new Error("unrecognized validity type"),Gr);ys("ipns entry for %b is valid",n)})(s,r)},ws=(0,j.kg)("ipfs:ipns:resolver"),bs=Fr.notFoundError().code;class vs{constructor(e){this._routing=e}async resolve(e,t={}){if("string"!=typeof e)throw B(new Error("invalid name"),"ERR_INVALID_NAME");const n=t.recursive&&"true"===t.recursive.toString(),r=e.split("/");if(3!==r.length||""!==r[0])throw B(new Error("invalid name"),"ERR_INVALID_NAME");const s=r[2];let i=1/0;n&&(i=32);const a=await this.resolver(s,i,t);return ws(`${e} was locally resolved correctly`),a}async resolver(e,t,n){if(0===t){const e="could not resolve name (recursion limit of 32 exceeded)";throw ws.error(e),B(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT")}const r=await this._resolveName(e,n),s=r.split("/");return"ipfs"!==s[1]&&t?this.resolver(s[2],t-1,n):r}async _resolveName(e,t){const n=(0,Nr.jE)(e),r=ss(n);let s;try{s=await this._routing.get(r,t)}catch(t){if(ws.error("could not get record from routing",t),t.code===bs)throw B(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND");throw B(new Error(`unexpected error getting the ipns record ${n.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}return this._validateRecord(n,s)}async _validateRecord(e,t){await gs((0,Qr.z)([(0,Wn.m)("/ipns/"),e.toBytes()]),t);const n=rs(t);return(0,Xn.B)(n.value)}}class ks{constructor(e){this.lru=Rr(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,n){this.lru.set(e,{value:t,expire:Date.now()+n})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}const Ms=(0,j.kg)("ipfs:ipns");class Es{constructor(e,t,n,r,s){this.publisher=new fs(e,t),this.republisher=new _s(this.publisher,t,n,r,s),this.resolver=new vs(e),this.cache=new ks(1e3),this.routing=e}async publish(e,t,n=fs.defaultRecordLifetime,r){try{await this.publisher.publishWithEOL(e,t,n,r),Ms(`IPNS value ${(0,Xn.B)(t,"base32")} was published correctly`);const s=e.toString(),i=parseFloat(n),a=i<6e4?i:6e4;return this.cache.set(s,t,a),Ms(`IPNS value ${(0,Xn.B)(t,"base32")} was cached correctly`),{name:s,value:t}}catch(e){throw Ms.error(e),e}}async resolve(e,t={}){if("string"!=typeof e)throw B(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!t.nocache&&!t.recursive){const t=e.split("/")[2],n=this.cache.get(t);if(n)return n}try{const n=await this.resolver.resolve(e,t);return Ms(`IPNS record from ${e} was resolved correctly`),n}catch(e){throw Ms.error(e),e}}async initializeKeyspace(e,t,n){return this.publish(e,t,fs.defaultRecordLifetime,n)}}var Ls=n(19450),Ss=n(52762),Ds=n(5075);const Ts=(0,j.kg)("datastore:core:tiered");class Rs extends Ls.e{constructor(e){super(),this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map((e=>e.open())))}catch(e){throw Fr.dbOpenFailedError()}}async put(e,t,n){try{await Promise.all(this.stores.map((r=>r.put(e,t,n))))}catch(e){throw Fr.dbWriteFailedError()}}async get(e,t){for(const n of this.stores)try{const r=await n.get(e,t);if(r)return r}catch(e){Ts.error(e)}throw Fr.notFoundError()}async has(e,t){for(const n of this.stores)if(await n.has(e,t))return!0;return!1}async delete(e,t){try{await Promise.all(this.stores.map((n=>n.delete(e,t))))}catch(e){throw Fr.dbDeleteFailedError()}}async*putMany(e,t={}){let n;const r=this.stores.map((e=>{const r=(0,Ss.d)({objectMode:!0});return Ds(e.putMany(r,t)).catch((e=>{n=e})),r}));try{for await(const t of e){if(n)throw n;r.forEach((e=>e.push(t))),yield t}}finally{r.forEach((e=>e.end()))}}async*deleteMany(e,t={}){let n;const r=this.stores.map((e=>{const r=(0,Ss.d)({objectMode:!0});return Ds(e.deleteMany(r,t)).catch((e=>{n=e})),r}));try{for await(const t of e){if(n)throw n;r.forEach((e=>e.push(t))),yield t}}finally{r.forEach((e=>e.end()))}}async close(){await Promise.all(this.stores.map((e=>e.close())))}batch(){const e=this.stores.map((e=>e.batch()));return{put:(t,n)=>{e.forEach((e=>e.put(t,n)))},delete:t=>{e.forEach((e=>e.delete(t)))},commit:async t=>{for(const n of e)await n.commit(t)}}}query(e,t){return this.stores[this.stores.length-1].query(e,t)}queryKeys(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}var Ps=n(93765);const Is=(e,t)=>{const n=t.map(((e,t)=>({entry:Zr.decode(e),index:t})));return n.sort(((e,t)=>{if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;const n=e.entry.sequence??0n,r=t.entry.sequence??0n;if(n>r)return-1;if(n<r)return 1;const s=e.entry.validity??new Uint8Array(0),i=t.entry.validity??new Uint8Array(0),a=ts((0,Xn.B)(s)),o=ts((0,Xn.B)(i));return a.getTime()>o.getTime()?-1:a.getTime()<o.getTime()?1:0})),n[0].index};var As=n(59833);n(63246),new lr.s("SHARDING"),new lr.s("_README"),n(40057);var Ys=n(6043);n(86119),n(59231);const Os="/record/";function Ns(e){return(0,Xn.B)(e,"base32")}function xs(e){("string"==typeof e||e instanceof String)&&(e=(0,Wn.m)(e.toString()));const t=(0,Xn.B)(e,"base64url");return`${Os}${t}`}const Cs=(0,j.kg)("datastore-pubsub:publisher");class Hs extends Ls.e{constructor(e,t,n,r,s,i){if(super(),!r)throw B(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!=typeof r)throw B(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!=typeof s)throw B(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(i&&"function"!=typeof i)throw B(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=n,this._validator=r,this._selector=s,this._handleSubscriptionKeyFn=i,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,t,n){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw Cs.error(e),B(new Error(e),"ERR_INVALID_DATASTORE_KEY")}if(!(t instanceof Uint8Array)){const e="received value is not a Uint8Array";throw Cs.error(e),B(new Error(e),"ERR_INVALID_VALUE_RECEIVED")}const r=xs(e);Cs(`publish value for topic ${r}`),await this._pubsub.publish(r,t)}async get(e,t){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw Cs.error(e),B(new Error(e),"ERR_INVALID_DATASTORE_KEY")}const n=xs(e),r=await this._pubsub.getTopics();if(r&&Array.isArray(r)&&r.indexOf(n)>-1)return this._getLocal(e,t);try{await this._pubsub.subscribe(n)}catch(e){const t=`cannot subscribe topic ${n}`;throw Cs.error(t),B(new Error(t),"ERR_SUBSCRIBING_TOPIC")}return Cs(`subscribed values for key ${n}`),this._getLocal(e)}unsubscribe(e){const t=xs(e);return this._pubsub.unsubscribe(t)}async _getLocal(e,t){const n=new lr.s("/"+Ns(e),!1);let r;try{r=await this._datastore.get(n,t)}catch(e){if("ERR_NOT_FOUND"!==e.code){const e=`unexpected error getting the ipns record for ${n.toString()}`;throw Cs.error(e),B(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const t=`local record requested was not found for ${n.toString()}`;throw Cs.error(t),B(new Error(t),"ERR_NOT_FOUND")}if(!(r instanceof Uint8Array)){const e="found record that we couldn't convert to a value";throw Cs.error(e),B(new Error(e),"ERR_INVALID_RECORD_RECEIVED")}return r}async _onMessage(e){const t=e.detail;if("signed"!==t.type)return void Cs.error("unsigned message received, this module can only work with signed messages");const{data:n,from:r,topic:s}=t;let i;try{i=function(e){if(e.substring(0,Os.length)!==Os)throw B(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=e.substring(Os.length);return(0,Wn.m)(t,"base64url")}(s)}catch(e){return void Cs.error(e)}if(Cs(`message received for topic ${s}`),this._peerId.equals(r))Cs("message discarded as it is from the same peer");else{if(this._handleSubscriptionKeyFn){let e;try{e=await this._handleSubscriptionKeyFn(i)}catch(e){return void Cs.error("message discarded by the subscriptionKeyFn")}i=e}try{await this._storeIfSubscriptionIsBetter(i,n)}catch(e){Cs.error(e)}}}async _storeIfSubscriptionIsBetter(e,t,n){let r=!1;try{r=await this._isBetter(e,t)}catch(e){if("ERR_NOT_VALID_RECORD"!==e.code)throw e}r&&await this._storeRecord(e,t,n)}async _validateRecord(e,t){return this._validator(e,t)}async _selectRecord(e,t){return 0===await this._selector(e,t)}async _isBetter(e,t){try{await this._validateRecord(e,t)}catch(e){const t="record received through pubsub is not valid";throw Cs.error(t),B(new Error(t),"ERR_NOT_VALID_RECORD")}const n=new lr.s(e);let r;try{r=await this._getLocal(n.uint8Array())}catch(e){return!0}return!(0,Vr.f)(r,t)&&this._selectRecord(e,[r,t])}async _storeRecord(e,t,n){const r=new lr.s("/"+Ns(e),!1);await this._datastore.put(r,t,n),Cs(`record for ${xs(e)} was stored in the datastore`)}}const js=(0,j.kg)("ipfs:ipns:pubsub");class Bs{constructor(e,t,n){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new Hs(e,t,n,gs,Is,this._handleSubscriptionKey)}async put(e,t,n){try{await this._pubsubDs.put(e,t,n)}catch(e){throw js.error(e),e}}async get(e,t){let n,r;try{n=await this._pubsubDs.get(e,t)}catch(e){r=e}const s=e.slice(0,cs);if((0,Xn.B)(s)===os){const t=Gn.base58btc.encode(e).substring(1),n=Gn.base58btc.encode(e.slice(cs)).substring(1);this._subscriptions[t]=n,js(`subscribed to pubsub topic ${t}, id ${n}`)}if(r)throw r;return n}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=(0,Xn.B)(e,"base58btc"));const t=this._subscriptions[e];if(!t)throw B(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");try{return ss((0,Nr.jE)(t))}catch(e){throw js.error(e),e}}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map((e=>`${os}${e}`))}async cancel(e){if("string"!=typeof e)throw B(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(os)&&(e=e.substring(cs));const t=Object.keys(this._subscriptions).find((t=>this._subscriptions[t]===e));if(!t)return{canceled:!1};const n=(0,Wn.m)(t);return this._pubsubDs.unsubscribe(n),delete this._subscriptions[t],js(`unsubscribed pubsub ${t}: ${e}`),{canceled:!0}}}var zs;function Us(e){const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),s=String(e.getUTCHours()).padStart(2,"0"),i=String(e.getUTCMinutes()).padStart(2,"0"),a=String(e.getUTCSeconds()).padStart(2,"0"),o=e.getUTCMilliseconds();return`${t}-${n}-${r}T${s}:${i}:${a}.${String(1e3*o*1e3).padStart(9,"0")}Z`}!function(e){let t;e.codec=()=>(null==t&&(t=(0,Jr.yw)(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),(!0===n.writeDefaults||null!=e.key&&e.key.byteLength>0)&&(t.uint32(10),t.bytes(e.key)),(!0===n.writeDefaults||null!=e.value&&e.value.byteLength>0)&&(t.uint32(18),t.bytes(e.value)),!0!==n.writeDefaults&&""===e.timeReceived||(t.uint32(42),t.string(e.timeReceived)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.key=e.bytes();break;case 2:n.value=e.bytes();break;case 5:n.timeReceived=e.string();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(zs||(zs={}));class Fs{constructor(e,t,n){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(t instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=t,this.timeReceived=n}serialize(){return zs.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:Us(this.timeReceived)}}static deserialize(e){const t=zs.decode(e);return new Fs(t.key,t.value,new Date(t.timeReceived))}static fromDeserialized(e){const t=function(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),n=String(e).trim().match(t);if(null==n)throw new Error("Invalid format");const r=parseInt(n[1],10),s=parseInt(n[2],10)-1,i=parseInt(n[3],10),a=parseInt(n[4],10),o=parseInt(n[5],10),c=parseInt(n[6],10),d=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(r,s,i,a,o,c,d))}(e.timeReceived);if(null==e.key)throw new Error("key missing from deserialized object");if(null==e.value)throw new Error("value missing from deserialized object");return new Fs(e.key,e.value,t)}}const Vs=(0,j.kg)("ipfs:ipns:offline-datastore");class Ws{constructor(e){this._datastore=e,this.stores=[]}async put(e,t,n){if(!(e instanceof Uint8Array))throw B(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(t instanceof Uint8Array))throw B(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let r;try{r=this._routingKey(e)}catch(e){throw Vs.error(e),B(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const s=new Fs(e,t,new Date);await this._datastore.put(r,s.serialize(),n)}async get(e,t){if(!(e instanceof Uint8Array))throw B(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let n;try{n=this._routingKey(e)}catch(e){throw Vs.error(e),B(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const r=await this._datastore.get(n,t);let s;try{s=Fs.deserialize(r)}catch(e){throw Vs.error(e),e}return s.value}_routingKey(e){return new lr.s("/dht/record/"+(0,Xn.B)(e,"base32"),!1)}}var $s=n(49484);const Gs=(0,j.kg)("ipfs:ipns:dht-datastore");class qs{constructor(e){this._dht=e}async put(e,t,n){try{await(0,$s.Z)(this._dht.put(e,t,n))}catch(e){throw Gs.error(e),e}}async get(e,t){for await(const n of this._dht.get(e,t))if("VALUE"===n.name)return n.value;throw(0,Fr.notFoundError)()}}const Ks=(0,j.kg)("ipfs:components:ipns");class Zs{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){const e=this.online||this.offline;if(e)return e;throw new Hn}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:t,keychain:n}){if(null!=this.offline)throw new Bn;Ks("initializing IPNS keyspace (offline)");const r=new Ws(e.datastore),s=new Es(r,e.datastore,t,n,this.options);this.offline=s}async startOnline({libp2p:e,repo:t,peerId:n,keychain:r}){if(null!=this.online)throw new Bn;const s=function({libp2p:e,repo:t,peerId:n,options:r}){const s=[];let i;if(Ps(r,"EXPERIMENTAL.ipnsPubsub",!1)&&(i=new Bs(e.pubsub,t.datastore,n),s.push(i)),!0!==Ps(r,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(Ps(r,"config.Routing.Type","none"))&&s.push(new qs(e.dht)),Ps(r,"offline",!1)||0===s.length){const e=new Ws(t.datastore);s.push(e)}return new Rs(s)}({libp2p:e,repo:t,peerId:n,options:this.options}),i=new Es(s,t.datastore,n,r,this.options);await i.republisher.start(),this.online=i}async stop(){const e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,t,n,r){return this.getIPNS().publish(e,t,n,r)}resolve(e,t){return this.getIPNS().resolve(e,t)}initializeKeyspace(e,t,n){return this.getIPNS().initializeKeyspace(e,t,n)}}async function Js({ipns:e,repo:t,codecs:n},r,s){if(dr(r))return e.resolve(r);const{cid:i,path:a}=wr(r);await(0,$s.Z)(Dr(i,a||"",n,t,s))}const Qs=(0,j.kg)("ipfs:name:publish");var Xs=n(53950),ei=n(20757);const ti=C.Z.bind({ignoreUndefined:!0}),ni=(0,j.kg)("ipfs:name:resolve"),ri=(e,t)=>t.length>0?e+"/"+t.join("/"):e;function si(e,t){if(!e||!t||!t.ipnsPubsub)throw B(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof Bs)return e.routing;const n=(e.routing.stores||[]).find((e=>e instanceof Bs));if(!n)throw B(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return n}class ii{constructor({ipns:e,options:t}){this.cancel=function({ipns:e,options:t}){const n=t.EXPERIMENTAL;return yr((async function(t,r={}){return si(e,n).cancel(t,r)}))}({ipns:e,options:t}),this.state=function({ipns:e,options:t}){const n=t.EXPERIMENTAL;return yr((async function(t={}){try{return{enabled:Boolean(si(e,n))}}catch(e){return{enabled:!1}}}))}({ipns:e,options:t}),this.subs=function({ipns:e,options:t}){const n=t.EXPERIMENTAL;return yr((async function(t={}){return si(e,n).getSubscriptions(t)}))}({ipns:e,options:t})}}class ai{constructor({dns:e,ipns:t,repo:n,codecs:r,peerId:s,isOnline:i,keychain:a,options:o}){this.publish=function({ipns:e,repo:t,codecs:n,peerId:r,isOnline:s,keychain:i}){const a=async e=>{let t;if("self"===e&&null!=r.privateKey)t=await(0,$r.unmarshalPrivateKey)(r.privateKey);else try{const n=await i.exportKey(e,"temp");t=await(0,$r.importKey)(n,"temp")}catch(e){throw Qs.error(e),B(e,"ERR_CANNOT_GET_KEY")}return(0,Nr.y5)(t.public.bytes,t.bytes)};return yr((async function(r,i={}){const o=!(!1===i.resolve),c=i.lifetime||"24h",d=i.key||"self";if(!s())throw B(new Error(br),"OFFLINE_ERROR");try{r=(e=>{if(te.k.asCID(e))return`/ipfs/${e}`;const t=e.toString();try{return`/ipfs/${te.k.parse(t)}`}catch{}if(cr(t))return t;throw B(new Error(`invalid path: ${e}`),"ERR_BAD_PATH")})(r)}catch(e){throw Qs.error(e),e}let l=0;try{l=mr(c)||0,l=parseFloat(l.toFixed(6))}catch(e){throw Qs.error(e),e}const u=await Promise.all([a(d),o?Js({ipns:e,repo:t,codecs:n},r):Promise.resolve()]),h=(0,Wn.m)(r),p=await e.publish(u[0],h,l,i);return{name:p.name,value:(0,Xn.B)(p.value)}}))}({ipns:t,repo:n,codecs:r,peerId:s,isOnline:i,keychain:a}),this.resolve=function({dns:e,ipns:t,isOnline:n,options:{offline:r}}){return yr((async function*(s,i={}){if(i=ti({nocache:!1,recursive:!0},i),r&&i&&i.nocache)throw B(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!n()&&!r)throw B(new Error(br),"OFFLINE_ERROR");let a=s.toString();a.startsWith("/ipns/")||(a=`/ipns/${a}`);let[o,c,...d]=a.slice(1).split("/");try{if("1"===c.substring(0,1)){const e=(0,Nr.jE)(c),t=Kn.Jx(e.toBytes());c=te.k.createV1(114,t).toString(Xs.base36)}else{const e=te.k.parse(c);1===e.version&&(c=e.toString(Xs.base36))}}catch(t){if(ei(c))return void(yield ri(await e(c,i),d));throw ni.error(t),B(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}const l=await t.resolve(`/${o}/${c}`,i);yield ri(l instanceof Uint8Array?(0,Xn.B)(l):l,d)}))}({dns:e,ipns:t,isOnline:i,options:o}),this.pubsub=new ii({ipns:t,options:o})}}const oi=(0,Fr.notFoundError)().code,ci="<dst>";async function*di(e,t,n,r,s){const i=await e(r,s),{cid:a}=wr(i),o=null!=s.maxDepth?s.maxDepth:1/0,c=s.unique||!1;for await(const e of async function*(e,t,n,r,s,i){const a=new Set;yield*async function*n(o,c){const d=c+1;if(!(d>r))try{for await(const r of async function*(e,t,n,r){const s=await e.blocks.get(n,r),i=(await t.getCodec(n.code)).decode(s),a=n.code===Le,o=[];for(const[e,t]of ui(i,o)){if(a){const n=e.match(/^Links\/(\d+)\/Hash$/);if(n){const e=Number(n[1]);if(e<i.Links.length){yield{name:i.Links[e].Name,cid:t};continue}}}yield{name:e,cid:t}}}(e,t,o.cid,i))yield{parent:o,node:r,isDuplicate:s&&a.has(r.cid.toString())},s&&a.add(r.cid.toString()),yield*n(r,d)}catch(e){throw e.code===oi&&(e.message=`Could not find object with CID: ${o.cid}`),e}}({cid:n},0)}(t,n,a,o,c,s))e.parent&&(e.isDuplicate||(yield{ref:li(e.parent.cid,e.node.cid,e.node.name,s.format)}))}function li(e,t,n="",r=ci){let s=r.replace(/<src>/g,e.toString());return s=s.replace(/<dst>/g,t.toString()),s=s.replace(/<linkname>/g,n),s}const ui=function*(e,t){if(null!=e&&!(e instanceof Uint8Array)){for(const[n,r]of Object.entries(e)){const e=[...t,n];if(null!=r&&"object"==typeof r)if(Array.isArray(r))for(const[t,n]of r.entries()){const r=[...e,t],s=te.k.asCID(n);s?yield[r.join("/"),s]:"object"==typeof n&&(yield*ui(n,r))}else{const t=te.k.asCID(r);t?yield[e.join("/"),t]:yield*ui(r,e)}}return[]}};function hi({repo:e}){return yr((async function*(t={}){for await(const n of e.blocks.queryKeys({},{signal:t.signal}))yield{ref:n.toString()}}))}function pi({network:e}){return yr((async function(t={}){const n=(await e.use(t)).bitswap,r=n.stat().snapshot;return{provideBufLen:parseInt(r.providesBufferLength.toString()),blocksReceived:BigInt(r.blocksReceived.toString()),wantlist:Array.from(n.getWantlist()).map((e=>e[1].cid)),peers:n.peers(),dupBlksReceived:BigInt(r.dupBlksReceived.toString()),dupDataReceived:BigInt(r.dupDataReceived.toString()),dataReceived:BigInt(r.dataReceived.toString()),blocksSent:BigInt(r.blocksSent.toString()),dataSent:BigInt(r.dataSent.toString())}}))}class fi{constructor({network:e}){this.wantlist=function({network:e}){return yr((async function(t={}){const{bitswap:n}=await e.use(t),r=n.getWantlist();return Array.from(r).map((e=>e[1].cid))}))}({network:e}),this.wantlistForPeer=function({network:e}){return yr((async function(t,n={}){const{bitswap:r}=await e.use(n),s=r.wantlistForPeer(t);return Array.from(s).map((e=>e[1].cid))}))}({network:e}),this.unwant=function({network:e}){return yr((async function(t,n={}){const{bitswap:r}=await e.use(n);return Array.isArray(t)||(t=[t]),r.unwant(t)}))}({network:e}),this.stat=pi({network:e})}}function mi(e){try{return Jn.Cz.matches(e)}catch(e){return!1}}class _i{constructor({repo:e}){this.add=function({repo:e}){return yr((async function(t,n={}){if(!mi(t))throw new Error(`${t} is not a valid Multiaddr`);const r=await e.config.getAll(n),s=r.Bootstrap||[];return s.push(t.toString()),r.Bootstrap=Array.from(new Set(s)).sort(((e,t)=>e.localeCompare(t))),await e.config.replace(r),{Peers:[t]}}))}({repo:e}),this.list=function({repo:e}){return yr((async function(t={}){return{Peers:(await e.config.get("Bootstrap",t)||[]).map((e=>(0,Zn.HM)(e)))}}))}({repo:e}),this.rm=function({repo:e}){return yr((async function(t,n={}){if(!mi(t))throw new Error(`${t} is not a valid Multiaddr`);const r=await e.config.getAll(n);return r.Bootstrap=(r.Bootstrap||[]).filter((e=>e.toString()!==t.toString())),await e.config.replace(r),{Peers:[t]}}))}({repo:e}),this.clear=function({repo:e}){return yr((async function(t={}){const n=await e.config.getAll(t),r=n.Bootstrap||[];return n.Bootstrap=[],await e.config.replace(n),{Peers:r.map((e=>(0,Zn.HM)(e)))}}))}({repo:e}),this.reset=function({repo:e}){return yr((async function(t={}){const n=await e.config.getAll(t);return n.Bootstrap=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],await e.config.replace(n),{Peers:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"].map((e=>(0,Zn.HM)(e)))}}))}({repo:e})}}var yi=n(58525);const gi=globalThis.CustomEvent??Event;async function*wi(e,t={}){let n=t.concurrency??1/0;n<1&&(n=1/0);const r=null!=t.ordered&&t.ordered,s=new EventTarget,i=[];let a,o=(0,yi.Z)(),c=(0,yi.Z)(),d=!1,l=!1;function u(){return r?i[0]?.done:Boolean(i.find((e=>e.done)))}function*h(){for(;i.length>0&&i[0].done;){const e=i[0];if(i.shift(),!e.ok)throw l=!0,o.resolve(),e.err;yield e.value,o.resolve()}}function*p(){for(;u();)for(let e=0;e<i.length;e++)if(i[e].done){const t=i[e];if(i.splice(e,1),e--,!t.ok)throw l=!0,o.resolve(),t.err;yield t.value,o.resolve()}}for(s.addEventListener("task-complete",(()=>{c.resolve()})),Promise.resolve().then((async()=>{try{for await(const t of e){if(i.length===n&&(o=(0,yi.Z)(),await o.promise),l)break;const e={done:!1};i.push(e),t().then((t=>{e.done=!0,e.ok=!0,e.value=t,s.dispatchEvent(new gi("task-complete"))}),(t=>{e.done=!0,e.err=t,s.dispatchEvent(new gi("task-complete"))}))}d=!0,s.dispatchEvent(new gi("task-complete"))}catch(e){a=e,s.dispatchEvent(new gi("task-complete"))}}));;){if(u()||(c=(0,yi.Z)(),await c.promise),null!=a)throw a;if(r?yield*h():yield*p(),d&&0===i.length)break}}var bi=n(97856),vi=n(90193),ki=n(26629);function Mi(e){return e instanceof Uint8Array?te.k.decode(e):te.k.parse(e.toString())}class Ei{constructor({codecs:e,hashers:t,preload:n,repo:r}){this.get=function({preload:e,repo:t}){return yr((async function(n,r={}){return!1!==r.preload&&e(n),t.blocks.get(n,r)}))}({preload:n,repo:r}),this.put=function({codecs:e,hashers:t,repo:n,preload:r}){return yr((async function(s,i={}){const a=i.pin?await n.gcLock.readLock():null;try{const o=null!=i.version?i.version:0,c=i.format||(0===o?"dag-pb":"raw"),d=await t.getHasher(i.mhtype||"sha2-256"),l=await d.digest(s),u=await e.getCodec(c),h=te.k.create(o,u.code,l);return await n.blocks.put(h,s,{signal:i.signal}),!1!==i.preload&&r(h),!0===i.pin&&await n.pins.pinRecursively(h,{signal:i.signal}),h}finally{a&&a()}}))}({codecs:e,hashers:t,preload:n,repo:r}),this.rm=function({repo:e}){return yr((async function*(t,n={}){Array.isArray(t)||(t=[t]);const r=await e.gcLock.writeLock();try{yield*(0,ki.zG)(t,(t=>(0,bi.Z)(t,(t=>async()=>{const r={cid:t=Mi(t)};try{if(!await e.blocks.has(t))throw B(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await e.blocks.delete(t)}catch(e){n.force||(e.message=`cannot remove ${t}: ${e.message}`,r.error=e)}return r}))),(e=>wi(e,{concurrency:8})),(e=>(0,vi.Z)(e,(()=>!n.quiet))))}finally{r()}}))}({repo:r}),this.stat=function({repo:e,preload:t}){return yr((async function(n,r={}){return n=Mi(n),!1!==r.preload&&t(n),{cid:n,size:(await e.blocks.get(n)).length}}))}({preload:n,repo:r})}}async function*Li(e,t={}){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await n.cancel(),n.releaseLock()}}function Si(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}}var Di=n(63855);function Ti(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Ri(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"==typeof e.stream}function Pi(e){return"object"==typeof e&&(e.path||e.content)}const Ii=e=>e&&"function"==typeof e.getReader;async function*Ai(e){yield e}async function Yi(e){if(Ti(e))return Ai(Oi(e));if("string"==typeof e||e instanceof String)return Ai(Oi(e.toString()));if(Ri(e))return"function"==typeof(t=e).stream?Li(t.stream()):Li(new Response(t).body);var t;if(Ii(e)&&(e=Li(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Si(e),{value:n,done:r}=await t.peek();if(r)return Ai(new Uint8Array(0));if(t.push(n),Number.isInteger(n))return Ai(Uint8Array.from(await(0,Di.Z)(t)));if(Ti(n)||"string"==typeof n||n instanceof String)return(0,bi.Z)(t,Oi)}throw B(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function Oi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):(0,Wn.m)(e.toString())}async function Ni(e,t){const{path:n,mode:r,mtime:s,content:i}=e,a={path:n||"",mode:Q(r),mtime:X(s)};return i?a.content=await t(i):n||(a.content=await t(e)),a}function xi(e){return async function*(e,t){if(null==e)throw B(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"==typeof e||e instanceof String)yield Ni(e.toString(),t);else if(Ti(e)||Ri(e))yield Ni(e,t);else{if(Ii(e)&&(e=Li(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Si(e),{value:r,done:s}=await n.peek();if(s)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Ti(r)||"string"==typeof r||r instanceof String)return void(yield Ni(n,t));throw B(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Pi(e))throw B(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield Ni(e,t)}}(e,Yi)}async function*Ci(e,t=1){let n=[];t<1&&(t=1);for await(const r of e)for(n.push(r);n.length>=t;)yield n.slice(0,t),n=n.slice(t);for(;n.length>0;)yield n.slice(0,t),n=n.slice(t)}async function*Hi(e,t=1){for await(const n of Ci(e,t)){const e=n.map((async e=>await e().then((e=>({ok:!0,value:e})),(e=>({ok:!1,err:e})))));for(let t=0;t<e.length;t++){const n=await e[t];if(!n.ok)throw n.err;yield n.value}}}var ji=n(48081),Bi=n(40600),zi=n(11042);(0,Bi.D)({name:"murmur3-32",code:35,encode:e=>function(e){const t=new Array(4);for(let n=0;n<4;n++)t[n]=255&e,e>>=8;return new Uint8Array(t)}(zi.x86.hash32(e))});const Ui=(0,Bi.D)({name:"murmur3-128",code:34,encode:e=>an.aI.fromHex(zi.x64.hash128(e))});(0,Bi.D)({name:"murmur3-x64-64",code:34,encode:e=>an.aI.fromHex(zi.x64.hash128(e)).subarray(0,8)});const Fi={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:ji.sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:async function(e){return(await Ui.encode(e)).slice(0,8).reverse()},hamtHashCode:34,hamtBucketBits:8},Vi=async(e,t,n)=>{n.codec||(n.codec=r),n.hasher||(n.hasher=ji.sha256),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===r&&n.hasher!==ji.sha256&&(n.cidVersion=1);const s=await n.hasher.digest(e),i=te.k.create(n.cidVersion,n.codec.code,s);return n.onlyHash||await t.put(i,e,{signal:n.signal}),i},Wi=async(e,t,n)=>{const r=new ee({type:"directory",mtime:e.mtime,mode:e.mode}),s=Se(be({Data:r.marshal()}));return{cid:await Vi(s,t,n),path:e.path,unixfs:r,size:s.length}};var $i=n(89534);async function Gi(e,t,n){const r=[];for await(const s of Ci(e,n.maxChildrenPerNode))r.push(await t(s));return r.length>1?Gi(r,t,n):r[0]}class qi{constructor(e,t,n=0){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let n=[];return e.children.length&&(n=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))),t((e.data||[]).concat(n))}_findParent(e,t){const n=e.parent;if(n&&0!==n.depth)return n.children.length!==n.maxChildren&&n.maxChildren?n:this._findParent(n,t)}}class Ki extends qi{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}const Zi=async function*(e,t,n){for await(let s of e.content)yield async()=>{let i;n.progress(s.length,e.path);const a={codec:r,cidVersion:n.cidVersion,hasher:n.hasher,onlyHash:n.onlyHash};return n.rawLeaves?(a.codec=$i,a.cidVersion=1):(i=new ee({type:n.leafType,data:s}),s=Se({Data:i.marshal(),Links:[]})),{cid:await Vi(s,t,a),unixfs:i,size:s.length}}},Ji={flat:async function(e,t){return t(await(0,Di.Z)(e))},balanced:function(e,t,n){return Gi(e,t,n)},trickle:async function(e,t,n){const r=new Ki(n.layerRepeat);let s=0,i=1,a=r;for await(const o of Ci(e,n.maxChildrenPerNode))a.isFull()&&(a!==r&&r.addChild(await a.reduce(t)),s&&s%n.layerRepeat==0&&i++,a=new qi(i,n.layerRepeat,s),s++),a.append(o);return a&&a!==r&&r.addChild(await a.reduce(t)),r.reduce(t)}},Qi=function(e,t,n){const s=Ji[n.strategy];if(!s)throw B(new Error(`Unknown importer build strategy name: ${n.strategy}`),"ERR_BAD_STRATEGY");return s(async function*(e,t,n){let r,s,i=-1;s="function"==typeof n.bufferImporter?n.bufferImporter:Zi;for await(const a of Hi(s(e,t,n),n.blockWriteConcurrency))i++,0!==i?(1===i&&r&&(yield r,r=null),yield a):r=a;r&&(r.single=!0,yield r)}(e,t,n),((e,t,n)=>async function(s){if(1===s.length&&s[0].single&&n.reduceSingleLeafToSelf){const i=s[0];if(void 0!==e.mtime||void 0!==e.mode){let s=await t.get(i.cid);i.unixfs=new ee({type:"file",mtime:e.mtime,mode:e.mode,data:s}),s=Se(be({Data:i.unixfs.marshal()})),i.cid=await Vi(s,t,{...n,codec:r,hasher:n.hasher,cidVersion:n.cidVersion}),i.size=s.length}return{cid:i.cid,path:e.path,unixfs:i.unixfs,size:i.size}}const i=new ee({type:"file",mtime:e.mtime,mode:e.mode}),a=s.filter((e=>!(e.cid.code!==$i.code||!e.size)||!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length))).map((e=>e.cid.code===$i.code?(i.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?i.addBlockSize(e.unixfs.data.length):i.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid}))),o={Data:i.marshal(),Links:a},c=Se(be(o));return{cid:await Vi(c,t,n),path:e.path,unixfs:i,size:c.length+o.Links.reduce(((e,t)=>e+t.Tsize),0)}})(e,t,n),n)};var Xi=n(58407),ea=n(28232);const ta=async function*(e,t){let n,r,s;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)s=t.avgChunkSize,n=t.minChunkSize,r=t.maxChunkSize;else{if(!t.avgChunkSize)throw B(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");s=t.avgChunkSize,n=s/3,r=s+s/2}if(n<16)throw B(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");r<n&&(r=n),s<n&&(s=n);const i=Math.floor(Math.log2(s));for await(const s of async function*(e,t){const n=await(0,ea.create)(t.bits,t.min,t.max,t.window),r=new Xi.H;for await(const t of e){r.append(t);const e=n.fingerprint(t);for(let t=0;t<e.length;t++){const n=e[t],s=r.slice(0,n);r.consume(n),yield s}}r.length&&(yield r.subarray(0))}(e,{min:n,max:r,bits:i,window:t.window,polynomial:t.polynomial}))yield s},na=async function*(e,t){let n=new Xi.H,r=0,s=!1;const i=t.maxChunkSize;for await(const t of e)for(n.append(t),r+=t.length;r>=i;)if(yield n.slice(0,i),s=!0,i===n.length)n=new Xi.H,r=0;else{const e=new Xi.H;e.append(n.sublist(i)),n=e,r-=i}s&&!r||(yield n.subarray(0,r))},ra=async function*(e){for await(const t of e){if(void 0===t.length)throw B(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"==typeof t||t instanceof String)yield(0,Wn.m)(t.toString());else if(Array.isArray(t))yield Uint8Array.from(t);else{if(!(t instanceof Uint8Array))throw B(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield t}}};function sa(e){try{if(e instanceof Uint8Array)return async function*(){yield e}();if(t=e,Symbol.iterator in t)return async function*(){yield*e}();if(function(e){return Symbol.asyncIterator in e}(e))return e}catch{throw B(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}var t;throw B(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}const ia=async function*(e,t,n){for await(const r of e)if(r.path&&("./"===r.path.substring(0,2)&&(n.wrapWithDirectory=!0),r.path=r.path.split("/").filter((e=>e&&"."!==e)).join("/")),r.content){let e,s;e="function"==typeof n.chunker?n.chunker:"rabin"===n.chunker?ta:na,s="function"==typeof n.chunkValidator?n.chunkValidator:ra;const i={path:r.path,mtime:r.mtime,mode:r.mode,content:e(s(sa(r.content),n),n)};yield()=>Qi(i,t,n)}else{if(!r.path)throw new Error("Import candidate must have content or path or both");{const e={path:r.path,mtime:r.mtime,mode:r.mode};yield()=>Wi(e,t,n)}}},aa=class{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},oa=class extends aa{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const n=e[t];yield{key:n,child:this._children[n]}}}async*flush(e){const t=Object.keys(this._children),n=[];for(let r=0;r<t.length;r++){let s=this._children[t[r]];if(s instanceof aa)for await(const t of s.flush(e))s=t,yield s;null!=s.size&&s.cid&&n.push({Name:t[r],Tsize:s.size,Hash:s.cid})}const r=new ee({type:"directory",mtime:this.mtime,mode:this.mode}),s={Data:r.marshal(),Links:n},i=Se(be(s)),a=await Vi(i,e,this.options),o=i.length+s.Links.reduce(((e,t)=>e+(null==t.Tsize?0:t.Tsize)),0);this.cid=a,this.size=o,yield{cid:a,unixfs:r,path:this.path,size:o}}};var ca=n(92891);class da{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new ca,this.key=null}async put(e,t){const n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){const t=await this._findChild(e);if(null!=t)return t.value}async del(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);null!=n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce(((e,t)=>t instanceof da?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof da?yield*t.eachLeafSeries():yield t}serialize(e,t){return t(this._children.reduce(((n,r,s)=>(null!=r&&(r instanceof da?n.push(r.serialize(e,t)):n.push(e(r,s))),n)),[]))}async asyncTransform(e,t){return await pa(this,e,t)}toJSON(){return this.serialize(ua,ha)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof da))return null!=n&&n.key===e?n:void 0}async _findPlace(e){const t=this._options.hash("string"==typeof e?(0,Wn.m)(e):e),n=await t.take(this._options.bits),r=this._children.get(n);return r instanceof da?await r._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:r}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(null!=t.existingChild&&t.existingChild.key!==e){const e=new da(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const n=await e._findPlace(t.existingChild.hash);return n.bucket._putAt(n,t.existingChild.key,t.existingChild.value),await e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}_delAt(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(la);if(null!=e&&!(e instanceof da)){const t=e.hash;t.untake(this._options.bits);const n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function la(e){return Boolean(e)}function ua(e,t){return e.key}function ha(e){return e}async function pa(e,t,n){const r=[];for(const s of e._children.compactArray())if(s instanceof da)await pa(s,t,n);else{const n=await t(s);r.push({bitField:e._children.bitField(),children:n})}return await n(r)}const fa=[255,254,252,248,240,224,192,128],ma=[1,3,7,15,31,63,127,255];class _a{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,n=0;for(;t>0&&this._haveBits();){const e=this._value[this._currentBytePos],r=this._currentBitPos+1,s=Math.min(r,t);n=(n<<s)+ya(e,r-s,s),t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function ya(e,t,n){const r=function(e,t){return fa[e]&ma[Math.min(t+e-1,7)]}(t,n);return(e&r)>>>t}function ga(e){return function(t){return t instanceof wa?t:new wa(t,e)}}class wa{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.availableBits(),t);n=(n<<r)+e.take(r),t-=r,this._availableBits-=r,0===e.availableBits()&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.totalBits()-e.availableBits(),t);e.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?(0,Qr.z)([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new _a(t);this._buffers.push(n),this._availableBits+=n.availableBits()}}function ba(e){if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");const t={bits:e.bits??8,hash:ga(e.hashFn)};return new da(t)}const va=class extends aa{constructor(e,t){super(e,t),this._bucket=ba({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(const t of ka(this._bucket,e,this,this.options))yield{...t,path:this.path}}};async function*ka(e,t,n,r){const s=e._children,i=[];let a=0;for(let e=0;e<s.length;e++){const n=s.get(e);if(!n)continue;const o=e.toString(16).toUpperCase().padStart(2,"0");if(n instanceof da){let e;for await(const s of await ka(n,t,null,r))e=s;if(!e)throw new Error("Could not flush sharded directory, no subshard found");i.push({Name:o,Tsize:e.size,Hash:e.cid}),a+=e.size}else if("function"==typeof n.value.flush){const e=n.value;let r;for await(const n of e.flush(t))r=n,yield r;const s=o+n.key;i.push({Name:s,Tsize:r.size,Hash:r.cid}),a+=r.size}else{const e=n.value;if(!e.cid)continue;const t=o+n.key,r=e.size;i.push({Name:t,Tsize:r,Hash:e.cid}),a+=r}}const o=Uint8Array.from(s.bitField().reverse()),c=new ee({type:"hamt-sharded-directory",data:o,fanout:e.tableSize(),hashType:r.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),d=Se(be({Data:c.marshal(),Links:i})),l=await Vi(d,t,r),u=d.length+a;yield{cid:l,unixfs:c,size:u}}const Ma=async function e(t,n,r,s){let i=n;n instanceof oa&&n.directChildrenCount()>=r&&(i=await async function(e,t){const n=new va({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1,mtime:e.mtime,mode:e.mode},t);for await(const{key:t,child:r}of e.eachChildSeries())await n.put(t,r);return n}(n,s));const a=i.parent;if(a){if(i!==n){if(t&&(t.parent=i),!i.parentKey)throw new Error("No parent key found");await a.put(i.parentKey,i)}return e(i,a,r,s)}return i};async function Ea(e,t,n){const r=((e="")=>(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean))(e.path||""),s=r.length-1;let i=t,a="";for(let o=0;o<r.length;o++){const c=r[o];a+=`${a?"/":""}${c}`;const d=o===s;if(i.dirty=!0,i.cid=void 0,i.size=void 0,d)await i.put(c,e),t=await Ma(null,i,n.shardSplitThreshold,n);else{let e=await i.get(c);e&&e instanceof aa||(e=new oa({root:!1,dir:!0,parent:i,parentKey:c,path:a,dirty:!0,flat:!0,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},n)),await i.put(c,e),i=e}}return t}async function*La(e,t){e instanceof aa?yield*e.flush(t):e&&e.unixfs&&e.unixfs.isDirectory()&&(yield e)}const Sa=async function*(e,t,n){let r=new oa({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n);for await(const t of e)t&&(r=await Ea(t,r,n),t.unixfs&&t.unixfs.isDirectory()||(yield t));if(n.wrapWithDirectory)yield*La(r,t);else for await(const e of r.eachChildSeries())e&&(yield*La(e.child,t))};async function*Da(e,t,n={}){const r=((e={})=>C.Z.bind({ignoreUndefined:!0})(Fi,e))(n);let s,i,a;s="function"==typeof n.dagBuilder?n.dagBuilder:ia,i="function"==typeof n.treeBuilder?n.treeBuilder:Sa,a=Symbol.asyncIterator in e||Symbol.iterator in e?e:[e];for await(const e of i(Hi(s(a,t,r),r.fileImportConcurrency),t,r))yield{cid:e.cid,path:e.path,unixfs:e.unixfs,size:e.size}}async function*Ta(e,t){if("string"==typeof e||e instanceof String||Ti(e)||Ri(e)||e._readableState)throw B(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Ii(e)&&(e=Li(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Si(e),{value:r,done:s}=await n.peek();if(s)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw B(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState)return void(yield*(0,bi.Z)(n,(e=>Ra({content:e},t))));if(Ti(r))return void(yield Ra({content:n},t));if(Pi(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||Ii(r)||Ri(r))return void(yield*(0,bi.Z)(n,(e=>Ra(e,t))))}if(Pi(e))throw B(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw B(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Ra(e,t){const{path:n,mode:r,mtime:s,content:i}=e,a={path:n||"",mode:Q(r),mtime:X(s)};return i?a.content=await t(i):n||(a.content=await t(e)),a}const Pa=e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],n=parseInt(t);if(isNaN(n))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:n}}if(e.startsWith("rabin"))return{chunker:"rabin",...Ia(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},Ia=e=>{const t={},n=e.split("-");switch(n.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=Aa(n[1],"avg");break;case 4:t.minChunkSize=Aa(n[1],"min"),t.avgChunkSize=Aa(n[2],"avg"),t.maxChunkSize=Aa(n[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},Aa=(e,t)=>{const n=parseInt(e);if(isNaN(n))throw new Error(`Chunker parameter ${t} must be an integer`);return n},Ya=C.Z.bind({ignoreUndefined:!0});const Oa=async function(e){return(await Ui.encode(e)).slice(0,8).reverse()},Na=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),xa=async(e,t,n,r,s)=>{if(!r){const e=ba({hashFn:Oa});r={rootBucket:e,hamtDepth:1,lastBucket:e}}await((e,t,n)=>Promise.all(e.map((e=>{if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new da({hash:n._options.hash,bits:n._options.bits},t,r))}return n.put(e.Name.substring(2),!0)}))))(e.Links,r.lastBucket,r.rootBucket);const i=await r.rootBucket._findNewBucketAndPos(t);let a=Na(i.pos);const o=(e=>{let t=e.bucket;const n=[];for(;t._parent;)n.push(t),t=t._parent;return n.push(t),n.reverse()})(i);o.length>r.hamtDepth&&(r.lastBucket=o[r.hamtDepth],a=Na(r.lastBucket._posAtParent));const c=e.Links.find((e=>{if(null==e.Name)return!1;const n=e.Name.substring(0,2),r=e.Name.substring(2);return n===a&&(!r||r===t)}));return c?null!=c.Name&&c.Name.substring(2)===t?c.Hash:(r.hamtDepth++,e=De(await n.get(c.Hash,s)),xa(e,t,n,r,s)):null},Ca=xa,Ha=function(e,t,n,r){const s=t+e.length;return n>=s||r<t?new Uint8Array(0):(r>=t&&r<s&&(e=e.subarray(0,r-t)),n>=t&&n<s&&(e=e.subarray(n-t)),e)},ja=(e,t,n)=>{if(t||(t=0),t<0)throw B(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw B(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(n||0===n||(n=e-t),n<0)throw B(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+n>e&&(n=e-t),{offset:t,length:n}};async function Ba(e,t,n,r,s,i,a,o){if(t instanceof Uint8Array)return void n.push(Ha(t,r,s,i));if(null==t.Data)throw B(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let c;try{c=ee.unmarshal(t.Data)}catch(e){throw B(e,"ERR_NOT_UNIXFS")}if(null!=c.data){const e=c.data,t=Ha(e,r,s,i);n.push(t),r+=t.byteLength}const d=[];for(let e=0;e<t.Links.length;e++){const n=t.Links[e],a=r,o=a+c.blockSizes[e];if((s>=a&&s<o||i>=a&&i<=o||s<a&&i>o)&&d.push({link:n,blockStart:r}),(r=o)>i)break}await(0,ki.zG)(d,(t=>(0,bi.Z)(t,(t=>async()=>{const n=await e.get(t.link.Hash,{signal:o.signal});return{...t,block:n}}))),(e=>wi(e,{ordered:!0})),(async t=>{for await(const{link:r,block:c,blockStart:d}of t){let t;switch(r.Hash.code){case Le:t=De(c);break;case $i.code:t=c;break;default:return void n.end(B(new Error(`Unsupported codec: ${r.Hash.code}`),"ERR_NOT_UNIXFS"))}a.add((async()=>{await Ba(e,t,n,d,s,i,a,o)}))}}))}const za=(e,t,n,r,s,i,a)=>async function*(e={}){const r=n.fileSize();if(void 0===r)throw new Error("File was a directory");const{offset:s,length:i}=ja(r,e.offset,e.length);if(0===i)return;const o=new Pr.Z({concurrency:1}),c=(0,Ss.d)();o.add((async()=>{await Ba(a,t,c,0,s,s+i,o,e)})),o.on("error",(e=>{c.end(e)}));let d=0;for await(const e of c)null!=e&&(d+=e.byteLength,d===i&&c.end(),yield e)};async function*Ua(e,t,n,r,s,i){const a=e.Links;for(const o of a){const a=null!=o.Name?o.Name.substring(2):null;if(a){const e=await n(o.Hash,a,`${t}/${a}`,[],r+1,s,i);yield e.entry}else{e=De(await s.get(o.Hash));for await(const a of Ua(e,t,n,r,s,i))yield a}}}const Fa={raw:za,file:za,directory:(e,t,n,r,s,i,a)=>async function*(e={}){const n=e.offset||0,o=e.length||t.Links.length,c=t.Links.slice(n,o);for(const t of c){const n=await s(t.Hash,t.Name||"",`${r}/${t.Name||""}`,[],i+1,a,e);n.entry&&(yield n.entry)}},"hamt-sharded-directory":(e,t,n,r,s,i,a)=>function(e={}){return Ua(t,r,s,i,a,e)},metadata:(e,t,n,r,s,i,a)=>()=>[],symlink:(e,t,n,r,s,i,a)=>()=>[]},Va={[Le]:async(e,t,n,r,s,i,a,o)=>{const c=De(await a.get(e,o));let d,l;if(t||(t=e.toString()),null==c.Data)throw B(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{d=ee.unmarshal(c.Data)}catch(e){throw B(e,"ERR_NOT_UNIXFS")}if(n||(n=t),r.length){let e;if(e=d&&"hamt-sharded-directory"===d.type?await Ca(c,r[0],a):((e,t)=>{const n=e.Links.find((e=>e.Name===t));return n&&n.Hash})(c,r[0]),!e)throw B(new Error("file does not exist"),"ERR_NOT_FOUND");const t=r.shift();l={cid:e,toResolve:r,name:t||"",path:`${n}/${t}`}}return{entry:{type:d.isDirectory()?"directory":"file",name:t,path:n,cid:e,content:Fa[d.type](e,c,d,n,s,i,a),unixfs:d,depth:i,node:c,size:d.fileSize()},next:l}},[$i.code]:async(e,t,n,r,s,i,a,o)=>{if(r.length)throw B(new Error(`No link named ${n} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await a.get(e,o);return{entry:{type:"raw",name:t,path:n,cid:e,content:(d=c,async function*(e={}){const{offset:t,length:n}=ja(d.length,e.offset,e.length);yield Ha(d,0,t,t+n)}),depth:i,size:c.length,node:c}};var d},[nn]:async(e,t,n,r,s,i,a,o)=>{const c=await a.get(e),d=sn(c);let l=d,u=n;for(;r.length;){const s=r[0];if(!(s in l))throw B(new Error(`No property named ${s} found in cbor node ${e}`),"ERR_NO_PROP");{r.shift(),u=`${u}/${s}`;const a=te.k.asCID(l[s]);if(a)return{entry:{type:"object",name:t,path:n,cid:e,node:c,depth:i,size:c.length,content:async function*(){yield d}},next:{cid:a,name:s,path:u,toResolve:r}};l=l[s]}}return{entry:{type:"object",name:t,path:n,cid:e,node:c,depth:i,size:c.length,content:async function*(){yield d}}}},[xn.identity.code]:async(e,t,n,r,s,i,a,o)=>{if(r.length)throw B(new Error(`No link named ${n} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await Kn.Jx(e.multihash.bytes);return{entry:{type:"identity",name:t,path:n,cid:e,content:(d=c.digest,async function*(e={}){const{offset:t,length:n}=ja(d.length,e.offset,e.length);yield Ha(d,0,t,t+n)}),depth:i,size:c.digest.length,node:c.digest}};var d}},Wa=function e(t,n,r,s,i,a,o){const c=Va[t.code];if(!c)throw B(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return c(t,n,r,s,e,i,a,o)};async function*$a(e,t,n={}){let{cid:r,toResolve:s}=(e=>{if(e instanceof Uint8Array)return{cid:te.k.decode(e),toResolve:[]};const t=te.k.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"==typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=((e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean))(e);return{cid:te.k.parse(t[0]),toResolve:t.slice(1)}}throw B(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")})(e),i=r.toString(),a=i;const o=s.length;for(;;){const c=await Wa(r,i,a,s,o,t,n);if(!c.entry&&!c.next)throw B(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;s=c.next.toResolve,r=c.next.cid,i=c.next.name,a=c.next.path}}async function Ga(e,t,n={}){const r=await xr($a(e,t,n));if(!r)throw B(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");return r}async function*qa(e,t,n={}){const r=await Ga(e,t,n);if(r&&(yield r,"directory"===r.type))for await(const e of async function*e(t,n){for await(const r of t.content(n))yield r,r instanceof Uint8Array||"directory"===r.type&&(yield*e(r,n))}(r,n))yield e}"0".charCodeAt(0),(0,Wn.m)("ustar\0","binary"),(0,Wn.m)("ustar ","binary"),(0,Wn.m)(" \0","binary"),n(63024);var Ka=n(78814);async function Za(e){let t=new Uint8Array(0);for await(const n of e)t=(0,Qr.z)([t,n],t.length+n.length);return t}const Ja="0".charCodeAt(0),Qa=(0,Wn.m)("ustar\0","binary"),Xa=(0,Wn.m)("00","binary"),eo=parseInt("7777",8),to=function(e,t){const n=e.toString(8);return n.length>t?(0,Wn.m)("7777777777777777777".slice(0,t)+" "):(0,Wn.m)("0000000000000000000".slice(0,t-n.length)+n+" ")},no=function(e){const t=(0,Wn.m)(e).byteLength;let n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,`${t+n}${e}`};function ro(e){const t=new Uint8Array(512);let n=e.name,r="";if(5===e.typeflag&&"/"!==n[n.length-1]&&(n+="/"),(0,Wn.m)(n).byteLength!==n.length)return null;for(;(0,Wn.m)(n).byteLength>100;){const e=n.indexOf("/");if(-1===e)return null;r+=""!==r?"/"+n.slice(0,e):n.slice(0,e),n=n.slice(e+1)}return(0,Wn.m)(n).byteLength>100||(0,Wn.m)(r).byteLength>155||null!=e.linkname&&(0,Wn.m)(e.linkname).byteLength>100?null:(t.set((0,Wn.m)(n),0),t.set(to(e.mode&eo,6),100),t.set(to(e.uid,6),108),t.set(to(e.gid,6),116),t.set(to(e.size,11),124),t.set(to(e.mtime.getTime()/1e3|0,11),136),t[156]=Ja+function(e){switch(e){case"file":default:return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}}(e.type),null!=e.linkname&&t.set((0,Wn.m)(e.linkname),157),t.set(Qa,257),t.set(Xa,263),null!=e.uname&&t.set((0,Wn.m)(e.uname),265),null!=e.gname&&t.set((0,Wn.m)(e.gname),297),t.set(to(e.devmajor??0,6),329),t.set(to(e.devminor??0,6),337),null!=r&&t.set((0,Wn.m)(r),345),t.set(to(function(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t}(t),6),148),t)}const{S_IFMT:so,S_IFBLK:io,S_IFCHR:ao,S_IFDIR:oo,S_IFIFO:co,S_IFLNK:lo}=Ka,uo=parseInt("755",8),ho=parseInt("644",8),po=new Uint8Array(1024);function fo(e=0){switch(e&so){case io:return"block-device";case ao:return"character-device";case oo:return"directory";case co:return"fifo";case lo:return"symlink";default:return"file"}}function mo(e){return 0!=(e&=511)?po.subarray(0,512-e):new Uint8Array(0)}function _o(e){if(null==e.pax){const t=ro(e);if(null!=t)return t}return function(e){const t=function(e){let t="";null!=e.name&&(t+=no(" path="+e.name+"\n")),null!=e.linkname&&(t+=no(" linkpath="+e.linkname+"\n"));const n=e.pax;if(null!=n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t+=no(" "+e+"="+n[e]+"\n"));return(0,Wn.m)(t)}(e),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new Xi.H(ro(n)??new Uint8Array(0),t,mo(t.length),ro({...n,size:e.size,type:e.type})??new Uint8Array(0)).subarray()}(e)}function yo(){return async function*(e){for await(let{header:t,body:n}of e){const e={...t,size:"symlink"===t.type?0:t.size??0,type:t.type??fo(t.mode),mode:t.mode??("directory"===t.type?uo:ho),uid:t.uid??0,gid:t.gid??0,mtime:t.mtime??new Date};if("string"==typeof n&&(n=(0,Wn.m)(n)),n instanceof Uint8Array||(0,Xi.Z)(n)){e.size=n.length,yield _o(e),yield(0,Xi.Z)(n)?n.subarray():n,yield mo(e.size);continue}if("symlink"===e.type&&null==e.linkname){if(null==n)throw new Error("type was symlink but no linkname or body specified");e.linkname=(0,Xn.B)(await Za(n)),yield _o(e);continue}if(yield _o(e),"file"!==e.type&&"contiguous-file"!==e.type)continue;let r=0;for await(const e of n??[])r+=e.length,yield(0,Xi.Z)(e)?e.subarray():e;if(r!==e.size)throw new Error(`size mismatch, wrote ${r} of ${e.size} bytes`);yield mo(e.size)}yield po}}function go(e){let t=e.length;for(;--t>=0;)e[t]=0}const wo=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),bo=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),vo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ko=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mo=new Array(576);go(Mo);const Eo=new Array(60);go(Eo);const Lo=new Array(512);go(Lo);const So=new Array(256);go(So);const Do=new Array(29);go(Do);const To=new Array(30);function Ro(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}let Po,Io,Ao;function Yo(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}go(To);const Oo=e=>e<256?Lo[e]:Lo[256+(e>>>7)],No=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},xo=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,No(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Co=(e,t,n)=>{xo(e,n[2*t],n[2*t+1])},Ho=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},jo=(e,t,n)=>{const r=new Array(16);let s,i,a=0;for(s=1;s<=15;s++)a=a+n[s-1]<<1,r[s]=a;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=Ho(r[t]++,t))}},Bo=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},zo=e=>{e.bi_valid>8?No(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Uo=(e,t,n,r)=>{const s=2*t,i=2*n;return e[s]<e[i]||e[s]===e[i]&&r[t]<=r[n]},Fo=(e,t,n)=>{const r=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&Uo(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!Uo(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r},Vo=(e,t,n)=>{let r,s,i,a,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,s=e.pending_buf[e.sym_buf+o++],0===r?Co(e,s,t):(i=So[s],Co(e,i+256+1,t),a=wo[i],0!==a&&(s-=Do[i],xo(e,s,a)),r--,i=Oo(r),Co(e,i,n),a=bo[i],0!==a&&(r-=To[i],xo(e,r,a)))}while(o<e.sym_next);Co(e,256,t)},Wo=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.elems;let a,o,c,d=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<i;a++)0!==n[2*a]?(e.heap[++e.heap_len]=d=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,s&&(e.static_len-=r[2*c+1]);for(t.max_code=d,a=e.heap_len>>1;a>=1;a--)Fo(e,n,a);c=i;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Fo(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,n[2*c]=n[2*a]+n[2*o],e.depth[c]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,n[2*a+1]=n[2*o+1]=c,e.heap[1]=c++,Fo(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,l,u,h,p,f,m=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)l=e.heap[d],h=n[2*n[2*l+1]+1]+1,h>c&&(h=c,m++),n[2*l+1]=h,l>r||(e.bl_count[h]++,p=0,l>=o&&(p=a[l-o]),f=n[2*l],e.opt_len+=f*(h+p),i&&(e.static_len+=f*(s[2*l+1]+p)));if(0!==m){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--)for(l=e.bl_count[h];0!==l;)u=e.heap[--d],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),l--)}})(e,t),jo(n,d,e.bl_count)},$o=(e,t,n)=>{let r,s,i=-1,a=t[1],o=0,c=7,d=4;for(0===a&&(c=138,d=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)s=a,a=t[2*(r+1)+1],++o<c&&s===a||(o<d?e.bl_tree[2*s]+=o:0!==s?(s!==i&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=s,0===a?(c=138,d=3):s===a?(c=6,d=3):(c=7,d=4))},Go=(e,t,n)=>{let r,s,i=-1,a=t[1],o=0,c=7,d=4;for(0===a&&(c=138,d=3),r=0;r<=n;r++)if(s=a,a=t[2*(r+1)+1],!(++o<c&&s===a)){if(o<d)do{Co(e,s,e.bl_tree)}while(0!=--o);else 0!==s?(s!==i&&(Co(e,s,e.bl_tree),o--),Co(e,16,e.bl_tree),xo(e,o-3,2)):o<=10?(Co(e,17,e.bl_tree),xo(e,o-3,3)):(Co(e,18,e.bl_tree),xo(e,o-11,7));o=0,i=s,0===a?(c=138,d=3):s===a?(c=6,d=3):(c=7,d=4)}};let qo=!1;const Ko=(e,t,n,r)=>{xo(e,0+(r?1:0),3),zo(e),No(e,n),No(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Zo={_tr_init:e=>{qo||((()=>{let e,t,n,r,s;const i=new Array(16);for(n=0,r=0;r<28;r++)for(Do[r]=n,e=0;e<1<<wo[r];e++)So[n++]=r;for(So[n-1]=r,s=0,r=0;r<16;r++)for(To[r]=s,e=0;e<1<<bo[r];e++)Lo[s++]=r;for(s>>=7;r<30;r++)for(To[r]=s<<7,e=0;e<1<<bo[r]-7;e++)Lo[256+s++]=r;for(t=0;t<=15;t++)i[t]=0;for(e=0;e<=143;)Mo[2*e+1]=8,e++,i[8]++;for(;e<=255;)Mo[2*e+1]=9,e++,i[9]++;for(;e<=279;)Mo[2*e+1]=7,e++,i[7]++;for(;e<=287;)Mo[2*e+1]=8,e++,i[8]++;for(jo(Mo,287,i),e=0;e<30;e++)Eo[2*e+1]=5,Eo[2*e]=Ho(e,5);Po=new Ro(Mo,wo,257,286,15),Io=new Ro(Eo,bo,0,30,15),Ao=new Ro(new Array(0),vo,0,19,7)})(),qo=!0),e.l_desc=new Yo(e.dyn_ltree,Po),e.d_desc=new Yo(e.dyn_dtree,Io),e.bl_desc=new Yo(e.bl_tree,Ao),e.bi_buf=0,e.bi_valid=0,Bo(e)},_tr_stored_block:Ko,_tr_flush_block:(e,t,n,r)=>{let s,i,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Wo(e,e.l_desc),Wo(e,e.d_desc),a=(e=>{let t;for($o(e,e.dyn_ltree,e.l_desc.max_code),$o(e,e.dyn_dtree,e.d_desc.max_code),Wo(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ko[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=n+5,n+4<=s&&-1!==t?Ko(e,t,n,r):4===e.strategy||i===s?(xo(e,2+(r?1:0),3),Vo(e,Mo,Eo)):(xo(e,4+(r?1:0),3),((e,t,n,r)=>{let s;for(xo(e,t-257,5),xo(e,n-1,5),xo(e,r-4,4),s=0;s<r;s++)xo(e,e.bl_tree[2*ko[s]+1],3);Go(e,e.dyn_ltree,t-1),Go(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Vo(e,e.dyn_ltree,e.dyn_dtree)),Bo(e),r&&zo(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(So[n]+256+1)]++,e.dyn_dtree[2*Oo(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{xo(e,2,3),Co(e,256,Mo),(e=>{16===e.bi_valid?(No(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Jo=(e,t,n,r)=>{let s=65535&e|0,i=e>>>16&65535|0,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{s=s+t[r++]|0,i=i+s|0}while(--a);s%=65521,i%=65521}return s|i<<16|0};const Qo=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Xo=(e,t,n,r)=>{const s=Qo,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^s[255&(e^t[n])];return-1^e},ec={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:nc,_tr_stored_block:rc,_tr_flush_block:sc,_tr_tally:ic,_tr_align:ac}=Zo,{Z_NO_FLUSH:oc,Z_PARTIAL_FLUSH:cc,Z_FULL_FLUSH:dc,Z_FINISH:lc,Z_BLOCK:uc,Z_OK:hc,Z_STREAM_END:pc,Z_STREAM_ERROR:fc,Z_DATA_ERROR:mc,Z_BUF_ERROR:_c,Z_DEFAULT_COMPRESSION:yc,Z_FILTERED:gc,Z_HUFFMAN_ONLY:wc,Z_RLE:bc,Z_FIXED:vc,Z_DEFAULT_STRATEGY:kc,Z_UNKNOWN:Mc,Z_DEFLATED:Ec}=tc,Lc=258,Sc=262,Dc=42,Tc=113,Rc=666,Pc=(e,t)=>(e.msg=ec[t],t),Ic=e=>2*e-(e>4?9:0),Ac=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Yc=e=>{let t,n,r,s=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=s?n-s:0}while(--t);t=s,r=t;do{n=e.prev[--r],e.prev[r]=n>=s?n-s:0}while(--t)};let Oc=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Nc=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},xc=(e,t)=>{sc(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Nc(e.strm)},Cc=(e,t)=>{e.pending_buf[e.pending++]=t},Hc=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},jc=(e,t,n,r)=>{let s=e.avail_in;return s>r&&(s=r),0===s?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),1===e.state.wrap?e.adler=Jo(e.adler,t,s,n):2===e.state.wrap&&(e.adler=Xo(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},Bc=(e,t)=>{let n,r,s=e.max_chain_length,i=e.strstart,a=e.prev_length,o=e.nice_match;const c=e.strstart>e.w_size-Sc?e.strstart-(e.w_size-Sc):0,d=e.window,l=e.w_mask,u=e.prev,h=e.strstart+Lc;let p=d[i+a-1],f=d[i+a];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,d[n+a]===f&&d[n+a-1]===p&&d[n]===d[i]&&d[++n]===d[i+1]){i+=2,n++;do{}while(d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&d[++i]===d[++n]&&i<h);if(r=Lc-(h-i),i=h-Lc,r>a){if(e.match_start=t,a=r,r>=o)break;p=d[i+a-1],f=d[i+a]}}}while((t=u[t&l])>c&&0!=--s);return a<=e.lookahead?a:e.lookahead},zc=e=>{const t=e.w_size;let n,r,s;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Sc)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Yc(e),r+=t),0===e.strm.avail_in)break;if(n=jc(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Oc(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Oc(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Sc&&0!==e.strm.avail_in)},Uc=(e,t)=>{let n,r,s,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,o=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s)break;if(s=e.strm.avail_out-s,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>s&&(n=s),n<i&&(0===n&&t!==lc||t===oc||n!==r+e.strm.avail_in))break;a=t===lc&&n===r+e.strm.avail_in?1:0,rc(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Nc(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(jc(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==oc&&t!==lc&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(jc(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,i=s>e.w_size?e.w_size:s,r=e.strstart-e.block_start,(r>=i||(r||t===lc)&&t!==oc&&0===e.strm.avail_in&&r<=s)&&(n=r>s?s:r,a=t===lc&&0===e.strm.avail_in&&n===r?1:0,rc(e,e.block_start,n,a),e.block_start+=n,Nc(e.strm)),a?3:1)},Fc=(e,t)=>{let n,r;for(;;){if(e.lookahead<Sc){if(zc(e),e.lookahead<Sc&&t===oc)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Oc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Sc&&(e.match_length=Bc(e,n)),e.match_length>=3)if(r=ic(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Oc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Oc(e,e.ins_h,e.window[e.strstart+1]);else r=ic(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(xc(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===lc?(xc(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xc(e,!1),0===e.strm.avail_out)?1:2},Vc=(e,t)=>{let n,r,s;for(;;){if(e.lookahead<Sc){if(zc(e),e.lookahead<Sc&&t===oc)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Oc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Sc&&(e.match_length=Bc(e,n),e.match_length<=5&&(e.strategy===gc||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,r=ic(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=s&&(e.ins_h=Oc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(xc(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=ic(e,0,e.window[e.strstart-1]),r&&xc(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ic(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===lc?(xc(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xc(e,!1),0===e.strm.avail_out)?1:2};function Wc(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}const $c=[new Wc(0,0,0,0,Uc),new Wc(4,4,8,4,Fc),new Wc(4,5,16,8,Fc),new Wc(4,6,32,32,Fc),new Wc(4,4,16,16,Vc),new Wc(8,16,32,32,Vc),new Wc(8,16,128,128,Vc),new Wc(8,32,128,256,Vc),new Wc(32,128,258,1024,Vc),new Wc(32,258,258,4096,Vc)];function Gc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ec,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ac(this.dyn_ltree),Ac(this.dyn_dtree),Ac(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ac(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ac(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qc=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Dc&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Tc&&t.status!==Rc?1:0},Kc=e=>{if(qc(e))return Pc(e,fc);e.total_in=e.total_out=0,e.data_type=Mc;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Dc:Tc,e.adler=2===t.wrap?0:1,t.last_flush=-2,nc(t),hc},Zc=e=>{const t=Kc(e);var n;return t===hc&&((n=e.state).window_size=2*n.w_size,Ac(n.head),n.max_lazy_match=$c[n.level].max_lazy,n.good_match=$c[n.level].good_length,n.nice_match=$c[n.level].nice_length,n.max_chain_length=$c[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Jc=(e,t,n,r,s,i)=>{if(!e)return fc;let a=1;if(t===yc&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>9||n!==Ec||r<8||r>15||t<0||t>9||i<0||i>vc||8===r&&1!==a)return Pc(e,fc);8===r&&(r=9);const o=new Gc;return e.state=o,o.strm=e,o.status=Dc,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=i,o.method=n,Zc(e)};var Qc=Jc,Xc=(e,t)=>qc(e)||2!==e.state.wrap?fc:(e.state.gzhead=t,hc),ed=(e,t)=>{if(qc(e)||t>uc||t<0)return e?Pc(e,fc):fc;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Rc&&t!==lc)return Pc(e,0===e.avail_out?_c:fc);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Nc(e),0===e.avail_out)return n.last_flush=-1,hc}else if(0===e.avail_in&&Ic(t)<=Ic(r)&&t!==lc)return Pc(e,_c);if(n.status===Rc&&0!==e.avail_in)return Pc(e,_c);if(n.status===Dc&&0===n.wrap&&(n.status=Tc),n.status===Dc){let t=Ec+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=wc||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Hc(n,t),0!==n.strstart&&(Hc(n,e.adler>>>16),Hc(n,65535&e.adler)),e.adler=1,n.status=Tc,Nc(e),0!==n.pending)return n.last_flush=-1,hc}if(57===n.status)if(e.adler=0,Cc(n,31),Cc(n,139),Cc(n,8),n.gzhead)Cc(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Cc(n,255&n.gzhead.time),Cc(n,n.gzhead.time>>8&255),Cc(n,n.gzhead.time>>16&255),Cc(n,n.gzhead.time>>24&255),Cc(n,9===n.level?2:n.strategy>=wc||n.level<2?4:0),Cc(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Cc(n,255&n.gzhead.extra.length),Cc(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Xo(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Cc(n,0),Cc(n,0),Cc(n,0),Cc(n,0),Cc(n,0),Cc(n,9===n.level?2:n.strategy>=wc||n.level<2?4:0),Cc(n,3),n.status=Tc,Nc(e),0!==n.pending)return n.last_flush=-1,hc;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Xo(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=s,Nc(e),0!==n.pending)return n.last_flush=-1,hc;t=0,r-=s}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Xo(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Xo(e.adler,n.pending_buf,n.pending-r,r)),Nc(e),0!==n.pending)return n.last_flush=-1,hc;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Cc(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Xo(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Xo(e.adler,n.pending_buf,n.pending-r,r)),Nc(e),0!==n.pending)return n.last_flush=-1,hc;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Cc(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Xo(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Nc(e),0!==n.pending))return n.last_flush=-1,hc;Cc(n,255&e.adler),Cc(n,e.adler>>8&255),e.adler=0}if(n.status=Tc,Nc(e),0!==n.pending)return n.last_flush=-1,hc}if(0!==e.avail_in||0!==n.lookahead||t!==oc&&n.status!==Rc){let r=0===n.level?Uc(n,t):n.strategy===wc?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(zc(e),0===e.lookahead)){if(t===oc)return 1;break}if(e.match_length=0,n=ic(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(xc(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===lc?(xc(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xc(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===bc?((e,t)=>{let n,r,s,i;const a=e.window;for(;;){if(e.lookahead<=Lc){if(zc(e),e.lookahead<=Lc&&t===oc)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(s=e.strstart-1,r=a[s],r===a[++s]&&r===a[++s]&&r===a[++s])){i=e.strstart+Lc;do{}while(r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&r===a[++s]&&s<i);e.match_length=Lc-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=ic(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ic(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(xc(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===lc?(xc(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xc(e,!1),0===e.strm.avail_out)?1:2})(n,t):$c[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Rc),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),hc;if(2===r&&(t===cc?ac(n):t!==uc&&(rc(n,0,0,!1),t===dc&&(Ac(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Nc(e),0===e.avail_out))return n.last_flush=-1,hc}return t!==lc?hc:n.wrap<=0?pc:(2===n.wrap?(Cc(n,255&e.adler),Cc(n,e.adler>>8&255),Cc(n,e.adler>>16&255),Cc(n,e.adler>>24&255),Cc(n,255&e.total_in),Cc(n,e.total_in>>8&255),Cc(n,e.total_in>>16&255),Cc(n,e.total_in>>24&255)):(Hc(n,e.adler>>>16),Hc(n,65535&e.adler)),Nc(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?hc:pc)},td=e=>{if(qc(e))return fc;const t=e.state.status;return e.state=null,t===Tc?Pc(e,mc):hc},nd=(e,t)=>{let n=t.length;if(qc(e))return fc;const r=e.state,s=r.wrap;if(2===s||1===s&&r.status!==Dc||r.lookahead)return fc;if(1===s&&(e.adler=Jo(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===s&&(Ac(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,zc(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Oc(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,zc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=i,r.wrap=s,hc};const rd=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var sd=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)rd(n,t)&&(e[t]=n[t])}}return e},id=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,s=e.length;t<s;t++){let s=e[t];n.set(s,r),r+=s.length}return n};let ad=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){ad=!1}const od=new Uint8Array(256);for(let e=0;e<256;e++)od[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;od[254]=od[254]=1;var cd=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,s,i,a=e.length,o=0;for(s=0;s<a;s++)n=e.charCodeAt(s),55296==(64512&n)&&s+1<a&&(r=e.charCodeAt(s+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),i=0,s=0;i<o;s++)n=e.charCodeAt(s),55296==(64512&n)&&s+1<a&&(r=e.charCodeAt(s+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},dd=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,s;const i=new Array(2*n);for(s=0,r=0;r<n;){let t=e[r++];if(t<128){i[s++]=t;continue}let a=od[t];if(a>4)i[s++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<n;)t=t<<6|63&e[r++],a--;a>1?i[s++]=65533:t<65536?i[s++]=t:(t-=65536,i[s++]=55296|t>>10&1023,i[s++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&ad)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,s)},ld=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+od[e[n]]>t?n:t},ud=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const hd=Object.prototype.toString,{Z_NO_FLUSH:pd,Z_SYNC_FLUSH:fd,Z_FULL_FLUSH:md,Z_FINISH:_d,Z_OK:yd,Z_STREAM_END:gd,Z_DEFAULT_COMPRESSION:wd,Z_DEFAULT_STRATEGY:bd,Z_DEFLATED:vd}=tc;function kd(e){this.options=sd({level:wd,method:vd,chunkSize:16384,windowBits:15,memLevel:8,strategy:bd},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ud,this.strm.avail_out=0;let n=Qc(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==yd)throw new Error(ec[n]);if(t.header&&Xc(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?cd(t.dictionary):"[object ArrayBuffer]"===hd.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=nd(this.strm,e),n!==yd)throw new Error(ec[n]);this._dict_set=!0}}function Md(e,t){const n=new kd(t);if(n.push(e,!0),n.err)throw n.msg||ec[n.err];return n.result}kd.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?_d:pd,"string"==typeof e?n.input=cd(e):"[object ArrayBuffer]"===hd.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===fd||i===md)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=ed(n,i),s===gd)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=td(this.strm),this.onEnd(s),this.ended=!0,s===yd;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},kd.prototype.onData=function(e){this.chunks.push(e)},kd.prototype.onEnd=function(e){e===yd&&(this.result=id(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ed={Deflate:kd,deflate:Md,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Md(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Md(e,t)},constants:tc};const Ld=16209;var Sd=function(e,t){let n,r,s,i,a,o,c,d,l,u,h,p,f,m,_,y,g,w,b,v,k,M,E,L;const S=e.state;n=e.next_in,E=e.input,r=n+(e.avail_in-5),s=e.next_out,L=e.output,i=s-(t-e.avail_out),a=s+(e.avail_out-257),o=S.dmax,c=S.wsize,d=S.whave,l=S.wnext,u=S.window,h=S.hold,p=S.bits,f=S.lencode,m=S.distcode,_=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;e:do{p<15&&(h+=E[n++]<<p,p+=8,h+=E[n++]<<p,p+=8),g=f[h&_];t:for(;;){if(w=g>>>24,h>>>=w,p-=w,w=g>>>16&255,0===w)L[s++]=65535&g;else{if(!(16&w)){if(0==(64&w)){g=f[(65535&g)+(h&(1<<w)-1)];continue t}if(32&w){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=Ld;break e}b=65535&g,w&=15,w&&(p<w&&(h+=E[n++]<<p,p+=8),b+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=E[n++]<<p,p+=8,h+=E[n++]<<p,p+=8),g=m[h&y];n:for(;;){if(w=g>>>24,h>>>=w,p-=w,w=g>>>16&255,!(16&w)){if(0==(64&w)){g=m[(65535&g)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",S.mode=Ld;break e}if(v=65535&g,w&=15,p<w&&(h+=E[n++]<<p,p+=8,p<w&&(h+=E[n++]<<p,p+=8)),v+=h&(1<<w)-1,v>o){e.msg="invalid distance too far back",S.mode=Ld;break e}if(h>>>=w,p-=w,w=s-i,v>w){if(w=v-w,w>d&&S.sane){e.msg="invalid distance too far back",S.mode=Ld;break e}if(k=0,M=u,0===l){if(k+=c-w,w<b){b-=w;do{L[s++]=u[k++]}while(--w);k=s-v,M=L}}else if(l<w){if(k+=c+l-w,w-=l,w<b){b-=w;do{L[s++]=u[k++]}while(--w);if(k=0,l<b){w=l,b-=w;do{L[s++]=u[k++]}while(--w);k=s-v,M=L}}}else if(k+=l-w,w<b){b-=w;do{L[s++]=u[k++]}while(--w);k=s-v,M=L}for(;b>2;)L[s++]=M[k++],L[s++]=M[k++],L[s++]=M[k++],b-=3;b&&(L[s++]=M[k++],b>1&&(L[s++]=M[k++]))}else{k=s-v;do{L[s++]=L[k++],L[s++]=L[k++],L[s++]=L[k++],b-=3}while(b>2);b&&(L[s++]=L[k++],b>1&&(L[s++]=L[k++]))}break}}break}}while(n<r&&s<a);b=p>>3,n-=b,p-=b<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=s<a?a-s+257:257-(s-a),S.hold=h,S.bits=p};const Dd=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Td=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Rd=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Pd=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Id=(e,t,n,r,s,i,a,o)=>{const c=o.bits;let d,l,u,h,p,f,m=0,_=0,y=0,g=0,w=0,b=0,v=0,k=0,M=0,E=0,L=null;const S=new Uint16Array(16),D=new Uint16Array(16);let T,R,P,I=null;for(m=0;m<=15;m++)S[m]=0;for(_=0;_<r;_++)S[t[n+_]]++;for(w=c,g=15;g>=1&&0===S[g];g--);if(w>g&&(w=g),0===g)return s[i++]=20971520,s[i++]=20971520,o.bits=1,0;for(y=1;y<g&&0===S[y];y++);for(w<y&&(w=y),k=1,m=1;m<=15;m++)if(k<<=1,k-=S[m],k<0)return-1;if(k>0&&(0===e||1!==g))return-1;for(D[1]=0,m=1;m<15;m++)D[m+1]=D[m]+S[m];for(_=0;_<r;_++)0!==t[n+_]&&(a[D[t[n+_]]++]=_);if(0===e?(L=I=a,f=20):1===e?(L=Dd,I=Td,f=257):(L=Rd,I=Pd,f=0),E=0,_=0,m=y,p=i,b=w,v=0,u=-1,M=1<<w,h=M-1,1===e&&M>852||2===e&&M>592)return 1;for(;;){T=m-v,a[_]+1<f?(R=0,P=a[_]):a[_]>=f?(R=I[a[_]-f],P=L[a[_]-f]):(R=96,P=0),d=1<<m-v,l=1<<b,y=l;do{l-=d,s[p+(E>>v)+l]=T<<24|R<<16|P|0}while(0!==l);for(d=1<<m-1;E&d;)d>>=1;if(0!==d?(E&=d-1,E+=d):E=0,_++,0==--S[m]){if(m===g)break;m=t[n+a[_]]}if(m>w&&(E&h)!==u){for(0===v&&(v=w),p+=y,b=m-v,k=1<<b;b+v<g&&(k-=S[b+v],!(k<=0));)b++,k<<=1;if(M+=1<<b,1===e&&M>852||2===e&&M>592)return 1;u=E&h,s[u]=w<<24|b<<16|p-i|0}}return 0!==E&&(s[p+E]=m-v<<24|64<<16|0),o.bits=w,0};const{Z_FINISH:Ad,Z_BLOCK:Yd,Z_TREES:Od,Z_OK:Nd,Z_STREAM_END:xd,Z_NEED_DICT:Cd,Z_STREAM_ERROR:Hd,Z_DATA_ERROR:jd,Z_MEM_ERROR:Bd,Z_BUF_ERROR:zd,Z_DEFLATED:Ud}=tc,Fd=16180,Vd=16190,Wd=16191,$d=16192,Gd=16194,qd=16199,Kd=16200,Zd=16206,Jd=16209,Qd=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Xd(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const el=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Fd||t.mode>16211?1:0},tl=e=>{if(el(e))return Hd;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Fd,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Nd},nl=e=>{if(el(e))return Hd;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tl(e)},rl=(e,t)=>{let n;if(el(e))return Hd;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Hd:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,nl(e))},sl=(e,t)=>{if(!e)return Hd;const n=new Xd;e.state=n,n.strm=e,n.window=null,n.mode=Fd;const r=rl(e,t);return r!==Nd&&(e.state=null),r};let il,al,ol=!0;const cl=e=>{if(ol){il=new Int32Array(512),al=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Id(1,e.lens,0,288,il,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Id(2,e.lens,0,32,al,0,e.work,{bits:5}),ol=!1}e.lencode=il,e.lenbits=9,e.distcode=al,e.distbits=5},dl=(e,t,n,r)=>{let s;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(t.subarray(n-r,n-r+s),i.wnext),(r-=s)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0};var ll=nl,ul=sl,hl=(e,t)=>{let n,r,s,i,a,o,c,d,l,u,h,p,f,m,_,y,g,w,b,v,k,M,E=0;const L=new Uint8Array(4);let S,D;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(el(e)||!e.output||!e.input&&0!==e.avail_in)return Hd;n=e.state,n.mode===Wd&&(n.mode=$d),a=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,d=n.hold,l=n.bits,u=o,h=c,M=Nd;e:for(;;)switch(n.mode){case Fd:if(0===n.wrap){n.mode=$d;break}for(;l<16;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,L[0]=255&d,L[1]=d>>>8&255,n.check=Xo(n.check,L,2,0),d=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=Jd;break}if((15&d)!==Ud){e.msg="unknown compression method",n.mode=Jd;break}if(d>>>=4,l-=4,k=8+(15&d),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=Jd;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:Wd,d=0,l=0;break;case 16181:for(;l<16;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(n.flags=d,(255&n.flags)!==Ud){e.msg="unknown compression method",n.mode=Jd;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Jd;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&4&n.wrap&&(L[0]=255&d,L[1]=d>>>8&255,n.check=Xo(n.check,L,2,0)),d=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}n.head&&(n.head.time=d),512&n.flags&&4&n.wrap&&(L[0]=255&d,L[1]=d>>>8&255,L[2]=d>>>16&255,L[3]=d>>>24&255,n.check=Xo(n.check,L,4,0)),d=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&4&n.wrap&&(L[0]=255&d,L[1]=d>>>8&255,n.check=Xo(n.check,L,2,0)),d=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&4&n.wrap&&(L[0]=255&d,L[1]=d>>>8&255,n.check=Xo(n.check,L,2,0)),d=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>o&&(p=o),p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+p),k)),512&n.flags&&4&n.wrap&&(n.check=Xo(n.check,r,p,i)),o-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;p=0;do{k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&p<o);if(512&n.flags&&4&n.wrap&&(n.check=Xo(n.check,r,p,i)),o-=p,i+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;p=0;do{k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&p<o);if(512&n.flags&&4&n.wrap&&(n.check=Xo(n.check,r,p,i)),o-=p,i+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Jd;break}d=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Wd;break;case 16189:for(;l<32;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}e.adler=n.check=Qd(d),d=0,l=0,n.mode=Vd;case Vd:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=o,n.hold=d,n.bits=l,Cd;e.adler=n.check=1,n.mode=Wd;case Wd:if(t===Yd||t===Od)break e;case $d:if(n.last){d>>>=7&l,l-=7&l,n.mode=Zd;break}for(;l<3;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}switch(n.last=1&d,d>>>=1,l-=1,3&d){case 0:n.mode=16193;break;case 1:if(cl(n),n.mode=qd,t===Od){d>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Jd}d>>>=2,l-=2;break;case 16193:for(d>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Jd;break}if(n.length=65535&d,d=0,l=0,n.mode=Gd,t===Od)break e;case Gd:n.mode=16195;case 16195:if(p=n.length,p){if(p>o&&(p=o),p>c&&(p=c),0===p)break e;s.set(r.subarray(i,i+p),a),o-=p,i+=p,c-=p,a+=p,n.length-=p;break}n.mode=Wd;break;case 16196:for(;l<14;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(n.nlen=257+(31&d),d>>>=5,l-=5,n.ndist=1+(31&d),d>>>=5,l-=5,n.ncode=4+(15&d),d>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Jd;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}n.lens[T[n.have++]]=7&d,d>>>=3,l-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},M=Id(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,M){e.msg="invalid code lengths set",n.mode=Jd;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[d&(1<<n.lenbits)-1],_=E>>>24,y=E>>>16&255,g=65535&E,!(_<=l);){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(g<16)d>>>=_,l-=_,n.lens[n.have++]=g;else{if(16===g){for(D=_+2;l<D;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(d>>>=_,l-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=Jd;break}k=n.lens[n.have-1],p=3+(3&d),d>>>=2,l-=2}else if(17===g){for(D=_+3;l<D;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}d>>>=_,l-=_,k=0,p=3+(7&d),d>>>=3,l-=3}else{for(D=_+7;l<D;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}d>>>=_,l-=_,k=0,p=11+(127&d),d>>>=7,l-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Jd;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===Jd)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Jd;break}if(n.lenbits=9,S={bits:n.lenbits},M=Id(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,M){e.msg="invalid literal/lengths set",n.mode=Jd;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},M=Id(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,M){e.msg="invalid distances set",n.mode=Jd;break}if(n.mode=qd,t===Od)break e;case qd:n.mode=Kd;case Kd:if(o>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=o,n.hold=d,n.bits=l,Sd(e,h),a=e.next_out,s=e.output,c=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,d=n.hold,l=n.bits,n.mode===Wd&&(n.back=-1);break}for(n.back=0;E=n.lencode[d&(1<<n.lenbits)-1],_=E>>>24,y=E>>>16&255,g=65535&E,!(_<=l);){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(y&&0==(240&y)){for(w=_,b=y,v=g;E=n.lencode[v+((d&(1<<w+b)-1)>>w)],_=E>>>24,y=E>>>16&255,g=65535&E,!(w+_<=l);){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}d>>>=w,l-=w,n.back+=w}if(d>>>=_,l-=_,n.back+=_,n.length=g,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=Wd;break}if(64&y){e.msg="invalid literal/length code",n.mode=Jd;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(D=n.extra;l<D;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;E=n.distcode[d&(1<<n.distbits)-1],_=E>>>24,y=E>>>16&255,g=65535&E,!(_<=l);){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(0==(240&y)){for(w=_,b=y,v=g;E=n.distcode[v+((d&(1<<w+b)-1)>>w)],_=E>>>24,y=E>>>16&255,g=65535&E,!(w+_<=l);){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}d>>>=w,l-=w,n.back+=w}if(d>>>=_,l-=_,n.back+=_,64&y){e.msg="invalid distance code",n.mode=Jd;break}n.offset=g,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(D=n.extra;l<D;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Jd;break}n.mode=16204;case 16204:if(0===c)break e;if(p=h-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Jd;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=s,f=a-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{s[a++]=m[f++]}while(--p);0===n.length&&(n.mode=Kd);break;case 16205:if(0===c)break e;s[a++]=n.length,c--,n.mode=Kd;break;case Zd:if(n.wrap){for(;l<32;){if(0===o)break e;o--,d|=r[i++]<<l,l+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Xo(n.check,s,h,a-h):Jo(n.check,s,h,a-h)),h=c,4&n.wrap&&(n.flags?d:Qd(d))!==n.check){e.msg="incorrect data check",n.mode=Jd;break}d=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===o)break e;o--,d+=r[i++]<<l,l+=8}if(4&n.wrap&&d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Jd;break}d=0,l=0}n.mode=16208;case 16208:M=xd;break e;case Jd:M=jd;break e;case 16210:return Bd;default:return Hd}return e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=o,n.hold=d,n.bits=l,(n.wsize||h!==e.avail_out&&n.mode<Jd&&(n.mode<Zd||t!==Ad))&&dl(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Xo(n.check,s,h,e.next_out-h):Jo(n.check,s,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Wd?128:0)+(n.mode===qd||n.mode===Gd?256:0),(0===u&&0===h||t===Ad)&&M===Nd&&(M=zd),M},pl=e=>{if(el(e))return Hd;let t=e.state;return t.window&&(t.window=null),e.state=null,Nd},fl=(e,t)=>{if(el(e))return Hd;const n=e.state;return 0==(2&n.wrap)?Hd:(n.head=t,t.done=!1,Nd)},ml=(e,t)=>{const n=t.length;let r,s,i;return el(e)?Hd:(r=e.state,0!==r.wrap&&r.mode!==Vd?Hd:r.mode===Vd&&(s=1,s=Jo(s,t,n,0),s!==r.check)?jd:(i=dl(e,t,n,n),i?(r.mode=16210,Bd):(r.havedict=1,Nd)))},_l=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const yl=Object.prototype.toString,{Z_NO_FLUSH:gl,Z_FINISH:wl,Z_OK:bl,Z_STREAM_END:vl,Z_NEED_DICT:kl,Z_STREAM_ERROR:Ml,Z_DATA_ERROR:El,Z_MEM_ERROR:Ll}=tc;function Sl(e){this.options=sd({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ud,this.strm.avail_out=0;let n=ul(this.strm,t.windowBits);if(n!==bl)throw new Error(ec[n]);if(this.header=new _l,fl(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=cd(t.dictionary):"[object ArrayBuffer]"===yl.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ml(this.strm,t.dictionary),n!==bl)))throw new Error(ec[n])}function Dl(e,t){const n=new Sl(t);if(n.push(e),n.err)throw n.msg||ec[n.err];return n.result}Sl.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(a=t===~~t?t:!0===t?wl:gl,"[object ArrayBuffer]"===yl.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=hl(n,a),i===kl&&s&&(i=ml(n,s),i===bl?i=hl(n,a):i===El&&(i=kl));n.avail_in>0&&i===vl&&n.state.wrap>0&&0!==e[n.next_in];)ll(n),i=hl(n,a);switch(i){case Ml:case El:case kl:case Ll:return this.onEnd(i),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||i===vl))if("string"===this.options.to){let e=ld(n.output,n.next_out),t=n.next_out-e,s=dd(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(s)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==bl||0!==o){if(i===vl)return i=pl(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Sl.prototype.onData=function(e){this.chunks.push(e)},Sl.prototype.onEnd=function(e){e===bl&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=id(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Tl={Inflate:Sl,inflate:Dl,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Dl(e,t)},ungzip:Dl,constants:tc};const{Deflate:Rl,deflate:Pl,deflateRaw:Il,gzip:Al}=Ed,{Inflate:Yl,inflate:Ol,inflateRaw:Nl,ungzip:xl}=Tl;var Cl={Deflate:Rl,deflate:Pl,deflateRaw:Il,gzip:Al,Inflate:Yl,inflate:Ol,inflateRaw:Nl,ungzip:xl,constants:tc};class Hl{constructor({preload:e,repo:t,hashers:n,options:r}){const s=function({repo:e,preload:t,hashers:n,options:r}){const s=r&&r.sharding;return yr((async function*(r,i={}){const a=Ya({shardSplitThreshold:s?1e3:1/0,strategy:"balanced"},i,{...Pa(i.chunker)});a.hashAlg&&"sha2-256"!==a.hashAlg&&1!==a.cidVersion&&(a.cidVersion=1),a.trickle&&(a.strategy="trickle"),"trickle"===a.strategy&&(a.leafType="raw",a.reduceSingleLeafToSelf=!1),a.cidVersion>0&&void 0===a.rawLeaves&&(a.rawLeaves=!0),void 0!==a.hashAlg&&void 0===a.rawLeaves&&(a.rawLeaves=!0),delete a.trickle;const o={};if(a.progress){const e=a.progress;a.progress=(t,n)=>{o[n]||(o[n]=0),o[n]+=t,e(o[n],n)}}let c;null!=a.hashAlg&&(c=await n.getHasher(a.hashAlg));const d=(0,ki.zG)(Ta(r,Yi),(t=>Da(t,e.blocks,{...a,hasher:c,pin:!1})),function(e){return async function*(t){for await(const n of t){let t=n.cid;1===e.cidVersion&&(t=t.toV1());let r=n.path?n.path:t.toString();e.wrapWithDirectory&&!n.path&&(r=""),yield{path:r,cid:t,size:n.size,mode:n.unixfs&&n.unixfs.mode,mtime:n.unixfs&&n.unixfs.mtime}}}}(a),function(e,t){return async function*(n){for await(const r of n)(!r.path||t.wrapWithDirectory?""===r.path:!r.path.includes("/"))&&!t.onlyHash&&!1!==t.preload&&e(r.cid),yield r}}(t,a),function(e,t){return async function*(n){for await(const r of n){const n=!(r.path&&r.path.includes("/"));(null==t.pin||t.pin)&&n&&!t.onlyHash&&await e.pins.pinRecursively(r.cid),yield r}}}(e,a)),l=await e.gcLock.readLock();try{for await(const e of d){const t=e.path??e.cid.toString();delete o[t],yield{...e,path:t}}}finally{l()}}))}({preload:e,repo:t,options:r,hashers:n});this.addAll=s,this.add=function({addAll:e}){return async function(t,n={}){const r=await xr(e(xi(t),n));if(null==r)throw Error("Failed to add a file, if you see this please report a bug");return r}}({addAll:s}),this.cat=function({repo:e,preload:t}){return yr((async function*(n,r={}){if(n=Mr(n),!1!==r.preload){const e=n.split("/");t(te.k.parse(e[0]))}const s=await Ga(n,e.blocks,r);if("directory"===s.type)throw new Error("this dag node is a directory");if(!s.content)throw new Error("this dag node has no content");yield*s.content(r)}))}({repo:t,preload:e}),this.get=function({repo:e,preload:t}){return yr((async function*(n,r={}){if(null!=r.compressionLevel&&(r.compressionLevel<-1||r.compressionLevel>9))throw B(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(!1!==r.preload){let e;try{e=Mr(n).split("/")}catch(e){throw B(e,"ERR_INVALID_PATH")}t(te.k.parse(e[0]))}const s=te.k.asCID(n)||n,i=await Ga(s,e.blocks,r);if("file"===i.type||"raw"===i.type){const e=[];return r.compress&&!0!==r.archive?e.push(i.content):e.push([{header:{name:i.path,mode:"file"===i.type&&i.unixfs.mode,mtime:"file"===i.type&&i.unixfs.mtime?new Date(1e3*i.unixfs.mtime.secs):void 0,size:i.size,type:"file"},body:i.content()}],yo()),r.compress&&e.push((async function*(e){const t=await Za(e);yield Cl.gzip(t,{level:r.compressionLevel||6})})),void(yield*(0,ki.zG)(...e))}if("directory"!==i.type)throw B(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");{const t=[qa(s,e.blocks,r),async function*(e){for await(const t of e){const e={header:{name:t.path,size:t.size}};if("file"===t.type)e.header.type="file",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0,e.body=t.content();else if("raw"===t.type)e.header.type="file",e.body=t.content();else{if("directory"!==t.type)throw B(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");e.header.type="directory",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0}yield e}},yo()];if(r.compress){if(!r.archive)throw B(new Error("file is not regular"),"ERR_INVALID_PATH");r.compress&&t.push((async function*(e){const t=await Za(e);yield Cl.gzip(t,{level:r.compressionLevel||6})}))}yield*(0,ki.zG)(...t)}}))}({repo:t,preload:e}),this.ls=function({repo:e,preload:t}){return yr((async function*(n,r={}){const s=Mr(n),i=s.split("/");!1!==r.preload&&t(te.k.parse(i[0]));const a=te.k.asCID(s)||s,o=await Ga(a,e.blocks,r);if("file"!==o.type){if("directory"!==o.type)throw B(new Error(`Unknown UnixFS type ${o.type}`),"ERR_UNKNOWN_UNIXFS_TYPE");for await(const e of o.content())yield Lr(e)}else yield Lr(o)}))}({repo:t,preload:e})}}const jl="0.17.0",Bl=(0,j.kg)("ipfs:components:id");var zl=function(e,t,n){var r,s,i;if(Array.isArray(t)&&(r=t.slice(0)),"string"==typeof t&&(r=t.split(".")),"symbol"==typeof t&&(r=[t]),!Array.isArray(r))throw new Error("props arg must be an array, a string or a symbol");if(!(s=r.pop()))return!1;for(Ul(s);i=r.shift();)if(Ul(i),void 0===e[i]&&(e[i]={}),!(e=e[i])||"object"!=typeof e)return!1;return e[s]=n,!0};function Ul(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}const Fl={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:e=>(zl(e,"Discovery.MDNS.Enabled",!1),zl(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm={...e.Swarm||{},DisableNatPortMap:!0},e)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:e=>(zl(e,"Discovery.MDNS.Enabled",!0),zl(e,"Discovery.webRTCStar.Enabled",!0),zl(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:e=>{const t={Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]};return zl(e,"Addresses.API",t.API?"/ip4/127.0.0.1/tcp/0":""),zl(e,"Addresses.Gateway",t.Gateway?"/ip4/127.0.0.1/tcp/0":""),zl(e,"Addresses.Swarm",t.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),zl(e,"Addresses.Delegates",[]),zl(e,"Bootstrap",[]),zl(e,"Discovery.MDNS.Enabled",!1),zl(e,"Discovery.webRTCStar.Enabled",!1),zl(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!0}),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:e=>{const t={Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},n={MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},r=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"];return zl(e,"Addresses.API",t.API),zl(e,"Addresses.Gateway",t.Gateway),zl(e,"Addresses.Swarm",t.Swarm),zl(e,"Addresses.Delegates",t.Delegates),zl(e,"Bootstrap",r),zl(e,"Discovery.MDNS.Enabled",n.MDNS.Enabled),zl(e,"Discovery.webRTCStar.Enabled",n.webRTCStar.Enabled),zl(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:e=>{const t=e.Swarm||{},n=t.ConnMgr||{};return n.LowWater=20,n.HighWater=40,t.ConnMgr=n,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:e=>(e.Swarm={ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},e)}},Vl=(0,j.kg)("ipfs:core:config");async function Wl(e){return Object.keys(Fl).map((e=>({name:e,description:Fl[e].description})))}function $l({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*Gl(e,t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))for(const[n,r]of t.entries()){const t=[...e,n],s=an.k0.asCID(r);s?yield[t.join("/"),s]:"object"==typeof r&&(yield*ql(r,t))}else{const n=an.k0.asCID(t);n?yield[e.join("/"),n]:yield*ql(t,e)}}function*ql(e,t){if(!(null==e||e instanceof Uint8Array))for(const[n,r]of Object.entries(e)){const e=[...t,n];yield*Gl(e,r)}}function*Kl(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const t=[...e,n];yield t.join("/"),"object"!=typeof r||an.k0.asCID(r)||(yield*Zl(r,t))}else yield*Zl(t,e)}function*Zl(e,t){if(null!=e&&"object"==typeof e)for(const[n,r]of Object.entries(e)){const e=[...t,n];yield e.join("/"),null==r||r instanceof Uint8Array||"object"!=typeof r||an.k0.asCID(r)||(yield*Kl(e,r))}}class Jl{constructor({cid:e,bytes:t,value:n}){if(!e||!t||void 0===n)throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:$l(),bytes:$l(),value:$l(),asBlock:$l()})}links(){return ql(this.value,[])}tree(){return Zl(this.value,[])}get(e="/"){return function(e,t){let n=e;for(const[e,r]of t.entries()){if(n=n[r],null==n)throw new Error(`Object has no property at ${t.slice(0,e+1).map((e=>`[${JSON.stringify(e)}]`)).join("")}`);const s=an.k0.asCID(n);if(s)return{value:s,remaining:t.slice(e+1).join("/")}}return{value:n}}(this.value,e.split("/").filter(Boolean))}}function Ql({bytes:e,cid:t,value:n,codec:r}){const s=void 0!==n?n:r&&r.decode(e);if(void 0===s)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Jl({cid:t,bytes:e,value:s})}var Xl=n(44324);function eu(e){const t=rn({version:1,roots:e}),n=Xl.encode(t.length),r=new Uint8Array(n.length+t.length);return r.set(n,0),r.set(t,n.length),r}function tu(){}const nu={Null:e=>null===e,Int:e=>Number.isInteger(e),Float:e=>"number"==typeof e&&Number.isFinite(e),String:e=>"string"==typeof e,Bool:e=>"boolean"==typeof e,Bytes:e=>e instanceof Uint8Array,Link:e=>!nu.Null(e)&&"object"==typeof e&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!nu.Null(e)&&"object"==typeof e&&e.asCID!==e&&!nu.List(e)&&!nu.Bytes(e)},ru={Int:nu.Int,"CarHeader > version":e=>ru.Int(e),"CarHeader > roots (anon) > valueType (anon)":nu.Link,"CarHeader > roots (anon)":e=>nu.List(e)&&Array.prototype.every.call(e,ru["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>ru["CarHeader > roots (anon)"](e),CarHeader:e=>{const t=e&&Object.keys(e);return nu.Map(e)&&["version"].every((e=>t.includes(e)))&&Object.entries(e).every((([e,t])=>ru["CarHeader > "+e]&&ru["CarHeader > "+e](t)))}},su=ru.CarHeader;async function iu(e){const t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");const n=Xl.decode(t);return e.seek(Xl.decode.bytes),n}async function au(e,t){const n=await iu(e);if(0===n)throw new Error("Invalid CAR header (zero length)");const r=await e.exactly(n);e.seek(n);const s=sn(r);if(!su(s))throw new Error("Invalid CAR header format");if(1!==s.version&&2!==s.version||void 0!==t&&s.version!==t)throw new Error(`Invalid CAR version: ${s.version}${void 0!==t?` (expected ${t})`:""}`);const i=Array.isArray(s.roots);if(1===s.version&&!i||2===s.version&&i)throw new Error("Invalid CAR header format");if(1===s.version)return s;const a=await async function(e){const t=await e.exactly(40),n=new DataView(t.buffer,t.byteOffset,t.byteLength);let r=0;const s={version:2,characteristics:[n.getBigUint64(r,!0),n.getBigUint64(r+=8,!0)],dataOffset:Number(n.getBigUint64(r+=8,!0)),dataSize:Number(n.getBigUint64(r+=8,!0)),indexOffset:Number(n.getBigUint64(r+=8,!0))};return e.seek(40),s}(e);e.seek(a.dataOffset-e.pos);const o=await au(e,1);return Object.assign(o,a)}async function ou(e){const t=await e.exactly(2);if(18===t[0]&&32===t[1]){const t=await e.exactly(34);e.seek(34);const n=Kn.Jx(t);return te.k.create(0,112,n)}const n=await iu(e);if(1!==n)throw new Error(`Unexpected CID version (${n})`);const r=await iu(e),s=await async function(e){const t=await e.upTo(8);Xl.decode(t);const n=Xl.decode.bytes,r=Xl.decode(t.subarray(Xl.decode.bytes)),s=n+Xl.decode.bytes+r,i=await e.exactly(s);return e.seek(s),i}(e),i=Kn.Jx(s);return te.k.create(n,r,i)}async function cu(e){const t=e.pos;let n=await iu(e);if(0===n)throw new Error("Invalid CAR section (zero length)");return n+=e.pos-t,{cid:await ou(e),length:n,blockLength:n-Number(e.pos-t)}}async function du(e){const{cid:t,blockLength:n}=await cu(e),r=await e.exactly(n);return e.seek(n),{bytes:r,cid:t}}async function lu(e){const t=e.pos,{cid:n,length:r,blockLength:s}=await cu(e),i={cid:n,length:r,blockLength:s,offset:t,blockOffset:e.pos};return e.seek(i.blockLength),i}function uu(e){let t=0;return{upTo:async n=>e.subarray(t,t+Math.min(n,e.length-t)),async exactly(n){if(n>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+n)},seek(e){t+=e},get pos(){return t}}}class hu{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array&&e.cid))throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=te.k.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:t,bytes:e.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=function(e){if(void 0===e)return[];if(!Array.isArray(e)){const t=te.k.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const t=[];for(const n of e){const e=te.k.asCID(n);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(e)}return t}(e);const{encoder:t,iterator:n}=fu();return{writer:new hu(e,t),out:new pu(n)}}static createAppender(){const{encoder:e,iterator:t}=fu();return e.setRoots=()=>Promise.resolve(),{writer:new hu([],e),out:new pu(t)}}static async updateRootsInBytes(e,t){const n=uu(e);await au(n);const r=eu(t);if(Number(n.pos)!==r.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${r.length} bytes)`);return e.set(r,0),e}}class pu{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function fu(){const e=function(){const e=[];let t=null,n=tu,r=!1,s=null,i=tu;const a=()=>(t||(t=new Promise((e=>{n=()=>{t=null,n=tu,e()}}))),t),o={write(t){e.push(t);const n=a();return i(),n},async end(){r=!0;const e=a();i(),await e}},c={async next(){const t=e.shift();return t?(0===e.length&&n(),{done:!1,value:t}):r?(n(),{done:!0,value:void 0}):(s||(s=new Promise((e=>{i=()=>(s=null,i=tu,e(c.next()))}))),s)}};return{writer:o,iterator:c}}(),{writer:t,iterator:n}=e,r=function(e){return{async setRoots(t){const n=eu(t);await e.write(n)},async writeBlock(t){const{cid:n,bytes:r}=t;await e.write(new Uint8Array(Xl.encode(n.bytes.length+r.length))),await e.write(n.bytes),r.length&&await e.write(r)},async close(){await e.end()}}}(t);return{encoder:r,iterator:n}}var mu=n(94319);const _u=async({cid:e,load:t,seen:n})=>{n=n||new Set;const r=e.toString(Gn.base58btc);if(n.has(r))return;const s=await t(e);if(n.add(r),null!==s)for(const[,e]of s.links())await _u({cid:e,load:t,seen:n})},yu=(0,j.kg)("ipfs:components:dag:import"),gu=[$i.code,mu.code];var wu=n(69649);class bu{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class vu extends bu{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:n,iterator:r}=await Mu(e);return new vu(t,n,r)}static async fromIterable(e){const{version:t,roots:n,iterator:r}=await Eu(e);return new vu(t,n,r)}}class ku extends(null){[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;const e=this._iterable[Symbol.asyncIterator]();return{async next(){const t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){const{version:t,roots:n,iterator:r}=await Mu(e);return new ku(t,n,r)}static async fromIterable(e){const{version:t,roots:n,iterator:r}=await Eu(e);return new ku(t,n,r)}}async function Mu(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Lu(uu(e))}async function Eu(e){if(!e||"function"!=typeof e[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return Lu(function(e){const t=e[Symbol.asyncIterator]();return function(e){let t=0,n=0,r=0,s=new Uint8Array(0);const i=async t=>{n=s.length-r;const i=[s.subarray(r)];for(;n<t;){const t=await e();if(null==t)break;n<0?t.length>n&&i.push(t.subarray(-n)):i.push(t),n+=t.length}s=new Uint8Array(i.reduce(((e,t)=>e+t.length),0));let a=0;for(const e of i)s.set(e,a),a+=e.length;r=0};return{upTo:async e=>(s.length-r<e&&await i(e),s.subarray(r,r+Math.min(s.length-r,e))),async exactly(e){if(s.length-r<e&&await i(e),s.length-r<e)throw new Error("Unexpected end of data");return s.subarray(r,r+e)},seek(e){t+=e,r+=e},get pos(){return t}}}((async function(){const e=await t.next();return e.done?null:e.value}))}(e))}async function Lu(e){const t=function(e){const t=(async()=>{const t=await au(e);if(2===t.version){const n=e.pos-t.dataOffset;e=function(e,t){let n=0;return{async upTo(r){let s=await e.upTo(r);return s.length+n>t&&(s=s.subarray(0,t-n)),s},async exactly(r){const s=await e.exactly(r);if(s.length+n>t)throw new Error("Unexpected end of data");return s},seek(t){n+=t,e.seek(t)},get pos(){return e.pos}}}(e,t.dataSize-n)}return t})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await du(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await lu(e)}}}(e),{version:n,roots:r}=await t.header();return{version:n,roots:r,iterator:t.blocks()}}const Su=(0,j.kg)("ipfs:components:dag:import");async function Du(e,t,n){const r=await vu.fromIterable(n),s=await r.getRoots();return await(0,$s.Z)(e.blocks.putMany((0,bi.Z)(r,(({cid:e,bytes:t})=>(Su(`Import block ${e}`),{key:e,value:t}))),{signal:t.signal})),s}class Tu{constructor({repo:e,codecs:t,hashers:n,preload:r}){this.export=function({repo:e,preload:t,codecs:n}){return yr((async function*(r,s={}){!1!==s.preload&&t(r);const i=te.k.asCID(r);if(!i)throw new Error(`Unexpected error converting CID type: ${r}`);yu(`Exporting ${i} as car`);const{writer:a,out:o}=await hu.create([i]);let c=null;(async()=>{try{const t=function(e,t,n,r){return async s=>{const i=await r.getCodec(s.code);if(!i)throw new Error(`Can't decode links in block with codec 0x${s.code.toString(16)} to form complete DAG`);const a=await e.blocks.get(s,n);return yu(`Adding block ${s} to car`),await t.put({cid:s,bytes:a}),gu.includes(s.code)?null:Ql({bytes:a,cid:s,codec:i})}}(e,a,{signal:s.signal,timeout:s.timeout},n);await _u({cid:i,load:t})}catch(e){c=e}finally{a.close()}})();for await(const e of o){if(c)break;yield e}if(c)throw c}))}({repo:e,preload:r,codecs:t}),this.get=function({codecs:e,repo:t,preload:n}){return yr((async function(r,s={}){if(!1!==s.preload&&n(r),s.path){const n=s.localResolve?await(0,wu.Z)(Dr(r,s.path,e,t,s)):await xr(Dr(r,s.path,e,t,s));if(!n)throw B(new Error("Not found"),"ERR_NOT_FOUND");return n}const i=await e.getCodec(r.code),a=await t.blocks.get(r,s);return{value:i.decode(a),remainderPath:""}}))}({codecs:t,repo:e,preload:r}),this.import=function({repo:e}){return yr((async function*(t,n={}){const r=await e.gcLock.readLock();try{const s={signal:n.signal,timeout:n.timeout},i=Si(t),{value:a,done:o}=await i.peek();if(o)return;let c;a&&i.push(a),c=a instanceof Uint8Array?[i]:i;for await(const t of c){const r=await Du(e,s,t);if(!1!==n.pinRoots)for(const t of r){let n="";try{await e.blocks.has(t)?(Su(`Pinning root ${t}`),await e.pins.pinRecursively(t)):n="blockstore: block not found"}catch(e){n=e.message}yield{root:{cid:t,pinErrorMsg:n}}}}}finally{r()}}))}({repo:e}),this.resolve=function({repo:e,codecs:t,preload:n}){return yr((async function(r,s={}){const{cid:i}=wr(r);return!1!==s.preload&&n(i),Er(e,t,r,s)}))}({repo:e,codecs:t,preload:r}),this.put=function({repo:e,codecs:t,hashers:n,preload:r}){return yr((async function(s,i={}){const a=i.pin?await e.gcLock.readLock():null;try{const o=await t.getCodec(i.storeCodec||"dag-cbor");if(!o)throw new Error(`Unknown storeCodec ${i.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(i.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");const e=await t.getCodec(i.inputCodec);if(!e)throw new Error(`Unknown inputCodec ${i.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);s=e.decode(s)}const c=null!=i.version?i.version:1,d=await n.getHasher(i.hashAlg||"sha2-256");if(!d)throw new Error(`Unknown hash algorithm ${i.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);const l=o.encode(s),u=await d.digest(l),h=te.k.create(c,o.code,u);return await e.blocks.put(h,l,{signal:i.signal}),i.pin&&await e.pins.pinRecursively(h),!1!==i.preload&&r(h),h}finally{a&&a()}}))}({repo:e,codecs:t,hashers:n,preload:r})}}var Ru=n(95120);const Pu=(0,j.kg)("ipfs:preload"),Iu=new(Pr.Z.default?Pr.Z.default:Pr.Z)({concurrency:4});function Au(e,t={}){return Pu(e),Iu.add((async()=>{const n=(await Ir.post(e,{signal:t.signal})).body.getReader();try{for(;;){const{done:e}=await n.read();if(e)return}}finally{n.releaseLock()}}))}const Yu=(0,j.kg)("ipfs:preload");function Ou(e={}){if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){Yu("preload disabled");const e=()=>{};return Object.assign(e,{start:()=>{},stop:()=>{}})}let t=!0,n=[];const r=e.addresses.map((e=>(0,Ru.k)(e))),s=Rr(e.cache),i=async e=>{try{if(t)throw new Error(`preload ${e} but preloader is not started`);const i=e.toString();if(s.has(i))return;s.set(i,!0);const a=function(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got "+typeof e);for(let t=(e=[...e]).length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}(r);let o=!1;const c=Date.now();for(const e of a){if(t)throw new Error(`preload aborted for ${i}`);let r;try{r=new AbortController,n=n.concat(r),await Au(`${e}/api/v0/refs?r=true&arg=${encodeURIComponent(i)}`,{signal:r.signal}),o=!0}catch(e){"aborted"!==e.type&&Yu.error(e)}finally{n=n.filter((e=>e!==r))}if(o)break}Yu(`${o?"":"un"}successfully preloaded ${i} in ${Date.now()-c}ms`)}catch(e){Yu.error(e)}};return i.start=()=>{t=!1},i.stop=()=>{t=!0,Yu(`aborting ${n.length} pending preload request(s)`),n.forEach((e=>e.abort())),n=[]},i}const Nu=(0,j.kg)("ipfs:mfs-preload");var xu=n(63155);let Cu;function Hu(e=!1){if(Cu)return Cu;const t=(0,xu.Z)({singleProcess:e});return Cu={readLock:e=>async(...n)=>{const r=await t.readLock();try{return await e.apply(null,n)}finally{r()}},writeLock:e=>async(...n)=>{const r=await t.writeLock();try{return await e.apply(null,n)}finally{r()}}},Cu}const ju=(0,j.kg)("ipfs:mfs:utils:with-mfs-root");async function Bu(e,t){if(t&&t.signal&&t.signal.aborted)throw B(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});let n;await e.repo.datastore.open();try{const t=await e.repo.datastore.get(vr);n=te.k.decode(t)}catch(r){if("ERR_NOT_FOUND"!==r.code)throw r;ju("Creating new MFS root");const s=Se({Data:new ee({type:"directory"}).marshal(),Links:[]}),i=await ji.sha256.digest(s);if(n=te.k.createV0(i),await e.repo.blocks.put(n,s),t&&t.signal&&t.signal.aborted)throw B(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await e.repo.datastore.put(vr,n.bytes)}return ju(`Loaded MFS root /ipfs/${n}`),n}function zu(e=""){return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}const Uu="ipfs",Fu=async(e,t,n)=>{const r=await Bu(e,n);let s={entryType:"file"},i="";if(i=te.k.asCID(t)?`/ipfs/${t}`:t.toString(),i=i.trim(),i=i.replace(/(\/\/+)/g,"/"),i.endsWith("/")&&i.length>1&&(i=i.substring(0,i.length-1)),!i)throw B(new Error("paths must not be empty"),"ERR_NO_PATH");if("/"!==i.substring(0,1))throw B(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");"/"===i.substring(i.length-1)&&(i=i.substring(0,i.length-1));const a=zu(i);if(a[0]===Uu){let e;e=2===a.length?`/${a.join("/")}`:`/${a.slice(0,a.length-1).join("/")}`,s={type:"ipfs",depth:a.length-2,entryType:"file",mfsPath:`/${a.join("/")}`,mfsDirectory:e,parts:a,path:`/${a.join("/")}`,name:a[a.length-1]}}else{const e=`/${Uu}/${r}${a.length?"/"+a.join("/"):""}`,t=`/${Uu}/${r}/${a.slice(0,a.length-1).join("/")}`;s={type:"mfs",depth:a.length,entryType:"file",mfsDirectory:t,mfsPath:e,parts:a,path:`/${a.join("/")}`,name:a[a.length-1]}}const o="mfs"===s.type?s.mfsPath:s.path;try{const t=await Ga(o,e.repo.blocks,n);s.cid=t.cid,s.mfsPath=`/ipfs/${t.path}`,s.entryType=t.type,s.content=t.content,"file"!==s.entryType&&"directory"!==s.entryType||"file"!==t.type&&"directory"!==t.type||(s.unixfs=t.unixfs)}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}return s.exists=Boolean(s.cid),s},Vu=C.Z.bind({ignoreUndefined:!0}),Wu=(0,j.kg)("ipfs:mfs:stat"),$u={withLocal:!1};function Gu(e){return yr((async function(t,n={}){n=Vu($u,n),Wu(`Fetching stats for ${t}`);const{type:r,cid:s,mfsPath:i}=await Fu(e,t,n),a="ipfs"===r&&s?s:i;let o;try{o=await Ga(a,e.repo.blocks)}catch(e){if("ERR_NOT_FOUND"===e.code)throw B(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw e}if(!qu[o.type])throw new Error(`Cannot stat codec ${o.cid.code}`);return qu[o.type](o)}))}const qu={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:e=>{const t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:Se(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:e=>{const t={cid:e.cid,type:"directory",size:0,cumulativeSize:Se(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})},Ku=(0,j.kg)("ipfs:mfs:utils:to-trail");async function Zu(e,t){Ku(`Creating trail for path ${t}`);const n=[];for await(const r of $a(t,e.repo.blocks))n.push({name:r.name,cid:r.cid,size:r.size,type:r.type});return n}const Ju=async(e,t,n)=>{n.codec||(n.codec=r),n.hasher||(n.hasher=ji.sha256),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===r&&n.hasher!==ji.sha256&&(n.cidVersion=1);const s=await n.hasher.digest(e),i=te.k.create(n.cidVersion,n.codec.code,s);return n.onlyHash||await t.put(i,e,{signal:n.signal}),i},Qu=Ui.code;async function Xu(e){return(await Ui.encode(e)).subarray(0,8).reverse()}class eh{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}class th extends eh{constructor(e,t){super(e,t),this._bucket=ba({hashFn:Xu,bits:8})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){yield*nh(this._bucket,e,this,this.options)}}async function*nh(e,t,n,r){const s=e._children,i=[];let a=0;for(let e=0;e<s.length;e++){const n=s.get(e);if(!n)continue;const o=e.toString(16).toUpperCase().padStart(2,"0");if(n instanceof da){let e;for await(const s of await nh(n,t,null,r))e=s;if(!e)throw new Error("Could not flush sharded directory, no subshard found");i.push({Name:o,Tsize:e.size,Hash:e.cid}),a+=e.size}else if("function"==typeof n.value.flush){const e=n.value;let r;for await(const n of e.flush(t))r=n,yield r;const s=o+n.key;i.push({Name:s,Tsize:r.size,Hash:r.cid}),a+=r.size}else{const e=n.value;if(!e.cid)continue;const t=o+n.key,r=e.size;i.push({Name:t,Tsize:r,Hash:e.cid}),a+=r}}const o=Uint8Array.from(s.bitField().reverse()),c={Data:new ee({type:"hamt-sharded-directory",data:o,fanout:e.tableSize(),hashType:Qu,mtime:n&&n.mtime,mode:n&&n.mode}).marshal(),Links:i},d=Se(be(c)),l=await Ju(d,t,r),u=d.length+a;yield{cid:l,node:c,size:u}}const rh=(0,j.kg)("ipfs:mfs:core:utils:hamt-utils"),sh=async(e,t,n,r)=>{if(!r.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");const s=Uint8Array.from(n._children.bitField().reverse()),i=ee.unmarshal(r.parent.Data),a=new ee({type:"hamt-sharded-directory",data:s,fanout:n.tableSize(),hashType:Qu,mode:i.mode,mtime:i.mtime}),o=await e.hashers.getHasher(r.hashAlg),c={Data:a.marshal(),Links:t.sort(((e,t)=>(e.Name||"").localeCompare(t.Name||"")))},d=Se(c),l=await o.digest(d),u=te.k.create(r.cidVersion,Le,l);return r.flush&&await e.repo.blocks.put(u,d),{node:c,cid:u,size:t.reduce(((e,t)=>e+(t.Tsize||0)),d.length)}},ih=async(e,t,n,r,s)=>{const i=new da({hash:n._options.hash,bits:n._options.bits},r,s);return r._putObjectAt(s,i),await oh(e,t,i,n),i},ah=async e=>{const t=ba({hashFn:Xu,bits:8});return await Promise.all(e.map((async e=>{const n=e.Name||"";if(2===n.length){const e=parseInt(n,16),r=new da({hash:t._options.hash,bits:t._options.bits},t,e);return t._putObjectAt(e,r),Promise.resolve()}return t.put(n.substring(2),{size:e.Tsize,cid:e.Hash})}))),t},oh=async(e,t,n,r)=>{await Promise.all(t.map((async t=>{const s=t.Name||"";if(2===s.length){rh("Populating sub bucket",s);const i=parseInt(s,16),a=De(await e.repo.blocks.get(t.Hash)),o=new da({hash:r._options.hash,bits:r._options.bits},n,i);return n._putObjectAt(i,o),await oh(e,a.Links,o,r),Promise.resolve()}return r.put(s.substring(2),{size:t.Tsize,cid:t.Hash})})))},ch=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),dh=(0,j.kg)("ipfs:mfs:core:utils:add-link");async function lh(e,t){let n=t.parent;if(t.parentCid){const r=te.k.asCID(t.parentCid);if(null===r)throw B(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(r.code!==Le)throw B(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");dh(`Loading parent node ${r}`),n=De(await e.repo.blocks.get(r))}if(!n)throw B(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!t.cid)throw B(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw B(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!t.size&&0!==t.size)throw B(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!n.Data)throw B(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");const r=ee.unmarshal(n.Data);return"hamt-sharded-directory"===r.type?(dh("Adding link to sharded directory"),ph(e,{...t,parent:n})):n.Links.length>=t.shardSplitThreshold?(dh("Converting directory to sharded directory"),uh(e,{...t,parent:n,mtime:r.mtime,mode:r.mode})):(dh(`Adding ${t.name} (${t.cid}) to regular directory`),hh(e,{...t,parent:n}))}const uh=async(e,t)=>{const n=await(async(e,t,n={})=>{const r=new th({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:n.mtime,mode:n.mode},n);for(let e=0;e<t.length;e++)await r._bucket.put(t[e].name,{size:t[e].size,cid:t[e].cid});const s=await xr(r.flush(e.repo.blocks));if(!s)throw new Error("Flushing shard yielded no result");return s})(e,t.parent.Links.map((e=>({name:e.Name||"",size:e.Tsize||0,cid:e.Hash}))).concat({name:t.name,size:t.size,cid:t.cid}),t);return dh(`Converted directory to sharded directory ${n.cid}`),n},hh=async(e,t)=>{const n=t.parent.Links.filter((e=>e.Name!==t.name));if(n.push({Name:t.name,Tsize:t.size,Hash:t.cid}),!t.parent.Data)throw B(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");const r=ee.unmarshal(t.parent.Data);let s;if(r.mtime){const e=Date.now(),t=Math.floor(e/1e3);r.mtime={secs:t,nsecs:1e3*(e-1e3*t)},s=r.marshal()}else s=t.parent.Data;t.parent=be({Data:s,Links:n});const i=await e.hashers.getHasher(t.hashAlg),a=Se(t.parent),o=await i.digest(a),c=te.k.create(t.cidVersion,Le,o);return t.flush&&await e.repo.blocks.put(c,a),{node:t.parent,cid:c,size:a.length}},ph=async(e,t)=>{const{shard:n,path:r}=await fh(e,t),s=await xr(n.flush(e.repo.blocks));if(!s)throw new Error("No result from flushing shard");const i=De(await e.repo.blocks.get(s.cid)),a=t.parent.Links.filter((e=>(e.Name||"").substring(0,2)!==r[0].prefix)),o=i.Links.find((e=>(e.Name||"").substring(0,2)===r[0].prefix));if(!o)throw new Error(`No link found with prefix ${r[0].prefix}`);return a.push(o),sh(e,a,r[0].bucket,t)},fh=async(e,t)=>{const n={name:t.name,cid:t.cid,size:t.size};if(!t.parent.Data)throw B(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");const r=await ah(t.parent.Links),s=ee.unmarshal(t.parent.Data),i=new th({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:s.mode},t);i._bucket=r,s.mtime&&(i.mtime={secs:Math.round(Date.now()/1e3)});const a=await r._findNewBucketAndPos(n.name),o=mh(a);o[0].node=t.parent;let c=0;for(;c<o.length;){const t=o[c];c++;const s=t.node;if(!s)throw new Error("Segment had no node");const i=s.Links.find((e=>(e.Name||"").substring(0,2)===t.prefix));if(!i){dh(`Link ${t.prefix}${n.name} will be added`),c=o.length;break}if(i.Name===`${t.prefix}${n.name}`){dh(`Link ${t.prefix}${n.name} will be replaced`),c=o.length;break}if((i.Name||"").length>2){dh(`Link ${i.Name} ${i.Hash} will be replaced with a subshard`),c=o.length;break}dh(`Found subshard ${t.prefix}`);const a=De(await e.repo.blocks.get(i.Hash));if(!o[c]){dh(`Loaded new subshard ${t.prefix}`),await ih(e,a.Links,r,t.bucket,parseInt(t.prefix,16));const s=await r._findNewBucketAndPos(n.name);o.push({bucket:s.bucket,prefix:ch(s.pos),node:a});break}const d=o[c];await oh(e,a.Links,d.bucket,r),d.node=a}return await i._bucket.put(n.name,{size:n.size,cid:n.cid}),{shard:i,path:o}},mh=e=>{const t=[{bucket:e.bucket,prefix:ch(e.pos)}];let n=e.bucket._parent,r=e.bucket._posAtParent;for(;n;)t.push({bucket:n,prefix:ch(r)}),r=n._posAtParent,n=n._parent;return t.reverse(),t},_h=(0,j.kg)("ipfs:mfs:utils:update-tree"),yh={shardSplitThreshold:1e3};async function gh(e,t,n){n=Object.assign({},yh,n),_h("Trail",t),t=t.slice().reverse();let r,s=0;for await(const i of e.repo.blocks.getMany(t.map((e=>e.cid)))){const a=De(i),o=t[s].cid,c=t[s].name;if(s++,!r){r={cid:o,name:c,size:i.length};continue}const d=await lh(e,{parent:a,name:r.name,cid:r.cid,size:r.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});r={cid:d.cid,name:c,size:d.size}}const{cid:i}=r;return _h(`Final CID ${i}`),i}const wh=(0,j.kg)("ipfs:mfs:utils:update-mfs-root");async function bh(e,t,n){if(n&&n.signal&&n.signal.aborted)throw B(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return wh(`New MFS root will be ${t}`),await e.repo.datastore.put(vr,t.bytes),t}const vh=C.Z.bind({ignoreUndefined:!0}),kh=(0,j.kg)("ipfs:mfs:mkdir"),Mh={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function Eh(e){return yr((async function(t,n={}){const r=vh(Mh,n);if(!t)throw new Error("no path given to Mkdir");if("/"===(t=t.trim())){if(r.parents)return;throw B(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if("/"!==t.substring(0,1))throw B(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");kh(`Creating ${t}`);const s=zu(t);if("ipfs"===s[0])throw B(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const i=await Bu(e,r);let a;const o=[],c=await async function(e,t,n){const r=new ee({type:"directory",mode:n.mode,mtime:n.mtime}),s=await e.hashers.getHasher(n.hashAlg),i={Data:r.marshal(),Links:[]},a=Se(i),o=await s.digest(a),c=te.k.create(n.cidVersion,Le,o);return n.flush&&await e.repo.blocks.put(c,a),{cid:c,node:i}}(e,0,r);for(let n=0;n<=s.length;n++){const d=s.slice(0,n),l=`/ipfs/${i}/${d.join("/")}`;try{if(a=await Ga(l,e.repo.blocks),"file"!==a.type&&"directory"!==a.type)throw B(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(n===s.length){if(r.parents)return;throw B(new Error("file already exists"),"ERR_ALREADY_EXISTS")}o.push({name:a.name,cid:a.cid})}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t;if(n<s.length&&!r.parents)throw B(new Error(`Intermediate directory path ${l} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await Lh(e,d[d.length-1],c,o[o.length-1],o,r)}}const d=await gh(e,o,r);await bh(e,d,r)}))}const Lh=async(e,t,n,r,s,i)=>{kh(`Adding empty dir called ${t} to ${r.cid}`);const a=await lh(e,{parent:r.node,parentCid:r.cid,size:0,cid:n.cid,name:t,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});s[s.length-1].cid=a.cid,s.push({name:t,cid:n.cid})},Sh=C.Z.bind({ignoreUndefined:!0}),Dh=(0,j.kg)("ipfs:mfs:cp"),Th={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function Rh(e){return yr((async function(t,n,r={}){const s=Sh(Th,r);Array.isArray(t)||(t=[t]);const i=await Promise.all(t.map((t=>Fu(e,t,s))));let a=await Fu(e,n,s);if(!i.length||!a)throw B(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");const o=i.find((e=>!e.exists));if(o)throw B(new Error(`${o.path} does not exist`),"ERR_INVALID_PARAMS");const c=Ph(a);if(a.exists){if(Dh("Destination exists"),1===i.length&&!c)throw B(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(Dh("Destination does not exist"),i.length>1){if(!s.parents)throw B(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Eh(e)(a.path,s),a=await Fu(e,a.path,s)}else if(a.parts.length>1){const t=`/${a.parts.slice(0,-1).join("/")}`;try{await Gu(e)(t,s)}catch(n){if("ERR_NOT_FOUND"!==n.code)throw n;if(!s.parents)throw B(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Eh(e)(t,s),a=await Fu(e,a.path,s)}}const d=Ph(a)?a.mfsPath:a.mfsDirectory,l=await Zu(e,d);if(1===i.length){const t=i.pop();if(!t)throw B(new Error("could not find source"),"ERR_INVALID_PARAMS");const n=c?t.name:a.name;return Dh(`Only one source, copying to destination ${c?"directory":"file"} ${n}`),Ih(e,t,n,l,s)}return Dh("Multiple sources, wrapping in a directory"),Ah(e,i,a,l,s)}))}const Ph=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),Ih=async(e,t,n,r,s)=>{let i=r.pop();if(!i)throw B(new Error("destination had no parent"),"ERR_INVALID_PARAMS");i=await Yh(e,t,n,i,s),r.push(i);const a=await gh(e,r,s);await bh(e,a,s)},Ah=async(e,t,n,r,s)=>{for(let r=0;r<t.length;r++){const i=t[r];n=await Yh(e,i,i.name,n,s)}r[r.length-1]=n;const i=await gh(e,r,s);await bh(e,i,s)},Yh=async(e,t,n,r,s)=>{const i=await e.repo.blocks.get(t.cid),{node:a,cid:o,size:c}=await lh(e,{parentCid:r.cid,size:i.length,cid:t.cid,name:n,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});return r.node=a,r.cid=o,r.size=c,r},Oh=(0,j.kg)("ipfs:mfs:core:utils:remove-link"),Nh=async(e,t,n,r)=>{const s=t.pop();if(!s)throw B(new Error("Could not find parent"),"EINVALIDPARENT");const{bucket:i,prefix:a,node:o}=s;if(!o)throw B(new Error("Could not find parent"),"EINVALIDPARENT");const c=o.Links.find((e=>(e.Name||"").substring(0,2)===a));if(!c)throw B(new Error(`No link found with prefix ${a} for file ${n}`),"ERR_NOT_FOUND");if(c.Name===`${a}${n}`){Oh(`Removing existing link ${c.Name}`);const t=o.Links.filter((e=>e.Name!==c.Name));return await i.del(n),sh(e,t,i,r)}Oh(`Descending into sub-shard ${c.Name} for ${a}${n}`);const d=await Nh(e,t,n,r);let l=d.cid,u=d.size,h=a;if(1===d.node.Links.length){Oh(`Removing subshard for ${a}`);const e=d.node.Links[0];h=`${a}${(e.Name||"").substring(2)}`,l=e.Hash,u=e.Tsize||0}return Oh(`Updating shard ${a} with name ${h}`),xh(e,i,o,a,h,u,l,r)},xh=(e,t,n,r,s,i,a,o)=>{const c=n.Links.filter((e=>e.Name!==r));return c.push({Name:s,Tsize:i,Hash:a}),sh(e,c,t,o)},Ch=C.Z.bind({ignoreUndefined:!0}),Hh={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function jh(e){return yr((async function(t,n={}){const r=Ch(Hh,n);Array.isArray(t)||(t=[t]);const s=await Promise.all(t.map((t=>Fu(e,t,r))));if(!s.length)throw B(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");s.forEach((e=>{if("/"===e.path)throw B(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const t of s)await Bh(e,t.path,r)}))}const Bh=async(e,t,n)=>{const r=await Fu(e,t,n),s=await Zu(e,r.mfsPath),i=s[s.length-1];s.pop();const a=s[s.length-1];if(!a)throw B(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===i.type&&!n.recursive)throw B(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:o}=await async function(e,t){let n=t.parent;if(t.parentCid){const r=te.k.asCID(t.parentCid);if(null===r)throw B(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");Oh(`Loading parent node ${r}`),n=De(await e.repo.blocks.get(r))}if(!n)throw B(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!t.name)throw B(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!n.Data)throw B(new Error("Parent node had no data"),"ERR_INVALID_NODE");return"hamt-sharded-directory"===ee.unmarshal(n.Data).type?(Oh(`Removing ${t.name} from sharded directory`),(async(e,t)=>{const{rootBucket:n,path:r}=await(async(e,t,n)=>{const r=await ah(n.Links),s=await r._findNewBucketAndPos(t),i=[{bucket:s.bucket,prefix:ch(s.pos)}];let a=s.bucket;for(;a!==r;)i.push({bucket:a,prefix:ch(a._posAtParent)}),a=a._parent;i.reverse(),i[0].node=n;for(let n=0;n<i.length;n++){const s=i[n];if(!s.node)throw new Error("Could not generate HAMT path");const a=s.node.Links.filter((e=>(e.Name||"").substring(0,2)===s.prefix)).pop();if(!a){rh(`Link ${s.prefix}${t} will be added`);continue}if(a.Name===`${s.prefix}${t}`){rh(`Link ${s.prefix}${t} will be replaced`);continue}rh(`Found subshard ${s.prefix}`);const o=De(await e.repo.blocks.get(a.Hash));if(!i[n+1]){rh(`Loaded new subshard ${s.prefix}`),await ih(e,o.Links,r,s.bucket,parseInt(s.prefix,16));const n=await r._findNewBucketAndPos(t);i.push({bucket:n.bucket,prefix:ch(n.pos),node:o});continue}const c=i[n+1];await oh(e,o.Links,c.bucket,r),c.node=o}return await r.put(t,!0),i.reverse(),{rootBucket:r,path:i}})(e,t.name,t.parent);await n.del(t.name);const{node:s}=await Nh(e,r,t.name,t);return sh(e,s.Links,n,t)})(e,{...t,parent:n})):(Oh(`Removing link ${t.name} regular directory`),(async(e,t)=>{t.parent.Links=t.parent.Links.filter((e=>e.Name!==t.name));const n=await Se(t.parent),r=await e.hashers.getHasher(t.hashAlg),s=await r.digest(n),i=te.k.create(t.cidVersion,Le,s);return await e.repo.blocks.put(i,n),Oh(`Updated regular directory ${i}`),{node:t.parent,cid:i}})(e,{...t,parent:n}))}(e,{parentCid:a.cid,name:i.name,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});a.cid=o;const c=await gh(e,s,n);await bh(e,c,n)},zh=C.Z.bind({ignoreUndefined:!0}),Uh=(0,j.kg)("ipfs:mfs:touch"),Fh={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function Vh(e,t){if(e instanceof String||"string"==typeof e){const n=`${e}`;e=n.match(/^\d+$/g)?parseInt(n,8):0+n.split(",").reduce(((e,n)=>function(e,t,n){t||(t=0);const r=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!r)throw new Error(`Invalid file mode: ${e}`);let[,s,i,a]=r;"a"!==s&&s||(s="ugo");let o=function(e,t,n){let r=0;return(e.includes("x")||e.includes("X")&&(n||1&t||8&t||64&t))&&(r+=1),e.includes("w")&&(r+=2),e.includes("r")&&(r+=4),r}(a,t,n);return o=function(e,t){let n=0;return e.includes("u")&&(n+=t<<6),e.includes("g")&&(n+=t<<3),e.includes("o")&&(n+=t),n}(s,o),o=function(e,t,n){return t.includes("t")&&(n+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(n+=parseInt("4000",8)),e.includes("g")&&(n+=parseInt("2000",8))),n}(s,a,o),"="===i?(s.includes("u")&&(t&=parseInt("7077",8),t|=o),s.includes("g")&&(t&=parseInt("7707",8),t|=o),s.includes("o")&&(t&=parseInt("7770",8),t|=o),t):"+"===i?o|t:"-"===i?o^t:t}(n,e,t.isDirectory())),t.mode||0)}return e}const Wh=C.Z.bind({ignoreUndefined:!0}),$h={},Gh=C.Z.bind({ignoreUndefined:!0}),qh={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3},Kh=C.Z.bind({ignoreUndefined:!0}),Zh=(0,j.kg)("ipfs:mfs:touch"),Jh={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"},Qh=C.Z.bind({ignoreUndefined:!0}),Xh={offset:0,length:1/0},ep=(0,j.kg)("ipfs:mfs:utils:to-async-iterator"),tp=C.Z.bind({ignoreUndefined:!0}),np=(0,j.kg)("ipfs:mfs:write"),rp={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(e,t)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3},sp=async(e,t,n,r)=>{n.exists?np(`Overwriting file ${n.cid} offset ${r.offset} length ${r.length}`):np(`Writing file offset ${r.offset} length ${r.length}`);const s=[];if(r.offset>0)if(n.unixfs){if(np(`Writing first ${r.offset} bytes of original file`),s.push((()=>n.content({offset:0,length:r.offset}))),n.unixfs.fileSize()<r.offset){const e=r.offset-n.unixfs.fileSize();np(`Writing zeros for extra ${e} bytes`),s.push(ap(e))}}else np(`Writing zeros for first ${r.offset} bytes`),s.push(ap(r.offset));s.push(ip(t,r.length));const i=cp(op(s),(e=>{if(n.unixfs&&!r.truncate){const t=n.unixfs.fileSize();if(t>e)return np(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),n.content({offset:e});np("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let a,o;void 0!==r.mode&&null!==r.mode?a=Q(r.mode):n&&n.unixfs&&(a=n.unixfs.mode),null!=r.mtime?o=X(r.mtime):n&&n.unixfs&&(o=n.unixfs.mtime);const c=await e.hashers.getHasher(r.hashAlg),d=await xr(Da([{content:i,mode:a,mtime:o}],e.repo.blocks,{progress:r.progress,hasher:c,cidVersion:r.cidVersion,strategy:r.strategy,rawLeaves:r.rawLeaves,reduceSingleLeafToSelf:r.reduceSingleLeafToSelf,leafType:r.leafType}));if(!d)throw B(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return np(`Wrote ${d.cid}`),{cid:d.cid,size:d.size}},ip=(e,t)=>async function*(){let n=0;for await(const r of e){if(n+=r.length,n>t)return void(yield r.subarray(0,t-n));yield r}},ap=(e,t=262144)=>{const n=new Uint8Array(t);return ip(async function*(){for(;;)yield n}(),e)},op=async function*(e){for(let t=0;t<e.length;t++)yield*e[t]()},cp=async function*(e,t){let n=0;for await(const t of e)n+=t.length,yield t;for await(const e of t(n))n+=e.length,yield e},dp=e=>{const t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t},lp={stat:Gu},up={chmod:function(e){return yr((async function(t,n,r={}){const s=zh(Fh,r);Uh(`Fetching stats for ${t}`);const{cid:i,mfsDirectory:a,name:o}=await Fu(e,t,s);if(i.code!==Le)throw B(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(s.recursive){const r=await(0,ki.zG)((async function*(){for await(const r of qa(i,e.repo.blocks)){if("file"!==r.type&&"directory"!==r.type)throw B(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");r.unixfs.mode=Vh(n,r.unixfs);const e=be({Data:r.unixfs.marshal(),Links:r.node.Links});yield{path:r.path,content:e}}}),(t=>Da(t,e.repo.blocks,{...s,pin:!1,dagBuilder:async function*(e,t,n){for await(const r of e)yield async function(){const e=r.content,s=Se(e),i=await Ju(s,t,n);if(!e.Data)throw B(new Error(`${i} had no data`),"ERR_INVALID_NODE");const a=ee.unmarshal(e.Data);return{cid:i,size:s.length,path:r.path,unixfs:a}}}})),(e=>xr(e)));if(!r)throw B(new Error(`Could not chmod ${t}`),"ERR_COULD_NOT_CHMOD");return await jh(e)(t,s),void await Rh(e)(`/ipfs/${r.cid}`,t,s)}const c=De(await e.repo.blocks.get(i));if(!c.Data)throw B(new Error(`${i} had no data`),"ERR_INVALID_NODE");const d=ee.unmarshal(c.Data);d.mode=Vh(n,d);const l=Se({Data:d.marshal(),Links:c.Links}),u=s.hashAlg||Fh.hashAlg,h=await e.hashers.getHasher(u),p=await h.digest(l),f=te.k.create(s.cidVersion,Le,p);s.flush&&await e.repo.blocks.put(f,l);const m=await Zu(e,a),_=m[m.length-1],y=te.k.decode(_.cid.bytes),g=De(await e.repo.blocks.get(y)),w=await lh(e,{parent:g,name:o,cid:f,size:l.length,flush:s.flush,hashAlg:u,cidVersion:i.version,shardSplitThreshold:1/0});_.cid=w.cid;const b=await gh(e,m,s);await bh(e,b,s)}))},cp:Rh,flush:function(e){return yr((async function(t,n={}){n=Wh($h,n);const{cid:r}=await Gu(e)(t,n);return r}))},mkdir:Eh,mv:function(e){return yr((async function(t,n,r={}){const s=Gh(qh,r);await Rh(e)(t,n,s),await jh(e)(t,{...s,recursive:!0})}))},rm:jh,touch:function(e){return yr((async function(t,n={}){const r=Kh(Jh,n);r.mtime=r.mtime||new Date,Zh(`Touching ${t} mtime: ${r.mtime}`);const{cid:s,mfsDirectory:i,name:a,exists:o}=await Fu(e,t,r),c=n.hashAlg||Jh.hashAlg,d=await e.hashers.getHasher(c);let l,u,h=r.cidVersion;if(o){if(s.code!==Le)throw B(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");h=s.version;const n=De(await e.repo.blocks.get(s));if(!n.Data)throw B(new Error(`${t} had no data`),"ERR_INVALID_NODE");const i=ee.unmarshal(n.Data);i.mtime=r.mtime,l=Se({Data:i.marshal(),Links:n.Links});const a=await d.digest(l);u=te.k.create(r.cidVersion,Le,a),r.flush&&await e.repo.blocks.put(u,l)}else{l=Se({Data:new ee({type:"file",mtime:r.mtime}).marshal(),Links:[]});const t=await d.digest(l);u=te.k.create(r.cidVersion,Le,t),r.flush&&await e.repo.blocks.put(u,l)}const p=await Zu(e,i),f=p[p.length-1],m=f.cid,_=De(await e.repo.blocks.get(m)),y=await lh(e,{parent:_,name:a,cid:u,size:l.length,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:h});f.cid=y.cid;const g=await gh(e,p,r);await bh(e,g,r)}))}},hp={write:function(e){return yr((async function(t,n,r={}){const s=tp(rp,r);let i,a,o;if(np("Reading source, destination and parent"),await Hu().readLock((async()=>{i=await function(e){if(!e)throw B(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"==typeof e||e instanceof String)&&(ep("Content was a string"),e=(0,Wn.m)(e.toString())),e.length)return ep("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield e}};if(e[Symbol.asyncIterator])return ep("Content was an async iterator"),e;if(e[Symbol.iterator])return ep("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){ep("Content was an HTML5 Blob");let t=0;const n={next:()=>t>e.size?{done:!0}:new Promise(((n,r)=>{const s=e.slice(t,kr);t+=kr;const i=new global.FileReader,a=e=>{if(i.removeEventListener("loadend",a,!1),e.error)return r(e.error);n({done:!1,value:new Uint8Array(i.result)})};i.addEventListener("loadend",a),i.readAsArrayBuffer(s)}))};return{[Symbol.asyncIterator]:()=>n}}throw B(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}(n),a=await Fu(e,t,s),o=await Fu(e,a.mfsDirectory,s)}))(),np("Read source, destination and parent"),!s.parents&&!o.exists)throw B(new Error("directory does not exist"),"ERR_NO_EXIST");if(null==i)throw B(new Error("could not create source"),"ERR_NO_SOURCE");if(null==a)throw B(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!s.create&&!a.exists)throw B(new Error("file does not exist"),"ERR_NO_EXIST");if("file"!==a.entryType)throw B(new Error("not a file"),"ERR_NOT_A_FILE");return(async(e,t,n,r,s)=>{const i=await sp(e,n,r,s);await Hu().writeLock((async()=>{const n=zu(t),r=n.pop();if(null==r)throw B(new Error("source does not exist"),"ERR_NO_EXIST");let a=!1;try{await Gu(e)(`/${n.join("/")}`,s),a=!0}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}a||await Eh(e)(`/${n.join("/")}`,s);const o=await Fu(e,t,s),c=await Zu(e,o.mfsDirectory),d=c[c.length-1];if(!d)throw B(new Error("directory does not exist"),"ERR_NO_EXIST");if(!d.type||!d.type.includes("directory"))throw B(new Error(`cannot write to ${d.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const l=De(await e.repo.blocks.get(d.cid)),u=await lh(e,{parent:l,name:r,cid:i.cid,size:i.size,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold,hashAlg:s.hashAlg,cidVersion:s.cidVersion});d.cid=u.cid;const h=await gh(e,c,s);await bh(e,h,s)}))()})(e,t,i,a,s)}))},read:function(e){return yr((function(t,n={}){return n=Qh(Xh,n),{[Symbol.asyncIterator]:async function*(){const r=await Fu(e,t,n),s=await Ga(r.mfsPath,e.repo.blocks);if("file"!==s.type)throw B(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!s.content)throw B(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of s.content({offset:n.offset,length:n.length}))yield e}}}))},ls:function(e){return yr((async function*(t,n={}){const r=await Fu(e,t,n),s=await Ga(r.mfsPath,e.repo.blocks);"directory"!==s.type?yield dp(s):yield*(0,bi.Z)(s.content(n),dp)}))}},pp=({options:e,mfs:t,operations:n,lock:r})=>{Object.keys(n).forEach((s=>{t[s]=r(n[s](e))}))},fp={repoOwner:!0,repo:null};const mp="Ed25519";class _p{constructor({keychain:e}){this.gen=function({keychain:e}){return yr(((t,n={type:mp,size:2048})=>e.createKey(t,n.type||mp,n.size||2048)))}({keychain:e}),this.list=function({keychain:e}){return yr((()=>e.listKeys()))}({keychain:e}),this.rm=function({keychain:e}){return yr((t=>e.removeKey(t)))}({keychain:e}),this.rename=function({keychain:e}){return yr((async(t,n)=>{const r=await e.renameKey(t,n);return{was:t,now:r.name,id:r.id,overwrite:!1}}))}({keychain:e}),this.export=function({keychain:e}){return yr(((t,n)=>e.exportKey(t,n)))}({keychain:e}),this.import=function({keychain:e}){return yr(((t,n,r)=>e.importKey(t,n,r)))}({keychain:e}),this.info=function({keychain:e}){return yr((t=>e.findKeyByName(t)))}({keychain:e})}}function yp({repo:e,preload:t}){return yr((async function(n,r={}){return!1!==r.preload&&t(n),De(await e.blocks.get(n,r))}))}function gp(e,t=[]){for(const n in e){const r=e[n];if("/"===n&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:te.k.parse(r)});continue}catch(e){}const s=te.k.asCID(r);s?t.push({Name:"",Tsize:0,Hash:s}):(Array.isArray(r)&&gp(r,t),r&&"object"==typeof r&&gp(r,t))}return t}function wp({repo:e,codecs:t}){return yr((async function(n,r={}){const s=await t.getCodec(n.code),i=await e.blocks.get(n,r),a=s.decode(i);switch(n.code){case $i.code:return[];case Le:return a.Links;case nn:case _n:return gp(a);default:throw new Error(`Cannot resolve links from codec ${n.code}`)}}))}function bp({repo:e,preload:t}){return yr((async function(n,r={}){const s=await e.gcLock.readLock();try{const i=Se(n),a=await ji.sha256.digest(i),o=te.k.createV1(Le,a);return await e.blocks.put(o,i,{signal:r.signal}),!1!==r.preload&&t(o),r.pin&&await e.pins.pinRecursively(o,{signal:r.signal}),o}finally{s()}}))}class vp{constructor({repo:e,preload:t}){this.addLink=function({repo:e,preload:t}){const n=yp({repo:e,preload:t}),r=bp({repo:e,preload:t});return yr((async function(e,t,s={}){const i=await n(e,s);return r({...i,Links:i.Links.concat([t])},s)}))}({repo:e,preload:t}),this.appendData=function({repo:e,preload:t}){const n=yp({repo:e,preload:t}),r=bp({repo:e,preload:t});return yr((async function(e,t,s={}){const i=await n(e,s),a=(0,Qr.z)([i.Data||[],t]);return r({...i,Data:a},s)}))}({repo:e,preload:t}),this.rmLink=function({repo:e,preload:t}){const n=yp({repo:e,preload:t}),r=bp({repo:e,preload:t});return yr((async function(e,t,s={}){const i=await n(e,s),a=("string"==typeof t?t:t.Name)||"";return i.Links=i.Links.filter((e=>e.Name!==a)),r(i,s)}))}({repo:e,preload:t}),this.setData=function({repo:e,preload:t}){const n=yp({repo:e,preload:t}),r=bp({repo:e,preload:t});return yr((async function(e,t,s={}){const i=await n(e,s);return r({...i,Data:t},s)}))}({repo:e,preload:t})}}class kp{constructor({repo:e,codecs:t,preload:n}){this.data=function({repo:e,preload:t}){const n=yp({repo:e,preload:t});return yr((async function(e,t={}){return(await n(e,t)).Data||new Uint8Array(0)}))}({repo:e,preload:n}),this.get=yp({repo:e,preload:n}),this.links=wp({repo:e,codecs:t}),this.new=function({repo:e,preload:t}){return yr((async function(n={}){let r;if(n.template){if("unixfs-dir"!==n.template)throw new Error("unknown template");r=new ee({type:"directory"}).marshal()}const s=Se({Data:r,Links:[]}),i=await ji.sha256.digest(s),a=te.k.createV0(i);return await e.blocks.put(a,s,{signal:n.signal}),!1!==n.preload&&t(a),a}))}({repo:e,preload:n}),this.put=bp({repo:e,preload:n}),this.stat=function({repo:e,preload:t}){const n=yp({repo:e,preload:t});return yr((async function(e,t={}){const r=await n(e,t),s=Se(r).length,i=r.Links.reduce(((e,t)=>e+(t.Tsize||0)),0);return{Hash:e,NumLinks:r.Links.length,BlockSize:s,LinksSize:s-(r.Data||[]).length,DataSize:(r.Data||[]).length,CumulativeSize:s+i}}))}({repo:e,preload:n}),this.patch=new vp({repo:e,preload:n})}}const Mp=(0,j.kg)("ipfs:repo:gc");function Ep({repo:e}){return yr((async function(t={}){const n=await e.stat();return{numObjects:BigInt(n.numObjects.toString()),repoSize:BigInt(n.repoSize.toString()),repoPath:n.repoPath,version:`${n.version}`,storageMax:BigInt(n.storageMax.toString())}}))}class Lp{constructor({repo:e,hashers:t}){this.gc=function({repo:e,hashers:t}){return yr((async function*(n={}){const r=Date.now();let s;try{s=await Bu({repo:e,hashers:t},n),await e.pins.pinRecursively(s),yield*e.gc()}finally{s&&await e.pins.unpin(s)}Mp(`Complete (${Date.now()-r}ms)`)}))}({repo:e,hashers:t}),this.stat=Ep({repo:e}),this.version=function({repo:e}){return yr((async function(t={}){try{await e._checkInitialized(t)}catch(e){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((t=>t.test(e.message))))return 12;throw e}return e.version.get()}))}({repo:e}),this.setApiAddr=t=>e.apiAddr.set(t)}}function Sp(e,t){let n;if(n=e.metrics?t.peer?e.metrics.forPeer(t.peer):t.proto?e.metrics.forProtocol(t.proto):e.metrics.getGlobal():void 0,!n)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};const r=n.getMovingAverages(),s=n.getSnapshot();return{totalIn:s.dataReceived,totalOut:s.dataSent,rateIn:r.dataReceived[6e4].movingAverage/60,rateOut:r.dataSent[6e4].movingAverage/60}}class Dp{constructor({repo:e,network:t}){this.repo=Ep({repo:e}),this.bw=function({network:e}){return yr((async function*(t={}){const{libp2p:n}=await e.use(t);if(!t.poll)return void(yield Sp(n,t));const r=t.interval||1e3;let s,i=-1;try{if(i="string"==typeof r?mr(r)||-1:r,!i||i<0)throw new Error("invalid duration")}catch(e){throw B(e,"ERR_INVALID_POLL_INTERVAL")}try{for(;;)yield Sp(n,t),await new Promise((e=>{s=setTimeout(e,i)}))}finally{clearTimeout(s)}}))}({network:t}),this.bitswap=pi({network:t})}}var Tp=function(e,t,n){if(!e)return n;var r,s;if(Array.isArray(t)&&(r=t.slice(0)),"string"==typeof t&&(r=t.split(".")),"symbol"==typeof t&&(r=[t]),!Array.isArray(r))throw new Error("props arg must be an array, a string or a symbol");for(;r.length;){if(s=r.shift(),!e)return n;if(void 0===(e=e[s]))return n}return e},Rp=n(2402);async function Pp(e){let t=0;for await(const n of e)t++;return t}const Ip=Rp("ipfs:repo:migrator:migration-8");function Ap(e){return e.child?Ap(e.child):e}function Yp(e){try{const t=qn.base32.decode(`b${e.toString().toLowerCase().slice(1)}`),n=te.k.decode(t).multihash.bytes,r=qn.base32.encode(n).slice(1).toUpperCase();return new lr.s(`/${r}`,!1)}catch(t){return e}}function Op(e){try{const t=qn.base32.decode(`b${e.toString().toLowerCase().slice(1)}`),n=Kn.Jx(t),r=qn.base32.encode(te.k.createV1($i.code,n).bytes).slice(1);return new lr.s(`/${r.toUpperCase()}`,!1)}catch{return e}}async function Np(e,t,n){const r=e.blocks;await r.open();const s=Ap(r),i=await Pp(s.queryKeys({filters:[e=>n(e).toString()!==e.toString()]}));try{let e=0;for await(const r of s.query({})){const a=n(r.key);a.toString()!==r.key.toString()&&(e+=1,Ip(`Migrating Block from ${r.key} to ${a}`,await s.has(r.key)),await s.delete(r.key),await s.put(a,r.value),t(e/i*100,`Migrated Block from ${r.key} to ${a}`))}}finally{await r.close()}}const xp={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,t=(()=>{}))=>Np(e,t,Yp),revert:(e,t=(()=>{}))=>Np(e,t,Op)},Cp=z.Reader,Hp=z.Writer,jp=(z.util,z.roots.default||(z.roots.default={})),Bp=jp.ipfs=(()=>{const e={};return e.pin=function(){const e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=Hp.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof Cp||(e=Cp.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new jp.ipfs.pin.Set;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.version=e.uint32();break;case 2:r.fanout=e.uint32();break;case 3:r.seed=e.fixed32();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof jp.ipfs.pin.Set)return e;var t=new jp.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.version=0,n.fanout=0,n.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(n.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(n.seed=e.seed),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e}(),e}(),e})();var zp=n(122);const Up=new lr.s("/local/pins"),Fp=te.k.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),Vp="direct",Wp="recursive";function $p(e){return new lr.s(`/${qn.base32.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}function Gp(e,t){for(let n=0;n<e.byteLength;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}const qp=Bp.pin.Set;async function*Kp(e,t){const n=function(e){const t=e.Data;if(!t)throw new Error("No data present");const n=Xl.decode(t),r=Xl.decode.bytes;if(r<=0)throw new Error("Invalid Set header length");if(r+n>t.length)throw new Error("Impossibly large set header length");const s=t.slice(r,n+r),i=qp.toObject(qp.decode(s),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==i.version)throw new Error(`Unsupported Set version: ${i.version}`);if(i.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:i,data:t.slice(n+r)}}(t);let r=0;for(const s of t.Links){if(r<n.header.fanout){const t=s.Hash;if(!Fp.equals(t)){const n=De(await e.get(t));yield*Kp(e,n)}}else yield s.Hash;r++}}async function*Zp(e,t,n){const r=t.Links.find((e=>e.Name===n));if(!r)throw new Error("No link found with name "+n);const s=De(await e.get(r.Hash));yield*Kp(e,s)}async function Jp(e,t,n){const r=await function(e,t){return async function t(n,r){const s=qp.encode({version:1,fanout:256,seed:r}).finish(),i=Xl.encode(s.length),a=(0,Qr.z)([i,s]),o=[];for(let e=0;e<256;e++)o.push({Name:"",Tsize:1,Hash:Fp});if(n.length<=8192){const e=n.map((e=>({link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}))).sort(((e,t)=>Gp(e.link.Hash.bytes,t.link.Hash.bytes))),t=o.concat(e.map((e=>e.link)));return{Data:(0,Qr.z)([a,...e.map((e=>e.data))]),Links:t}}{const e=n.reduce(((e,t)=>{const n=function(e,t){const n=new Uint8Array(4);new DataView(n.buffer).setUint32(0,e,!0);const r=(0,Wn.m)(t.toString()),s=(0,Qr.z)([n,r],n.byteLength+r.byteLength);return zp((0,Xn.B)(s))}(r,t.key)%256;return e[n]=n in e?e[n].concat([t]):[t],e}),[]);let s=0;for(const n of e){const e=await t(n,r+1);await c(e,s),s++}return{Data:a,Links:o}}async function c(t,n){const r=Se(t),s=await ji.sha256.digest(r),i=te.k.createV0(s);await e.put(i,r);const a=t.Links.reduce(((e,t)=>e+(t.Tsize||0)),0)+r.length;o[n]={Name:"",Tsize:a,Hash:i}}}(t,0)}(e,n.map((e=>({key:e})))),s=Se(r),i=await ji.sha256.digest(s),a=te.k.createV0(i);return await e.put(a,s),{Name:t,Tsize:r.Links.reduce(((e,t)=>e+t.Tsize),0)+s.length,Hash:a}}async function Qp(e,t,n,r){if(!await t.has(Up))return;const s=await t.get(Up),i=te.k.decode(s),a=De(await e.get(i));let o=0;const c=await Pp(Zp(e,a,Wp))+await Pp(Zp(e,a,Vp));for await(const t of Zp(e,a,Wp)){o++;const e={depth:1/0};0!==t.version&&(e.version=t.version),t.code!==Le&&(e.codec=t.code),await n.put($p(t),$t(e)),r(o/c*100,`Migrated recursive pin ${t}`)}for await(const t of Zp(e,a,Vp)){o++;const e={depth:0};0!==t.version&&(e.version=t.version),t.code!==Le&&(e.codec=t.code),await n.put($p(t),$t(e)),r(o/c*100,`Migrated direct pin ${t}`)}await e.delete(i),await t.delete(Up)}async function Xp(e,t,n,r){const s=[],i=[];let a=0;const o=await Pp(n.queryKeys({}));for await(const{key:e,value:t}of n.query({})){a++;const n=Qt(t),c=te.k.create(n.version||0,n.codec||Le,Kn.Jx(qn.base32.decode("b"+e.toString().toLowerCase().split("/").pop())));0===n.depth?(r(a/o*100,`Reverted direct pin ${c}`),i.push(c)):(r(a/o*100,`Reverted recursive pin ${c}`),s.push(c))}r(100,"Updating pin root");const c=Se({Links:[await Jp(e,Vp,i),await Jp(e,Wp,s)]}),d=await ji.sha256.digest(c),l=te.k.createV0(d);await e.put(l,c),await t.put(Up,l.bytes)}async function ef(e,t,n){const r=e.blocks,s=e.datastore,i=e.pins;await r.open(),await s.open(),await i.open();try{await n(r,s,i,t)}finally{await i.close(),await s.close(),await r.close()}}const tf={version:9,description:"Migrates pins to datastore",migrate:(e,t=(()=>{}))=>ef(e,t,Qp),revert:(e,t=(()=>{}))=>ef(e,t,Xp)},nf=new lr.s("/config"),rf=new lr.s("/version");function sf(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}function af(e){const t=e.get.bind(e),n=e.has.bind(e);return e.get=r=>async function(e,t,n,r){if(await n(e))return t(e);const s=sf(r);if(!s)throw(0,Fr.notFoundError)();return new Promise(((t,n)=>{const r=s.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{if(r.result)return t(r.result);n((0,Fr.notFoundError)())}}))}(r,t,n,e),e.has=t=>async function(e,t,n){const r=await t(e);if(r)return r;const s=sf(n);return!!s&&new Promise(((t,n)=>{const r=s.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{t(Boolean(r.result))}}))}(t,n,e),e}function of(e){return{...e,root:af(e.root),datastore:af(e.datastore),pins:af(e.pins),keys:af(e.keys)}}async function cf(e,t,n=(()=>{})){const r=sf(t);r?(n(`Upgrading ${e}`),await pf(r,((e,t)=>[{type:"del",key:e},{type:"put",key:(0,Wn.m)(e),value:t}]))):n(`${e} did not need an upgrade`)}async function df(e,t,n=(()=>{})){const r=sf(t);r?(n(`Downgrading ${e}`),await pf(r,((e,t)=>[{type:"del",key:e},{type:"put",key:(0,Xn.B)(e),value:t}]))):n(`${e} did not need a downgrade`)}function lf(e){return e.child?lf(e.child):e}async function uf(e,t,n){const r=Object.entries(e).map((([e,t])=>({key:e,backend:lf(t)}))).filter((({key:e,backend:t})=>"LevelDatastore"===t.constructor.name)).map((({key:e,backend:t})=>({name:e,store:t})));t(0,`Migrating ${r.length} dbs`);let s=0;const i=e=>{t(Math.round(s/r.length*100),e)};for(const{name:e,store:t}of r){await t.open();try{await n(e,t,i)}finally{s++,await t.close()}}t(100,`Migrated ${r.length} dbs`)}const hf={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,t=(()=>{}))=>uf(e,t,cf),revert:(e,t=(()=>{}))=>uf(e,t,df)};function pf(e,t){return new Promise(((n,r)=>{const s=e.iterator();s._deserializeKey=s._deserializeValue=e=>e,function i(){s.next(((a,o,c)=>{if(a||void 0===o){const e=e=>{e?r(e):n()};s.end(e)}else!function(t,n){const r=e.store("readwrite"),s=r.transaction;let i,a=0;s.onabort=()=>n(i||s.error||new Error("aborted by user")),s.oncomplete=()=>n(),function e(){const n=t[a++],o=n.key;let c;try{c="del"===n.type?r.delete(o):r.put(n.value,o)}catch(e){return i=e,void s.abort()}a<t.length&&(c.onsuccess=e)}()}(t(o,c),i)}))}()}))}const ff=new lr.s("/local/filesroot"),mf={version:11,description:"Store mfs root in the datastore",migrate:async function(e,t=(()=>{})){if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(ff)){const t=await e.root.get(ff);await e.datastore.put(ff,t),await e.root.delete(ff)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")},revert:async function(e,t=(()=>{})){if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(ff)){const t=await e.datastore.get(ff);await e.root.put(ff,t),await e.datastore.delete(ff)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}},_f=z.Reader,yf=z.Writer,gf=z.util,wf=z.roots.default||(z.roots.default={}),bf=wf.Protocols=(()=>{function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.protocols=gf.emptyArray,e.encode=function(e,t){if(t||(t=yf.create()),null!=e.protocols&&e.protocols.length)for(var n=0;n<e.protocols.length;++n)t.uint32(10).string(e.protocols[n]);return t},e.decode=function(e,t){e instanceof _f||(e=_f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wf.Protocols;e.pos<n;){var s=e.uint32();s>>>3==1?(r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(e.string())):e.skipType(7&s)}return r},e.fromObject=function(e){if(e instanceof wf.Protocols)return e;var t=new wf.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var n=0;n<e.protocols.length;++n)t.protocols[n]=String(e.protocols[n])}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.protocols=[]),e.protocols&&e.protocols.length){n.protocols=[];for(var r=0;r<e.protocols.length;++r)n.protocols[r]=e.protocols[r]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),vf=z.Reader,kf=z.Writer,Mf=z.util,Ef=z.roots.default||(z.roots.default={}),Lf=Ef.Addresses=(()=>{function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.addrs=Mf.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=kf.create()),null!=e.addrs&&e.addrs.length)for(var n=0;n<e.addrs.length;++n)Ef.Addresses.Address.encode(e.addrs[n],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&Ef.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof vf||(e=vf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Ef.Addresses;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.addrs&&r.addrs.length||(r.addrs=[]),r.addrs.push(Ef.Addresses.Address.decode(e,e.uint32()));break;case 2:r.certifiedRecord=Ef.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Ef.Addresses)return e;var t=new Ef.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var n=0;n<e.addrs.length;++n){if("object"!=typeof e.addrs[n])throw TypeError(".Addresses.addrs: object expected");t.addrs[n]=Ef.Addresses.Address.fromObject(e.addrs[n])}}if(null!=e.certifiedRecord){if("object"!=typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=Ef.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addrs=[]),t.defaults&&(n.certifiedRecord=null),e.addrs&&e.addrs.length){n.addrs=[];for(var r=0;r<e.addrs.length;++r)n.addrs[r]=Ef.Addresses.Address.toObject(e.addrs[r],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=Ef.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.multiaddr=Mf.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:Mf.oneOfGetter(t=["isCertified"]),set:Mf.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=kf.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof vf||(e=vf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Ef.Addresses.Address;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Ef.Addresses.Address)return e;var t=new Ef.Addresses.Address;return null!=e.multiaddr&&("string"==typeof e.multiaddr?Mf.base64.decode(e.multiaddr,t.multiaddr=Mf.newBuffer(Mf.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.multiaddr="":(n.multiaddr=[],t.bytes!==Array&&(n.multiaddr=Mf.newBuffer(n.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(n.multiaddr=t.bytes===String?Mf.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(n.isCertified=e.isCertified,t.oneofs&&(n._isCertified="isCertified")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=Mf.Long?Mf.Long.fromBits(0,0,!0):0,e.prototype.raw=Mf.newBuffer([]),e.encode=function(e,t){return t||(t=kf.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof vf||(e=vf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Ef.Addresses.CertifiedRecord;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.seq=e.uint64();break;case 2:r.raw=e.bytes();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Ef.Addresses.CertifiedRecord)return e;var t=new Ef.Addresses.CertifiedRecord;return null!=e.seq&&(Mf.Long?(t.seq=Mf.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"==typeof e.seq&&(t.seq=new Mf.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"==typeof e.raw?Mf.base64.decode(e.raw,t.raw=Mf.newBuffer(Mf.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(Mf.Long){var r=new Mf.Long(0,0,!0);n.seq=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.seq=t.longs===String?"0":0;t.bytes===String?n.raw="":(n.raw=[],t.bytes!==Array&&(n.raw=Mf.newBuffer(n.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?n.seq=t.longs===String?String(e.seq):e.seq:n.seq=t.longs===String?Mf.Long.prototype.toString.call(e.seq):t.longs===Number?new Mf.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(n.raw=t.bytes===String?Mf.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e}(),e})(),Sf=z.Reader,Df=z.Writer,Tf=z.util,Rf=z.roots.default||(z.roots.default={}),Pf=Rf.Peer=(()=>{function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.addresses=Tf.emptyArray,e.prototype.protocols=Tf.emptyArray,e.prototype.metadata=Tf.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:Tf.oneOfGetter(t=["pubKey"]),set:Tf.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:Tf.oneOfGetter(t=["peerRecordEnvelope"]),set:Tf.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=Df.create()),null!=e.addresses&&e.addresses.length)for(var n=0;n<e.addresses.length;++n)Rf.Address.encode(e.addresses[n],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(n=0;n<e.protocols.length;++n)t.uint32(18).string(e.protocols[n]);if(null!=e.metadata&&e.metadata.length)for(n=0;n<e.metadata.length;++n)Rf.Metadata.encode(e.metadata[n],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof Sf||(e=Sf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Rf.Peer;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(Rf.Address.decode(e,e.uint32()));break;case 2:r.protocols&&r.protocols.length||(r.protocols=[]),r.protocols.push(e.string());break;case 3:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(Rf.Metadata.decode(e,e.uint32()));break;case 4:r.pubKey=e.bytes();break;case 5:r.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Rf.Peer)return e;var t=new Rf.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var n=0;n<e.addresses.length;++n){if("object"!=typeof e.addresses[n])throw TypeError(".Peer.addresses: object expected");t.addresses[n]=Rf.Address.fromObject(e.addresses[n])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");for(t.protocols=[],n=0;n<e.protocols.length;++n)t.protocols[n]=String(e.protocols[n])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");for(t.metadata=[],n=0;n<e.metadata.length;++n){if("object"!=typeof e.metadata[n])throw TypeError(".Peer.metadata: object expected");t.metadata[n]=Rf.Metadata.fromObject(e.metadata[n])}}return null!=e.pubKey&&("string"==typeof e.pubKey?Tf.base64.decode(e.pubKey,t.pubKey=Tf.newBuffer(Tf.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"==typeof e.peerRecordEnvelope?Tf.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=Tf.newBuffer(Tf.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addresses=[],n.protocols=[],n.metadata=[]),e.addresses&&e.addresses.length){n.addresses=[];for(var r=0;r<e.addresses.length;++r)n.addresses[r]=Rf.Address.toObject(e.addresses[r],t)}if(e.protocols&&e.protocols.length)for(n.protocols=[],r=0;r<e.protocols.length;++r)n.protocols[r]=e.protocols[r];if(e.metadata&&e.metadata.length)for(n.metadata=[],r=0;r<e.metadata.length;++r)n.metadata[r]=Rf.Metadata.toObject(e.metadata[r],t);return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(n.pubKey=t.bytes===String?Tf.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(n._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(n.peerRecordEnvelope=t.bytes===String?Tf.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(n._peerRecordEnvelope="peerRecordEnvelope")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),If=(Rf.Address=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.multiaddr=Tf.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:Tf.oneOfGetter(t=["isCertified"]),set:Tf.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Df.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof Sf||(e=Sf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Rf.Address;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Rf.Address)return e;var t=new Rf.Address;return null!=e.multiaddr&&("string"==typeof e.multiaddr?Tf.base64.decode(e.multiaddr,t.multiaddr=Tf.newBuffer(Tf.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.multiaddr="":(n.multiaddr=[],t.bytes!==Array&&(n.multiaddr=Tf.newBuffer(n.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(n.multiaddr=t.bytes===String?Tf.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(n.isCertified=e.isCertified,t.oneofs&&(n._isCertified="isCertified")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),Rf.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value=Tf.newBuffer([]),e.encode=function(e,t){return t||(t=Df.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof Sf||(e=Sf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Rf.Metadata;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.key=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Rf.Metadata)return e;var t=new Rf.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"==typeof e.value?Tf.base64.decode(e.value,t.value=Tf.newBuffer(Tf.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=Tf.newBuffer(n.value)))),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.bytes===String?Tf.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),z.Reader),Af=z.Writer,Yf=z.util,Of=z.roots.default||(z.roots.default={}),Nf=Of.Envelope=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.publicKey=Yf.newBuffer([]),e.prototype.payloadType=Yf.newBuffer([]),e.prototype.payload=Yf.newBuffer([]),e.prototype.signature=Yf.newBuffer([]),e.encode=function(e,t){return t||(t=Af.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof If||(e=If.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new Of.Envelope;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.payloadType=e.bytes();break;case 3:r.payload=e.bytes();break;case 5:r.signature=e.bytes();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof Of.Envelope)return e;var t=new Of.Envelope;return null!=e.publicKey&&("string"==typeof e.publicKey?Yf.base64.decode(e.publicKey,t.publicKey=Yf.newBuffer(Yf.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"==typeof e.payloadType?Yf.base64.decode(e.payloadType,t.payloadType=Yf.newBuffer(Yf.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"==typeof e.payload?Yf.base64.decode(e.payload,t.payload=Yf.newBuffer(Yf.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"==typeof e.signature?Yf.base64.decode(e.signature,t.signature=Yf.newBuffer(Yf.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.publicKey="":(n.publicKey=[],t.bytes!==Array&&(n.publicKey=Yf.newBuffer(n.publicKey))),t.bytes===String?n.payloadType="":(n.payloadType=[],t.bytes!==Array&&(n.payloadType=Yf.newBuffer(n.payloadType))),t.bytes===String?n.payload="":(n.payload=[],t.bytes!==Array&&(n.payload=Yf.newBuffer(n.payload))),t.bytes===String?n.signature="":(n.signature=[],t.bytes!==Array&&(n.signature=Yf.newBuffer(n.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(n.publicKey=t.bytes===String?Yf.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(n.payloadType=t.bytes===String?Yf.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(n.payload=t.bytes===String?Yf.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(n.signature=t.bytes===String?Yf.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e})(),xf=z.Reader,Cf=z.Writer,Hf=z.util,jf=z.roots.default||(z.roots.default={}),Bf=jf.PeerRecord=(()=>{function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.peerId=Hf.newBuffer([]),e.prototype.seq=Hf.Long?Hf.Long.fromBits(0,0,!0):0,e.prototype.addresses=Hf.emptyArray,e.encode=function(e,t){if(t||(t=Cf.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var n=0;n<e.addresses.length;++n)jf.PeerRecord.AddressInfo.encode(e.addresses[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof xf||(e=xf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new jf.PeerRecord;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.peerId=e.bytes();break;case 2:r.seq=e.uint64();break;case 3:r.addresses&&r.addresses.length||(r.addresses=[]),r.addresses.push(jf.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof jf.PeerRecord)return e;var t=new jf.PeerRecord;if(null!=e.peerId&&("string"==typeof e.peerId?Hf.base64.decode(e.peerId,t.peerId=Hf.newBuffer(Hf.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(Hf.Long?(t.seq=Hf.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"==typeof e.seq&&(t.seq=new Hf.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var n=0;n<e.addresses.length;++n){if("object"!=typeof e.addresses[n])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[n]=jf.PeerRecord.AddressInfo.fromObject(e.addresses[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addresses=[]),t.defaults)if(t.bytes===String?n.peerId="":(n.peerId=[],t.bytes!==Array&&(n.peerId=Hf.newBuffer(n.peerId))),Hf.Long){var r=new Hf.Long(0,0,!0);n.seq=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(n.peerId=t.bytes===String?Hf.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?n.seq=t.longs===String?String(e.seq):e.seq:n.seq=t.longs===String?Hf.Long.prototype.toString.call(e.seq):t.longs===Number?new Hf.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){n.addresses=[];for(var s=0;s<e.addresses.length;++s)n.addresses[s]=jf.PeerRecord.AddressInfo.toObject(e.addresses[s],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.multiaddr=Hf.newBuffer([]),e.encode=function(e,t){return t||(t=Cf.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof xf||(e=xf.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new jf.PeerRecord.AddressInfo;e.pos<n;){var s=e.uint32();s>>>3==1?r.multiaddr=e.bytes():e.skipType(7&s)}return r},e.fromObject=function(e){if(e instanceof jf.PeerRecord.AddressInfo)return e;var t=new jf.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"==typeof e.multiaddr?Hf.base64.decode(e.multiaddr,t.multiaddr=Hf.newBuffer(Hf.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.multiaddr="":(n.multiaddr=[],t.bytes!==Array&&(n.multiaddr=Hf.newBuffer(n.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(n.multiaddr=t.bytes===String?Hf.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e}(),e})();z.util.Long=void 0,z.configure();const zf={version:12,description:"Store each peerstore peer under a single datastore key",migrate:async function(e,t=(()=>{})){t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();const n={},r=[];for await(const{key:t,value:s}of e.datastore.query({prefix:"/peers"})){r.push(t);const e=t.toString(),[,i,a,o,c]=e.split("/");if("peers"===i&&["protos","addrs","metadata","keys"].includes(a)&&o)if(n[o]=n[o]||{addresses:[],protocols:[],metadata:[]},"protos"===a){const e=bf.decode(s);n[o].protocols=e.protocols.sort()}else if("addrs"===a){const e=Lf.decode(s);n[o].addresses=e.addrs.sort(((e,t)=>(0,Zn.HM)(e.multiaddr).toString().localeCompare((0,Zn.HM)(t.multiaddr).toString()))),e.certifiedRecord&&e.certifiedRecord.raw&&(n[o].peerRecordEnvelope=e.certifiedRecord.raw)}else"metadata"===a?n[o].metadata.push({key:c,value:s}):"keys"===a&&(n[o].pubKey=s)}t(33,"Read peer data from store");for(const t of r)await e.datastore.delete(t);t(66,"Removed existing peer data from store");for(const t of Object.keys(n)){const r=n[t];r.metadata=r.metadata.sort(((e,t)=>e.key.localeCompare(t.key)));const s=Pf.encode(r).finish();await e.datastore.put(new lr.s(`/peers/${t}`),s)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")},revert:async function(e,t=(()=>{})){t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();const n={},r=[];for await(const{key:t,value:s}of e.datastore.query({prefix:"/peers"})){r.push(t);const e=t.toString(),[,,i]=e.split("/");n[i]=Pf.decode(s)}t(33,"Read peer data from store");for(const t of r)await e.datastore.delete(t);t(66,"Removed existing peer data from store");for(const[t,r]of Object.entries(n)){if(r.protocols&&r.protocols.length>0&&await e.datastore.put(new lr.s(`/peers/protos/${t}`),bf.encode({protocols:r.protocols}).finish()),r.addresses&&r.addresses.length>0){const n=r.peerRecordEnvelope;let s;if(n){const e=Nf.decode(n);s={raw:n,seq:Bf.decode(e.payload).seq}}await e.datastore.put(new lr.s(`/peers/addrs/${t}`),Lf.encode({addrs:r.addresses,certifiedRecord:s}).finish())}if(r.metadata&&r.metadata.length>0)for(const{key:n,value:s}of r.metadata)await e.datastore.put(new lr.s(`/peers/metadata/${t}/${n}`),s);r.pubKey&&await e.datastore.put(new lr.s(`/peers/keys/${t}`),r.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}},Uf={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Ff=[Object.assign({version:1},Uf),Object.assign({version:2},Uf),Object.assign({version:3},Uf),Object.assign({version:4},Uf),Object.assign({version:5},Uf),Object.assign({version:6},Uf),Object.assign({version:7},Uf),xp,tf,hf,mf,zf];class Vf extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Vf.code,this.message=e}}Vf.code="ERR_NON_REVERSIBLE_MIGRATION";class Wf extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Wf.code,this.message=e}}Wf.code="ERR_NOT_INITIALIZED_REPO";class $f extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=$f.code,this.message=e}}$f.code="ERR_REQUIRED_PARAMETER";class Gf extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Gf.code,this.message=e}}Gf.code="ERR_INVALID_VALUE";class qf extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=qf.code,this.message=e}}qf.code="ERR_MISSING_REPO_OPTIONS";const Kf=Rp("ipfs:repo:migrator:repo:init");async function Zf(e){if(!await async function(e){if(!e)throw new qf("Please pass repo options when trying to open a repo");const t=e.root;try{await t.open();const e=await t.has(rf),n=await t.has(nf);return!(!e||!n)||(Kf(`Version entry present: ${e}`),Kf(`Config entry present: ${n}`),!1)}catch(e){return Kf("While checking if repo is initialized error was thrown: "+e.message),!1}finally{if(void 0!==t)try{await t.close()}catch{}}}(e))throw new Wf("Repo is not initialized!");const t=e.root;await t.open();try{return parseInt((0,Xn.B)(await t.get(rf)))}finally{await t.close()}}async function Jf(e,t){if(!t)throw new qf("Please pass repo options when trying to open a repo");const n=t.root;await n.open(),await n.put(rf,(0,Wn.m)(String(e))),await n.close()}const Qf=Rp("ipfs:repo:migrator");function Xf(e,t,n,r=!1){let s=0;for(const i of e){if(i.version>n)break;if(i.version>t){if(r&&!i.revert)throw new em.NonReversibleMigrationError(`It is not possible to revert to version ${t} because migration version ${i.version} is not reversible. Cancelling reversion.`);s++}}if(s!==n-t)throw new em.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${t} to ${n}`)}const em=o;var tm=n(13434);class nm extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=nm.code}}nm.code="ERR_LOCK_EXISTS";class rm extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=rm.code}}rm.code="ERR_NOT_FOUND";class sm extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=sm.code}}sm.code="ERR_INVALID_REPO_VERSION";const im="ERR_REPO_NOT_INITIALIZED";async function am(e,t,n){const r=await t(e);if(r)return r;const s=cm(n);return!!s&&new Promise(((t,n)=>{const r=s.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{t(Boolean(r.result))}}))}async function om(e,t,n,r){if(await n(e))return t(e);const s=cm(r);if(!s)throw new rm;return new Promise(((t,n)=>{const r=s.store("readonly").get(e.toString());r.transaction.onabort=()=>{n(r.transaction.error)},r.transaction.oncomplete=()=>{if(r.result)return t(r.result);n(new rm)}}))}function cm(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}const dm=Rp("ipfs:repo:version"),lm=new lr.s("version"),um=Pr.Z.default?Pr.Z.default:Pr.Z,hm=new lr.s("config");function pm(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}const fm=new lr.s("datastore_spec");const mm=new lr.s("api");function _m(e){const t=te.k.asCID(e);if(null==t)throw B(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==xn.identity.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}const ym=Rp("ipfs:repo:lock:memory"),gm="repo.lock",wm={},bm={lock:async function(e){const t=e+"/"+gm;if(ym("locking %s",t),!0===wm[t])throw new nm(`Lock already being held for file: ${t}`);return wm[t]=!0,{async close(){wm[t]&&delete wm[t]}}},locked:async function(e){const t=e+"/"+gm;return ym(`checking lock: ${t}`),Boolean(wm[t])}},vm={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:bm},km={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function Mm(e){const t=an.k0.asCID(e);if(null==t)throw B(new Error("Not a valid cid"),"ERR_INVALID_CID");const n=qn.base32.encode(t.multihash.bytes);return new lr.s("/"+n.slice(1).toUpperCase(),!1)}function Em(e){return Kn.Jx(qn.base32.decode(`b${e.toString().toLowerCase().substring(1)}`))}const Lm=Rp("ipfs:repo:utils:walk-dag");async function*Sm(e,t,n,r){try{const s=Ql({bytes:await t.get(e,r),cid:e,codec:await n(e.code)});for(const[,e]of s.links())yield e,yield*Sm(e,t,n,r)}catch(t){throw Lm("Could not walk DAG for CID",e.toString(),t),t}}class Dm extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield e)}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const r="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,s]=n;!1===this._deleteIfExpired(r,s)&&(yield[r,s.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,s]=n;this.cache.has(r)||!1===this._deleteIfExpired(r,s)&&(yield[r,s.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,r]of this.entriesAscending())e.call(t,r,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Tm{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=Rp("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);const n={depth:0};return 0!==e.version&&(n.version=e.version),e.code!==Le&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(Mm(e),$t(n))}unpin(e,t){return this.pinstore.delete(Mm(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);const n={depth:1/0};0!==e.version&&(n.version=e.version),e.code!==Le&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(Mm(e),$t(n))}async*directKeys(e){for await(const e of this.pinstore.query({filters:[e=>0===Qt(e.value).depth]})){const t=Qt(e.value),n=t.version||0,r=null!=t.codec?t.codec:Le,s=Em(e.key);yield{cid:te.k.create(n,r,s),metadata:t.metadata}}}async*recursiveKeys(e){for await(const e of this.pinstore.query({filters:[e=>Qt(e.value).depth===1/0]})){const t=Qt(e.value),n=t.version||0,r=null!=t.codec?t.codec:Le,s=Em(e.key);yield{cid:te.k.create(n,r,s),metadata:t.metadata}}}async*indirectKeys(e){for await(const{cid:t}of this.recursiveKeys())for await(const n of Sm(t,this.blockstore,this.loadCodec,e)){const e=[jr.recursive];(await this.isPinnedWithType(n,e)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);const r=t.includes(jr.all),s=t.includes(jr.direct),i=t.includes(jr.recursive),a=t.includes(jr.indirect);if(i||s||r){const n=await(0,wu.Z)(this.pinstore.query({prefix:Mm(e).toString(),filters:[e=>{if(r)return!0;const n=Qt(e.value);return t.includes(0===n.depth?jr.direct:jr.recursive)}],limit:1}));if(n){const t=Qt(n.value);return{cid:e,pinned:!0,reason:0===t.depth?jr.direct:jr.recursive,metadata:t.metadata}}}const o=this;if(r||a){const t=await(0,wu.Z)(async function*(e,t){for await(const{cid:n}of t)for await(const t of Sm(n,o.blockstore,o.loadCodec))if(t.equals(e))return void(yield n)}(e,this.recursiveKeys()));if(t)return{cid:e,pinned:!0,reason:jr.indirect,parent:t}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){const n=new Dm({maxSize:t.cidCacheMaxSize??2048}),r=async(e,t)=>{if(n.has(e.toString()))return;n.set(e.toString(),!0);const s=Ql({bytes:await this.blockstore.get(e,t),cid:e,codec:await this.loadCodec(e.code)});await Promise.all([...s.links()].map((([,e])=>r(e,t))))};await r(e,t)}static checkPinType(e){if("string"!=typeof e||!Object.keys(jr).includes(e))throw function(e){return B(new Error(`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`),"ERR_INVALID_PIN_TYPE")}(e);return!0}}async function Rm(e,t){const{pinned:n,reason:r}=await t.isPinnedWithType(e,jr.all);if(n)throw B(new Error(`pinned: ${r}`),"ERR_BLOCK_PINNED")}var Pm=n(11583);const Im=Rp("ipfs:repo:gc"),Am=(0,Fr.notFoundError)().code,Ym=new lr.s("/local/filesroot");const Om=Rp("ipfs:repo"),Nm=Number.MAX_SAFE_INTEGER;class xm{constructor(e,t,n,r){if("string"!=typeof e)throw new Error("missing repo path");if("function"!=typeof t)throw new Error("missing codec loader");this.options=(0,C.Z)(vm,r),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;const s=n.blocks,i=n.pins;this.pins=new Tm({pinstore:i,blockstore:s,loadCodec:t});const a=(o=this.pins,c=s,{open:()=>c.open(),close:()=>c.close(),query:(e,t)=>c.query(e,t),queryKeys:(e,t)=>c.queryKeys(e,t),get:async(e,t)=>c.get(e,t),async*getMany(e,t){yield*c.getMany(e,t)},async put(e,t,n){await c.put(e,t,n)},async*putMany(e,t){yield*c.putMany(e,t)},has:(e,t)=>c.has(e,t),delete:async(e,t)=>(await Rm(e,o),c.delete(e,t)),deleteMany:(e,t)=>c.deleteMany((0,bi.Z)(e,(async e=>(await Rm(e,o),e))),t),batch:()=>c.batch()});var o,c;this.blocks=function(e){return{open:()=>e.open(),close:()=>e.close(),query:(t,n)=>e.query(t,n),queryKeys:(t,n)=>e.queryKeys(t,n),async get(t,n){const r=_m(t);return r.isIdentity?Promise.resolve(r.digest):e.get(t,n)},async*getMany(e,t){for await(const n of e)yield this.get(n,t)},async put(t,n,r){const{isIdentity:s}=_m(t);s||await e.put(t,n,r)},async*putMany(t,n){const r=(0,Ss.d)({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{await(0,$s.Z)(e.putMany(async function*(){for await(const{key:e,value:n}of t)_m(e).isIdentity||(yield{key:e,value:n}),r.push({key:e,value:n})}())),r.end()}catch(e){r.end(e)}})),yield*r},has(t,n){const{isIdentity:r}=_m(t);return r?Promise.resolve(!0):e.has(t,n)},delete(t,n){const{isIdentity:r}=_m(t);return r?Promise.resolve():e.delete(t,n)},deleteMany:(t,n)=>e.deleteMany((0,vi.Z)(t,(e=>!_m(e).isIdentity)),n),batch(){const t=e.batch();return{put(e,n){const{isIdentity:r}=_m(e);r||t.put(e,n)},delete(e){const{isIdentity:n}=_m(e);n||t.delete(e)},commit:e=>t.commit(e)}}}}(a),this.version=function(e){return{exists:async()=>am(lm,e.has.bind(e),e),async get(){const t=await om(lm,e.get.bind(e),e.has.bind(e),e);return parseInt((0,Xn.B)(t),10)},set:t=>e.put(lm,(0,Wn.m)(String(t))),async check(e){const t=await this.get();return dm("comparing version: %s and %s",t,e),t===e||6===t&&7===e||6===e&&7===t}}}(this.root),this.config=function(e){const t=new um({concurrency:1}),n={async getAll(t={}){const n=await om(hm,e.get.bind(e),e.has.bind(e),e);return JSON.parse((0,Xn.B)(n))},async get(e,t={}){if(null==e)throw new rm(`Key ${e} does not exist in config`);const n=await this.getAll(t),r=Tp(n,e);if(void 0===r)throw new rm(`Key ${e} does not exist in config`);return r},set(e,n,s={}){if("string"!=typeof e&&!(e instanceof String))throw B(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===n||n instanceof Uint8Array)throw B(new Error("Invalid value type: "+typeof n),"ERR_INVALID_VALUE");return t.add((()=>r({key:e,value:n},s.signal)))},replace(e,n={}){if(!e||e instanceof Uint8Array)throw B(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((()=>r({key:void 0,value:e},n.signal)))},exists:async()=>am(hm,e.has.bind(e),e)};return n;async function r(e,t){if(t&&t.aborted)return;const r=e.key,i=e.value;if(r){const e=await n.getAll();return"object"==typeof e&&null!==e&&zl(e,r,i),s(e)}return s(i)}function s(t){const n=(0,Wn.m)(JSON.stringify(t,null,2));return e.put(hm,n)}}(this.root),this.spec=function(e){return{exists:()=>e.has(fm),async get(){const t=await e.get(fm);return JSON.parse((0,Xn.B)(t))},set:async t=>e.put(fm,(0,Wn.m)(JSON.stringify(function(e,t={}){if(!pm(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");const{deep:n,compare:r}=t,s=[],i=[],a=e=>{const t=s.indexOf(e);if(-1!==t)return i[t];const n=[];return s.push(e),i.push(n),n.push(...e.map((e=>Array.isArray(e)?a(e):pm(e)?o(e):e))),n},o=e=>{const t=s.indexOf(e);if(-1!==t)return i[t];const c={},d=Object.keys(e).sort(r);s.push(e),i.push(c);for(const t of d){const r=e[t];let s;s=n&&Array.isArray(r)?a(r):n&&pm(r)?o(r):r,Object.defineProperty(c,t,{...Object.getOwnPropertyDescriptor(e,t),value:s})}return c};return Array.isArray(e)?n?a(e):e.slice():o(e)}(t,{deep:!0}))))}}(this.root),this.apiAddr=function(e){return{async get(){const t=await e.get(mm);return t&&t.toString()},set:t=>e.put(mm,(0,Wn.m)(t.toString())),delete:()=>e.delete(mm)}}(this.root),this.gcLock=(0,xu.Z)({name:e,singleProcess:!1!==this.options.repoOwner}),this.gc=function({gcLock:e,pins:t,blockstore:n,root:r,loadCodec:s}){return async function*(){const i=Date.now();Im("Creating set of marked blocks");const a=await e.writeLock();try{const e=await async function({pins:e,blockstore:t,loadCodec:n,root:r}){const s=async function*(){let e;try{e=await r.get(Ym)}catch(e){if(e.code===Am)return void Im("No blocks in MFS");throw e}const s=te.k.decode(e);yield s,yield*Sm(s,t,n)}(),i=(0,Pm.Z)((0,bi.Z)(e.recursiveKeys(),(({cid:e})=>e)),e.indirectKeys(),(0,bi.Z)(e.directKeys(),(({cid:e})=>e)),s),a=new Set;for await(const e of(0,Pm.Z)(i,s))a.add(qn.base32.encode(e.multihash.bytes));return a}({pins:t,blockstore:n,root:r,loadCodec:s}),o=n.queryKeys({});yield*async function*({blockstore:e},t,n){let r=0,s=0;yield*(0,ki.zG)(Hi((0,bi.Z)(n,(async n=>async function(){r++;try{const r=qn.base32.encode(n.multihash.bytes);if(t.has(r))return null;try{await e.delete(n),s++}catch(e){return{err:new Error(`Could not delete block with CID ${n}: ${e.message}`)}}return{cid:n}}catch(e){const t=`Could delete block with CID ${n}`;return Im(t,e),{err:new Error(t+`: ${e.message}`)}}})),256),(e=>(0,vi.Z)(e,Boolean))),Im(`Marked set has ${t.size} unique blocks. Blockstore has ${r} blocks. Deleted ${s} blocks.`)}({blockstore:n},e,o),Im(`Complete (${Date.now()-i}ms)`)}finally{a()}}}({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){var t;Om("initializing at: %s",this.path),await this._openRoot(),await this.config.replace((t=e,t.Datastore=Object.assign({},km,Tp(t,"datastore")),t)),await this.spec.set(function(e){const t={...km.Spec,...Tp(e,"Datastore.Spec")};return{type:t.type,mounts:t.mounts.map((e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc})))}}(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(e){return!1}}async open(){if(!this.closed)throw B(new Error("repo is already open"),"ERR_REPO_ALREADY_OPEN");Om("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),Om("acquired repo.lock"),!await this.version.check(12)){if(!await this._isAutoMigrationEnabled())throw new sm("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys})}Om("creating datastore"),await this.datastore.open(),Om("creating blocks"),await this.blocks.open(),Om("creating keystore"),await this.keys.open(),Om("creating pins"),await this.pins.pinstore.open(),this.closed=!1,Om("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(e){Om("error removing lock",e)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if("Already open"!==e.message)throw e}}async _openLock(){const e=await this.options.repoLock.lock(this.path);if("function"!=typeof e.close)throw B(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){let e;Om("init check");try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(e){if("ERR_NOT_FOUND"===e.code)throw B(new Error("repo is not initialized yet"),im,{path:this.path});throw e}if(!e)throw B(new Error("repo is not initialized yet"),im,{path:this.path})}async close(){if(this.closed)throw B(new Error("repo is already closed"),"ERR_REPO_ALREADY_CLOSED");Om("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==im&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((e=>e&&e.close()))),Om("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[e,t,n,r,s]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Cm(this.datastore),Cm(this.keys)]),i=t.size+r+s;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:i}}throw B(new Error("repo is not initialized yet"),im,{path:this.path})}async _isAutoMigrationEnabled(){if(void 0!==this.options.autoMigrate)return this.options.autoMigrate;let e;try{e=await this.config.get("repoAutoMigrate")}catch(t){if(t.code!==rm.code)throw t;e=!0}return e}async _migrate(e,t){return await this.version.get()>e?(Om(`reverting to version ${e}`),async function(e,t,n,r,s={}){const i=s.ignoreLock??!1,a=s.onProgress,o=s.isDryRun??!1,c=s.migrations??Ff;if(!e)throw new em.RequiredParameterError("Path argument is required!");if(!n)throw new em.RequiredParameterError("repoOptions argument is required!");if(!r)throw new em.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(r)||r<=0)throw new em.InvalidValueError("Version has to be positive integer!");t=of(t);const d=await Zf(t);if(d===r)return void Qf("Nothing to revert.");if(d<r)throw new em.InvalidValueError(`Current repo's version (${d}) is lower then toVersion (${r}), you probably wanted to migrate it?`);let l;Xf(c,r,d,!0),o||i||(l=await n.repoLock.lock(e)),Qf(`Reverting from version ${d} to ${r}`);try{const e=c.slice().reverse();for(const n of e){if(n.version<=r)break;if(!(n.version>d)){Qf(`Reverting migration version ${n.version}`);try{if(!o){let e=()=>{};a&&(e=(e,t)=>a(n.version,e.toFixed(2),t)),await n.revert(t,e)}}catch(e){const r=n.version;throw Qf(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${r}`),await Jf(r,t),e.message=`During reversion to version ${n.version} exception was raised: ${e.message}`,e}Qf(`Reverting to version ${n.version} finished`)}}o||await Jf(r,t),Qf(`All migrations successfully reverted to version ${r}!`)}finally{o||i||!l||await l.close()}}(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(Om(`migrating to version ${e}`),async function(e,t,n,r,s={}){const i=s.ignoreLock??!1,a=s.onProgress,o=s.isDryRun??!1,c=s.migrations??Ff;if(!e)throw new em.RequiredParameterError("Path argument is required!");if(!n)throw new em.RequiredParameterError("repoOptions argument is required!");if(!r)throw new em.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(r)||r<=0)throw new em.InvalidValueError("Version has to be positive integer!");t=of(t);const d=await Zf(t);if(d===r)return void Qf("Nothing to migrate.");if(d>r)throw new em.InvalidValueError(`Current repo's version (${d}) is higher then toVersion (${r}), you probably wanted to revert it?`);let l;Xf(c,d,r),o||i||(l=await n.repoLock.lock(e));try{for(const e of c){if(void 0!==r&&e.version>r)break;if(!(e.version<=d)){Qf(`Migrating version ${e.version}`);try{if(!o){let n=()=>{};a&&(n=(t,n)=>a(e.version,t.toFixed(2),n)),await e.migrate(t,n)}}catch(n){const r=e.version-1;throw Qf(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${r}`),await Jf(r,t),new Error(`During migration to version ${e.version} exception was raised: ${n.stack||n.message||n}`)}Qf(`Migrating to version ${e.version} finished`)}}o||await Jf(r||function(e){return e=e||Ff,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}(c),t),Qf("Repo successfully migrated",void 0!==r?`to version ${r}!`:"to latest version!")}finally{o||i||!l||await l.close()}}(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return BigInt(tm(e))}catch(e){return BigInt(Nm)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(const{key:n,value:r}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(r.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}}async function Cm(e){let t=BigInt(0);for await(const n of e.query({}))t+=BigInt(n.value.byteLength),t+=BigInt(n.key.uint8Array().byteLength);return t}async function*Hm(e,t){let n=0;if(!(t<1))for await(const r of e)if(yield r,n++,n===t)return}var jm=n(28505),Bm=n(35562);class zm extends Ls.e{constructor(e,t={}){super(),this.db="string"==typeof e?new Bm.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw Fr.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(e){throw Fr.dbWriteFailedError(e)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(e){if(e.notFound)throw Fr.notFoundError(e);throw Fr.dbWriteFailedError(e)}return t}async has(e){try{await this.db.get(e.toString())}catch(e){if(e.notFound)return!1;throw e}return!0}async delete(e){try{await this.db.del(e.toString())}catch(e){throw Fr.dbDeleteFailedError(e)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>(0,vi.Z)(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>(0,jm.Z)(e,t)),t));const{offset:n,limit:r}=e;if(n){let e=0;t=(0,vi.Z)(t,(()=>e++>=n))}return r&&(t=Hm(t,r)),t}queryKeys(e){let t=(0,bi.Z)(this._query({values:!1,prefix:e.prefix}),(({key:e})=>e));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>(0,vi.Z)(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>(0,jm.Z)(e,t)),t));const{offset:n,limit:r}=e;if(n){let e=0;t=(0,vi.Z)(t,(()=>e++>=n))}return r&&(t=Hm(t,r)),t}_query(e){const t={keys:!0,keyEncoding:"buffer",values:e.values};if(null!=e.prefix){const n=e.prefix.toString();t.gte=n,t.lt=n+""}const n=this.db.iterator(t);if(n[Symbol.asyncIterator])return async function*(e){for await(const[t,n]of e)yield{key:new lr.s(t,!1),value:n};await e.close()}(n);if(null!=n.next&&null!=n.end)return r=n,{[Symbol.asyncIterator]:()=>({next:()=>new Promise(((e,t)=>{r.next(((n,s,i)=>n?t(n):null==s?r.end((n=>{if(n)return t(n);e({done:!0,value:void 0})})):void e({done:!1,value:{key:new lr.s(s,!1),value:i}})))})),return:()=>new Promise(((e,t)=>{r.end((n=>{if(n)return t(n);e({done:!0,value:void 0})}))}))})};var r;throw new Error("Level returned incompatible iterator")}}var Um=n(80630),Fm=n(19418),Vm=n(16276);const Wm=(e,t)=>async function*(){const n=await Vm(e);yield*n.sort(t)}();class $m{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:n,value:r}of e)await this.put(n,r,t),yield{key:n,value:r}}async*getMany(e,t={}){for await(const n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(const n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(t,n){e.push({key:t,value:n})},delete(e){t.push(e)},commit:async n=>{await Um(this.putMany(e,n)),e=[],await Um(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(null!=e.prefix&&(n=Fm(n,(t=>t.key.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Fm(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>Wm(e,t)),n)),null!=e.offset){let t=0;n=Fm(n,(()=>t++>=(e.offset||0)))}return null!=e.limit&&(n=Ys(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(null!=e.prefix&&(n=Fm(n,(t=>t.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Fm(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>Wm(e,t)),n)),null!=e.offset){let t=0;n=Fm(n,(()=>t++>=e.offset))}return null!=e.limit&&(n=Ys(n,e.limit)),n}}function Gm(e){const t=te.k.asCID(e);if(!t)throw B(new Error("Not a valid cid"),"ERR_INVALID_CID");return new lr.s("/"+qn.base32.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function qm(e){return te.k.createV1($i.code,Kn.Jx(qn.base32.decode("b"+e.toString().slice(1).toLowerCase())))}function Km(e){const t=e.substring(0,1);if("/"===t)return Km(e.substring(1));let n,r;n="b"===t.toLowerCase()?e=>qn.base32.decode(e.toLowerCase()).subarray(2):"c"===t.toLowerCase()?e=>qn.base32pad.decode(e.toLowerCase()).subarray(2):"z"===t?e=>Gn.base58btc.decode(e).subarray(2):"Q"===t?e=>Gn.base58btc.decode("z"+e):e=>qn.base32.decode("b"+e.toLowerCase()).subarray(2);for(let t=1;t<e.length;t++)try{r=n(e.substring(0,t))}catch(e){if("Unexpected end of data"!==e.message)throw e}let s="/C";return r&&(s=`/${qn.base32.encode(r).slice(1,-1).toUpperCase()||"C"}`),s}class Zm extends $m{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(const{key:n,value:r}of this.child.query(function(e){return{...e,prefix:e.prefix?Km(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e({key:qm(t.key),value:t.value}))):void 0,orders:e.orders?e.orders.map((e=>(t,n)=>e({key:qm(t.key),value:t.value},{key:qm(n.key),value:n.value}))):void 0}}(e),t))yield{key:qm(n),value:r}}async*queryKeys(e,t){for await(const n of this.child.queryKeys(function(e){return{...e,prefix:e.prefix?Km(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e(qm(t)))):void 0,orders:e.orders?e.orders.map((e=>(t,n)=>e(qm(t),qm(n)))):void 0}}(e),t))yield qm(n)}async get(e,t){return this.child.get(Gm(e),t)}async*getMany(e,t){for await(const n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(Gm(e),t,n)}async*putMany(e,t){const n=(0,Ss.d)({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{const r=this.child;await(0,$s.Z)(this.child.putMany(async function*(){for await(const s of e){const e=Gm(s.key);await r.has(e,t)||(yield{key:e,value:s.value}),n.push(s)}}())),n.end()}catch(e){n.end(e)}})),yield*n}has(e,t){return this.child.has(Gm(e),t)}delete(e,t){return this.child.delete(Gm(e),t)}deleteMany(e,t){const n=(0,Ss.d)({objectMode:!0});return(0,$s.Z)(this.child.deleteMany(async function*(){for await(const t of e)yield Gm(t),n.push(t);n.end()}(),t)).catch((e=>{n.end(e)})),n}}function Jm(e,t,n){const r=n.path||"ipfs";return function(e,n,r,s){return new xm(e,(e=>t.getCodec(e)),r,s)}(r,0,{root:new zm(r,{prefix:"",version:2}),blocks:new Zm(new zm(`${r}/blocks`,{prefix:"",version:2})),datastore:new zm(`${r}/datastore`,{prefix:"",version:2}),keys:new zm(`${r}/keys`,{prefix:"",version:2}),pins:new zm(`${r}/pins`,{prefix:"",version:2})},{autoMigrate:n.autoMigrate,onMigrationProgress:n.onMigrationProgress||e,repoLock:bm})}var Qm=n(56179),Xm=n(60164);const e_=()=>{};class t_{constructor(e){this.min=e.min??0,this.max=e.max??1/0,this.peers=new Set,this.onConnect=e.onConnect??e_,this.onDisconnect=e.onDisconnect??e_}get[Symbol.toStringTag](){return Xm.d.toString()}get[Xm.d](){return!0}async setRegistrar(e){this.registrar=e}disconnect(e){this.onDisconnect(e)}}function n_(e){return new t_(e)}var r_=n(23250);class s_{constructor(e,t,n){this.gossip=e,this.msgs=new Map,this.history=[],this.msgIdToStrFn=n;for(let e=0;e<t;e++)this.history[e]=[]}get size(){return this.msgs.size}put(e,t,n=!1){const{msgIdStr:r}=e;return!this.msgs.has(r)&&(this.msgs.set(r,{message:t,validated:n,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),!0)}observeDuplicate(e,t){const n=this.msgs.get(e);n&&!n.validated&&n.originatingPeers.add(t)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,t){const n=this.msgs.get(e);if(!n)return null;const r=(n.iwantCounts.get(t)??0)+1;return n.iwantCounts.set(t,r),{msg:n.message,count:r}}getGossipIDs(e){const t=new Map;for(let n=0;n<this.gossip;n++)this.history[n].forEach((n=>{const r=this.msgs.get(n.msgIdStr);if(r&&r.validated&&e.has(n.topic)){let e=t.get(n.topic);e||(e=[],t.set(n.topic,e)),e.push(n.msgId)}}));return t}validate(e){const t=this.msgs.get(e);if(!t)return null;const{message:n,originatingPeers:r}=t;return t.validated=!0,t.originatingPeers=new Set,{message:n,originatingPeers:r}}shift(){this.history[this.history.length-1].forEach((e=>{this.msgs.delete(e.msgIdStr)})),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}var i_=n(64482);const{RPC:a_}=i_,o_="/floodsub/1.0.0",c_="/meshsub/1.0.0",d_="/meshsub/1.1.0",l_=5e3;function u_(e=[],t){return{subscriptions:[],messages:e,control:t?{graft:t.graft||[],prune:t.prune||[],ihave:t.ihave||[],iwant:t.iwant||[]}:void 0}}function h_(e){if(e.length<=1)return e;for(let t=0;t<e.length;t++){const n=Math.floor(Math.random()*Math.floor(e.length)),r=e[t];e[t]=e[n],e[n]=r}return e}const p_=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),a=i.charCodeAt(0);if(255!==n[a])throw new TypeError(i+" is ambiguous");n[a]=s}var o=e.length,c=e.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*d+1>>>0,a=new Uint8Array(i);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var u=0,h=i-1;(0!==l||u<s)&&-1!==h;h--,u++)l+=o*a[h]>>>0,a[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");s=u,t++}if(" "!==e[t]){for(var p=i-s;p!==i&&0===a[p];)p++;for(var f=new Uint8Array(r+(i-p)),m=r;p!==i;)f[m++]=a[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,i=t.length;s!==i&&0===t[s];)s++,n++;for(var a=(i-s)*l+1>>>0,d=new Uint8Array(a);s!==i;){for(var u=t[s],h=0,p=a-1;(0!==u||h<r)&&-1!==p;p--,h++)u+=256*d[p]>>>0,d[p]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");r=h,s++}for(var f=a-r;f!==a&&0===d[f];)f++;for(var m=c.repeat(n);f<a;++f)m+=e.charAt(d[f]);return m},decodeUnsafe:u,decode:function(e){var n=u(e);if(n)return n;throw new Error(`Non-${t} character`)}}},f_=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class m_{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class __{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return g_(this,e)}}class y_{constructor(e){this.decoders=e}or(e){return g_(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const g_=(e,t)=>new y_({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class w_{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new m_(e,t,n),this.decoder=new __(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const b_=({name:e,prefix:t,encode:n,decode:r})=>new w_(e,t,n,r),v_=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=p_(n,t);return b_({prefix:e,name:t,encode:r,decode:e=>f_(s(e))})},k_=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>b_({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],s=(1<<n)-1;let i="",a=0,o=0;for(let r=0;r<e.length;++r)for(o=o<<8|e[r],a+=8;a>n;)a-=n,i+=t[s&o>>a];if(a&&(i+=t[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const s={};for(let e=0;e<t.length;++e)s[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,d=0;for(let t=0;t<i;++t){const i=s[e[t]];if(void 0===i)throw new SyntaxError(`Non-${r} character`);c=c<<n|i,o+=n,o>=8&&(o-=8,a[d++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a})(t,r,n,e)}),M_=b_({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),E_=k_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),L_=k_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),S_=v_({prefix:"9",name:"base10",alphabet:"0123456789"}),D_=k_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),T_=k_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),R_=k_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P_=k_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),I_=k_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),A_=k_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Y_=k_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),O_=k_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),N_=k_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x_=k_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),C_=k_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),H_=v_({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),j_=v_({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),B_=v_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),z_=v_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),U_=k_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),F_=k_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),V_=k_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),W_=k_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),$_=Array.from(""),G_=$_.reduce(((e,t,n)=>(e[n]=t,e)),[]),q_=$_.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]),K_=b_({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+G_[t]),"")},decode:function(e){const t=[];for(const n of e){const e=q_[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var Z_=Math.pow(2,31),J_=Math.pow(2,7),Q_=Math.pow(2,14),X_=Math.pow(2,21),ey=Math.pow(2,28),ty=Math.pow(2,35),ny=Math.pow(2,42),ry=Math.pow(2,49),sy=Math.pow(2,56),iy=Math.pow(2,63);const ay=function e(t,n,r){n=n||[];for(var s=r=r||0;t>=Z_;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},oy=function(e){return e<J_?1:e<Q_?2:e<X_?3:e<ey?4:e<ty?5:e<ny?6:e<ry?7:e<sy?8:e<iy?9:10},cy=(e,t,n=0)=>(ay(e,t,n),t),dy=e=>oy(e),ly=(e,t)=>{const n=t.byteLength,r=dy(e),s=r+dy(n),i=new Uint8Array(s+n);return cy(e,i,0),cy(n,i,r),i.set(t,s),new uy(e,n,t,i)};class uy{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const hy=({name:e,code:t,encode:n})=>new py(e,t,n);class py{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ly(this.code,t):t.then((e=>ly(this.code,e)))}throw Error("Unknown type, must be binary type")}}const fy=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),my=hy({name:"sha2-256",code:18,encode:fy("SHA-256")}),_y=hy({name:"sha2-512",code:19,encode:fy("SHA-512")}),yy=f_,gy={code:0,name:"identity",encode:yy,digest:e=>ly(0,yy(e))},wy="raw",by=85,vy=e=>f_(e),ky=e=>f_(e),My=new TextEncoder,Ey=new TextDecoder,Ly="json",Sy=512,Dy=e=>My.encode(JSON.stringify(e)),Ty=e=>JSON.parse(Ey.decode(e));n(82784);class Ry{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:cid_hidden,byteLength:cid_hidden,code:cid_readonly,version:cid_readonly,multihash:cid_readonly,bytes:cid_readonly,_baseCache:cid_hidden,asCID:cid_hidden})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ry.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=Digest.create(e,t);return Ry.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Digest.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:r}=this;return 0===n?toStringV0(t,r,e||base58btc.encoder):toStringV1(t,r,e||base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!(!e||!e[cidSymbol]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ry)return e;if(null!=e&&e.asCID===e){const{version:t,code:n,multihash:r,bytes:s}=e;return new Ry(t,n,r,s||encodeCID(t,n,r.bytes))}if(null!=e&&!0===e[cidSymbol]){const{version:t,multihash:n,code:r}=e,s=Digest.decode(n);return Ry.create(t,r,s)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new Ry(e,t,n,n.bytes);case 1:{const r=encodeCID(e,t,n.bytes);return new Ry(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Ry.create(0,DAG_PB_CODE,e)}static createV1(e,t){return Ry.create(1,e,t)}static decode(e){const[t,n]=Ry.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Ry.inspectBytes(e),n=t.size-t.multihashSize,r=coerce(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=r.subarray(t.multihashSize-t.digestSize),i=new Digest.Digest(t.multihashCode,t.digestSize,s,r);return[0===t.version?Ry.createV0(i):Ry.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){const t=()=>{const[t,n]=varint.decode(e.subarray(0));return t};let n=t(),r=DAG_PB_CODE;if(18===n||1===n&&t(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t(),i=t(),a=0+i;return{version:n,codec:r,multihashCode:s,digestSize:i,multihashSize:a-0,size:a}}static parse(e,t){const[n,r]=parseCIDtoBytes(e,t),s=Ry.decode(r);return s._baseCache.set(n,e),s}}Symbol.for("@ipld/js-cid/CID");const Py={...c,...d,...l,...u,...h,...p,...f,...m,..._,...y};function Iy(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Ay(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Iy(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Yy(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Oy=Yy("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Ny=Yy("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=Ay((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),xy={utf8:Oy,"utf-8":Oy,hex:Py.base16,latin1:Ny,ascii:Ny,binary:Ny,...Py};function Cy(e,t="utf8"){const n=xy[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Hy(e){return Cy(e,"base64")}const jy="StrictSign",By="StrictNoSign";var zy,Uy,Fy,Vy,Wy,$y;function Gy(e){switch(e){case Fy.Ignore:return Vy.Ignore;case Fy.Reject:return Vy.Reject}}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(zy||(zy={})),function(e){e[e.Signing=0]="Signing",e[e.Anonymous=1]="Anonymous"}(Uy||(Uy={})),function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(Fy||(Fy={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(Vy||(Vy={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(Wy||(Wy={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}($y||($y={}));const qy="ERR_INVALID_PEER_SCORE_PARAMS",Ky={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},Zy={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function Jy(e={}){return{...Ky,...e,topics:e.topics?Object.entries(e.topics).reduce(((e,[t,n])=>(e[t]=function(e={}){return{...Zy,...e}}(n),e)),{}):{}}}function Qy(e){if(e.topicWeight<0)throw B(new Error("invalid topic weight; must be >= 0"),qy);if(0===e.timeInMeshQuantum)throw B(new Error("invalid TimeInMeshQuantum; must be non zero"),qy);if(e.timeInMeshWeight<0)throw B(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),qy);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw B(new Error("invalid TimeInMeshQuantum; must be positive"),qy);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw B(new Error("invalid TimeInMeshCap; must be positive"),qy);if(e.firstMessageDeliveriesWeight<0)throw B(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),qy);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw B(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),qy);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw B(new Error("invalid FirstMessageDeliveriesCap; must be positive"),qy);if(e.meshMessageDeliveriesWeight>0)throw B(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),qy);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw B(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),qy);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw B(new Error("invalid MeshMessageDeliveriesCap; must be positive"),qy);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw B(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),qy);if(e.meshMessageDeliveriesWindow<0)throw B(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),qy);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw B(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),qy);if(e.meshFailurePenaltyWeight>0)throw B(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),qy);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw B(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),qy);if(e.invalidMessageDeliveriesWeight>0)throw B(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),qy);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw B(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),qy)}const Xy={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function eg(e={}){return{...Xy,...e}}function tg(e,t,n,r){let s=0;Object.entries(t.topics).forEach((([e,t])=>{const r=n.topics[e];if(void 0===r)return;let i=0;if(t.inMesh){let e=t.meshTime/r.timeInMeshQuantum;e>r.timeInMeshCap&&(e=r.timeInMeshCap),i+=e*r.timeInMeshWeight}let a=t.firstMessageDeliveries;if(a>r.firstMessageDeliveriesCap&&(a=r.firstMessageDeliveriesCap),i+=a*r.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<r.meshMessageDeliveriesThreshold){const e=r.meshMessageDeliveriesThreshold-t.meshMessageDeliveries;i+=e*e*r.meshMessageDeliveriesWeight}i+=t.meshFailurePenalty*r.meshFailurePenaltyWeight,i+=t.invalidMessageDeliveries*t.invalidMessageDeliveries*r.invalidMessageDeliveriesWeight,s+=i*r.topicWeight})),n.topicScoreCap>0&&s>n.topicScoreCap&&(s=n.topicScoreCap);const i=n.appSpecificScore(e);if(s+=i*n.appSpecificWeight,t.ips.forEach((e=>{if(n.IPColocationFactorWhitelist.has(e))return;const t=r.get(e),i=t?t.size:0;if(i>n.IPColocationFactorThreshold){const e=i-n.IPColocationFactorThreshold;s+=e*e*n.IPColocationFactorWeight}})),t.behaviourPenalty>n.behaviourPenaltyThreshold){const e=t.behaviourPenalty-n.behaviourPenaltyThreshold;s+=e*e*n.behaviourPenaltyWeight}return s}var ng,rg=n(19301);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(ng||(ng={}));class sg{constructor(){this.records=new Map,this.queue=new rg}ensureRecord(e){let t=this.records.get(e);if(t)return t;t={status:ng.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const n={msgId:e,expire:Date.now()+12e4};return this.queue.push(n),t}gc(){const e=Date.now();let t=this.queue.peekFront();for(;t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}var ig=n(40841);function ag(e){return null!=e&&"function"==typeof e.init}class og{constructor(e={}){this.started=!1,null!=e.peerId&&this.setPeerId(e.peerId),null!=e.addressManager&&this.setAddressManager(e.addressManager),null!=e.peerStore&&this.setPeerStore(e.peerStore),null!=e.upgrader&&this.setUpgrader(e.upgrader),null!=e.metrics&&this.setMetrics(e.metrics),null!=e.registrar&&this.setRegistrar(e.registrar),null!=e.connectionManager&&this.setConnectionManager(e.connectionManager),null!=e.transportManager&&this.setTransportManager(e.transportManager),null!=e.connectionGater&&this.setConnectionGater(e.connectionGater),null!=e.contentRouting&&this.setContentRouting(e.contentRouting),null!=e.peerRouting&&this.setPeerRouting(e.peerRouting),null!=e.datastore&&this.setDatastore(e.datastore),null!=e.connectionProtector&&this.setConnectionProtector(e.connectionProtector),null!=e.dht&&this.setDHT(e.dht),null!=e.pubsub&&this.setPubSub(e.pubsub),null!=e.dialer&&this.setDialer(e.dialer)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.beforeStart&&await e.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{await e.start()}))),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.afterStart&&await e.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.beforeStop&&await e.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{await e.stop()}))),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.afterStop&&await e.afterStop()})))}setPeerId(e){return this.peerId=e,e}getPeerId(){if(null==this.peerId)throw B(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(e){return this.metrics=e,ag(e)&&e.init(this),e}getMetrics(){return this.metrics}setAddressManager(e){return this.addressManager=e,ag(e)&&e.init(this),e}getAddressManager(){if(null==this.addressManager)throw B(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(e){return this.peerStore=e,ag(e)&&e.init(this),e}getPeerStore(){if(null==this.peerStore)throw B(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(e){return this.upgrader=e,ag(e)&&e.init(this),e}getUpgrader(){if(null==this.upgrader)throw B(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(e){return this.registrar=e,ag(e)&&e.init(this),e}getRegistrar(){if(null==this.registrar)throw B(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(e){return this.connectionManager=e,ag(e)&&e.init(this),e}getConnectionManager(){if(null==this.connectionManager)throw B(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(e){return this.transportManager=e,ag(e)&&e.init(this),e}getTransportManager(){if(null==this.transportManager)throw B(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(e){return this.connectionGater=e,ag(e)&&e.init(this),e}getConnectionGater(){if(null==this.connectionGater)throw B(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(e){return this.contentRouting=e,ag(e)&&e.init(this),e}getContentRouting(){if(null==this.contentRouting)throw B(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(e){return this.peerRouting=e,ag(e)&&e.init(this),e}getPeerRouting(){if(null==this.peerRouting)throw B(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(e){return this.datastore=e,ag(e)&&e.init(this),e}getDatastore(){if(null==this.datastore)throw B(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(e){return this.connectionProtector=e,ag(e)&&e.init(this),e}getConnectionProtector(){return this.connectionProtector}setDHT(e){return this.dht=e,ag(e)&&e.init(this),e}getDHT(){if(null==this.dht)throw B(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(e){return this.pubsub=e,ag(e)&&e.init(this),e}getPubSub(){if(null==this.pubsub)throw B(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}setDialer(e){return this.dialer=e,ag(e)&&e.init(this),e}getDialer(){if(null==this.dialer)throw B(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this.dialer}}const cg=(0,j.kg)("libp2p:gossipsub:score");class dg{constructor(e,t,n){this.params=e,this.metrics=t,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new sg,this.components=new og,function(e){for(const[t,n]of Object.entries(e.topics))try{Qy(n)}catch(e){throw B(new Error(`invalid score parameters for topic ${t}: ${e.message}`),qy)}if(e.topicScoreCap<0)throw B(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),qy);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw B(new Error("missing application specific score function"),qy);if(e.IPColocationFactorWeight>0)throw B(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),qy);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw B(new Error("invalid IPColocationFactorThreshold; must be at least 1"),qy);if(e.behaviourPenaltyWeight>0)throw B(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),qy);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw B(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),qy);if(e.decayInterval<1e3)throw B(new Error("invalid DecayInterval; must be at least 1s"),qy);if(e.decayToZero<=0||e.decayToZero>=1)throw B(new Error("invalid DecayToZero; must be between 0 and 1"),qy)}(e),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=n.computeScore??tg}init(e){this.components=e}get size(){return this.peerStats.size}start(){this._backgroundInterval?cg("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),cg("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),cg("stopped")):cg("Peer score already stopped")}background(){this.refreshScores(),this.updateIPs(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((([e,t])=>[e,t])))}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach(((n,r)=>{n.connected?(Object.entries(n.topics).forEach((([n,r])=>{const s=this.params.topics[n];void 0!==s&&(r.firstMessageDeliveries*=s.firstMessageDeliveriesDecay,r.firstMessageDeliveries<t&&(r.firstMessageDeliveries=0),r.meshMessageDeliveries*=s.meshMessageDeliveriesDecay,r.meshMessageDeliveries<t&&(r.meshMessageDeliveries=0),r.meshFailurePenalty*=s.meshFailurePenaltyDecay,r.meshFailurePenalty<t&&(r.meshFailurePenalty=0),r.invalidMessageDeliveries*=s.invalidMessageDeliveriesDecay,r.invalidMessageDeliveries<t&&(r.invalidMessageDeliveries=0),r.inMesh&&(r.meshTime=e-r.graftTime,r.meshTime>s.meshMessageDeliveriesActivation&&(r.meshMessageDeliveriesActive=!0)))})),n.behaviourPenalty*=this.params.behaviourPenaltyDecay,n.behaviourPenalty<t&&(n.behaviourPenalty=0)):e>n.expire&&(this.removeIPs(r,n.ips),this.peerStats.delete(r),this.scoreCache.delete(r))}))}score(e){this.metrics?.scoreFnCalls.inc();const t=this.peerStats.get(e);if(!t)return 0;const n=Date.now(),r=this.scoreCache.get(e);if(r&&r.cacheUntil>n)return r.score;this.metrics?.scoreFnRuns.inc();const s=this.computeScore(e,t,this.params,this.peerIPs),i=n+this.scoreCacheValidityMs;return r?(this.metrics?.scoreCachedDelta.observe(Math.abs(s-r.score)),r.score=s,r.cacheUntil=i):this.scoreCache.set(e,{score:s,cacheUntil:i}),s}addPenalty(e,t,n){const r=this.peerStats.get(e);r&&(r.behaviourPenalty+=t,this.metrics?.onScorePenalty(n))}addPeer(e){const t={connected:!0,expire:0,topics:{},ips:[],behaviourPenalty:0};this.peerStats.set(e,t);const n=this.getIPs(e);this.setIPs(e,n,t.ips),t.ips=n}removePeer(e){const t=this.peerStats.get(e);if(t){if(this.score(e)>0)return this.removeIPs(e,t.ips),void this.peerStats.delete(e);Object.entries(t.topics).forEach((([e,t])=>{t.firstMessageDeliveries=0;const n=this.params.topics[e].meshMessageDeliveriesThreshold;if(t.inMesh&&t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<n){const e=n-t.meshMessageDeliveries;t.meshFailurePenalty+=e*e}t.inMesh=!1,t.meshMessageDeliveriesActive=!1})),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);if(e){const n=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<n){const t=n-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,n){this.markFirstMessageDelivery(e,n);const r=this.deliveryRecords.ensureRecord(t),s=Date.now();r.status===ng.unknown?(r.status=ng.valid,r.validated=s,r.peers.forEach((t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,n)}))):cg("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,s-r.firstSeen,ng[r.status])}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,n,r){switch(r){case Vy.Error:return void this.markInvalidMessageDelivery(e,n);case Vy.Blacklisted:return}const s=this.deliveryRecords.ensureRecord(t);if(s.status===ng.unknown){if(r===Vy.Ignore)return s.status=ng.ignored,void s.peers.clear();s.status=ng.invalid,this.markInvalidMessageDelivery(e,n),s.peers.forEach((e=>{this.markInvalidMessageDelivery(e,n)})),s.peers.clear()}else cg("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-s.firstSeen,ng[s.status])}duplicateMessage(e,t,n){const r=this.deliveryRecords.ensureRecord(t);if(!r.peers.has(e))switch(r.status){case ng.unknown:r.peers.add(e);break;case ng.valid:r.peers.add(e),this.markDuplicateMessageDelivery(e,n,r.validated);break;case ng.invalid:this.markInvalidMessageDelivery(e,n);case ng.ignored:}}markInvalidMessageDelivery(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const n=this.peerStats.get(e);if(n){const e=this.getPtopicStats(n,t);if(e){let n=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(n,e.firstMessageDeliveries+1),e.inMesh&&(n=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries=Math.min(n,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,n){const r=this.peerStats.get(e);if(r){const e=void 0!==n?Date.now():0,s=this.getPtopicStats(r,t);if(s&&s.inMesh){const r=this.params.topics[t];if(void 0!==n){const s=e-n,i=s>r.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(t,s,i),i)return}const i=r.meshMessageDeliveriesCap;s.meshMessageDeliveries=Math.min(i,s.meshMessageDeliveries+1)}}}getIPs(e){return this.components.getConnectionManager().getConnections((0,Nr.jE)(e)).map((e=>e.remoteAddr.toOptions().host))}setIPs(e,t,n){e:for(const r of t){for(const e of n)if(r===e)continue e;let t=this.peerIPs.get(r);t||(t=new Set,this.peerIPs.set(r,t)),t.add(e)}e:for(const r of n){for(const e of t)if(r===e)continue e;const n=this.peerIPs.get(r);n&&(n.delete(e),n.size||this.peerIPs.delete(r))}}removeIPs(e,t){t.forEach((t=>{const n=this.peerIPs.get(t);n&&(n.delete(e),n.size||this.peerIPs.delete(t))}))}updateIPs(){this.peerStats.forEach(((e,t)=>{const n=this.getIPs(t);this.setIPs(t,n,e.ips),e.ips=n}))}getPtopicStats(e,t){let n=e.topics[t];return void 0!==n?n:void 0!==this.params.topics[t]?(n={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=n,n):null}}class lg{constructor(e,t,n){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=n,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const n=t[Math.floor(Math.random()*t.length)],r=this.msgIdToStrFn(n);let s=this.promises.get(r);s||(s=new Map,this.promises.set(r,s));const i=Date.now();s.has(e)||(s.set(e,i+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(r)||this.requestMsByMsg.set(r,i)))}getBrokenPromises(){const e=Date.now(),t=new Map;let n=0;return this.promises.forEach(((r,s)=>{r.forEach(((s,i)=>{s<e&&(t.set(i,(t.get(i)??0)+1),r.delete(i),n++)})),r.size||this.promises.delete(s)})),this.metrics?.iwantPromiseBroken.inc(n),t}deliverMessage(e){this.trackMessage(e);const t=this.promises.get(e);t&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(t.size)))}rejectMessage(e,t){this.trackMessage(e),t!==Vy.Error&&this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;for(const[t,n]of this.requestMsByMsg.entries()){if(!(n<e))break;this.requestMsByMsg.delete(t)}}trackMessage(e){if(this.metrics){const t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}class ug{constructor(e){this.entries=new Map,this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs})}prune(){const e=Date.now();for(const[t,n]of this.entries.entries()){if(!(n.validUntilMs<e))break;this.entries.delete(t)}}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var hg,pg,fg,mg,_g,yg;function gg(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=Ay(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return Iy(n)}!function(e){e.forward="forward",e.publish="publish"}(hg||(hg={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(pg||(pg={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Unsub="unsubscribed",e.Excess="excess"}(fg||(fg={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(mg||(mg={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(_g||(_g={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(yg||(yg={}));var wg=n(31490);const bg=function(e,t="utf8"){const n=xy[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):Iy(globalThis.Buffer.from(e,"utf-8"))}("libp2p-pubsub:");const vg=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),a=i.charCodeAt(0);if(255!==n[a])throw new TypeError(i+" is ambiguous");n[a]=s}var o=e.length,c=e.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*d+1>>>0,a=new Uint8Array(i);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var u=0,h=i-1;(0!==l||u<s)&&-1!==h;h--,u++)l+=o*a[h]>>>0,a[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");s=u,t++}if(" "!==e[t]){for(var p=i-s;p!==i&&0===a[p];)p++;for(var f=new Uint8Array(r+(i-p)),m=r;p!==i;)f[m++]=a[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,i=t.length;s!==i&&0===t[s];)s++,n++;for(var a=(i-s)*l+1>>>0,d=new Uint8Array(a);s!==i;){for(var u=t[s],h=0,p=a-1;(0!==u||h<r)&&-1!==p;p--,h++)u+=256*d[p]>>>0,d[p]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");r=h,s++}for(var f=a-r;f!==a&&0===d[f];)f++;for(var m=c.repeat(n);f<a;++f)m+=e.charAt(d[f]);return m},decodeUnsafe:u,decode:function(e){var n=u(e);if(n)return n;throw new Error(`Non-${t} character`)}}},kg=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class Mg{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Eg{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Sg(this,e)}}class Lg{constructor(e){this.decoders=e}or(e){return Sg(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sg=(e,t)=>new Lg({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Dg{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Mg(e,t,n),this.decoder=new Eg(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Tg=({name:e,prefix:t,encode:n,decode:r})=>new Dg(e,t,n,r),Rg=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=vg(n,t);return Tg({prefix:e,name:t,encode:r,decode:e=>kg(s(e))})},Pg=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Tg({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],s=(1<<n)-1;let i="",a=0,o=0;for(let r=0;r<e.length;++r)for(o=o<<8|e[r],a+=8;a>n;)a-=n,i+=t[s&o>>a];if(a&&(i+=t[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const s={};for(let e=0;e<t.length;++e)s[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,d=0;for(let t=0;t<i;++t){const i=s[e[t]];if(void 0===i)throw new SyntaxError(`Non-${r} character`);c=c<<n|i,o+=n,o>=8&&(o-=8,a[d++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a})(t,r,n,e)}),Ig=Tg({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Ag=Pg({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yg=Pg({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Og=Rg({prefix:"9",name:"base10",alphabet:"0123456789"}),Ng=Pg({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xg=Pg({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Cg=Pg({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hg=Pg({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jg=Pg({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bg=Pg({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zg=Pg({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ug=Pg({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fg=Pg({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vg=Pg({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Wg=Pg({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),$g=Rg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gg=Rg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),qg=Rg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Kg=Rg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Zg=Pg({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jg=Pg({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qg=Pg({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Xg=Pg({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ew=Array.from(""),tw=ew.reduce(((e,t,n)=>(e[n]=t,e)),[]),nw=ew.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]),rw=Tg({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+tw[t]),"")},decode:function(e){const t=[];for(const n of e){const e=nw[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var sw=Math.pow(2,31),iw=Math.pow(2,7),aw=Math.pow(2,14),ow=Math.pow(2,21),cw=Math.pow(2,28),dw=Math.pow(2,35),lw=Math.pow(2,42),uw=Math.pow(2,49),hw=Math.pow(2,56),pw=Math.pow(2,63);const fw=function e(t,n,r){n=n||[];for(var s=r=r||0;t>=sw;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},mw=function(e){return e<iw?1:e<aw?2:e<ow?3:e<cw?4:e<dw?5:e<lw?6:e<uw?7:e<hw?8:e<pw?9:10},_w=(e,t,n=0)=>(fw(e,t,n),t),yw=e=>mw(e),gw=(e,t)=>{const n=t.byteLength,r=yw(e),s=r+yw(n),i=new Uint8Array(s+n);return _w(e,i,0),_w(n,i,r),i.set(t,s),new ww(e,n,t,i)};class ww{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const bw=({name:e,code:t,encode:n})=>new vw(e,t,n);class vw{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?gw(this.code,t):t.then((e=>gw(this.code,e)))}throw Error("Unknown type, must be binary type")}}const kw=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Mw=bw({name:"sha2-256",code:18,encode:kw("SHA-256")}),Ew=bw({name:"sha2-512",code:19,encode:kw("SHA-512")}),Lw=kg,Sw={code:0,name:"identity",encode:Lw,digest:e=>gw(0,Lw(e))},Dw="raw",Tw=85,Rw=e=>kg(e),Pw=e=>kg(e),Iw=new TextEncoder,Aw=new TextDecoder,Yw="json",Ow=512,Nw=e=>Iw.encode(JSON.stringify(e)),xw=e=>JSON.parse(Aw.decode(e));n(82784);class Cw{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:src_cid_hidden,byteLength:src_cid_hidden,code:src_cid_readonly,version:src_cid_readonly,multihash:src_cid_readonly,bytes:src_cid_readonly,_baseCache:src_cid_hidden,asCID:src_cid_hidden})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Cw.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=Digest.create(e,t);return Cw.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Digest.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:r}=this;return 0===n?cid_toStringV0(t,r,e||base58btc.encoder):cid_toStringV1(t,r,e||base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return cid_deprecate(/^0\.0/,cid_IS_CID_DEPRECATION),!(!e||!e[cid_cidSymbol]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Cw)return e;if(null!=e&&e.asCID===e){const{version:t,code:n,multihash:r,bytes:s}=e;return new Cw(t,n,r,s||cid_encodeCID(t,n,r.bytes))}if(null!=e&&!0===e[cid_cidSymbol]){const{version:t,multihash:n,code:r}=e,s=Digest.decode(n);return Cw.create(t,r,s)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${cid_DAG_PB_CODE}) block encoding`);return new Cw(e,t,n,n.bytes);case 1:{const r=cid_encodeCID(e,t,n.bytes);return new Cw(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Cw.create(0,cid_DAG_PB_CODE,e)}static createV1(e,t){return Cw.create(1,e,t)}static decode(e){const[t,n]=Cw.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Cw.inspectBytes(e),n=t.size-t.multihashSize,r=coerce(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=r.subarray(t.multihashSize-t.digestSize),i=new Digest.Digest(t.multihashCode,t.digestSize,s,r);return[0===t.version?Cw.createV0(i):Cw.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){const t=()=>{const[t,n]=varint.decode(e.subarray(0));return t};let n=t(),r=cid_DAG_PB_CODE;if(18===n||1===n&&t(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t(),i=t(),a=0+i;return{version:n,codec:r,multihashCode:s,digestSize:i,multihashSize:a-0,size:a}}static parse(e,t){const[n,r]=cid_parseCIDtoBytes(e,t),s=Cw.decode(r);return s._baseCache.set(n,e),s}}Symbol.for("@ipld/js-cid/CID");const Hw={...k,...M,...E,...L,...S,...D,...T,...R,...P,...I};function jw(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Bw(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const zw=Bw("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Uw=Bw("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?jw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Fw={utf8:zw,"utf-8":zw,hex:Hw.base16,latin1:Uw,ascii:Uw,binary:Uw,...Hw};function Vw(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return((e,t)=>{const n=function(e,t="utf8"){const n=Fw[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):jw(globalThis.Buffer.from(e,"utf-8"))}(t.toString(16).padStart(16,"0"),"base16"),r=new Uint8Array(e.length+n.length);return r.set(e,0),r.set(n,e.length),r})(e.from.toBytes(),e.sequenceNumber)}async function Ww(e){return await my.encode(e.data)}function $w(e,t,n,r,s){let i=0;const a=new Map;if(Object.entries(t.topics).forEach((([e,t])=>{const r=s.get(e)??"unknown",o=n.topics[e];if(void 0===o)return;let c=a.get(r);c||(c={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},a.set(r,c));let d=0,l=0,u=0,h=0,p=0;t.inMesh&&(d+=Math.max(t.meshTime/o.timeInMeshQuantum,o.timeInMeshCap)*o.timeInMeshWeight);let f=t.firstMessageDeliveries;if(f>o.firstMessageDeliveriesCap&&(f=o.firstMessageDeliveriesCap),l+=f*o.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<o.meshMessageDeliveriesThreshold){const e=o.meshMessageDeliveriesThreshold-t.meshMessageDeliveries;u+=e*e*o.meshMessageDeliveriesWeight}h+=t.meshFailurePenalty*o.meshFailurePenaltyWeight,p+=t.invalidMessageDeliveries*t.invalidMessageDeliveries*o.invalidMessageDeliveriesWeight,i+=(d+l+u+h+p)*o.topicWeight,c.p1w+=d,c.p2w+=l,c.p3w+=u,c.p3bw+=h,c.p4w+=p})),n.topicScoreCap>0&&i>n.topicScoreCap){i=n.topicScoreCap;const e=n.topicScoreCap/i;for(const t of a.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let o=0,c=0,d=0;return o+=n.appSpecificScore(e)*n.appSpecificWeight,t.ips.forEach((e=>{if(n.IPColocationFactorWhitelist.has(e))return;const t=r.get(e),s=t?t.size:0;if(s>n.IPColocationFactorThreshold){const e=s-n.IPColocationFactorThreshold;c+=e*e*n.IPColocationFactorWeight}})),d+=t.behaviourPenalty*t.behaviourPenalty*n.behaviourPenaltyWeight,i+=o+c+d,{byTopic:a,p5w:o,p6w:c,p7w:d,score:i}}function Gw(e,t,n=(()=>!0)){const r=new Set;if(t<=0)return r;for(const s of e){if(r.size>=t)break;n(s)&&(r.add(s),e.delete(s))}return r}var qw,Kw=n(50351),Zw=n(97177);class Jw{constructor(e,t,n){this.rawStream=e,this.pushable=(0,Ss.d)({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=n.maxBufferSize??1/0,(0,ki.zG)((0,Kw.wJ)(this.pushable,this.closeController.signal,{returnOnAbort:!0}),(0,Zw.c)(),this.rawStream).catch(t)}get protocol(){return this.rawStream.stat.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}close(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}}class Qw{constructor(e){this.rawStream=e,this.closeController=new AbortController,this.source=(0,Kw.wJ)((0,ki.zG)(this.rawStream,(0,Zw.J)()),this.closeController.signal,{returnOnAbort:!0})}close(){this.closeController.abort(),this.rawStream.close()}}!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(qw||(qw={}));class Xw extends r_.v{constructor(e={}){super(),this.multicodecs=[d_,c_],this.peers=new Set,this.streamsInbound=new Map,this.streamsOutbound=new Map,this.outboundInflightQueue=(0,Ss.d)({objectMode:!0}),this.direct=new Set,this.floodsubPeers=new Set,this.acceptFromWhitelist=new Map,this.topics=new Map,this.subscriptions=new Set,this.mesh=new Map,this.fanout=new Map,this.fanoutLastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.topicValidators=new Map,this.heartbeatTicks=0,this.components=new og,this.directPeerInitial=null,this.status={code:qw.stopped},this.heartbeatTimer=null,this.runHeartbeat=()=>{const e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch((e=>{this.log("Error running heartbeat",e)})).finally((()=>{if(null!=e&&e(),this.status.code===qw.started){clearTimeout(this.status.heartbeatTimeout);let e=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;e<.25*this.opts.heartbeatInterval&&(e+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,e)}}))};const t={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,...e,scoreParams:Jy(e.scoreParams),scoreThresholds:eg(e.scoreThresholds)};if(this.globalSignaturePolicy=t.globalSignaturePolicy??jy,t.fallbackToFloodsub&&this.multicodecs.push(o_),this.log=(0,j.kg)(t.debugName??"libp2p:gossipsub"),this.opts=t,this.direct=new Set(t.directPeers.map((e=>e.id.toString()))),this.seenCache=new ug({validityMs:t.seenTTL}),this.publishedMessageIds=new ug({validityMs:t.seenTTL}),e.msgIdFn)this.msgIdFn=e.msgIdFn;else switch(this.globalSignaturePolicy){case jy:this.msgIdFn=Vw;break;case By:this.msgIdFn=Ww}if(e.fastMsgIdFn&&(this.fastMsgIdFn=e.fastMsgIdFn,this.fastMsgIdCache=new ug({validityMs:t.seenTTL})),this.msgIdToStrFn=e.msgIdToStrFn??Hy,this.mcache=e.messageCache||new s_(t.mcacheGossip,t.mcacheLength,this.msgIdToStrFn),e.dataTransform&&(this.dataTransform=e.dataTransform),e.metricsRegister){if(!e.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");const n=Math.max(...Object.values(t.scoreParams.topics).map((e=>e.meshMessageDeliveriesWindow)),1e3),r=function(e,t,n){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*n.maxMeshMessageDeliveriesWindowSec,.5*n.maxMeshMessageDeliveriesWindowSec,1*n.maxMeshMessageDeliveriesWindowSec,2*n.maxMeshMessageDeliveriesWindowSec,4*n.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*n.behaviourPenaltyThreshold,.5*n.behaviourPenaltyThreshold,1*n.behaviourPenaltyThreshold,2*n.behaviourPenaltyThreshold,4*n.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*n.gossipPromiseExpireSec,1*n.gossipPromiseExpireSec,2*n.gossipPromiseExpireSec,4*n.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),topicStrToLabel:t,toTopic(e){return this.topicStrToLabel.get(e)??e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,n){const r=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:r,reason:t},n)},onRemoveFromMesh(e,t,n){const r=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:r,reason:t},n)},onReportValidationMcacheHit(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation(e,t){const n=this.toTopic(e);this.asyncValidationResult.inc({topic:n,acceptance:t})},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,n){const r=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:r},t),this.ihaveRcvNotSeenMsgids.inc({topic:r},n)},onIwantRcv(e,t){for(const[t,n]of e){const e=this.toTopic(t);this.iwantRcvMsgids.inc({topic:e},n)}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){const n=this.toTopic(e);this.msgForwardCount.inc({topic:n},1),this.msgForwardPeers.inc({topic:n},t)},onPublishMsg(e,t,n,r){const s=this.toTopic(e);this.msgPublishCount.inc({topic:s},1),this.msgPublishBytes.inc({topic:s},n*r),this.msgPublishPeers.inc({topic:s},n),this.msgPublishPeersByGroup.inc({topic:s,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:s,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:s,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:s,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation(e){const t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult(e,t){const n=this.toTopic(e);this.msgReceivedStatus.inc({topic:n,status:t})},onMsgRecvInvalid(e,t){const n=this.toTopic(e),r=t.reason===Vy.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:n,error:r},1)},onDuplicateMsgDelivery(e,t,n){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),n){const t=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:t},1)}},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),e.messages&&this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),e.messages&&this.rpcSentMessage.inc(e.messages.length),e.control){const t=e.control.ihave?.length??0,n=e.control.iwant?.length??0,r=e.control.graft?.length??0,s=e.control.prune?.length??0;t>0&&this.rpcSentIHave.inc(t),n>0&&this.rpcSentIWant.inc(n),r>0&&this.rpcSentGraft.inc(r),s>0&&this.rpcSentPrune.inc(s),(t>0||n>0||r>0||s>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let n=0,r=0,s=0,i=0;for(const a of e)a>=t.graylistThreshold&&n++,a>=t.publishThreshold&&r++,a>=t.gossipThreshold&&s++,a>=0&&i++;this.peersByScoreThreshold.set({threshold:yg.graylist},n),this.peersByScoreThreshold.set({threshold:yg.publish},r),this.peersByScoreThreshold.set({threshold:yg.gossip},s),this.peersByScoreThreshold.set({threshold:yg.mesh},i),this.score.set(e)},registerScoreWeights(e){for(const[t,n]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},n.p1w),this.scoreWeights.set({topic:t,p:"p2"},n.p2w),this.scoreWeights.set({topic:t,p:"p3"},n.p3w),this.scoreWeights.set({topic:t,p:"p3b"},n.p3bw),this.scoreWeights.set({topic:t,p:"p4"},n.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){const n=new Map;e.forEach(((e,t)=>{const r=this.topicStrToLabel.get(t)??"unknown";let s=n.get(r);s||(s=new Set,n.set(r,s)),e.forEach((e=>s?.add(e)))}));for(const[e,r]of n){const n=[];r.forEach((e=>{n.push(t.get(e)??0)})),this.scorePerMesh.set({topic:e},n)}}}}(e.metricsRegister,e.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:t.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:n/1e3});r.mcacheSize.addCollect((()=>this.onScrapeMetrics(r)));for(const e of this.multicodecs)r.protocolsEnabled.set({protocol:e},1);this.metrics=r}else this.metrics=null;this.gossipTracer=new lg(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new dg(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:t.heartbeatInterval}),this.maxInboundStreams=e.maxInboundStreams,this.maxOutboundStreams=e.maxOutboundStreams}getPeers(){return[...this.peers.keys()].map((e=>(0,Nr.jE)(e)))}isStarted(){return this.status.code===qw.started}async init(e){this.components=e,this.score.init(e)}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await async function(e,t){switch(e){case jy:{if(!t)throw Error("Must provide PeerId");if(null==t.privateKey)throw Error("Cannot sign message, no private key present");if(null==t.publicKey)throw Error("Cannot sign message, no public key present");const e=await(0,$r.unmarshalPrivateKey)(t.privateKey);return{type:Uy.Signing,author:t,key:t.publicKey,privateKey:e}}case By:return{type:Uy.Anonymous};default:throw new Error(`Unknown signature policy "${e}"`)}}(this.globalSignaturePolicy,this.components.getPeerId()),this.outboundInflightQueue=(0,Ss.d)({objectMode:!0}),(0,ki.zG)(this.outboundInflightQueue,(async e=>{for await(const{peerId:t,connection:n}of e)await this.createOutboundStream(t,n)})).catch((e=>this.log.error("outbound inflight queue error",e))),await Promise.all(this.opts.directPeers.map((async e=>{await this.components.getPeerStore().addressBook.add(e.id,e.addrs)})));const e=this.components.getRegistrar();await Promise.all(this.multicodecs.map((t=>e.handle(t,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))));const t=n_({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),n=await Promise.all(this.multicodecs.map((n=>e.register(n,t)))),r=setTimeout(this.runHeartbeat,100);this.status={code:qw.started,registrarTopologyIds:n,heartbeatTimeout:r,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout((()=>{Promise.resolve().then((async()=>{await Promise.all(Array.from(this.direct).map((async e=>await this.connect(e))))})).catch((e=>{this.log(e)}))}),1e3),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==qw.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:qw.stopped};const t=this.components.getRegistrar();e.forEach((e=>t.unregister(e))),this.outboundInflightQueue.end();for(const e of this.streamsOutbound.values())e.close();this.streamsOutbound.clear();for(const e of this.streamsInbound.values())e.close();this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:t}){if(!this.isStarted())return;const n=t.remotePeer;this.addPeer(n,t.stat.direction),this.createInboundStream(n,e),this.outboundInflightQueue.push({peerId:n,connection:t})}onPeerConnected(e,t){this.isStarted()&&(this.addPeer(e,t.stat.direction),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){if(!this.isStarted())return;const n=e.toString();if(this.peers.has(n)&&!this.streamsOutbound.has(n))try{const r=new Jw(await t.newStream(this.multicodecs),(e=>this.log.error("outbound pipe error",e)),{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(n,r);const s=r.protocol;s===o_&&this.floodsubPeers.add(n),this.metrics?.peersPerProtocol.inc({protocol:s},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0))}catch(e){this.log.error("createOutboundStream error",e)}}async createInboundStream(e,t){if(!this.isStarted())return;const n=e.toString();if(!this.peers.has(n))return;const r=this.streamsInbound.get(n);void 0!==r&&(this.log("replacing existing inbound steam %s",n),r.close()),this.log("create inbound stream %s",n);const s=new Qw(t);this.streamsInbound.set(n,s),this.pipePeerReadStream(e,s.source).catch((e=>this.log(e)))}addPeer(e,t){const n=e.toString();this.peers.has(n)||(this.log("new peer %p",e),this.peers.add(n),this.score.addPeer(n),this.outbound.has(n)||this.outbound.set(n,"outbound"===t))}removePeer(e){const t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);const n=this.streamsOutbound.get(t),r=this.streamsInbound.get(t);n&&this.metrics?.peersPerProtocol.inc({protocol:n.protocol},-1),n?.close(),r?.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);for(const e of this.topics.values())e.delete(t);for(const[e,n]of this.mesh)!0===n.delete(t)&&this.metrics?.onRemoveFromMesh(e,fg.Dc,1);for(const e of this.fanout.values())e.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===qw.started}getMeshPeers(e){const t=this.mesh.get(e);return t?Array.from(t):[]}getSubscribers(e){const t=this.topics.get(e);return(t?Array.from(t):[]).map((e=>(0,Nr.jE)(e)))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await(0,ki.zG)(t,(async t=>{for await(const n of t)try{const t=n.subarray(),r=a_.decode(t);this.metrics?.onRpcRecv(r,t.length),this.opts.awaitRpcHandler?await this.handleReceivedRpc(e,r):this.handleReceivedRpc(e,r).catch((e=>this.log(e)))}catch(e){this.log(e)}}))}catch(t){this.log.error(t),this.onPeerDisconnected(e)}}async handleReceivedRpc(e,t){if(!this.acceptFrom(e.toString()))return this.log("received message from unacceptable peer %p",e),void this.metrics?.rpcRecvNotAccepted.inc();if(this.log("rpc from %p",e),t.subscriptions&&t.subscriptions.length>0&&(t.subscriptions.forEach((t=>{this.handleReceivedSubscription(e,t)})),this.dispatchEvent(new r_.A("subscription-change",{detail:{peerId:e,subscriptions:t.subscriptions.filter((e=>null!==e.topic)).map((e=>({topic:e.topic??"",subscribe:Boolean(e.subscribe)})))}}))),t.messages)for(const n of t.messages){const t=this.handleReceivedMessage(e,n).catch((e=>this.log(e)));this.opts.awaitRpcMessageHandler&&await t}t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t){if(null==t.topic)return;this.log("subscription update from %p topic %s",e,t.topic);let n=this.topics.get(t.topic);null==n&&(n=new Set,this.topics.set(t.topic,n)),t.subscribe?n.add(e.toString()):n.delete(e.toString())}async handleReceivedMessage(e,t){this.metrics?.onMsgRecvPreValidation(t.topic);const n=await this.validateReceivedMessage(e,t);switch(this.metrics?.onMsgRecvResult(t.topic,n.code),n.code){case $y.duplicate:return this.score.duplicateMessage(e.toString(),n.msgIdStr,t.topic),void this.mcache.observeDuplicate(n.msgIdStr,e.toString());case $y.invalid:if(n.msgIdStr){const r=n.msgIdStr;this.score.rejectMessage(e.toString(),r,t.topic,n.reason),this.gossipTracer.rejectMessage(r,n.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);return void this.metrics?.onMsgRecvInvalid(t.topic,n);case $y.valid:this.score.validateMessage(n.messageId.msgIdStr),this.gossipTracer.deliverMessage(n.messageId.msgIdStr),this.mcache.put(n.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)&&(this.components.getPeerId().equals(e)&&!this.opts.emitSelf||(super.dispatchEvent(new r_.A("gossipsub:message",{detail:{propagationSource:e,msgId:n.messageId.msgIdStr,msg:n.msg}})),super.dispatchEvent(new r_.A("message",{detail:n.msg})))),this.opts.asyncValidation||this.forwardMessage(n.messageId.msgIdStr,t,e.toString())}}async validateReceivedMessage(e,t){const n=this.fastMsgIdFn?.(t),r=n?this.fastMsgIdCache?.get(n):void 0;if(r)return{code:$y.duplicate,msgIdStr:r};const s=await async function(e,t){switch(e){case By:return null!=t.signature?{valid:!1,error:Wy.SignaturePresent}:null!=t.seqno?{valid:!1,error:Wy.SeqnoPresent}:null!=t.key?{valid:!1,error:Wy.FromPresent}:{valid:!0,message:{type:"unsigned",topic:t.topic,data:t.data??new Uint8Array(0)}};case jy:{if(null==t.seqno)return{valid:!1,error:Wy.InvalidSeqno};if(8!==t.seqno.length)return{valid:!1,error:Wy.InvalidSeqno};if(null==t.signature)return{valid:!1,error:Wy.InvalidSignature};if(null==t.from)return{valid:!1,error:Wy.InvalidPeerId};let e,n;try{e=(0,Nr.cv)(t.from)}catch(e){return{valid:!1,error:Wy.InvalidPeerId}}if(t.key){if(n=(0,$r.unmarshalPublicKey)(t.key),void 0!==e.publicKey&&!function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(n.bytes,e.publicKey))return{valid:!1,error:Wy.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:Wy.InvalidPeerId};n=(0,$r.unmarshalPublicKey)(e.publicKey)}const r={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},s=gg([bg,a_.Message.encode(r).finish()]);return await n.verify(s,t.signature)?{valid:!0,message:{type:"signed",from:e,data:t.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${Cy(t.seqno,"base16")}`),topic:t.topic,signature:t.signature,key:t.key??(0,$r.marshalPublicKey)(n)}}:{valid:!1,error:Wy.InvalidSignature}}}}(this.globalSignaturePolicy,t);if(!s.valid)return{code:$y.invalid,reason:Vy.Error,error:s.error};const i=s.message;try{this.dataTransform&&(i.data=this.dataTransform.inboundTransform(t.topic,i.data))}catch(e){return this.log("Invalid message, transform failed",e),{code:$y.invalid,reason:Vy.Error,error:Wy.TransformFailed}}const a=await this.msgIdFn(i),o=this.msgIdToStrFn(a),c={msgId:a,msgIdStr:o};if(n&&this.fastMsgIdCache?.put(n,o),this.seenCache.has(o))return{code:$y.duplicate,msgIdStr:o};this.seenCache.put(o);const d=this.topicValidators.get(t.topic);if(null!=d){let t;try{t=await d(i.topic,i,e)}catch(e){const n=e.code;"ERR_TOPIC_VALIDATOR_IGNORE"===n&&(t=Fy.Ignore),t="ERR_TOPIC_VALIDATOR_REJECT"===n?Fy.Reject:Fy.Ignore}if(t!==Fy.Accept)return{code:$y.invalid,reason:Gy(t),msgIdStr:o}}return{code:$y.valid,messageId:c,msg:i}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,n){this.sendRpc(e,{subscriptions:t.map((e=>({topic:e,subscribe:n}))),messages:[]})}async handleControlMessage(e,t){if(void 0===t)return;const n=t.ihave?this.handleIHave(e,t.ihave):[],r=t.iwant?this.handleIWant(e,t.iwant):[],s=t.graft?await this.handleGraft(e,t.graft):[];t.prune&&await this.handlePrune(e,t.prune),(n.length||r.length||s.length)&&this.sendRpc(e,u_(r,{iwant:n,prune:s}))}acceptFrom(e){if(this.direct.has(e))return!0;const t=Date.now(),n=this.acceptFromWhitelist.get(e);if(n&&n.messagesAccepted<128&&n.acceptUntil>=t)return n.messagesAccepted+=1,!0;const r=this.score.score(e);return r>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),r>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){if(!t.length)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:_g.LowScore}),[];const r=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,r),r>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,r),this.metrics?.ihaveRcvIgnored.inc({reason:_g.MaxIhave}),[];const s=this.iasked.get(e)??0;if(s>=l_)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),this.metrics?.ihaveRcvIgnored.inc({reason:_g.MaxIasked}),[];const i=new Map;if(t.forEach((({topicID:e,messageIDs:t})=>{if(!e||!t||!this.mesh.has(e))return;let n=0;t.forEach((e=>{const t=this.msgIdToStrFn(e);this.seenCache.has(t)||(i.set(t,e),n++)})),this.metrics?.onIhaveRcv(e,t.length,n)})),!i.size)return[];let a=i.size;a+s>l_&&(a=l_-s),this.log("IHAVE: Asking for %d out of %d messages from %s",a,i.size,e);let o=Array.from(i.values());return h_(o),o=o.slice(0,a),this.iasked.set(e,s+a),this.gossipTracer.addPromise(e,o),[{messageIDs:o}]}handleIWant(e,t){if(!t.length)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];const r=new Map,s=new Map;let i=0;return t.forEach((({messageIDs:t})=>{t&&t.forEach((t=>{const n=this.msgIdToStrFn(t),a=this.mcache.getWithIWantCount(n,e);null!=a?(s.set(a.msg.topic,1+(s.get(a.msg.topic)??0)),a.count>3?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):r.set(n,a.msg)):i++}))})),this.metrics?.onIwantRcv(s,i),r.size?(this.log("IWANT: Sending %d messages to %s",r.size,e),Array.from(r.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}async handleGraft(e,t){const n=[],r=this.score.score(e),s=Date.now();let i=this.opts.doPX;return t.forEach((({topicID:t})=>{if(!t)return;const a=this.mesh.get(t);if(!a)return void(i=!1);if(a.has(e))return;if(this.direct.has(e))return this.log("GRAFT: ignoring request from direct peer %s",e),n.push(t),void(i=!1);const o=this.backoff.get(t)?.get(e);if("number"==typeof o&&s<o){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,mg.GraftBackoff),i=!1;const r=o+this.opts.graftFloodThreshold-this.opts.pruneBackoff;return s<r&&this.score.addPenalty(e,1,mg.GraftBackoff),this.addBackoff(e,t),void n.push(t)}return r<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,r,t),n.push(t),i=!1,void this.addBackoff(e,t)):a.size>=this.opts.Dhi&&!this.outbound.get(e)?(n.push(t),void this.addBackoff(e,t)):(this.log("GRAFT: Add mesh link from %s in %s",e,t),this.score.graft(e,t),a.add(e),void this.metrics?.onAddToMesh(t,pg.Subscribed,1))})),n.length?await Promise.all(n.map((t=>this.makePrune(e,t,i)))):[]}async handlePrune(e,t){const n=this.score.score(e);for(const{topicID:r,backoff:s,peers:i}of t){if(null==r)continue;const t=this.mesh.get(r);if(!t)return;if(this.log("PRUNE: Remove mesh link to %s in %s",e,r),this.score.prune(e,r),t.has(e)&&(t.delete(e),this.metrics?.onRemoveFromMesh(r,fg.Unsub,1)),"number"==typeof s&&s>0?this.doAddBackoff(e,r,1e3*s):this.addBackoff(e,r),i&&i.length){if(n<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,n,r);continue}await this.pxConnect(i)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,n){let r=this.backoff.get(t);r||(r=new Map,this.backoff.set(t,r));const s=Date.now()+n;(r.get(e)??0)<s&&r.set(e,s)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,mg.BrokenPromise)}))}clearBackoff(){if(this.heartbeatTicks%15!=0)return;const e=Date.now();this.backoff.forEach(((t,n)=>{t.forEach(((n,r)=>{n<e&&t.delete(r)})),0===t.size&&this.backoff.delete(n)}))}async directConnect(){const e=[];this.direct.forEach((t=>{this.streamsOutbound.has(t)||e.push(t)})),await Promise.all(e.map((async e=>await this.connect(e))))}async pxConnect(e){e.length>this.opts.prunePeers&&(h_(e),e=e.slice(0,this.opts.prunePeers));const t=[];await Promise.all(e.map((async e=>{if(!e.peerID)return;const n=(0,Nr.cv)(e.peerID).toString();if(!this.peers.has(n))if(e.signedPeerRecord)try{const r=await Qm.X.openAndCertify(e.signedPeerRecord,"libp2p-peer-record"),s=r.peerId;if(!r.peerId.equals(n))return void this.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",s,n);if(!await this.components.getPeerStore().addressBook.consumePeerRecord(r))return void this.log("bogus peer record obtained through px: could not add peer record to address book");t.push(n)}catch(e){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else t.push(n)}))),t.length&&await Promise.all(t.map((async e=>await this.connect(e))))}async connect(e){this.log("Initiating connection with %s",e);const t=(0,Nr.jE)(e),n=await this.components.getConnectionManager().openConnection(t);for(const e of this.multicodecs)for(const r of this.components.getRegistrar().getTopologies(e))r.onConnect(t,n)}subscribe(e){if(this.status.code!==qw.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==qw.started)throw new Error("Pubsub is not started");const t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!1);this.leave(e).catch((e=>{this.log(e)}))}join(e){if(this.status.code!==qw.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);const t=new Set,n=this.fanout.get(e);if(n&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),n.forEach((e=>{!this.direct.has(e)&&this.score.score(e)>=0&&t.add(e)})),this.metrics?.onAddToMesh(e,pg.Fanout,t.size)),t.size<this.opts.D){const n=t.size;this.getRandomGossipPeers(e,this.opts.D,(e=>!t.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0)).forEach((e=>{t.add(e)})),this.metrics?.onAddToMesh(e,pg.Random,t.size-n)}this.mesh.set(e,t),t.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)}))}async leave(e){if(this.status.code!==qw.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);const t=this.mesh.get(e);t&&(await Promise.all(Array.from(t).map((async t=>(this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e))))),this.mesh.delete(e))}selectPeersToForward(e,t,n){const r=new Set,s=this.topics.get(e);s&&(this.direct.forEach((e=>{s.has(e)&&t!==e&&!n?.has(e)&&r.add(e)})),this.floodsubPeers.forEach((e=>{s.has(e)&&t!==e&&!n?.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&r.add(e)})));const i=this.mesh.get(e);return i&&i.size>0&&i.forEach((e=>{t===e||n?.has(e)||r.add(e)})),r}selectPeersToPublish(e){const t=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},r=this.topics.get(e);if(r)if(this.opts.floodPublish)r.forEach((e=>{this.direct.has(e)?(t.add(e),n.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),n.floodsub++)}));else{this.direct.forEach((e=>{r.has(e)&&(t.add(e),n.direct++)})),this.floodsubPeers.forEach((e=>{r.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),n.floodsub++)}));const s=this.mesh.get(e);if(s&&s.size>0)s.forEach((e=>{t.add(e),n.mesh++}));else{const r=this.fanout.get(e);if(r&&r.size>0)r.forEach((e=>{t.add(e),n.fanout++}));else{const r=this.getRandomGossipPeers(e,this.opts.D,(e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold));r.size>0&&(this.fanout.set(e,r),r.forEach((e=>{t.add(e),n.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:n}}forwardMessage(e,t,n,r){n&&this.score.deliverMessage(n,e,t.topic);const s=this.selectPeersToForward(t.topic,n,r),i=u_([t]);s.forEach((e=>{this.sendRpc(e,i)})),this.metrics?.onForwardMsg(t.topic,s.size)}async publish(e,t){const n=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");const{raw:r,msg:s}=await async function(e,t,n,r){switch(e.type){case Uy.Signing:{const s={from:e.author.toBytes(),data:r,seqno:(0,wg.O6)(8),topic:t,signature:void 0,key:void 0},i=gg([bg,a_.Message.encode(s).finish()]);return s.signature=await e.privateKey.sign(i),s.key=e.key,{raw:s,msg:{type:"signed",from:e.author,data:n,sequenceNumber:BigInt(`0x${Cy(s.seqno,"base16")}`),topic:t,signature:s.signature,key:s.key}}}case Uy.Anonymous:return{raw:{from:void 0,data:r,seqno:void 0,topic:t,signature:void 0,key:void 0},msg:{type:"unsigned",data:n,topic:t}}}}(this.publishConfig,e,t,n),i=await this.msgIdFn(s),a=this.msgIdToStrFn(i);if(this.seenCache.has(a))throw Error("PublishError.Duplicate");const{tosend:o,tosendCount:c}=this.selectPeersToPublish(e),d=!0===this.opts.emitSelf&&this.subscriptions.has(e);if(0===o.size&&!this.opts.allowPublishToZeroPeers&&!d)throw Error("PublishError.InsufficientPeers");this.seenCache.put(a),this.mcache.put({msgId:i,msgIdStr:a},r,!0),this.publishedMessageIds.put(a);const l=u_([r]);for(const e of o)this.sendRpc(e,l)||o.delete(e);return this.metrics?.onPublishMsg(e,c,o.size,null!=r.data?r.data.length:0),d&&(o.add(this.components.getPeerId().toString()),super.dispatchEvent(new r_.A("gossipsub:message",{detail:{propagationSource:this.components.getPeerId(),msgId:a,msg:s}})),super.dispatchEvent(new r_.A("message",{detail:s}))),{recipients:Array.from(o.values()).map((e=>(0,Nr.jE)(e)))}}reportMessageValidationResult(e,t,n){if(n===Fy.Accept){const r=this.mcache.validate(e);if(this.metrics?.onReportValidationMcacheHit(null!==r),null!=r){const{message:s,originatingPeers:i}=r;this.score.deliverMessage(t.toString(),e,s.topic),this.forwardMessage(e,r.message,t.toString(),i),this.metrics?.onReportValidation(s.topic,n)}}else{const r=this.mcache.remove(e);if(this.metrics?.onReportValidationMcacheHit(null!==r),r){const s=Gy(n),{message:i,originatingPeers:a}=r;this.score.rejectMessage(t.toString(),e,i.topic,s);for(const t of a)this.score.rejectMessage(t,e,i.topic,s);this.metrics?.onReportValidation(i.topic,n)}}}sendGraft(e,t){const n=u_([],{graft:[{topicID:t}]});this.sendRpc(e,n)}async sendPrune(e,t){const n=u_([],{prune:[await this.makePrune(e,t,this.opts.doPX)]});this.sendRpc(e,n)}sendRpc(e,t){const n=this.streamsOutbound.get(e);if(!n)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const r=this.control.get(e);r&&(this.piggybackControl(e,t,r),this.control.delete(e));const s=this.gossip.get(e);s&&(this.piggybackGossip(e,t,s),this.gossip.delete(e));const i=a_.encode(t).finish();try{n.push(i)}catch(t){return this.log.error(`Cannot send rpc to ${e}`,t),r&&this.control.set(e,r),s&&this.gossip.set(e,s),!1}return this.metrics?.onRpcSent(t,i.length),!0}piggybackControl(e,t,n){const r=(n.graft||[]).filter((({topicID:t})=>(t&&this.mesh.get(t)||new Set).has(e))),s=(n.prune||[]).filter((({topicID:t})=>!(t&&this.mesh.get(t)||new Set).has(e)));(r.length||s.length)&&(t.control?(t.control.graft=t.control.graft&&t.control.graft.concat(r),t.control.prune=t.control.prune&&t.control.prune.concat(s)):t.control={graft:r,prune:s,ihave:[],iwant:[]})}piggybackGossip(e,t,n){t.control||(t.control={ihave:[],iwant:[],graft:[],prune:[]}),t.control.ihave=n}async sendGraftPrune(e,t,n){const r=this.opts.doPX;for(const[s,i]of e){const e=i.map((e=>({topicID:e})));let a=[];const o=t.get(s);o&&(a=await Promise.all(o.map((async e=>await this.makePrune(s,e,r&&!n.get(s))))),t.delete(s));const c=u_([],{graft:e,prune:a});this.sendRpc(s,c)}for(const[e,s]of t){const t=u_([],{prune:await Promise.all(s.map((async t=>await this.makePrune(e,t,r&&!n.get(e)))))});this.sendRpc(e,t)}}emitGossip(e){const t=this.mcache.getGossipIDs(new Set(e.keys()));for(const[n,r]of e)this.doEmitGossip(n,r,t.get(n)??[])}doEmitGossip(e,t,n){if(!n.length)return;if(h_(n),n.length>l_&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",n.length),!t.size)return;let r=this.opts.Dlazy;const s=.25*t.size;let i=t;s>r&&(r=s),r>i.size?r=i.size:i=h_(Array.from(i)).slice(0,r),i.forEach((t=>{let r=n;n.length>l_&&(r=h_(r.slice()).slice(0,l_)),this.pushGossip(t,{topicID:e,messageIDs:r})}))}flush(){for(const[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,u_([],{ihave:t}));for(const[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,u_([],{graft:t.graft,prune:t.prune}))}pushGossip(e,t){this.log("Add gossip to %s",e);const n=this.gossip.get(e)||[];this.gossip.set(e,n.concat(t))}async makePrune(e,t,n){if(this.score.prune(e,t),this.streamsOutbound.get(e).protocol===c_)return{topicID:t,peers:[]};const r=this.opts.pruneBackoff/1e3;if(!n)return{topicID:t,peers:[],backoff:r};const s=this.getRandomGossipPeers(t,this.opts.prunePeers,(t=>t!==e&&this.score.score(t)>=0)),i=await Promise.all(Array.from(s).map((async e=>{const t=(0,Nr.jE)(e);return{peerID:t.toBytes(),signedPeerRecord:await this.components.getPeerStore().addressBook.getRawEnvelope(t)}})));return{topicID:t,peers:i,backoff:r}}async heartbeat(){const{D:e,Dlo:t,Dhi:n,Dscore:r,Dout:s,fanoutTTL:i}=this.opts;this.heartbeatTicks++;const a=new Map,o=e=>{let t=a.get(e);return void 0===t&&(t=this.score.score(e),a.set(e,t)),t},c=new Map,d=new Map,l=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks==0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const u=new Map;this.mesh.forEach(((i,a)=>{const h=this.topics.get(a),p=new Set,f=new Set;if(u.set(a,f),h){const e=h_(Array.from(h)),t=this.backoff.get(a);for(const n of e){const e=this.streamsOutbound.get(n);if(e&&this.multicodecs.includes(e.protocol)&&!i.has(n)&&!this.direct.has(n)){const e=o(n);t&&t.has(n)||!(e>=0)||p.add(n),e>=this.opts.scoreThresholds.gossipThreshold&&f.add(n)}}}const m=(e,t)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",e,a),this.addBackoff(e,a),i.delete(e),o(e)>=this.opts.scoreThresholds.gossipThreshold&&f.add(e),this.metrics?.onRemoveFromMesh(a,t,1);const n=d.get(e);n?n.push(a):d.set(e,[a])},_=(e,t)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",e,a),this.score.graft(e,a),i.add(e),f.delete(e),this.metrics?.onAddToMesh(a,t,1);const n=c.get(e);n?n.push(a):c.set(e,[a])};if(i.forEach((e=>{const t=o(e);t<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,t,a),m(e,fg.BadScore),l.set(e,!0))})),i.size<t){(y=p,g=e-i.size,Gw(y,g,(()=>!0))).forEach((e=>{_(e,pg.NotEnough)}))}var y,g;if(i.size>n){let t=Array.from(i);t.sort(((e,t)=>o(t)-o(e))),t=t.slice(0,r).concat(h_(t.slice(r)));let n=0;if(t.slice(0,e).forEach((e=>{this.outbound.get(e)&&n++})),n<s){const r=e=>{const n=t[e];for(let n=e;n>0;n--)t[n]=t[n-1];t[0]=n};if(n>0){let s=n;for(let n=1;n<e&&s>0;n++)this.outbound.get(t[n])&&(r(n),s--)}let s=e-n;for(let n=e;n<t.length&&s>0;n++)this.outbound.get(t[n])&&(r(n),s--)}t.slice(e).forEach((e=>{m(e,fg.Excess)}))}if(i.size>=t){let e=0;i.forEach((t=>{this.outbound.get(t)&&e++})),e<s&&Gw(p,s-e,(e=>!0===this.outbound.get(e))).forEach((e=>{_(e,pg.Outbound)}))}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks==0&&i.size>1){const e=Array.from(i).sort(((e,t)=>o(e)-o(t))),t=Math.floor(i.size/2),n=o(e[t]);if(n<this.opts.scoreThresholds.opportunisticGraftThreshold){const e=Gw(p,this.opts.opportunisticGraftPeers,(e=>o(e)>n));for(const t of e)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,a),_(t,pg.Opportunistic)}}}));const h=Date.now();this.fanoutLastpub.forEach(((e,t)=>{e+i<h&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))})),this.fanout.forEach(((t,n)=>{const r=this.topics.get(n);t.forEach((e=>{(!r.has(e)||o(e)<this.opts.scoreThresholds.publishThreshold)&&t.delete(e)}));const s=this.topics.get(n),i=[],a=new Set;if(u.set(n,a),s){const e=h_(Array.from(s));for(const n of e){const e=this.streamsOutbound.get(n);if(e&&this.multicodecs.includes(e.protocol)&&!t.has(n)&&!this.direct.has(n)){const e=o(n);e>=this.opts.scoreThresholds.publishThreshold&&i.push(n),e>=this.opts.scoreThresholds.gossipThreshold&&a.add(n)}}}if(t.size<e){const n=e-t.size;i.slice(0,n).forEach((e=>{t.add(e),a?.delete(e)}))}})),this.emitGossip(u),await this.sendGraftPrune(c,d,l),this.flush(),this.mcache.shift(),this.dispatchEvent(new r_.A("gossipsub:heartbeat"))}getRandomGossipPeers(e,t,n=(()=>!0)){const r=this.topics.get(e);if(!r)return new Set;let s=[];return r.forEach((e=>{const t=this.streamsOutbound.get(e);t&&this.multicodecs.includes(t.protocol)&&n(e)&&s.push(e)})),s=h_(s),t>0&&s.length>t&&(s=s.slice(0,t)),new Set(s)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let t=0;for(const e of this.backoff.values())t+=e.size;e.cacheSize.set({cache:"backoff"},t);for(const[t,n]of this.topics)e.topicPeersCount.set({topicStr:t},n.size);for(const[t,n]of this.mesh)e.meshPeerCounts.set({topicStr:t},n.size);const n=[],r=new Map;e.behaviourPenalty.reset();for(const t of this.peers.keys()){const s=this.score.score(t);n.push(s),r.set(t,s),e.behaviourPenalty.observe(this.score.peerStats.get(t)?.behaviourPenalty??0)}e.registerScores(n,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,r);const s=function(e,t,n,r,s){const i={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const a of e){const e=t.get(a);if(e){const t=$w(a,e,n,r,s);for(const[e,n]of t.byTopic){let t=i.byTopic.get(e);t||(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},i.byTopic.set(e,t)),t.p1w.push(n.p1w),t.p2w.push(n.p2w),t.p3w.push(n.p3w),t.p3bw.push(n.p3bw),t.p4w.push(n.p4w)}i.p5w.push(t.p5w),i.p6w.push(t.p6w),i.p7w.push(t.p7w),i.score.push(t.score)}else i.p5w.push(0),i.p6w.push(0),i.p7w.push(0),i.score.push(0)}return i}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(s)}}Xw.multicodec=d_;const eb=(0,j.kg)("libp2p-delegated-peer-routing");var tb,nb;!function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"}(tb||(tb={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(nb||(nb={}));class rb{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new Pr.Z({concurrency:4});const{protocol:t,host:n,port:r}=e.getEndpointConfig();eb(`enabled DelegatedPeerRouting via ${t}://${n}:${r}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async findPeer(e,t={}){eb("findPeer starts: %p",e),t.timeout=t.timeout??3e4,t.signal=ur([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const n=(0,yi.Z)(),r=(0,yi.Z)();this.httpQueue.add((async()=>(n.resolve(),await r.promise)));try{await n.promise;for await(const n of this.client.dht.findPeer(e,t))if("FINAL_PEER"===n.name)return{id:n.peer.id,multiaddrs:n.peer.multiaddrs,protocols:[]}}catch(e){throw eb.error("findPeer errored: %o",e),e}finally{r.resolve(),eb("findPeer finished: %p",e)}throw B(new Error("Not found"),"ERR_NOT_FOUND")}async*getClosestPeers(e,t={}){let n;const r=te.k.asCID(e);n=null!=r?r:(0,Nr.cv)(e),eb("getClosestPeers starts: %s",n),t.timeout=t.timeout??3e4,t.signal=ur([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const s=(0,yi.Z)(),i=(0,yi.Z)();this.httpQueue.add((async()=>(s.resolve(),await i.promise)));try{await s.promise;for await(const e of this.client.dht.query(n,t))"PEER_RESPONSE"===e.name&&(yield*e.closer.map((e=>({id:e.id,multiaddrs:e.multiaddrs,protocols:[]}))))}catch(e){throw eb.error("getClosestPeers errored:",e),e}finally{i.resolve(),eb("getClosestPeers finished: %b",e)}}}const sb=(0,j.kg)("libp2p:delegated-content-routing"),ib=3e4;var ab,ob;!function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"}(ab||(ab={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(ob||(ob={}));class cb{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new Pr.Z({concurrency:4}),this.httpQueueRefs=new Pr.Z({concurrency:2});const{protocol:t,host:n,port:r}=e.getEndpointConfig();sb(`enabled DelegatedContentRouting via ${t}://${n}:${r}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async*findProviders(e,t={}){sb("findProviders starts: %c",e),t.timeout=t.timeout??ib,t.signal=ur([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const n=(0,yi.Z)(),r=(0,yi.Z)();this.httpQueue.add((async()=>(n.resolve(),await r.promise)));try{await n.promise;for await(const n of this.client.dht.findProvs(e,t))"PROVIDER"===n.name&&(yield*n.providers.map((e=>({id:e.id,protocols:[],multiaddrs:e.multiaddrs}))))}catch(e){throw sb.error("findProviders errored:",e),e}finally{r.resolve(),sb("findProviders finished: %c",e)}}async provide(e,t={}){sb("provide starts: %c",e),t.timeout=t.timeout??ib,t.signal=ur([this.abortController.signal].concat(null!=t.signal?[t.signal]:[])),await this.httpQueueRefs.add((async()=>{await this.client.block.stat(e,t),await(0,$s.Z)(this.client.dht.provide(e,t))})),sb("provide finished: %c",e)}async put(e,t,n={}){sb("put value start: %b",e),n.timeout=n.timeout??ib,n.signal=ur([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),await this.httpQueue.add((async()=>{await(0,$s.Z)(this.client.dht.put(e,t,n))})),sb("put value finished: %b",e)}async get(e,t={}){return sb("get value start: %b",e),t.timeout=t.timeout??ib,t.signal=ur([this.abortController.signal].concat(null!=t.signal?[t.signal]:[])),await this.httpQueue.add((async()=>{for await(const n of this.client.dht.get(e,t))if("VALUE"===n.name)return sb("get value finished: %b",e),n.value;throw B(new Error("Not found"),"ERR_NOT_FOUND")}))}}const db=e=>Promise.reject(new Error(`No base found for "${e}"`));class lb{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||db;for(const t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const ub=e=>Promise.reject(new Error(`No codec found for "${e}"`));class hb{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||ub;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"==typeof e?this._codecsByName:this._codecsByCode;if(t[e])return t[e];const n=await this._loadCodec(e);return null==t[e]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const pb=e=>Promise.reject(new Error(`No hasher found for "${e}"`));class fb{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||pb;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"==typeof e?this._hashersByName:this._hashersByCode;if(t[e])return t[e];const n=await this._loadHasher(e);return null==t[e]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function mb(e){try{e=(0,Ru.k)((0,Zn.HM)(e))}catch(e){}return e.toString()}const _b=(0,j.kg)("ipfs-http-client:lib:error-handler"),yb=C.Z.bind({ignoreUndefined:!0}),gb=H.isBrowser||H.isWebWorker?location.protocol:"http",wb=H.isBrowser||H.isWebWorker?location.hostname:"localhost",bb=H.isBrowser||H.isWebWorker?location.port:"5001",vb=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){const n=await e.json();_b(n),t=n.Message||n.message}else t=await e.text()}catch(e){_b("Failed to parse error response",e),t=e.message}let n=new Ir.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(n=new Ir.TimeoutError),t&&t.includes("context deadline exceeded")&&(n=new Ir.TimeoutError)),t&&t.includes("request timed out")&&(n=new Ir.TimeoutError),t&&(n.message=t),n},kb=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Mb=e=>e.replace(kb,(function(e){return"-"+e.toLowerCase()}));class Eb extends Ir{constructor(e={}){const t=((e={})=>{let t,n,r={};if("string"==typeof e||(0,Zn.h2)(e))t=new URL(mb(e));else if(e instanceof URL)t=e;else if("string"==typeof e.url||(0,Zn.h2)(e.url))t=new URL(mb(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e||{};const n=(r.protocol||gb).replace(":",""),s=(r.host||wb).split(":")[0],i=r.port||bb;t=new URL(`${n}://${s}:${i}`)}if(r.apiPath?t.pathname=r.apiPath:"/"!==t.pathname&&void 0!==t.pathname||(t.pathname="api/v0"),H.isNode){const e=void 0;n=r.agent||new e({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}})(e);var n;super({timeout:(n=t.timeout||0,("string"==typeof n?mr(n):n)||void 0),headers:t.headers,base:`${t.url}`,handleError:vb,transformSearchParams:e=>{const t=new URLSearchParams;for(const[n,r]of e)"undefined"!==r&&"null"!==r&&"signal"!==n&&t.append(Mb(n),r),"timeout"!==n||isNaN(r)||t.append(Mb(n),r);return t},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=(e,n={})=>("string"!=typeof e||e.startsWith("/")||(e=`${t.url}/${e}`),r.call(this,e,yb(n,{method:"POST"})))}}Ir.HTTPError;const Lb=e=>t=>e(new Eb(t),t);function Sb(e){if(null!=e)return"string"==typeof e?e:e.toString(8).padStart(4,"0")}function Db(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const n=e.getTime(),r=Math.floor(n/1e3);t={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw B(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function Tb({arg:e,searchParams:t,hashAlg:n,mtime:r,mode:s,...i}={}){t&&(i={...i,...t}),n&&(i.hash=n),null!=r&&(r=Db(r),i.mtime=r.secs,i.mtimeNsecs=r.nsecs),null!=s&&(i.mode=Sb(s)),i.timeout&&!isNaN(i.timeout)&&(i.timeout=`${i.timeout}ms`),null==e?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach((e=>a.append("arg",e))),a}const Rb=Lb((e=>async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json()).Keys||[]).map((e=>te.k.parse(e["/"])))})),Pb=Lb((e=>async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:Tb({...n,peer:t.toString()}),headers:n.headers})).json()).Keys||[]).map((e=>te.k.parse(e["/"])))})),Ib=Lb((e=>async function(t={}){const n=await e.post("bitswap/stat",{searchParams:Tb(t),signal:t.signal,headers:t.headers});return function(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((e=>te.k.parse(e["/"]))),peers:(e.Peers||[]).map((e=>(0,Nr.jE)(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}(await n.json())})),Ab=Lb((e=>async function(t,n={}){return(await e.post("bitswap/unwant",{signal:n.signal,searchParams:Tb({arg:t.toString(),...n}),headers:n.headers})).json()}));function Yb(e){return{wantlist:Rb(e),wantlistForPeer:Pb(e),unwant:Ab(e),stat:Ib(e)}}const Ob=Lb((e=>async function(t,n={}){const r=await e.post("block/get",{signal:n.signal,searchParams:Tb({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await r.arrayBuffer())}));async function Nb(e){if(Ti(e))return new Blob([e]);if("string"==typeof e||e instanceof String)return new Blob([e.toString()]);if(Ri(e))return e;if(Ii(e)&&(e=Li(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Si(e),{value:n,done:r}=await t.peek();if(r)return xb(t);if(t.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await(0,Di.Z)(t))]);if(Ti(n)||"string"==typeof n||n instanceof String)return xb(t)}throw B(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function xb(e){const t=[];for await(const n of e)t.push(n);return new Blob(t)}function Cb(e){if(null!=e)return"string"==typeof e?e:e.toString(8).padStart(4,"0")}async function Hb(e,t,n={}){const r=[],s=new FormData;let i=0,a=0;for await(const{content:t,path:n,mode:o,mtime:c}of Ta(e,Nb)){let e="";i>0&&(e=`-${i}`);let d=(t?"file":"dir")+e;const l=[];if(null!=o&&l.push(`mode=${Cb(o)}`),null!=c){const{secs:e,nsecs:t}=c;l.push(`mtime=${e}`),null!=t&&l.push(`mtime-nsecs=${t}`)}if(l.length&&(d=`${d}?${l.join("&")}`),t){s.set(d,t,null!=n?encodeURIComponent(n):void 0);const e=a+t.size;r.push({name:n,start:a,end:e}),a=e}else{if(null==n)throw new Error("path or content or both must be set");s.set(d,new File([""],encodeURIComponent(n),{type:"application/x-directory"}))}i++}return{total:a,parts:r,headers:n,body:s}}function jb(...e){return(0,ur.anySignal)(function(e){return e.filter(Boolean)}(e))}const Bb=Lb((e=>async function t(n,r={}){const s=jb((new AbortController).signal,r.signal);let i;try{const t=await e.post("block/put",{signal:s,searchParams:Tb(r),...await Hb([n],0,r.headers)});i=await t.json()}catch(e){if("dag-pb"===r.format)return t(n,{...r,format:"protobuf"});if("dag-cbor"===r.format)return t(n,{...r,format:"cbor"});throw e}return te.k.parse(i.Key)})),zb=Lb((e=>async function*(t,n={}){Array.isArray(t)||(t=[t]);const r=await e.post("block/rm",{signal:n.signal,searchParams:Tb({arg:t.map((e=>e.toString())),"stream-channels":!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield Ub(e)}));function Ub(e){const t={cid:te.k.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}const Fb=Lb((e=>async function(t,n={}){const r=await e.post("block/stat",{signal:n.signal,searchParams:Tb({arg:t.toString(),...n}),headers:n.headers}),s=await r.json();return{cid:te.k.parse(s.Key),size:s.Size}}));function Vb(e){return{get:Ob(e),put:Bb(e),rm:zb(e),stat:Fb(e)}}const Wb=Lb((e=>async function(t,n={}){const r=await e.post("bootstrap/add",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),{Peers:s}=await r.json();return{Peers:s.map((e=>(0,Zn.HM)(e)))}})),$b=Lb((e=>async function(t={}){const n=await e.post("bootstrap/rm",{signal:t.signal,searchParams:Tb({...t,all:!0}),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>(0,Zn.HM)(e)))}})),Gb=Lb((e=>async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:Tb(t),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>(0,Zn.HM)(e)))}})),qb=Lb((e=>async function(t={}){const n=await e.post("bootstrap/add",{signal:t.signal,searchParams:Tb({...t,default:!0}),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>(0,Zn.HM)(e)))}})),Kb=Lb((e=>async function(t,n={}){const r=await e.post("bootstrap/rm",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),{Peers:s}=await r.json();return{Peers:s.map((e=>(0,Zn.HM)(e)))}}));function Zb(e){return{add:Wb(e),clear:$b(e),list:Gb(e),reset:qb(e),rm:Kb(e)}}const Jb=Lb((e=>async function(t,n={}){const r=await e.post("config/profile/apply",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),s=await r.json();return{original:s.OldCfg,updated:s.NewCfg}}));function Qb(e){if(null==e)return e;const t=/^[A-Z]+$/;return Object.keys(e).reduce(((n,r)=>(t.test(r)?n[r.toLowerCase()]=e[r]:t.test(r[0])?n[r[0].toLowerCase()+r.slice(1)]=e[r]:n[r]=e[r],n)),{})}const Xb=Lb((e=>async function(t={}){const n=await e.post("config/profile/list",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return(await n.json()).map((e=>Qb(e)))}));function ev(e){return{apply:Jb(e),list:Xb(e)}}const tv=Lb((e=>async(t,n={})=>{if(!t)throw new Error("key argument is required");const r=await e.post("config",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});return(await r.json()).Value})),nv=Lb((e=>async(t={})=>{const n=await e.post("config/show",{signal:t.signal,searchParams:Tb({...t}),headers:t.headers});return await n.json()})),rv=Lb((e=>async(t,n={})=>{const r=jb((new AbortController).signal,n.signal),s=await e.post("config/replace",{signal:r,searchParams:Tb(n),...await Hb([(0,Wn.m)(JSON.stringify(t))],0,n.headers)});await s.text()})),sv=Lb((e=>async(t,n,r={})=>{if("string"!=typeof t)throw new Error("Invalid key type");const s={...r,...iv(t,n)},i=await e.post("config",{signal:r.signal,searchParams:Tb(s),headers:r.headers});await i.text()})),iv=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function av(e){return{getAll:nv(e),get:tv(e),set:sv(e),replace:rv(e),profiles:ev(e)}}const ov=Lb((e=>async function*(t,n={}){const r=await e.post("dag/export",{signal:n.signal,searchParams:Tb({arg:t.toString()}),headers:n.headers});yield*r.iterator()}));async function*cv(e,t,n,r,s){const i=async e=>{const t=await n.getCodec(e.code),i=await r(e,s);return t.decode(i)},a=t.split("/").filter(Boolean);let o=await i(e),c=e;for(;a.length;){const e=a.shift();if(!e)throw B(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(o,e))throw B(new Error(`no link named "${e}" under ${c}`),"ERR_NO_LINK");o=o[e],yield{value:o,remainderPath:a.join("/")};const n=te.k.asCID(o);n&&(c=n,o=await i(o))}yield{value:o,remainderPath:""}}const dv=(e,t)=>{const n=Lb(((t,n)=>{const r=Ob(n);return async(t,n={})=>{if(n.path){const s=n.localResolve?await(0,wu.Z)(cv(t,n.path,e,r,n)):await xr(cv(t,n.path,e,r,n));if(!s)throw B(new Error("Not found"),"ERR_NOT_FOUND");return s}const s=await e.getCodec(t.code),i=await r(t,n);return{value:s.decode(i),remainderPath:""}}}));return n(t)},lv=Lb((e=>async function*(t,n={}){const r=jb((new AbortController).signal,n.signal),{headers:s,body:i}=await Hb(t,0,n.headers),a=await e.post("dag/import",{signal:r,headers:s,body:i,searchParams:Tb({"pin-roots":n.pinRoots})});for await(const{Root:e}of a.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:n}=e;yield{root:{cid:te.k.parse(t),pinErrorMsg:n}}}})),uv=(e,t)=>{const n=Lb((t=>async(n,r={})=>{const s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...r};let i;if(s.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=n}else i=(await e.getCodec(s.storeCodec)).encode(n),s.inputCodec=s.storeCodec;const a=jb((new AbortController).signal,s.signal),o=await t.post("dag/put",{timeout:s.timeout,signal:a,searchParams:Tb(s),...await Hb([i],0,s.headers)}),c=await o.json();return te.k.parse(c.Cid["/"])}));return n(t)},hv=Lb((e=>async(t,n={})=>{const r=await e.post("dag/resolve",{signal:n.signal,searchParams:Tb({arg:`${t}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers}),s=await r.json();return{cid:te.k.parse(s.Cid["/"]),remainderPath:s.RemPath}}));function pv(e,t){return{export:ov(t),get:dv(e,t),import:lv(t),put:uv(e,t),resolve:hv(t)}}const fv=e=>{if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:(0,Nr.jE)(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((({ID:e,Addrs:t})=>({id:(0,Nr.jE)(e),multiaddrs:t.map((e=>(0,Zn.HM)(e))),protocols:[]}))),providers:(e.Responses||[]).map((({ID:e,Addrs:t})=>({id:(0,Nr.jE)(e),multiaddrs:t.map((e=>(0,Zn.HM)(e))),protocols:[]})))};if(2===e.Type){let t={id:e.ID??(0,Nr.jE)(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(t={id:(0,Nr.jE)(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>(0,Zn.HM)(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((({ID:e,Addrs:t})=>({id:(0,Nr.jE)(e),multiaddrs:t.map((e=>(0,Zn.HM)(e))),protocols:[]})))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:(0,Wn.m)(e.Extra,"base64pad")};if(6===e.Type){const t=e.Responses.map((({ID:e})=>(0,Nr.jE)(e)));if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:(0,Nr.jE)(e.ID)};throw new Error("Unknown DHT event type")},mv=Lb((e=>async function*(t,n={}){const r=await e.post("dht/findpeer",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});for await(const e of r.ndjson())yield fv(e)})),_v=Lb((e=>async function*(t,n={}){const r=await e.post("dht/findprovs",{signal:n.signal,searchParams:Tb({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield fv(e)})),yv=Lb((e=>async function*(t,n={}){const r=await e.post("dht/get",{signal:n.signal,searchParams:Tb({arg:t instanceof Uint8Array?(0,Xn.B)(t):t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield fv(e)})),gv=Lb((e=>async function*(t,n={recursive:!1}){const r=Array.isArray(t)?t:[t],s=await e.post("dht/provide",{signal:n.signal,searchParams:Tb({arg:r.map((e=>e.toString())),...n}),headers:n.headers});for await(const e of s.ndjson())yield fv(e)})),wv=Lb((e=>async function*(t,n,r={}){const s=jb((new AbortController).signal,r.signal),i=await e.post("dht/put",{signal:s,searchParams:Tb({arg:t instanceof Uint8Array?(0,Xn.B)(t):t.toString(),...r}),...await Hb([n],0,r.headers)});for await(const e of i.ndjson())yield fv(e)})),bv=Lb((e=>async function*(t,n={}){const r=await e.post("dht/query",{signal:n.signal,searchParams:Tb({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield fv(e)}));function vv(e){return{findPeer:mv(e),findProvs:_v(e),get:yv(e),provide:gv(e),put:wv(e),query:bv(e)}}const kv=Lb((e=>async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json()})),Mv=Lb((e=>async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json()})),Ev=Lb((e=>async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json()}));function Lv(e){return{cmds:kv(e),net:Mv(e),sys:Ev(e)}}const Sv=Lb((e=>async function(t,n,r={}){const s=await e.post("files/chmod",{signal:r.signal,searchParams:Tb({arg:t,mode:n,...r}),headers:r.headers});await s.text()})),Dv=Lb((e=>async function(t,n,r={}){const s=Array.isArray(t)?t:[t],i=await e.post("files/cp",{signal:r.signal,searchParams:Tb({arg:s.concat(n).map((e=>te.k.asCID(e)?`/ipfs/${e}`:e)),...r}),headers:r.headers});await i.text()})),Tv=Lb((e=>async function(t,n={}){if(!t||"string"!=typeof t)throw new Error("ipfs.files.flush requires a path");const r=await e.post("files/flush",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),s=await r.json();return te.k.parse(s.Cid)}));function Rv(e){const t=Qb(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}const Pv=Lb((e=>async function*(t,n={}){if(!t)throw new Error("ipfs.files.ls requires a path");const r=await e.post("files/ls",{signal:n.signal,searchParams:Tb({arg:te.k.asCID(t)?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const e of r.ndjson())if("Entries"in e)for(const t of e.Entries||[])yield Iv(Rv(t));else yield Iv(Rv(e))}));function Iv(e){return e.hash&&(e.cid=te.k.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}const Av=Lb((e=>async function(t,n={}){const r=await e.post("files/mkdir",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});await r.text()})),Yv=Lb((e=>async function(t,n,r={}){Array.isArray(t)||(t=[t]);const s=await e.post("files/mv",{signal:r.signal,searchParams:Tb({arg:t.concat(n),...r}),headers:r.headers});await s.text()}));var Ov=n(18901);const Nv=Lb((e=>async function*(t,n={}){const r=await e.post("files/read",{signal:n.signal,searchParams:Tb({arg:t,count:n.length,...n}),headers:n.headers});yield*Ov(r.body)})),xv=Lb((e=>async function(t,n={}){const r=await e.post("files/rm",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),s=await r.text();if(""!==s){const e=new Ir.HTTPError(r);throw e.message=s,e}})),Cv=Lb((e=>async function(t,n={}){const r=await e.post("files/stat",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),s=await r.json();return s.WithLocality=s.WithLocality||!1,(i=Rv(s)).cid=te.k.parse(i.hash),delete i.hash,i;var i})),Hv=Lb((e=>async function(t,n={}){const r=await e.post("files/touch",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});await r.text()})),jv=Lb((e=>async function(t,n,r={}){const s=jb((new AbortController).signal,r.signal),i=await e.post("files/write",{signal:s,searchParams:Tb({arg:t,streamChannels:!0,count:r.length,...r}),...await Hb([{content:n,path:"arg",mode:Sb(r.mode),mtime:Db(r.mtime)}],0,r.headers)});await i.text()}));function Bv(e){return{chmod:Sv(e),cp:Dv(e),flush:Tv(e),ls:Pv(e),mkdir:Av(e),mv:Yv(e),read:Nv(e),rm:xv(e),stat:Cv(e),touch:Hv(e),write:jv(e)}}const zv=Lb((e=>async(e,t,n={})=>{throw B(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),Uv=Lb((e=>async function(t,n={type:"Ed25519"}){const r=await e.post("key/gen",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});return Qb(await r.json())})),Fv=Lb((e=>async function(t,n,r,s={}){const i=await e.post("key/import",{signal:s.signal,searchParams:Tb({arg:t,pem:n,password:r,...s}),headers:s.headers});return Qb(await i.json())})),Vv=Lb((e=>async(e,t={})=>{throw B(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),Wv=Lb((e=>async function(t={}){const n=await e.post("key/list",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return((await n.json()).Keys||[]).map((e=>Qb(e)))})),$v=Lb((e=>async function(t,n,r={}){const s=await e.post("key/rename",{signal:r.signal,searchParams:Tb({arg:[t,n],...r}),headers:r.headers});return Qb(await s.json())})),Gv=Lb((e=>async function(t,n={}){const r=await e.post("key/rm",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});return Qb((await r.json()).Keys[0])}));function qv(e){return{export:zv(e),gen:Uv(e),import:Fv(e),info:Vv(e),list:Wv(e),rename:$v(e),rm:Gv(e)}}const Kv=Lb((e=>async function(t,n,r={}){const s=await e.post("log/level",{signal:r.signal,searchParams:Tb({arg:[t,n],...r}),headers:r.headers});return Qb(await s.json())})),Zv=Lb((e=>async function(t={}){const n=await e.post("log/ls",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return(await n.json()).Strings})),Jv=Lb((e=>async function*(t={}){const n=await e.post("log/tail",{signal:t.signal,searchParams:Tb(t),headers:t.headers});yield*n.ndjson()}));function Qv(e){return{level:Kv(e),ls:Zv(e),tail:Jv(e)}}const Xv=Lb((e=>async function(t,n={}){const r=await e.post("name/publish",{signal:n.signal,searchParams:Tb({arg:`${t}`,...n}),headers:n.headers});return Qb(await r.json())})),ek=Lb((e=>async function*(t,n={}){const r=await e.post("name/resolve",{signal:n.signal,searchParams:Tb({arg:t,stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield e.Path})),tk=Lb((e=>async function(t,n={}){const r=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});return Qb(await r.json())})),nk=Lb((e=>async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return Qb(await n.json())})),rk=Lb((e=>async function(t={}){const n=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return(await n.json()).Strings||[]}));function sk(e){return{cancel:tk(e),state:nk(e),subs:rk(e)}}function ik(e){return{publish:Xv(e),resolve:ek(e),pubsub:sk(e)}}const ak=Lb((e=>async function(t,n={}){const r=await e.post("object/data",{signal:n.signal,searchParams:Tb({arg:`${t instanceof Uint8Array?te.k.decode(t):t}`,...n}),headers:n.headers}),s=await r.arrayBuffer();return new Uint8Array(s,0,s.byteLength)})),ok=Lb((e=>async function(t,n={}){const r=await e.post("object/get",{signal:n.signal,searchParams:Tb({arg:`${t instanceof Uint8Array?te.k.decode(t):t}`,dataEncoding:"base64",...n}),headers:n.headers}),s=await r.json();return{Data:(0,Wn.m)(s.Data,"base64pad"),Links:(s.Links||[]).map((e=>({Name:e.Name,Hash:te.k.parse(e.Hash),Tsize:e.Size})))}})),ck=Lb((e=>async function(t,n={}){const r=await e.post("object/links",{signal:n.signal,searchParams:Tb({arg:`${t instanceof Uint8Array?te.k.decode(t):t}`,...n}),headers:n.headers});return((await r.json()).Links||[]).map((e=>({Name:e.Name,Tsize:e.Size,Hash:te.k.parse(e.Hash)})))})),dk=Lb((e=>async function(t={}){const n=await e.post("object/new",{signal:t.signal,searchParams:Tb({arg:t.template,...t}),headers:t.headers}),{Hash:r}=await n.json();return te.k.parse(r)})),lk=(e,t)=>{const n=Lb((n=>{const r=uv(e,t);return async function(e,t={}){return r(e,{...t,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}}));return n(t)},uk=Lb((e=>async function(t,n={}){const r=await e.post("object/stat",{signal:n.signal,searchParams:Tb({arg:`${t}`,...n}),headers:n.headers}),s=await r.json();return{...s,Hash:te.k.parse(s.Hash)}})),hk=Lb((e=>async function(t,n,r={}){const s=await e.post("object/patch/add-link",{signal:r.signal,searchParams:Tb({arg:[`${t}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...r}),headers:r.headers}),{Hash:i}=await s.json();return te.k.parse(i)})),pk=Lb((e=>async function(t,n,r={}){const s=jb((new AbortController).signal,r.signal),i=await e.post("object/patch/append-data",{signal:s,searchParams:Tb({arg:`${t}`,...r}),...await Hb([n],0,r.headers)}),{Hash:a}=await i.json();return te.k.parse(a)})),fk=Lb((e=>async function(t,n,r={}){const s=await e.post("object/patch/rm-link",{signal:r.signal,searchParams:Tb({arg:[`${t}`,n.Name||n.name||null],...r}),headers:r.headers}),{Hash:i}=await s.json();return te.k.parse(i)})),mk=Lb((e=>async function(t,n,r={}){const s=jb((new AbortController).signal,r.signal),i=await e.post("object/patch/set-data",{signal:s,searchParams:Tb({arg:[`${t}`],...r}),...await Hb([n],0,r.headers)}),{Hash:a}=await i.json();return te.k.parse(a)}));function _k(e){return{addLink:hk(e),appendData:pk(e),rmLink:fk(e),setData:mk(e)}}function yk(e,t){return{data:ak(t),get:ok(t),links:ck(t),new:dk(t),put:lk(e,t),stat:uk(t),patch:_k(t)}}const gk=Lb((e=>async function*(t,n={}){for await(const{path:r,recursive:s,metadata:i}of Cr(t)){const t=await e.post("pin/add",{signal:n.signal,searchParams:Tb({...n,arg:r,recursive:s,metadata:i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(const e of t.ndjson())if(e.Pins)for(const t of e.Pins)yield te.k.parse(t);else yield te.k.parse(e)}}));function wk(e){const t=gk(e);return Lb((()=>async function(e,n={}){return xr(t([{path:e,...n}],n))}))(e)}function bk(e,t,n){const r={type:e,cid:te.k.parse(t)};return n&&(r.metadata=n),r}const vk=Lb((e=>async function*(t={}){let n=[];t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const r=await e.post("pin/ls",{signal:t.signal,searchParams:Tb({...t,arg:n.map((e=>`${e}`)),stream:!0}),headers:t.headers});for await(const e of r.ndjson()){if(e.Keys){for(const t of Object.keys(e.Keys))yield bk(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield bk(e.Type,e.Cid,e.Metadata)}})),kk=Lb((e=>async function*(t,n={}){for await(const{path:r,recursive:s}of Cr(t)){const t=new URLSearchParams(n.searchParams);t.append("arg",`${r}`),null!=s&&t.set("recursive",String(s));const i=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:Tb({...n,arg:`${r}`,recursive:s})});for await(const e of i.ndjson())e.Pins?yield*e.Pins.map((e=>te.k.parse(e))):yield te.k.parse(e)}})),Mk=e=>{const t=kk(e);return Lb((()=>async function(e,n={}){return xr(t([{path:e,...n}],n))}))(e)},Ek=({Name:e,Status:t,Cid:n})=>({cid:te.k.parse(n),name:e,status:t}),Lk=e=>{if("string"==typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},Sk=e=>{if(te.k.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of "+typeof e)},Dk=({service:e,cid:t,name:n,status:r,all:s})=>{const i=Tb({service:Lk(e),name:n,force:!!s||void 0});if(t)for(const e of t)i.append("cid",Sk(e));if(r)for(const e of r)i.append("status",e);return i},Tk=({cid:e,service:t,background:n,name:r,origins:s})=>{const i=Tb({arg:Sk(e),service:Lk(t),name:r,background:!!n||void 0});if(s)for(const e of s)i.append("origin",e.toString());return i};function Rk(e){return async function(t,{timeout:n,signal:r,headers:s,...i}){const a=await e.post("pin/remote/add",{timeout:n,signal:r,headers:s,searchParams:Tk({cid:t,...i})});return Ek(await a.json())}}function Pk(e){return async function*({timeout:t,signal:n,headers:r,...s}){const i=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:r,searchParams:Dk(s)});for await(const e of i.ndjson())yield Ek(e)}}function Ik(e){return async function({timeout:t,signal:n,headers:r,...s}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:r,searchParams:Dk({...s,all:!1})})}}function Ak(e){return async function({timeout:t,signal:n,headers:r,...s}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:r,searchParams:Dk({...s,all:!0})})}}function Yk(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function Ok(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:Nk(e.Stat)}}}function Nk(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:n,Queued:r,Failed:s}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:n,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function xk(e){return async function(t,n){const{endpoint:r,key:s,headers:i,timeout:a,signal:o}=n;await e.post("pin/remote/service/add",{timeout:a,signal:o,searchParams:Tb({arg:[t,Yk(r),s]}),headers:i})}}function Ck(e){return async function(t={}){const{stat:n,headers:r,timeout:s,signal:i}=t,a=await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:r,searchParams:!0===n?Tb({stat:n}):void 0}),{RemoteServices:o}=await a.json();return o.map(Ok)}}function Hk(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:Tb({arg:t})})}}function jk(e){const t=new Eb(e);return{add:xk(t),ls:Ck(t),rm:Hk(t)}}function Bk(e){const t=new Eb(e);return{add:Rk(t),ls:Pk(t),rm:Ik(t),rmAll:Ak(t),service:jk(e)}}function zk(e){return{addAll:gk(e),add:wk(e),ls:vk(e),rmAll:kk(e),rm:Mk(e),remote:Bk(e)}}const Uk=e=>(0,Xn.B)(Fk(e)),Fk=e=>on.base64url.decode(e),Vk=e=>on.base64url.encode((0,Wn.m)(e)),Wk=Lb((e=>async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json();return r=n,(Array.isArray(r)?r.map(Uk):r)||[];var r})),$k=Lb((e=>async function(t,n={}){const r=await e.post("pubsub/peers",{signal:n.signal,searchParams:Tb({arg:Vk(t),...n}),headers:n.headers}),{Strings:s}=await r.json();return s||[]})),Gk=Lb((e=>async function(t,n,r={}){const s=Tb({arg:Vk(t),...r}),i=jb((new AbortController).signal,r.signal),a=await e.post("pubsub/pub",{signal:i,searchParams:s,...await Hb([n],0,r.headers)});await a.text()})),qk=(0,j.kg)("ipfs-http-client:pubsub:subscribe"),Kk=(e,t)=>Lb((e=>async function(n,r,s={}){let i,a;s.signal=t.subscribe(n,r,s.signal);const o=new Promise(((e,t)=>{i=e,a=t})),c=setTimeout((()=>i()),1e3);return e.post("pubsub/sub",{signal:s.signal,searchParams:Tb({arg:Vk(n),...s}),headers:s.headers}).catch((e=>{t.unsubscribe(n,r),a(e)})).then((e=>{clearTimeout(c),e&&(async function(e,{onMessage:t,onEnd:n,onError:r}){r=r||qk;try{for await(const n of e.ndjson())try{if(!n.from)continue;null!=n.from&&null!=n.seqno?t({type:"signed",from:(0,Nr.jE)(n.from),data:Fk(n.data),sequenceNumber:(s=n.seqno,BigInt(`0x${(0,Xn.B)(on.base64url.decode(s),"base16")}`)),topic:Uk(n.topicIDs[0]),key:Fk(n.key??"u"),signature:Fk(n.signature??"u")}):t({type:"unsigned",data:Fk(n.data),topic:Uk(n.topicIDs[0])})}catch(e){e.message=`Failed to parse pubsub message: ${e.message}`,r(e,!1,n)}}catch(e){Zk(e)||r(e,!0)}finally{n()}var s}(e,{onMessage:e=>{r&&("function"!=typeof r?"function"==typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:()=>t.unsubscribe(n,r),onError:s.onError}),i())})),o}))(e),Zk=e=>{switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}};class Jk{constructor(){this._subs=new Map}subscribe(e,t,n){const r=this._subs.get(e)||[];if(r.find((e=>e.handler===t)))throw new Error(`Already subscribed to ${e} with this handler`);const s=new AbortController;return this._subs.set(e,[{handler:t,controller:s}].concat(r)),n&&n.addEventListener("abort",(()=>this.unsubscribe(e,t))),s.signal}unsubscribe(e,t){const n=this._subs.get(e)||[];let r;t?(this._subs.set(e,n.filter((e=>e.handler!==t))),r=n.filter((e=>e.handler===t))):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach((e=>e.controller.abort()))}}function Qk(e){const t=new Jk;return{ls:Wk(e),peers:$k(e),publish:Gk(e),subscribe:Kk(e,t),unsubscribe:(n=t,async function(e,t){n.unsubscribe(e,t)})};var n}const Xk=Lb((e=>async function*(t={}){const n=await e.post("refs/local",{signal:t.signal,transform:Qb,searchParams:Tb(t),headers:t.headers});yield*n.ndjson()})),eM=Lb(((e,t)=>Object.assign((async function*(t,n={}){const r=Array.isArray(t)?t:[t],s=await e.post("refs",{signal:n.signal,searchParams:Tb({arg:r.map((e=>`${e instanceof Uint8Array?te.k.decode(e):e}`)),...n}),headers:n.headers,transform:Qb});yield*s.ndjson()}),{local:Xk(t)}))),tM=Lb((e=>async function*(t={}){const n=await e.post("repo/gc",{signal:t.signal,searchParams:Tb(t),headers:t.headers,transform:e=>({err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?te.k.parse(e.Key["/"]):null})});yield*n.ndjson()})),nM=Lb((e=>async function(t={}){const n=await e.post("repo/stat",{signal:t.signal,searchParams:Tb(t),headers:t.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}})),rM=Lb((e=>async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json()).Version}));function sM(e){return{gc:tM(e),stat:nM(e),version:rM(e)}}const iM=Lb((e=>async function*(t={}){const n=await e.post("stats/bw",{signal:t.signal,searchParams:Tb(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*n.ndjson()}));function aM(e){return{bitswap:Ib(e),repo:nM(e),bw:iM(e)}}const oM=Lb((e=>async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:Tb(t),headers:t.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((e=>({id:(0,Nr.jE)(e),addrs:(r[e]||[]).map((e=>(0,Zn.HM)(e)))})))})),cM=Lb((e=>async function(t,n={}){const r=await e.post("swarm/connect",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),{Strings:s}=await r.json();return s||[]})),dM=Lb((e=>async function(t,n={}){const r=await e.post("swarm/disconnect",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),{Strings:s}=await r.json();return s||[]})),lM=Lb((e=>async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:Tb(t),headers:t.headers}),{Strings:r}=await n.json();return(r||[]).map((e=>(0,Zn.HM)(e)))})),uM=Lb((e=>async function(t={}){const n=await e.post("swarm/peers",{signal:t.signal,searchParams:Tb(t),headers:t.headers}),{Peers:r}=await n.json();return(r||[]).map((e=>({addr:(0,Zn.HM)(e.Addr),peer:(0,Nr.jE)(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}));function hM(e){return{addrs:oM(e),connect:cM(e),disconnect:dM(e),localAddrs:lM(e),peers:uM(e)}}const pM=Lb((e=>async function*(t,n={}){const r=jb((new AbortController).signal,n.signal),{headers:s,body:i,total:a,parts:o}=await Hb(t,0,n.headers),[c,d]="function"==typeof n.progress?fM(a,o,n.progress):[void 0,void 0],l=await e.post("add",{searchParams:Tb({"stream-channels":!0,...n,progress:Boolean(c)}),onUploadProgress:d,signal:r,headers:s,body:i});for await(let e of l.ndjson())e=Qb(e),void 0!==e.hash?yield _M(e):c&&c(e.bytes||0,e.name)})),fM=(e,t,n)=>t?[void 0,mM(e,t,n)]:[n,void 0],mM=(e,t,n)=>{let r=0;const s=t.length;return({loaded:i,total:a})=>{const o=Math.floor(i/a*e);for(;r<s;){const{start:e,end:s,name:i}=t[r];if(o<s){n(o-e,i);break}n(s-e,i),r+=1}}};function _M({name:e,hash:t,size:n,mode:r,mtime:s,mtimeNsecs:i}){const a={path:e,cid:te.k.parse(t),size:parseInt(n)};return null!=r&&(a.mode=parseInt(r,8)),null!=s&&(a.mtime={secs:s,nsecs:i||0}),a}function yM(e){const t=pM(e);return Lb((()=>async function(e,n={}){return await xr(t(xi(e),n))}))(e)}const gM=Lb((e=>async function*(t,n={}){const r=await e.post("cat",{signal:n.signal,searchParams:Tb({arg:t.toString(),...n}),headers:n.headers});yield*r.iterator()})),wM=Lb((e=>async(t={})=>(await e.post("commands",{signal:t.signal,searchParams:Tb(t),headers:t.headers})).json())),bM=Lb((e=>async(t,n={})=>{const r=await e.post("dns",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers});return(await r.json()).Path})),vM=Lb((e=>()=>{const t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}})),kM=Lb((e=>async function*(t,n={}){const r={arg:`${t instanceof Uint8Array?te.k.decode(t):t}`,...n};r.compressionLevel&&(r["compression-level"]=r.compressionLevel,delete r.compressionLevel);const s=await e.post("get",{signal:n.signal,searchParams:Tb(r),headers:n.headers});yield*s.iterator()})),MM=Lb((e=>async function(t={}){const n=await e.post("id",{signal:t.signal,searchParams:Tb({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),r={...Qb(await n.json())};return r.id=(0,Nr.jE)(r.id),r.addresses&&(r.addresses=r.addresses.map((e=>(0,Zn.HM)(e)))),r})),EM=e=>{const t=MM(e);return async function(e={}){const n=await t(e);return Boolean(n&&n.addresses&&n.addresses.length)}},LM=Lb(((e,t)=>async function*(n,r={}){const s=`${n instanceof Uint8Array?te.k.decode(n):n}`;async function i(e){let n=e.Hash;if(n.includes("/")){const e=n.startsWith("/ipfs/")?n:`/ipfs/${n}`;n=(await Cv(t)(e)).cid}else n=te.k.parse(n);const r={name:e.Name,path:s+(e.Name?`/${e.Name}`:""),size:e.Size,cid:n,type:SM(e)};return e.Mode&&(r.mode=parseInt(e.Mode,8)),void 0!==e.Mtime&&null!==e.Mtime&&(r.mtime={secs:e.Mtime},void 0!==e.MtimeNsecs&&null!==e.MtimeNsecs&&(r.mtime.nsecs=e.MtimeNsecs)),r}const a=await e.post("ls",{signal:r.signal,searchParams:Tb({arg:s,...r}),headers:r.headers});for await(let e of a.ndjson()){if(e=e.Objects,!e)throw new Error("expected .Objects in results");if(e=e[0],!e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(!t.length)return void(yield i(e));yield*t.map(i)}}));function SM(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}const DM=Lb((e=>async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return Qb(await n.json())})),TM=Lb((e=>async function*(t,n={}){const r=await e.post("ping",{signal:n.signal,searchParams:Tb({arg:`${t}`,...n}),headers:n.headers,transform:Qb});yield*r.ndjson()})),RM=Lb((e=>async function(t,n={}){const r=await e.post("resolve",{signal:n.signal,searchParams:Tb({arg:t,...n}),headers:n.headers}),{Path:s}=await r.json();return s})),PM=Lb((e=>async(e={})=>{throw B(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),IM=Lb((e=>async function(t={}){const n=await e.post("shutdown",{signal:t.signal,searchParams:Tb(t),headers:t.headers});await n.text()})),AM=Lb((e=>async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:Tb(t),headers:t.headers});return{...Qb(await n.json()),"ipfs-http-client":"1.0.0"}}));n(63897),n(36074);var YM,OM,NM,xM=n(79359);async function*CM(e,t){yield*(0,bi.Z)(e,(async e=>(await t.addressBook.add(e.id,e.multiaddrs),e)))}function HM(e){const t=new Set;return(0,vi.Z)(e,(e=>!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)))}async function*jM(e,t=1){let n=0;for await(const t of e)n++,yield t;if(n<t)throw B(new Error("not found"),"NOT_FOUND")}!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.DHT_DISABLED="DHT is not available",e.PUBSUB_DISABLED="PubSub is not available",e.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",e.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",e.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",e.NOT_FOUND="Not found"}(YM||(YM={})),(NM=OM||(OM={})).DHT_DISABLED="ERR_DHT_DISABLED",NM.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",NM.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",NM.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",NM.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",NM.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",NM.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",NM.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",NM.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",NM.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",NM.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",NM.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",NM.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",NM.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",NM.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",NM.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",NM.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",NM.ERR_DIALED_SELF="ERR_DIALED_SELF",NM.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",NM.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",NM.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",NM.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",NM.ERR_INVALID_KEY="ERR_INVALID_KEY",NM.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",NM.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",NM.ERR_INVALID_PEER="ERR_INVALID_PEER",NM.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",NM.ERR_NOT_FOUND="ERR_NOT_FOUND",NM.ERR_TIMEOUT="ERR_TIMEOUT",NM.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",NM.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",NM.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",NM.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",NM.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",NM.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",NM.ERR_FIND_SELF="ERR_FIND_SELF",NM.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",NM.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",NM.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",NM.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",NM.ERR_INVALID_CMS="ERR_INVALID_CMS",NM.ERR_MISSING_KEYS="ERR_MISSING_KEYS",NM.ERR_NO_KEY="ERR_NO_KEY",NM.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",NM.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",NM.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",NM.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",NM.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",NM.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",NM.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",NM.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",NM.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",NM.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",NM.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",NM.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",NM.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",NM.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",NM.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",NM.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",NM.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",NM.ERR_INVALID_RECORD="ERR_INVALID_RECORD",NM.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",NM.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",NM.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",NM.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",NM.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED";var BM=n(35609),zM=n(3894);const UM=(0,j.kg)("libp2p:peer-routing");class FM{constructor(e,t){this.components=e,this.routers=t.routers,this.refreshManagerInit=t.refreshManager??{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||0===this.routers.length||null!=this.timeoutId||!1===this.refreshManagerInit.enabled||(this.timeoutId=(0,BM.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){if(null==this.abortController)try{this.abortController=new $n.TimeoutController(this.refreshManagerInit.timeout??1e4);try{(0,zM.setMaxListeners)?.(1/0,this.abortController.signal)}catch{}await(0,$s.Z)(this.getClosestPeers(this.components.peerId.toBytes(),{signal:this.abortController.signal}))}catch(e){UM.error(e)}finally{this.abortController?.clear(),this.abortController=void 0}}async stop(){(0,BM.clearDelayedInterval)(this.timeoutId),this.abortController?.abort(),this.started=!1}async findPeer(e,t){if(0===this.routers.length)throw B(new Error("No peer routers available"),OM.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.peerId.toString())throw B(new Error("Should not try to find self"),OM.ERR_FIND_SELF);const n=await(0,ki.zG)((0,Pm.Z)(...this.routers.map((n=>async function*(){try{yield await n.findPeer(e,t)}catch(e){UM.error(e)}}()))),(e=>(0,vi.Z)(e,Boolean)),(e=>CM(e,this.components.peerStore)),(async e=>await(0,wu.Z)(e)));if(null!=n)return n;throw B(new Error(YM.NOT_FOUND),OM.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(0===this.routers.length)throw B(new Error("No peer routers available"),OM.ERR_NO_ROUTERS_AVAILABLE);yield*(0,ki.zG)((0,Pm.Z)(...this.routers.map((n=>n.getClosestPeers(e,t)))),(e=>CM(e,this.components.peerStore)),(e=>HM(e)),(e=>jM(e)))}}class VM{constructor(e,t){this.routers=t.routers??[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,t={}){if(0===this.routers.length)throw B(new Error("No content this.routers available"),OM.ERR_NO_ROUTERS_AVAILABLE);yield*(0,ki.zG)((0,Pm.Z)(...this.routers.map((n=>n.findProviders(e,t)))),(e=>CM(e,this.components.peerStore)),(e=>HM(e)),(e=>jM(e)))}async provide(e,t={}){if(0===this.routers.length)throw B(new Error("No content routers available"),OM.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async n=>await n.provide(e,t))))}async put(e,t,n){if(!this.isStarted())throw B(new Error(YM.NOT_STARTED_YET),OM.DHT_NOT_STARTED);const r=this.components.dht;null!=r&&await(0,$s.Z)(r.put(e,t,n))}async get(e,t){if(!this.isStarted())throw B(new Error(YM.NOT_STARTED_YET),OM.DHT_NOT_STARTED);const n=this.components.dht;if(null!=n)for await(const r of n.get(e,t))if("VALUE"===r.name)return r.value;throw B(new Error(YM.NOT_FOUND),OM.ERR_NOT_FOUND)}async*getMany(e,t,n){if(!this.isStarted())throw B(new Error(YM.NOT_STARTED_YET),OM.DHT_NOT_STARTED);if(null==t||0===t)return;let r=0;const s=this.components.dht;if(null!=s)for await(const i of s.get(e,n))if("VALUE"===i.name&&(yield{from:i.from,val:i.value},r++,r===t))break;if(0===r)throw B(new Error(YM.NOT_FOUND),OM.ERR_NOT_FOUND)}}function WM(e){if((0,Ur.I)(e))return{id:e,multiaddrs:[],protocols:[]};let t;return"string"==typeof e&&(e=(0,Zn.HM)(e)),(0,Zn.h2)(e)&&(t=e,e=function(e){const t=e.getPeerId();if(null==t)throw B(new Error(`${e.toString()} does not have a valid peer type`),OM.ERR_INVALID_MULTIADDR);try{return(0,Nr.jE)(t)}catch(t){throw B(new Error(`${e.toString()} is not a valid peer type`),OM.ERR_INVALID_MULTIADDR)}}(e)),{id:e,multiaddrs:null!=t?[t]:[],protocols:[]}}const $M=e=>e;class GM extends r_.v{constructor(e,t){super();const{listen:n=[],announce:r=[]}=t;this.components=e,this.listen=new Set(n.map((e=>e.toString()))),this.announce=new Set(r.map((e=>e.toString()))),this.observed=new Set,this.announceFilter=t.announceFilter??$M}getListenAddrs(){return Array.from(this.listen).map((e=>(0,Zn.HM)(e)))}getAnnounceAddrs(){return Array.from(this.announce).map((e=>(0,Zn.HM)(e)))}getObservedAddrs(){return Array.from(this.observed).map((e=>(0,Zn.HM)(e)))}confirmObservedAddr(e){}removeObservedAddr(e){}addObservedAddr(e){let t=(0,Zn.HM)(e);const n=t.getPeerId();null!=n&&(0,Nr.jE)(n).equals(this.components.peerId)&&(t=t.decapsulate((0,Zn.HM)(`/p2p/${this.components.peerId.toString()}`)));const r=t.toString();this.observed.has(r)||(this.observed.add(r),this.dispatchEvent(new r_.A("change:addresses")))}getAddresses(){let e=this.getAnnounceAddrs().map((e=>e.toString()));0===e.length&&(e=this.components.transportManager.getAddrs().map((e=>e.toString()))),e=e.concat(this.getObservedAddrs().map((e=>e.toString())));const t=new Set(e);return this.announceFilter(Array.from(t).map((e=>(0,Zn.HM)(e)))).map((e=>e.getPeerId()===this.components.peerId.toString()?e:e.encapsulate(`/p2p/${this.components.peerId.toString()}`)))}}const qM=(0,j.kg)("libp2p:connection-manager:latency-monitor:visibility-change-emitter");class KM extends r_.v{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",null!=globalThis.document&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let e="hidden",t="visibilitychange";void 0!==globalThis.document.hidden?(e="hidden",t="visibilitychange"):void 0!==globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}_addVisibilityChangeListener(){void 0===globalThis.document.addEventListener||void 0===document[this.hidden]?qM("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}_handleVisibilityChange(){const e=!1===globalThis.document[this.hidden];qM(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new r_.A("visibilityChange",{detail:e}))}}const ZM=(0,j.kg)("libp2p:connection-manager:latency-monitor");class JM extends r_.v{constructor(e={}){super();const{latencyCheckIntervalMs:t,dataEmitIntervalMs:n,asyncTestFn:r,latencyRandomPercentage:s}=e;this.latencyCheckIntervalMs=t??500,this.latencyRandomPercentage=s??10,this.latencyCheckMultiply=this.latencyRandomPercentage/100*2*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=null===n||0===n?void 0:n??5e3,ZM("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),null!=this.dataEmitIntervalMs?ZM("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):ZM("Not emitting summaries"),this.asyncTestFn=r,null!=globalThis.process?.hrtime?(ZM("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{const t=this.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!=typeof window&&null!=window.performance?.now?(ZM("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(ZM("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this.latencyData=this.initLatencyData()}start(){void 0!==globalThis.window&&(this.visibilityChangeEmitter=new KM,this.visibilityChangeEmitter.addEventListener("visibilityChange",(e=>{const{detail:t}=e;t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),!0===this.visibilityChangeEmitter?.isVisible()&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"==typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}_stopTimers(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){const e=this.getSummary();e.events>0&&this.dispatchEvent(new r_.A("data",{detail:e}))}getSummary(){const e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),ZM.trace("Summary: %O",e),e}checkLatency(){const e=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,t={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+e),startTime:this.now()},n=()=>{if(null==this.checkLatencyID)return;const e=this.getDeltaMS(t.startTime)-t.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,e),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,e),this.latencyData.totalMs+=e,ZM.trace("MS: %s Data: %O",e,this.latencyData)};ZM.trace("localData: %O",t),this.checkLatencyID=setTimeout((()=>{null!=this.asyncTestFn?(t.deltaOffset=0,t.startTime=this.now(),this.asyncTestFn(n)):(t.deltaOffset-=1,n())}),t.deltaOffset),"function"==typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}var QM=n(21233),XM=n(76260),eE=n(97724),tE=n(630),nE=n(6633);const rE=(0,j.kg)("libp2p:connection-manager"),sE={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,inboundConnectionThreshold:5,maxIncomingPendingConnections:10},iE="libp2p",aE="connection-manager";class oE extends r_.v{constructor(e,t){if(super(),this.opts=C.Z.call({ignoreUndefined:!0},sE,t),this.opts.maxConnections<this.opts.minConnections)throw B(new Error("Connection Manager maxConnections must be greater than minConnections"),OM.ERR_INVALID_PARAMETERS);rE("options: %o",this.opts),this.components=e,this.connections=new Map,this.started=!1,this._checkMetrics=this._checkMetrics.bind(this),this.latencyMonitor=new JM({latencyCheckIntervalMs:t.pollInterval,dataEmitIntervalMs:t.pollInterval});try{(0,zM.setMaxListeners)?.(1/0,this)}catch{}this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.startupReconnectTimeout=t.startupReconnectTimeout??6e4,this.dialTimeout=t.dialTimeout??3e4,this.allow=(t.allow??[]).map((e=>(0,Zn.HM)(e))),this.deny=(t.deny??[]).map((e=>(0,Zn.HM)(e))),this.inboundConnectionRateLimiter=new nE.RateLimiterMemory({points:this.opts.inboundConnectionThreshold,duration:1}),this.incomingPendingConnections=0}isStarted(){return this.started}async start(){null!=this.components.metrics&&(this.timer=this.timer??QM(this._checkMetrics,this.opts.pollInterval)),this.components.metrics?.updateComponentMetric({system:iE,component:aE,metric:"connections",label:"direction",value:()=>{const e={inbound:0,outbound:0};for(const t of this.connections.values())for(const n of t)"inbound"===n.stat.direction?e.inbound++:e.outbound++;return e}}),this.components.metrics?.updateComponentMetric({system:iE,component:aE,metric:"protocol-streams-total",label:"protocol",value:()=>{const e={};for(const t of this.connections.values())for(const n of t)for(const t of n.streams){const n=`${t.stat.direction} ${t.stat.protocol??"unnegotiated"}`;e[n]=(e[n]??0)+1}return e}}),this.components.metrics?.updateComponentMetric({system:iE,component:aE,metric:"protocol-streams-per-connection-90th-percentile",label:"protocol",value:()=>{const e={};for(const t of this.connections.values())for(const n of t){const t={};for(const e of n.streams){const n=`${e.stat.direction} ${e.stat.protocol??"unnegotiated"}`;t[n]=(t[n]??0)+1}for(const[n,r]of Object.entries(t))e[n]=e[n]??[],e[n].push(r)}const t={};for(let[n,r]of Object.entries(e)){r=r.sort(((e,t)=>e-t));const e=Math.floor(.9*r.length);t[n]=r[e]}return t}}),this.latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor.addEventListener("data",this._onLatencyMeasure),this.started=!0,rE("started")}async afterStart(){this.components.upgrader.addEventListener("connection",this.onConnect),this.components.upgrader.addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then((async()=>{const e=[];for(const t of await this.components.peerStore.all())(await this.components.peerStore.getTags(t.id)).filter((e=>e.name===tE.$)).length>0&&e.push(t.id);this.connectOnStartupController?.clear(),this.connectOnStartupController=new $n.TimeoutController(this.startupReconnectTimeout);try{(0,zM.setMaxListeners)?.(1/0,this.connectOnStartupController.signal)}catch{}await Promise.all(e.map((async e=>{await this.openConnection(e,{signal:this.connectOnStartupController?.signal}).catch((e=>{rE.error(e)}))})))})).catch((e=>{rE.error(e)})).finally((()=>{this.connectOnStartupController?.clear()}))}async beforeStop(){this.connectOnStartupController?.abort(),this.components.upgrader.removeEventListener("connection",this.onConnect),this.components.upgrader.removeEventListener("connectionEnd",this.onDisconnect)}async stop(){this.timer?.clear(),this.latencyMonitor.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor.stop(),this.started=!1,await this._close(),rE("stopped")}async _close(){const e=[];for(const t of this.connections.values())for(const n of t)e.push((async()=>{try{await n.close()}catch(e){rE.error(e)}})());rE("closing %d connections",e.length),await Promise.all(e),this.connections.clear()}async _checkMetrics(){const e=this.components.metrics;if(null!=e)try{const t=e.getGlobal().getMovingAverages(),n=t.dataReceived[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxReceivedData",n);const r=t.dataSent[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxSentData",r);const s=n+r;await this._checkMaxLimit("maxData",s),rE.trace("metrics update",s)}finally{this.timer=QM(this._checkMetrics,this.opts.pollInterval)}}onConnect(e){this._onConnect(e).catch((e=>{rE.error(e)}))}async _onConnect(e){const{detail:t}=e;if(!this.started)return void await t.close();const n=t.remotePeer,r=n.toString(),s=this.connections.get(r);null!=s?s.push(t):this.connections.set(r,[t]),null!=n.publicKey&&await this.components.peerStore.keyBook.set(n,n.publicKey);const i=this.getConnections().length,a=i-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",i,a),this.dispatchEvent(new r_.A("peer:connect",{detail:t}))}onDisconnect(e){const{detail:t}=e;if(!this.started)return;const n=t.remotePeer.toString();let r=this.connections.get(n);null!=r&&r.length>1?(r=r.filter((e=>e.id!==t.id)),this.connections.set(n,r)):null!=r&&(this.connections.delete(n),this.dispatchEvent(new r_.A("peer:disconnect",{detail:t})),this.components.metrics?.onPeerDisconnected(t.remotePeer))}getConnections(e){if(null!=e)return this.connections.get(e.toString())??[];let t=[];for(const e of this.connections.values())t=t.concat(e);return t}async openConnection(e,t={}){rE("dial to %p",e);const n=this.getConnections(e);if(n.length>0)return rE("had an existing connection to %p",e),n[0];let r;if(null==t?.signal){r=new $n.TimeoutController(this.dialTimeout),t.signal=r.signal;try{(0,zM.setMaxListeners)?.(1/0,r.signal)}catch{}}try{const n=await this.components.dialer.dial(e,t);let s=this.connections.get(e.toString());null==s&&(s=[],this.connections.set(e.toString(),s));let i=!1;for(const e of s)e.id===n.id&&(i=!0);return i||s.push(n),n}finally{null!=r&&r.clear()}}async closeConnections(e){const t=this.connections.get(e.toString())??[];await Promise.all(t.map((async e=>await e.close())))}getAll(e){if(!(0,Ur.I)(e))throw B(new Error("peerId must be an instance of peer-id"),OM.ERR_INVALID_PARAMETERS);const t=e.toString(),n=this.connections.get(t);return null!=n?n.filter((e=>e.stat.status===XM.o1)):[]}_onLatencyMeasure(e){const{detail:t}=e;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((e=>{rE.error(e)}))}async _checkMaxLimit(e,t,n=1){const r=this.opts[e];rE.trace("checking limit of %s. current value: %d of %d",e,t,r),t>r&&(rE("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.peerId,e,t,r,n),await this._pruneConnections(n))}async _pruneConnections(e){const t=this.getConnections(),n=new eE.ji;for(const e of t){const t=e.remotePeer;if(n.has(t))continue;const r=await this.components.peerStore.getTags(t);n.set(t,r.reduce(((e,t)=>e+t.value),0))}const r=t.sort(((e,t)=>{const r=n.get(e.remotePeer)??0,s=n.get(t.remotePeer)??0;return r>s?1:r<s?-1:0})),s=[];for(const t of r)if(rE("too many connections open - closing a connection to %p",t.remotePeer),s.push(t),s.length===e)break;await Promise.all(s.map((async e=>{try{await e.close()}catch(e){rE.error(e)}this.onDisconnect(new r_.A("connectionEnd",{detail:e}))})))}async acceptIncomingConnection(e){if(this.deny.some((t=>e.remoteAddr.toString().startsWith(t.toString()))))return rE("connection from %s refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some((t=>e.remoteAddr.toString().startsWith(t.toString()))))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.opts.maxIncomingPendingConnections)return rE("connection from %s refused - incomingPendingConnections exceeded by peer %s",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){const t=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(t,1)}catch{return rE("connection from %s refused - inboundConnectionThreshold exceeded by host %s",t,e.remoteAddr),!1}}return this.getConnections().length<this.opts.maxConnections?(this.incomingPendingConnections++,!0):(rE("connection from %s refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}}const cE=(0,j.kg)("libp2p:connection-manager:auto-dialler"),dE={enabled:!0,minConnections:0,autoDialInterval:1e4};class lE{constructor(e,t){this.components=e,this.options=C.Z.call({ignoreUndefined:!0},dE,t),this.running=!1,this._autoDial=this._autoDial.bind(this),cE("options: %j",this.options)}isStarted(){return this.running}async start(){this.options.enabled?(this.running=!0,this._autoDial().catch((e=>{cE.error("could start autodial",e)})),cE("started")):cE("not enabled")}async stop(){this.options.enabled?(this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),cE("stopped")):cE("not enabled")}async _autoDial(){null!=this.autoDialTimeout&&this.autoDialTimeout.clear();const e=this.options.minConnections;if(this.components.connectionManager.getConnections().length>=e)return void(this.autoDialTimeout=QM(this._autoDial,this.options.autoDialInterval));const t=await this.components.peerStore.all(),n=await(0,ki.zG)(t.sort((()=>Math.random()>.5?1:-1)),(e=>(0,vi.Z)(e,(e=>!e.id.equals(this.components.peerId)))),(e=>(0,jm.Z)(e,((e,t)=>t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1))),(async e=>await(0,Di.Z)(e)));for(let t=0;this.running&&t<n.length&&this.components.connectionManager.getConnections().length<e;t++){if(!this.running)return;const e=n[t];if(0===this.components.connectionManager.getConnections(e.id).length){cE("connecting to a peerStore stored peer %p",e.id);try{await this.components.connectionManager.openConnection(e.id)}catch(e){cE.error("could not connect to peerStore stored peer",e)}}}this.running&&(this.autoDialTimeout=QM(this._autoDial,this.options.autoDialInterval))}}var uE;!function(e){let t,n,r,s,i,a;!function(e){e.SUCCESS="SUCCESS",e.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",e.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",e.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",e.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",e.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",e.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",e.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",e.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",e.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",e.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",e.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",e.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",e.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",e.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",e.MALFORMED_MESSAGE="MALFORMED_MESSAGE"}(t=e.Status||(e.Status={})),function(e){e[e.SUCCESS=100]="SUCCESS",e[e.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",e[e.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",e[e.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",e[e.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",e[e.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",e[e.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",e[e.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",e[e.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",e[e.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",e[e.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",e[e.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",e[e.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",e[e.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",e[e.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",e[e.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"}(n||(n={})),function(e){e.codec=()=>(0,Jr.Ji)(n)}(t=e.Status||(e.Status={})),function(e){e.HOP="HOP",e.STOP="STOP",e.STATUS="STATUS",e.CAN_HOP="CAN_HOP"}(r=e.Type||(e.Type={})),function(e){e[e.HOP=1]="HOP",e[e.STOP=2]="STOP",e[e.STATUS=3]="STATUS",e[e.CAN_HOP=4]="CAN_HOP"}(s||(s={})),function(e){e.codec=()=>(0,Jr.Ji)(s)}(r=e.Type||(e.Type={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,Jr.yw)(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),(!0===n.writeDefaults||null!=e.id&&e.id.byteLength>0)&&(t.uint32(10),t.bytes(e.id)),null!=e.addrs)for(const n of e.addrs)t.uint32(18),t.bytes(n);!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={id:new Uint8Array(0),addrs:[]},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.id=e.bytes();break;case 2:n.addrs.push(e.bytes());break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(i=e.Peer||(e.Peer={})),e.codec=()=>(null==a&&(a=(0,Jr.yw)(((t,n,r={})=>{!1!==r.lengthDelimited&&n.fork(),null!=t.type&&(n.uint32(8),e.Type.codec().encode(t.type,n)),null!=t.srcPeer&&(n.uint32(18),e.Peer.codec().encode(t.srcPeer,n,{writeDefaults:!1})),null!=t.dstPeer&&(n.uint32(26),e.Peer.codec().encode(t.dstPeer,n,{writeDefaults:!1})),null!=t.code&&(n.uint32(32),e.Status.codec().encode(t.code,n)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={},s=null==n?t.len:t.pos+n;for(;t.pos<s;){const n=t.uint32();switch(n>>>3){case 1:r.type=e.Type.codec().decode(t);break;case 2:r.srcPeer=e.Peer.codec().decode(t,t.uint32());break;case 3:r.dstPeer=e.Peer.codec().decode(t,t.uint32());break;case 4:r.code=e.Status.codec().decode(t);break;default:t.skipType(7&n)}}return r}))),a),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(uE||(uE={}));var hE=n(49516);const pE="/libp2p/circuit/relay/0.1.0";function fE(e,t){e.write({type:uE.Type.STATUS,code:t})}function mE(e,t){try{null!=e.dstPeer?.addrs&&e.dstPeer.addrs.forEach((e=>(0,Zn.HM)(e)))}catch(n){throw fE(t,e.type===uE.Type.HOP?uE.Status.HOP_DST_MULTIADDR_INVALID:uE.Status.STOP_DST_MULTIADDR_INVALID),n}try{null!=e.srcPeer?.addrs&&e.srcPeer.addrs.forEach((e=>(0,Zn.HM)(e)))}catch(n){throw fE(t,e.type===uE.Type.HOP?uE.Status.HOP_SRC_MULTIADDR_INVALID:uE.Status.STOP_SRC_MULTIADDR_INVALID),n}}var _E=n(86063);const yE=(0,j.kg)("libp2p:circuit:stream-handler");class gE{constructor(e){const{stream:t,maxLength:n=4096}=e;this.stream=t,this.shake=(0,_E.Y)(this.stream),this.decoder=Zw.J.fromReader(this.shake.reader,{maxDataLength:n})}async read(){const e=await this.decoder.next();if(null!=e.value){const t=uE.decode(e.value);return yE("read message type",t.type),t}yE("read received no value, closing stream"),this.close()}write(e){yE("write message type %s",e.type),this.shake.write(Zw.c.single(uE.encode(e)))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){yE("closing the stream"),this.rest().sink([]).catch((e=>{yE.error(e)}))}}const wE=(0,j.kg)("libp2p:circuit:stop"),bE=(0,j.kg)("libp2p:circuit:hop");var vE=n(28704);const kE=(0,j.kg)("libp2p:circuit");class ME{constructor(e,t){this._init=t,this.components=e,this._started=!1}isStarted(){return this._started}async start(){this._started||(this._started=!0,await this.components.registrar.handle(pE,(e=>{this._onProtocol(e).catch((e=>{kE.error(e)}))})).catch((e=>{kE.error(e)})))}async stop(){await this.components.registrar.unhandle(pE)}hopEnabled(){return!0}hopActive(){return!0}get[vE.NA](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(e){const{connection:t,stream:n}=e,r=new $n.TimeoutController(this._init.hop.timeout);try{(0,zM.setMaxListeners)?.(1/0,r.signal)}catch{}try{const e=(0,Kw.D7)(n,r.signal),s=new gE({stream:{...n,...e}}),i=await s.read();if(null==i)return kE("request was invalid, could not read from stream"),s.write({type:uE.Type.STATUS,code:uE.Status.MALFORMED_MESSAGE}),void s.close();let a;switch(i.type){case uE.Type.CAN_HOP:kE("received CAN_HOP request from %p",t.remotePeer),await function(e){const{connection:t,streamHandler:n,circuit:r}=e,s=r.hopEnabled();bE("can hop (%s) request from %p",s,t.remotePeer),n.end({type:uE.Type.STATUS,code:s?uE.Status.SUCCESS:uE.Status.HOP_CANT_SPEAK_RELAY})}({circuit:this,connection:t,streamHandler:s});break;case uE.Type.HOP:kE("received HOP request from %p",t.remotePeer),await async function(e){const{connection:t,request:n,streamHandler:r,circuit:s,connectionManager:i}=e;if(!s.hopEnabled())return bE("HOP request received but we are not acting as a relay"),r.end({type:uE.Type.STATUS,code:uE.Status.HOP_CANT_SPEAK_RELAY});try{mE(n,r)}catch(e){return void bE.error("invalid hop request via peer %p %o",t.remotePeer,e)}if(null==n.dstPeer)return void bE("HOP request received but we do not receive a dstPeer");const a=(0,Nr.cv)(n.dstPeer.id),o=i.getConnections(a);if(0===o.length&&!s.hopActive())return bE("HOP request received but we are not connected to the destination peer"),r.end({type:uE.Type.STATUS,code:uE.Status.HOP_NO_CONN_TO_DST});if(0===o.length)return bE("did not have connection to remote peer"),r.end({type:uE.Type.STATUS,code:uE.Status.HOP_NO_CONN_TO_DST});const c={type:uE.Type.STOP,dstPeer:n.dstPeer,srcPeer:n.srcPeer};let d;try{bE("performing STOP request");const e=await async function(e){const{connection:t,request:n,signal:r}=e,s=await t.newStream(pE,{signal:r});wE("starting stop request to %p",t.remotePeer);const i=new gE({stream:s});i.write(n);const a=await i.read();if(null!=a){if(a.code===uE.Status.SUCCESS)return wE("stop request to %p was successful",t.remotePeer),i.rest();wE("stop request failed with code %d",a.code),i.close()}else i.close()}({connection:o[0],request:c});if(null==e)throw new Error("Could not stop");d=e}catch(e){return void bE.error(e)}bE("hop request from %p is valid",t.remotePeer),r.write({type:uE.Type.STATUS,code:uE.Status.SUCCESS});const l=r.rest();return bE("creating related connections"),await(0,ki.zG)(l,d,l)}({connection:t,request:i,streamHandler:s,circuit:this,connectionManager:this.components.connectionManager});break;case uE.Type.STOP:kE("received STOP request from %p",t.remotePeer),a=await function(e){const{connection:t,request:n,streamHandler:r}=e;try{mE(n,r)}catch(e){return void wE.error("invalid stop request via peer %p %o",t.remotePeer,e)}return wE("stop request is valid"),r.write({type:uE.Type.STATUS,code:uE.Status.SUCCESS}),r.rest()}({connection:t,request:i,streamHandler:s});break;default:return kE("Request of type %s not supported",i.type),s.write({type:uE.Type.STATUS,code:uE.Status.MALFORMED_MESSAGE}),void s.close()}if(null!=a){const e=t.remoteAddr.encapsulate("/p2p-circuit").encapsulate((0,Zn.HM)(i.dstPeer?.addrs[0])),n=(0,Zn.HM)(i.srcPeer?.addrs[0]),r=(0,hE.j)({stream:a,remoteAddr:e,localAddr:n}),s=i.type===uE.Type.HOP?"relay":"inbound";kE("new %s connection %s",s,r.remoteAddr);const o=await this.components.upgrader.upgradeInbound(r);kE("%s connection %s upgraded",s,r.remoteAddr),null!=this.handler&&this.handler(o)}}finally{r.clear()}}async dial(e,t={}){const n=e.toString().split("/p2p-circuit"),r=(0,Zn.HM)(n[0]),s=(0,Zn.HM)(n[n.length-1]),i=r.getPeerId(),a=s.getPeerId();if(null==i||null==a){const e="Circuit relay dial failed as addresses did not have peer id";throw kE.error(e),B(new Error(e),OM.ERR_RELAYED_DIAL)}const o=(0,Nr.jE)(i),c=(0,Nr.jE)(a);let d=!1,l=this.components.connectionManager.getConnections(o)[0];null==l&&(await this.components.peerStore.addressBook.add(o,[r]),l=await this.components.connectionManager.openConnection(o,t),d=!0);try{const n=await async function(e){const{connection:t,request:n,signal:r}=e,s=await t.newStream(pE,{signal:r}),i=new gE({stream:s});i.write(n);const a=await i.read();if(null==a)throw B(new Error("HOP request had no response"),OM.ERR_HOP_REQUEST_FAILED);if(a.code===uE.Status.SUCCESS)return bE("hop request was successful"),i.rest();throw bE("hop request failed with code %d, closing stream",a.code),i.close(),B(new Error(`HOP request failed with code "${a.code??"unknown"}"`),OM.ERR_HOP_REQUEST_FAILED)}({...t,connection:l,request:{type:uE.Type.HOP,srcPeer:{id:this.components.peerId.toBytes(),addrs:this.components.addressManager.getAddresses().map((e=>e.bytes))},dstPeer:{id:c.toBytes(),addrs:[(0,Zn.HM)(s).bytes]}}}),i=r.encapsulate(`/p2p-circuit/p2p/${this.components.peerId.toString()}`),a=(0,hE.j)({stream:n,remoteAddr:e,localAddr:i});return kE("new outbound connection %s",a.remoteAddr),await this.components.upgrader.upgradeOutbound(a)}catch(e){throw kE.error("Circuit relay dial failed",e),d&&await l.close(),e}}createListener(e){return this.handler=e.handler,function(e){const t=new Map,n=Object.assign(new r_.v,{close:async()=>await Promise.resolve(),listen:async function(r){const s=r.toString().split("/p2p-circuit").find((e=>""!==e)),i=(0,Zn.HM)(s),a=i.getPeerId();if(null==a)throw new Error("Could not determine relay peer from multiaddr");const o=(0,Nr.jE)(a);await e.peerStore.addressBook.add(o,[i]);const c=await e.connectionManager.openConnection(o),d=c.remoteAddr.encapsulate("/p2p-circuit");t.set(c.remotePeer.toString(),d),n.dispatchEvent(new r_.A("listening"))},getAddrs:function(){const e=[];for(const n of t.values())e.push(n);return e}});return e.connectionManager.addEventListener("peer:disconnect",(e=>{const{detail:r}=e;t.delete(r.remotePeer.toString())&&n.dispatchEvent(new r_.A("close"))})),n}({connectionManager:this.components.connectionManager,peerStore:this.components.peerStore})}filter(e){return(e=Array.isArray(e)?e:[e]).filter((e=>Jn.dx.matches(e)))}}async function EE(e){const t=(new TextEncoder).encode(e),n=await ji.sha256.digest(t);return te.k.createV0(n)}const LE="hop_relay",SE="true",DE="/libp2p/relay";var TE=n(79690);const RE=(0,j.kg)("libp2p:auto-relay"),PE=()=>{};class IE{constructor(e,t){this.components=e,this.addressSorter=t.addressSorter??TE.F,this.maxListeners=t.maxListeners??1,this.listenRelays=new Set,this.onError=t.onError??PE,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.peerStore.addEventListener("change:protocols",(e=>{this._onProtocolChange(e).catch((e=>{RE.error(e)}))})),this.components.connectionManager.addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(e){const{peerId:t,protocols:n}=e.detail,r=t.toString();if(null!=n.find((e=>e===pE))){if(!this.listenRelays.has(r))try{const e=this.components.connectionManager.getConnections(t);if(0===e.length)return;const n=e[0];if(n.remoteAddr.protoCodes().includes(290))return void RE(`relayed connection to ${r} will not be used to hop on`);const s=await async function(e){const{connection:t,signal:n}=e,r=await t.newStream(pE,{signal:n}),s=new gE({stream:r});s.write({type:uE.Type.CAN_HOP});const i=await s.read();return await s.close(),null!=i&&i.code===uE.Status.SUCCESS}({connection:n});s&&(await this.components.peerStore.metadataBook.setValue(t,LE,(0,Wn.m)(SE)),await this._addListenRelay(n,r))}catch(e){this.onError(e)}}else this.listenRelays.has(r)&&await this._removeListenRelay(r)}_onPeerDisconnected(e){const t=e.detail.remotePeer.toString();this.listenRelays.has(t)&&this._removeListenRelay(t).catch((e=>{RE.error(e)}))}async _addListenRelay(e,t){try{if(this.listenRelays.size>=this.maxListeners)return;const n=await(0,ki.zG)(await this.components.peerStore.addressBook.get(e.remotePeer),(e=>(0,jm.Z)(e,this.addressSorter)),(async e=>await(0,Di.Z)(e))),r=await Promise.all(n.map((async t=>{try{let n=t.multiaddr;return null==n.getPeerId()&&(n=n.encapsulate(`/p2p/${e.remotePeer.toString()}`)),n=n.encapsulate("/p2p-circuit"),await this.components.transportManager.listen([n]),!0}catch(e){RE.error("error listening on circuit address",e),this.onError(e)}return!1})));r.includes(!0)&&this.listenRelays.add(t)}catch(e){this.onError(e),this.listenRelays.delete(t)}}async _removeListenRelay(e){this.listenRelays.delete(e)&&await this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this.listenRelays.size>=this.maxListeners)return;const t=[],n=await this.components.peerStore.all();for(const{id:r,metadata:s}of n){const n=r.toString();if(this.listenRelays.has(n))continue;if(e.includes(n))continue;const i=s.get(LE);if(null==i||(0,Xn.B)(i)!==SE)continue;const a=this.components.connectionManager.getConnections(r);if(0!==a.length){if(await this._addListenRelay(a[0],n),this.listenRelays.size>=this.maxListeners)return}else t.push(r)}for(const e of t)if(await this._tryToListenOnRelay(e),this.listenRelays.size>=this.maxListeners)return;try{const e=await EE(DE);for await(const t of this.components.contentRouting.findProviders(e)){if(0===t.multiaddrs.length)continue;const e=t.id;if(!e.equals(this.components.peerId)&&(await this.components.peerStore.addressBook.add(e,t.multiaddrs),await this._tryToListenOnRelay(e),this.listenRelays.size>=this.maxListeners))return}}catch(e){this.onError(e)}}async _tryToListenOnRelay(e){try{const t=await this.components.connectionManager.openConnection(e);await this._addListenRelay(t,e.toString())}catch(t){RE.error("Could not use %p as relay",e,t),this.onError(t,`could not connect and listen on known hop relay ${e.toString()}`)}}}const AE=(0,j.kg)("libp2p:relay");class YE{constructor(e,t){this.components=e,this.autoRelay=!1!==t.autoRelay?.enabled?new IE(e,{addressSorter:t.addressSorter,...t.autoRelay}):void 0,this.started=!1,this.init=t,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,BM.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){null!=this.timeout&&(0,BM.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{const e=await EE(DE);await this.components.contentRouting.provide(e)}catch(e){e.code===OM.ERR_NO_ROUTERS_AVAILABLE?(AE.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e),await this.stop()):AE.error(e)}}}var OE=n(7314),NE=(n(29222),n(4676),n(14463));n(41486);const xE=NE.pki,CE=(0,j.kg)("libp2p:keychain:cms"),HE=new WeakMap;class jE{constructor(e,t){if(null==e)throw B(new Error("keychain is required"),OM.ERR_KEYCHAIN_REQUIRED);this.keychain=e,HE.set(this,{dek:t})}async encrypt(e,t){if(!(t instanceof Uint8Array))throw B(new Error("Plain data must be a Uint8Array"),OM.ERR_INVALID_PARAMETERS);const n=await this.keychain.findKeyByName(e),r=await this.keychain.getPrivateKey(e),s=HE.get(this);if(null==s)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const i=s.dek,a=NE.pki.decryptRsaPrivateKey(r,i),o=await((e,t)=>{const n=xE.rsa.setPublicKey(t.n,t.e),r=xE.createCertificate();r.publicKey=n,r.serialNumber="01",r.validity.notBefore=new Date,r.validity.notAfter=new Date,r.validity.notAfter.setFullYear(r.validity.notBefore.getFullYear()+10);const s=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return r.setSubject(s),r.setIssuer(s),r.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),r.sign(t),r})(n,a),c=NE.pkcs7.createEnvelopedData();c.addRecipient(o),c.content=NE.util.createBuffer(t),c.encrypt();const d=NE.asn1.toDer(c.toAsn1()).getBytes();return(0,Wn.m)(d,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw B(new Error("CMS data is required"),OM.ERR_INVALID_PARAMETERS);let t;try{const n=NE.util.createBuffer((0,Xn.B)(e,"ascii")),r=NE.asn1.fromDer(n);t=NE.pkcs7.messageFromAsn1(r)}catch(e){throw CE.error(e),B(new Error("Invalid CMS"),OM.ERR_INVALID_CMS)}const n=t.recipients.filter((e=>e.issuer.find((e=>"O"===e.shortName&&"ipfs"===e.value)))).filter((e=>e.issuer.find((e=>"CN"===e.shortName)))).map((e=>({recipient:e,keyId:e.issuer.find((e=>"CN"===e.shortName)).value}))),r=await async function(e,t){const n=e.map(t);return e[(await Promise.all(n)).findIndex((e=>e))]}(n,(async e=>{try{if(null!=await this.keychain.findKeyById(e.keyId))return!0}catch(e){return!1}return!1}));if(null==r){const e=n.map((e=>e.keyId));throw B(new Error(`Decryption needs one of the key(s): ${e.join(", ")}`),OM.ERR_MISSING_KEYS,{missingKeys:e})}const s=await this.keychain.findKeyById(r.keyId);if(null==s)throw B(new Error("No key available to decrypto"),OM.ERR_NO_KEY);const i=await this.keychain.getPrivateKey(s.name),a=HE.get(this);if(null==a)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const o=a.dek,c=NE.pki.decryptRsaPrivateKey(i,o);return t.decrypt(r.recipient,c),(0,Wn.m)(t.content.getBytes(),"ascii")}}const BE=(0,j.kg)("libp2p:keychain"),zE="/info/",UE=new WeakMap,FE={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function VE(e){return null!=e&&"string"==typeof e&&e===OE(e.trim())&&e.length>0}async function WE(){const e=800*Math.random()+200;await new Promise((t=>setTimeout(t,e)))}function $E(e){return new lr.s("/pkcs8/"+e)}function GE(e){return new lr.s(zE+e)}class qE{constructor(e,t){if(this.components=e,this.init=(0,C.Z)(FE,t),null!=this.init.pass&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(null!=this.init.dek?.keyLength&&this.init.dek.keyLength<14)throw new Error("dek.keyLength must be least 14 bytes");if(null!=this.init.dek?.salt?.length&&this.init.dek.salt.length<16)throw new Error("dek.saltLength must be least 16 bytes");if(null!=this.init.dek?.iterationCount&&this.init.dek.iterationCount<1e3)throw new Error("dek.iterationCount must be least 1000");const n=null!=this.init.pass&&null!=this.init.dek?.salt?(0,wg.nk)(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";UE.set(this,{dek:n}),this.started=!1}isStarted(){return this.started}async start(){const e=GE("self");await this.components.datastore.has(e)||await this.importPeer("self",this.components.peerId),this.started=!0}stop(){this.started=!1}get cms(){const e=UE.get(this);if(null==e)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const t=e.dek;return new jE(this,t)}static generateOptions(){const e=Object.assign({},FE),t=3*Math.ceil(16/3);return e.dek.salt=(0,Xn.B)((0,wg.O6)(t),"base64"),e}static get options(){return FE}async createKey(e,t,n=2048){if(!VE(e)||"self"===e)throw await WE(),B(new Error("Invalid key name"),OM.ERR_INVALID_KEY_NAME);if("string"!=typeof t)throw await WE(),B(new Error("Invalid key type"),OM.ERR_INVALID_KEY_TYPE);const r=$E(e);if(await this.components.datastore.has(r))throw await WE(),B(new Error("Key name already exists"),OM.ERR_KEY_ALREADY_EXISTS);if("rsa"===t.toLowerCase()&&(!Number.isSafeInteger(n)||n<2048))throw await WE(),B(new Error("Invalid RSA key size"),OM.ERR_INVALID_KEY_SIZE);let s;try{const i=await(0,$r.generateKeyPair)(t,n),a=await i.id(),o=UE.get(this);if(null==o)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const c=o.dek,d=await i.export(c);s={name:e,id:a};const l=this.components.datastore.batch();l.put(r,(0,Wn.m)(d)),l.put(GE(e),(0,Wn.m)(JSON.stringify(s))),await l.commit()}catch(e){throw await WE(),e}return s}async listKeys(){const e={prefix:zE},t=[];for await(const n of this.components.datastore.query(e))t.push(JSON.parse((0,Xn.B)(n.value)));return t}async findKeyById(e){try{return(await this.listKeys()).find((t=>t.id===e))}catch(e){throw await WE(),e}}async findKeyByName(e){if(!VE(e))throw await WE(),B(new Error(`Invalid key name '${e}'`),OM.ERR_INVALID_KEY_NAME);const t=GE(e);try{const e=await this.components.datastore.get(t);return JSON.parse((0,Xn.B)(e))}catch(t){throw await WE(),BE.error(t),B(new Error(`Key '${e}' does not exist.`),OM.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!VE(e)||"self"===e)throw await WE(),B(new Error(`Invalid key name '${e}'`),OM.ERR_INVALID_KEY_NAME);const t=$E(e),n=await this.findKeyByName(e),r=this.components.datastore.batch();return r.delete(t),r.delete(GE(e)),await r.commit(),n}async renameKey(e,t){if(!VE(e)||"self"===e)throw await WE(),B(new Error(`Invalid old key name '${e}'`),OM.ERR_OLD_KEY_NAME_INVALID);if(!VE(t)||"self"===t)throw await WE(),B(new Error(`Invalid new key name '${t}'`),OM.ERR_NEW_KEY_NAME_INVALID);const n=$E(e),r=$E(t),s=GE(e),i=GE(t);if(await this.components.datastore.has(r))throw await WE(),B(new Error(`Key '${t}' already exists`),OM.ERR_KEY_ALREADY_EXISTS);try{const e=await this.components.datastore.get(n),a=await this.components.datastore.get(s),o=JSON.parse((0,Xn.B)(a));o.name=t;const c=this.components.datastore.batch();return c.put(r,e),c.put(i,(0,Wn.m)(JSON.stringify(o))),c.delete(n),c.delete(s),await c.commit(),o}catch(e){throw await WE(),e}}async exportKey(e,t){if(!VE(e))throw await WE(),B(new Error(`Invalid key name '${e}'`),OM.ERR_INVALID_KEY_NAME);if(null==t)throw await WE(),B(new Error("Password is required"),OM.ERR_PASSWORD_REQUIRED);const n=$E(e);try{const e=await this.components.datastore.get(n),r=(0,Xn.B)(e),s=UE.get(this);if(null==s)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const i=s.dek,a=await(0,$r.importKey)(r,i);return await a.export(t)}catch(e){throw await WE(),e}}async importKey(e,t,n){if(!VE(e)||"self"===e)throw await WE(),B(new Error(`Invalid key name '${e}'`),OM.ERR_INVALID_KEY_NAME);if(null==t)throw await WE(),B(new Error("PEM encoded key is required"),OM.ERR_PEM_REQUIRED);const r=$E(e);if(await this.components.datastore.has(r))throw await WE(),B(new Error(`Key '${e}' already exists`),OM.ERR_KEY_ALREADY_EXISTS);let s,i;try{s=await(0,$r.importKey)(t,n)}catch(e){throw await WE(),B(new Error("Cannot read the key, most likely the password is wrong"),OM.ERR_CANNOT_READ_KEY)}try{i=await s.id();const e=UE.get(this);if(null==e)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const n=e.dek;t=await s.export(n)}catch(e){throw await WE(),e}const a={name:e,id:i},o=this.components.datastore.batch();return o.put(r,(0,Wn.m)(t)),o.put(GE(e),(0,Wn.m)(JSON.stringify(a))),await o.commit(),a}async importPeer(e,t){try{if(!VE(e))throw B(new Error(`Invalid key name '${e}'`),OM.ERR_INVALID_KEY_NAME);if(null==t)throw B(new Error("PeerId is required"),OM.ERR_MISSING_PRIVATE_KEY);if(null==t.privateKey)throw B(new Error("PeerId.privKey is required"),OM.ERR_MISSING_PRIVATE_KEY);const n=await(0,$r.unmarshalPrivateKey)(t.privateKey),r=$E(e);if(await this.components.datastore.has(r))throw await WE(),B(new Error(`Key '${e}' already exists`),OM.ERR_KEY_ALREADY_EXISTS);const s=UE.get(this);if(null==s)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const i=s.dek,a=await n.export(i),o={name:e,id:t.toString()},c=this.components.datastore.batch();return c.put(r,(0,Wn.m)(a)),c.put(GE(e),(0,Wn.m)(JSON.stringify(o))),await c.commit(),o}catch(e){throw await WE(),e}}async getPrivateKey(e){if(!VE(e))throw await WE(),B(new Error(`Invalid key name '${e}'`),OM.ERR_INVALID_KEY_NAME);try{const t=$E(e),n=await this.components.datastore.get(t);return(0,Xn.B)(n)}catch(t){throw await WE(),BE.error(t),B(new Error(`Key '${e}' does not exist.`),OM.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){if("string"!=typeof e)throw await WE(),B(new Error(`Invalid old pass type '${typeof e}'`),OM.ERR_INVALID_OLD_PASS_TYPE);if("string"!=typeof t)throw await WE(),B(new Error(`Invalid new pass type '${typeof t}'`),OM.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await WE(),B(new Error(`Invalid pass length ${t.length}`),OM.ERR_INVALID_PASS_LENGTH);BE("recreating keychain");const n=UE.get(this);if(null==n)throw B(new Error("dek missing"),OM.ERR_INVALID_PARAMETERS);const r=n.dek;this.init.pass=t;const s=null!=t&&null!=this.init.dek?.salt?(0,wg.nk)(t,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";UE.set(this,{dek:s});const i=await this.listKeys();for(const e of i){const t=await this.components.datastore.get($E(e.name)),n=(0,Xn.B)(t),i=await(0,$r.importKey)(n,r),a=s.toString(),o=await i.export(a),c=this.components.datastore.batch(),d={name:e.name,id:e.id};c.put($E(e.name),(0,Wn.m)(o)),c.put(GE(e.name),(0,Wn.m)(JSON.stringify(d))),await c.commit()}BE("keychain reconstructed")}}var KE=n(18889);class ZE{constructor(e){if("number"!=typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");this.timespan=e,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(e,t){return 1-Math.exp(-(e-t)/this.timespan)}push(e,t){if(null!=this.previousTime){const n=this.alpha(e,this.previousTime),r=t-this.movingAverage,s=n*r;this.movingAverage=n*t+(1-n)*this.movingAverage,this.variance=(1-n)*(this.variance+r*s),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+n*r}else this.movingAverage=t;this.previousTime=e}}function JE(e){return new ZE(e)}class QE extends r_.v{constructor(e){super(),this.enabled=e.enabled,this.queue=[],this.stats={dataReceived:0n,dataSent:0n},this.frequencyLastTime=Date.now(),this.frequencyAccumulators={},this.movingAverages={dataReceived:[],dataSent:[]},this.computeThrottleMaxQueueSize=e.computeThrottleMaxQueueSize,this.computeThrottleTimeout=e.computeThrottleTimeout,this._update=this._update.bind(this),this.movingAverageIntervals=e.movingAverageIntervals;for(let t=0;t<e.initialCounters.length;t++){const n=e.initialCounters[t];this.stats[n]=0n,this.movingAverages[n]=[];for(let e=0;e<this.movingAverageIntervals.length;e++){const t=this.movingAverageIntervals[e];(this.movingAverages[n][t]=JE(t)).push(this.frequencyLastTime,0)}}}start(){this.enabled&&this.queue.length>0&&this._resetComputeTimeout()}stop(){null!=this.timeout&&(this.timeout.clear(),this.timeout=null)}getSnapshot(){return Object.assign({},this.stats)}getMovingAverages(){return Object.assign({},this.movingAverages)}push(e,t){this.queue.push([e,t,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this.timeout=QM(this._update,this._nextTimeout())}_nextTimeout(){const e=this.queue.length/this.computeThrottleMaxQueueSize;return Math.max(this.computeThrottleTimeout*(1-e),0)}_update(){if(this.timeout=null,this.queue.length>0){let e=["",0,0];for(e of this.queue)this._applyOp(e);this.queue=[],e.length>2&&""!==e[0]&&this._updateFrequency(e[2]),this.dispatchEvent(new r_.A("update",{detail:this.stats}))}}_updateFrequency(e){const t=e-this.frequencyLastTime;this._updateFrequencyFor("dataReceived",t,e),this._updateFrequencyFor("dataSent",t,e),this.frequencyLastTime=e}_updateFrequencyFor(e,t,n){const r=this.frequencyAccumulators[e]??0;this.frequencyAccumulators[e]=0;const s=r/(t??1)*1e3;let i=this.movingAverages[e];null==i&&(i=this.movingAverages[e]=[]);const a=this.movingAverageIntervals;for(let e=0;e<a.length;e++){const t=a[e];let r=i[t];null==r&&(r=i[t]=JE(t)),r.push(n,s)}}_applyOp(e){const t=e[0],n=e[1];if("number"!=typeof n)throw new Error("invalid increment number");let r;r=Object.prototype.hasOwnProperty.call(this.stats,t)?this.stats[t]:this.stats[t]=0n,this.stats[t]=r+BigInt(n),null==this.frequencyAccumulators[t]&&(this.frequencyAccumulators[t]=0),this.frequencyAccumulators[t]+=n}}const XE=["dataReceived","dataSent"],eL={in:"dataReceived",out:"dataSent"};class tL{constructor(e){this.enabled=e.enabled,this.statsInit={...e,initialCounters:XE},this.globalStats=new QE(this.statsInit),this.peerStats=new Map,this.protocolStats=new Map,this.oldPeers=Rr(e.maxOldPeersRetention??50),this.running=!1,this._onMessage=this._onMessage.bind(this),this.systems=new Map}isStarted(){return this.running}async start(){this.enabled&&(this.running=!0)}async stop(){if(this.running){this.running=!1,this.globalStats.stop();for(const e of this.peerStats.values())e.stop();for(const e of this.protocolStats.values())e.stop()}}getGlobal(){return this.globalStats}getPeers(){return Array.from(this.peerStats.keys())}getComponentMetrics(){return this.systems}updateComponentMetric(e){const{system:t="libp2p",component:n,metric:r,value:s,label:i,help:a}=e;this.systems.has(t)||this.systems.set(t,new Map);const o=this.systems.get(t);if(null==o)throw new Error("Unknown metric system");o.has(n)||o.set(n,new Map);const c=o.get(n);if(null==c)throw new Error("Unknown metric component");c.set(r,{label:i,help:a,calculate:"function"!=typeof s?()=>s:s})}forPeer(e){const t=e.toString();return this.peerStats.get(t)??this.oldPeers.get(t)}getProtocols(){return Array.from(this.protocolStats.keys())}forProtocol(e){return this.protocolStats.get(e)}onPeerDisconnected(e){const t=e.toString(),n=this.peerStats.get(t);null!=n&&(n.stop(),this.peerStats.delete(t),this.oldPeers.set(t,n))}_onMessage(e){if(!this.running)return;const{remotePeer:t,protocol:n,direction:r,dataLength:s}=e,i=eL[r];let a=this.forPeer(t);if(null==a){const e=new QE(this.statsInit);this.peerStats.set(t.toString(),e),a=e}if(a.push(i,s),this.globalStats.push(i,s),null!=n){let e=this.forProtocol(n);if(null==e){const t=new QE(this.statsInit);this.protocolStats.set(n,t),e=t}e.push(i,s)}}updatePlaceholder(e,t){if(!this.running)return;const n=e.toString(),r=this.peerStats.get(n)??this.oldPeers.get(n),s=t.toString(),i=this.peerStats.get(s)??this.oldPeers.get(s);let a=r;var o,c;null!=i&&(c=a,(o=i).stop(),c.stop(),o.queue=[...o.queue,...c.queue],a=o,this.oldPeers.remove(s)),this.peerStats.delete(e.toString()),this.peerStats.set(s,a),a.start()}trackStream(e){const{stream:t,remotePeer:n,protocol:r}=e;if(!this.running)return;const s=t.source;t.source=(0,KE.Z)(s,(e=>this._onMessage({remotePeer:n,protocol:r,direction:"in",dataLength:e.byteLength})));const i=t.sink;t.sink=async e=>await(0,ki.zG)(e,(e=>(0,KE.Z)(e,(e=>{this._onMessage({remotePeer:n,protocol:r,direction:"out",dataLength:e.byteLength})}))),i)}}var nL=n(66594);class rL extends Map{constructor(e){super();const{system:t,component:n,metric:r,metrics:s}=e;this.system=t??"libp2p",this.component=n,this.metric=r,this.metrics=s,this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){const t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}function sL(e){const{system:t,component:n,metric:r,metrics:s}=e;let i;return i=null!=s?new rL({system:t,component:n,metric:r,metrics:s}):new Map,i}const iL=(0,j.kg)("libp2p:transports");class aL extends r_.v{constructor(e,t={}){super(),this.components=e,this.started=!1,this.transports=new Map,this.listeners=sL({component:"transport-manager",metric:"listeners",metrics:this.components.metrics}),this.faultTolerance=t.faultTolerance??oL.FATAL_ALL}add(e){const t=e[Symbol.toStringTag];if(null==t)throw B(new Error("Transport must have a valid tag"),OM.ERR_INVALID_KEY);if(this.transports.has(t))throw B(new Error("There is already a transport with this tag"),OM.ERR_DUPLICATE_TRANSPORT);iL("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}async start(){const e=this.components.addressManager.getListenAddrs();await this.listen(e),this.started=!0}async stop(){const e=[];for(const[t,n]of this.listeners)for(iL("closing listeners for %s",t);n.length>0;){const t=n.pop();null!=t&&e.push(t.close())}await Promise.all(e),iL("all listeners closed");for(const e of this.listeners.keys())this.listeners.set(e,[]);this.started=!1}async dial(e,t){const n=this.transportForMultiaddr(e);if(null==n)throw B(new Error(`No transport available for address ${String(e)}`),OM.ERR_TRANSPORT_UNAVAILABLE);try{return await n.dial(e,{...t,upgrader:this.components.upgrader})}catch(e){throw null==e.code&&(e.code=OM.ERR_TRANSPORT_DIAL_FAILED),e}}getAddrs(){let e=[];for(const t of this.listeners.values())for(const n of t)e=[...e,...n.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(e){for(const t of this.transports.values())if(t.filter([e]).length>0)return t}async listen(e){if(null==e||0===e.length)return void iL("no addresses were provided for listening, this node is dial only");const t=[];for(const[n,r]of this.transports.entries()){const s=r.filter(e),i=[];for(const e of s){iL("creating listener for %s on %s",n,e);const t=r.createListener({upgrader:this.components.upgrader});let s=this.listeners.get(n);null==s&&(s=[],this.listeners.set(n,s)),s.push(t),t.addEventListener("listening",(()=>{this.dispatchEvent(new r_.A("listener:listening",{detail:t}))})),t.addEventListener("close",(()=>{this.dispatchEvent(new r_.A("listener:close",{detail:t}))})),i.push(t.listen(e))}if(0!==i.length){if(null==(await(0,nL.Z)(i)).find((e=>e.isFulfilled))&&this.faultTolerance!==oL.NO_FATAL)throw B(new Error(`Transport (${n}) could not listen on any available address`),OM.ERR_NO_VALID_ADDRESSES)}else t.push(n)}if(t.length===this.transports.size){const e=`no valid addresses were provided for transports [${t.join(", ")}]`;if(this.faultTolerance===oL.FATAL_ALL)throw B(new Error(e),OM.ERR_NO_VALID_ADDRESSES);iL(`libp2p in dial mode only: ${e}`)}}async remove(e){iL("removing %s",e);for(const t of this.listeners.get(e)??[])await t.close();this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}var oL;!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(oL||(oL={}));var cL=n(53841),dL=n(97975),lL=n(3571);const uL=(0,j.kg)("libp2p:connection");class hL{constructor(e){const{remoteAddr:t,remotePeer:n,newStream:r,close:s,getStreams:i,stat:a}=e;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=n,this.stat={...a,status:XM.o1},this._newStream=r,this._close=s,this._getStreams=i,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[lL.N](){return!0}get streams(){return this._getStreams()}async newStream(e,t){if(this.stat.status===XM.Z5)throw B(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===XM.m$)throw B(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);const n=await this._newStream(e,t);return n.stat.direction="outbound",n}addStream(e){e.stat.direction="inbound"}removeStream(e){}async close(){if(this.stat.status!==XM.m$&&!this._closing){this.stat.status=XM.Z5;try{this.streams.forEach((e=>e.close()))}catch(e){uL.error(e)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=XM.m$}}}const pL=(0,j.kg)("libp2p:registrar");class fL{constructor(e){this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this.components.connectionManager.addEventListener("peer:disconnect",this._onDisconnect),this.components.peerStore.addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){return Array.from(new Set([...this.topologies.keys(),...this.handlers.keys()])).sort()}getHandler(e){const t=this.handlers.get(e);if(null==t)throw B(new Error(`No handler registered for protocol ${e}`),OM.ERR_NO_HANDLER_FOR_PROTOCOL);return t}getTopologies(e){const t=this.topologies.get(e);return null==t?[]:[...t.values()]}async handle(e,t,n){if(this.handlers.has(e))throw B(new Error(`Handler already registered for protocol ${e}`),OM.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const r=C.Z.bind({ignoreUndefined:!0})({maxInboundStreams:32,maxOutboundStreams:64},n);this.handlers.set(e,{handler:t,options:r}),await this.components.peerStore.protoBook.add(this.components.peerId,[e])}async unhandle(e){const t=Array.isArray(e)?e:[e];t.forEach((e=>{this.handlers.delete(e)})),await this.components.peerStore.protoBook.remove(this.components.peerId,t)}async register(e,t){if(!(0,Xm.w)(t))throw pL.error("topology must be an instance of interfaces/topology"),B(new Error("topology must be an instance of interfaces/topology"),OM.ERR_INVALID_PARAMETERS);const n=`${(1e9*Math.random()).toString(36)}${Date.now()}`;let r=this.topologies.get(e);return null==r&&(r=new Map,this.topologies.set(e,r)),r.set(n,t),await t.setRegistrar(this),n}unregister(e){for(const[t,n]of this.topologies.entries())n.has(e)&&(n.delete(e),0===n.size&&this.topologies.delete(t))}_onDisconnect(e){const t=e.detail;this.components.peerStore.protoBook.get(t.remotePeer).then((e=>{for(const n of e){const e=this.topologies.get(n);if(null!=e)for(const n of e.values())n.onDisconnect(t.remotePeer)}})).catch((e=>{pL.error(e)}))}_onProtocolChange(e){const{peerId:t,protocols:n,oldProtocols:r}=e.detail,s=r.filter((e=>!n.includes(e))),i=n.filter((e=>!r.includes(e)));for(const e of s){const n=this.topologies.get(e);if(null!=n)for(const e of n.values())e.onDisconnect(t)}for(const e of i){const n=this.topologies.get(e);if(null!=n)for(const e of n.values()){const n=this.components.connectionManager.getConnections(t)[0];null!=n&&e.onConnect(t,n)}}}}const mL=(0,j.kg)("libp2p:upgrader");function _L(e,t,n){let r=0;return n.streams.forEach((n=>{n.stat.direction===t&&n.stat.protocol===e&&r++})),r}class yL extends r_.v{constructor(e,t){super(),this.components=e,this.connectionEncryption=new Map,t.connectionEncryption.forEach((e=>{this.connectionEncryption.set(e.protocol,e)})),this.muxers=new Map,t.muxers.forEach((e=>{this.muxers.set(e.protocol,e)})),this.inboundUpgradeTimeout=t.inboundUpgradeTimeout}async upgradeInbound(e){if(!await this.components.connectionManager.acceptIncomingConnection(e))throw B(new Error("connection denied"),OM.ERR_CONNECTION_DENIED);let t,n,r,s,i,a,o;const c=this.components.metrics,d=new $n.TimeoutController(this.inboundUpgradeTimeout);try{(0,zM.setMaxListeners)?.(1/0,d.signal)}catch{}try{const l=(0,Kw.D7)(e,d.signal);if(e.source=l.source,e.sink=l.sink,await this.components.connectionGater.denyInboundConnection(e))throw B(new Error("The multiaddr connection is blocked by gater.acceptConnection"),OM.ERR_CONNECTION_INTERCEPTED);if(null!=c){({setTarget:a,proxy:o}=dL());const t=`${(1e9*Math.random()).toString(36)}${Date.now()}`;a({toString:()=>t}),c.trackStream({stream:e,remotePeer:o})}mL("starting the inbound connection upgrade");let u=e;const h=this.components.connectionProtector;null!=h&&(mL("protecting the inbound connection"),u=await h.protect(e));try{if(({conn:t,remotePeer:n,protocol:i}=await this._encryptInbound(u)),await this.components.connectionGater.denyInboundEncryptedConnection(n,{...u,...t}))throw B(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),OM.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const e=await this._multiplexInbound({...u,...t},this.muxers);s=e.muxerFactory,r=e.stream}else r=t}catch(e){throw mL.error("Failed to upgrade inbound connection",e),e}if(await this.components.connectionGater.denyInboundUpgradedConnection(n,{...u,...t}))throw B(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),OM.ERR_CONNECTION_INTERCEPTED);return null!=c&&(c.updatePlaceholder(o,n),a(n)),mL("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:i,direction:"inbound",maConn:e,upgradedConn:r,muxerFactory:s,remotePeer:n})}finally{this.components.connectionManager.afterUpgradeInbound(),d.clear()}}async upgradeOutbound(e,t){const n=e.remoteAddr.getPeerId();if(null==n)throw B(new Error("outbound connection must have a peer id"),OM.ERR_INVALID_MULTIADDR);const r=(0,Nr.jE)(n);if(await this.components.connectionGater.denyOutboundConnection(r,e))throw B(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),OM.ERR_CONNECTION_INTERCEPTED);let s,i,a,o,c,d,l;const u=this.components.metrics;if(null!=u){({setTarget:d,proxy:l}=dL());const t=`${(1e9*Math.random()).toString(36)}${Date.now()}`;d({toB58String:()=>t}),u.trackStream({stream:e,remotePeer:l})}mL("Starting the outbound connection upgrade");let h=e;if(!0!==t?.skipProtection){const t=this.components.connectionProtector;null!=t&&(h=await t.protect(e))}try{if(s=h,!0!==t?.skipEncryption){if(({conn:s,remotePeer:i,protocol:o}=await this._encryptOutbound(h,r)),await this.components.connectionGater.denyOutboundEncryptedConnection(i,{...h,...s}))throw B(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),OM.ERR_CONNECTION_INTERCEPTED)}else o="native",i=r;if(a=s,null!=t?.muxerFactory)c=t.muxerFactory;else if(this.muxers.size>0){const e=await this._multiplexOutbound({...h,...s},this.muxers);c=e.muxerFactory,a=e.stream}}catch(t){throw mL.error("Failed to upgrade outbound connection",t),await e.close(t),t}if(await this.components.connectionGater.denyOutboundUpgradedConnection(i,{...h,...s}))throw B(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),OM.ERR_CONNECTION_INTERCEPTED);return null!=u&&(u.updatePlaceholder(l,i),d(i)),mL("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:o,direction:"outbound",maConn:e,upgradedConn:a,muxerFactory:c,remotePeer:i})}_createConnection(e){const{cryptoProtocol:t,direction:n,maConn:r,upgradedConn:s,remotePeer:i,muxerFactory:a}=e;let o,c,d;null!=a&&(o=a.createStreamMuxer({direction:n,onIncomingStream:e=>{null!=d&&Promise.resolve().then((async()=>{const t=this.components.registrar.getProtocols(),{stream:r,protocol:s}=await cL.pr(e,t);mL("%s: incoming stream opened on %s",n,s);const a=this.components.metrics;if(null!=a&&a.trackStream({stream:r,remotePeer:i,protocol:s}),null==d)return;const o=function(e,t){try{const{options:n}=t.getHandler(e);return n.maxInboundStreams}catch(e){if(e.code!==OM.ERR_NO_HANDLER_FOR_PROTOCOL)throw e}return 32}(s,this.components.registrar);_L(s,"inbound",d)!==o?(e.source=r.source,e.sink=r.sink,e.stat.protocol=s,this.components.peerStore.protoBook.add(i,[s]).catch((e=>mL.error(e))),d.addStream(e),this._onStream({connection:d,stream:e,protocol:s})):e.abort(B(new Error(`Too many inbound protocol streams for protocol "${s}" - limit ${o}`),OM.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS))})).catch((t=>{mL.error(t),null==e.stat.timeline.close&&e.close()}))},onStreamEnd:e=>{d?.removeStream(e.id)}}),c=async(e,t={})=>{if(null==o)throw B(new Error("Stream is not multiplexed"),OM.ERR_MUXER_UNAVAILABLE);mL("%s: starting new stream on %s",n,e);const r=await o.newStream(),s=this.components.metrics;let a;try{if(null==t.signal){mL("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",e),a=new $n.TimeoutController(3e4),t.signal=a.signal;try{(0,zM.setMaxListeners)?.(1/0,a.signal)}catch{}}const{stream:n,protocol:o}=await cL.Ys(r,e,t);null!=s&&s.trackStream({stream:n,remotePeer:i,protocol:o});const c=function(e,t){try{const{options:n}=t.getHandler(e);return n.maxOutboundStreams}catch(e){if(e.code!==OM.ERR_NO_HANDLER_FOR_PROTOCOL)throw e}return 64}(o,this.components.registrar);if(_L(o,"outbound",d)===c){const e=B(new Error(`Too many outbound protocol streams for protocol "${o}" - limit ${c}`),OM.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw r.abort(e),e}return this.components.peerStore.protoBook.add(i,[o]).catch((e=>mL.error(e))),r.source=n.source,r.sink=n.sink,r.stat.protocol=o,r}catch(e){if(mL.error("could not create new stream",e),null==r.stat.timeline.close&&r.close(),null!=e.code)throw e;throw B(e,OM.ERR_UNSUPPORTED_PROTOCOL)}finally{null!=a&&a.clear()}},(0,ki.zG)(s,o,s).catch(mL.error));const l=r.timeline;r.timeline=new Proxy(l,{set:(...e)=>(null!=d&&"close"===e[1]&&null!=e[2]&&null==l.close&&(async()=>{try{"OPEN"===d.stat.status&&await d.close()}catch(e){mL.error(e)}finally{this.dispatchEvent(new r_.A("connectionEnd",{detail:d}))}})().catch((e=>{mL.error(e)})),Reflect.set(...e))}),r.timeline.upgraded=Date.now();const u=()=>{throw B(new Error("connection is not multiplexed"),OM.ERR_CONNECTION_NOT_MULTIPLEXED)};var h;return h={remoteAddr:r.remoteAddr,remotePeer:i,stat:{status:"OPEN",direction:n,timeline:r.timeline,multiplexer:o?.protocol,encryption:t},newStream:c??u,getStreams:()=>null!=o?o.streams:u(),close:async()=>{await r.close(),null!=o&&o.close()}},d=new hL(h),this.dispatchEvent(new r_.A("connection",{detail:d})),d}_onStream(e){const{connection:t,stream:n,protocol:r}=e,{handler:s}=this.components.registrar.getHandler(r);s({connection:t,stream:n})}async _encryptInbound(e){const t=Array.from(this.connectionEncryption.keys());mL("handling inbound crypto protocol selection",t);try{const{stream:n,protocol:r}=await cL.pr(e,t,{writeBytes:!0}),s=this.connectionEncryption.get(r);if(null==s)throw new Error(`no crypto module found for ${r}`);return mL("encrypting inbound connection..."),{...await s.secureInbound(this.components.peerId,n),protocol:r}}catch(e){throw B(e,OM.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){const n=Array.from(this.connectionEncryption.keys());mL("selecting outbound crypto protocol",n);try{const{stream:r,protocol:s}=await cL.Ys(e,n,{writeBytes:!0}),i=this.connectionEncryption.get(s);if(null==i)throw new Error(`no crypto module found for ${s}`);return mL("encrypting outbound connection to %p",t),{...await i.secureOutbound(this.components.peerId,r,t),protocol:s}}catch(e){throw B(e,OM.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){const n=Array.from(t.keys());mL("outbound selecting muxer %s",n);try{const{stream:r,protocol:s}=await cL.Ys(e,n,{writeBytes:!0});return mL("%s selected as muxer protocol",s),{stream:r,muxerFactory:t.get(s)}}catch(e){throw mL.error("error multiplexing outbound stream",e),B(e,OM.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){const n=Array.from(t.keys());mL("inbound handling muxers %s",n);try{const{stream:r,protocol:s}=await cL.pr(e,n,{writeBytes:!0});return{stream:r,muxerFactory:t.get(s)}}catch(e){throw mL.error("error multiplexing inbound stream",e),B(e,OM.ERR_MUXER_UNAVAILABLE)}}}var gL;!function(e){let t;e.codec=()=>(null==t&&(t=(0,Jr.yw)(((e,t,n={})=>{if(!1!==n.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.listenAddrs)for(const n of e.listenAddrs)t.uint32(18),t.bytes(n);if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null!=e.protocols)for(const n of e.protocols)t.uint32(26),t.string(n);null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={listenAddrs:[],protocols:[]},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 5:n.protocolVersion=e.string();break;case 6:n.agentVersion=e.string();break;case 1:n.publicKey=e.bytes();break;case 2:n.listenAddrs.push(e.bytes());break;case 4:n.observedAddr=e.bytes();break;case 3:n.protocols.push(e.string());break;case 8:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(gL||(gL={}));const wL="0.0.0",bL=`js-libp2p/${wL}`,vL=(0,j.kg)("libp2p:identify");class kL{constructor(e,t){this.components=e,this.started=!1,this.init=t,this.identifyProtocolStr=`/${t.protocolPrefix}/id/1.0.0`,this.identifyPushProtocolStr=`/${t.protocolPrefix}/id/push/1.0.0`,this.host={protocolVersion:`${t.protocolPrefix}/0.1.0`,...t.host},this.components.connectionManager.addEventListener("peer:connect",(e=>{const t=e.detail;this.identify(t).catch(vL.error)})),this.components.peerStore.addEventListener("change:multiaddrs",(e=>{const{peerId:t}=e.detail;this.components.peerId.equals(t)&&this.pushToPeerStore().catch((e=>vL.error(e)))})),this.components.peerStore.addEventListener("change:protocols",(e=>{const{peerId:t}=e.detail;this.components.peerId.equals(t)&&this.pushToPeerStore().catch((e=>vL.error(e)))}))}isStarted(){return this.started}async start(){this.started||(await this.components.peerStore.metadataBook.setValue(this.components.peerId,"AgentVersion",(0,Wn.m)(this.host.agentVersion)),await this.components.peerStore.metadataBook.setValue(this.components.peerId,"ProtocolVersion",(0,Wn.m)(this.host.protocolVersion)),await this.components.registrar.handle(this.identifyProtocolStr,(e=>{this._handleIdentify(e).catch((e=>{vL.error(e)}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),await this.components.registrar.handle(this.identifyPushProtocolStr,(e=>{this._handlePush(e).catch((e=>{vL.error(e)}))}),{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams}),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.identifyProtocolStr),await this.components.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async push(e){const t=await this.components.peerStore.addressBook.getRawEnvelope(this.components.peerId),n=this.components.addressManager.getAddresses().map((e=>e.bytes)),r=await this.components.peerStore.protoBook.get(this.components.peerId),s=e.map((async e=>{let s;const i=new $n.TimeoutController(this.init.timeout);try{(0,zM.setMaxListeners)?.(1/0,i.signal)}catch{}try{s=await e.newStream([this.identifyPushProtocolStr],{signal:i.signal});const a=(0,Kw.D7)(s,i.signal);await a.sink((0,ki.zG)([gL.encode({listenAddrs:n,signedPeerRecord:t,protocols:r})],Zw.c()))}catch(e){vL.error("could not push identify update to peer",e)}finally{null!=s&&s.close(),i.clear()}}));await Promise.all(s)}async pushToPeerStore(){if(!this.isStarted())return;const e=[];for(const t of this.components.connectionManager.getConnections()){const n=t.remotePeer;(await this.components.peerStore.get(n)).protocols.includes(this.identifyPushProtocolStr)&&e.push(t)}await this.push(e)}async _identify(e,t={}){let n,r,s=t.signal;if(null==s){n=new $n.TimeoutController(this.init.timeout),s=n.signal;try{(0,zM.setMaxListeners)?.(1/0,n.signal)}catch{}}try{r=await e.newStream([this.identifyProtocolStr],{signal:s});const t=(0,Kw.D7)(r,s),i=await(0,ki.zG)([],t,Zw.J({maxDataLength:this.init.maxIdentifyMessageSize??8192}),(async e=>await(0,wu.Z)(e)));if(null==i)throw B(new Error("No data could be retrieved"),OM.ERR_CONNECTION_ENDED);try{return gL.decode(i)}catch(e){throw B(e,OM.ERR_INVALID_MESSAGE)}}finally{null!=n&&n.clear(),null!=r&&r.close()}}async identify(e,t={}){const n=await this._identify(e,t),{publicKey:r,listenAddrs:s,protocols:i,observedAddr:a,signedPeerRecord:o,agentVersion:c,protocolVersion:d}=n;if(null==r)throw B(new Error("public key was missing from identify message"),OM.ERR_MISSING_PUBLIC_KEY);const l=await(0,Nr.y5)(r);if(!e.remotePeer.equals(l))throw B(new Error("identified peer does not match the expected peer"),OM.ERR_INVALID_PEER);if(this.components.peerId.equals(l))throw B(new Error("identified peer is our own peer id?"),OM.ERR_INVALID_PEER);const u=kL.getCleanMultiaddr(a);if(null!=o){vL("received signed peer record from %p",l);try{const e=await Qm.X.openAndCertify(o,Qm.K.DOMAIN);if(!e.peerId.equals(l))throw B(new Error("identified peer does not match the expected peer"),OM.ERR_INVALID_PEER);if(await this.components.peerStore.addressBook.consumePeerRecord(e))return await this.components.peerStore.protoBook.set(l,i),null!=c&&await this.components.peerStore.metadataBook.setValue(l,"AgentVersion",(0,Wn.m)(c)),null!=d&&await this.components.peerStore.metadataBook.setValue(l,"ProtocolVersion",(0,Wn.m)(d)),void vL("identify completed for peer %p and protocols %o",l,i)}catch(e){vL("received invalid envelope, discard it and fallback to listenAddrs is available",e)}}else vL("no signed peer record received from %p",l);vL("falling back to legacy addresses from %p",l);try{await this.components.peerStore.addressBook.set(l,s.map((e=>(0,Zn.HM)(e))))}catch(e){vL.error("received invalid addrs",e)}await this.components.peerStore.protoBook.set(l,i),null!=c&&await this.components.peerStore.metadataBook.setValue(l,"AgentVersion",(0,Wn.m)(c)),null!=d&&await this.components.peerStore.metadataBook.setValue(l,"ProtocolVersion",(0,Wn.m)(d)),vL("identify completed for peer %p and protocols %o",l,i),vL("received observed address of %s",u?.toString())}async _handleIdentify(e){const{connection:t,stream:n}=e,r=new $n.TimeoutController(this.init.timeout);try{(0,zM.setMaxListeners)?.(1/0,r.signal)}catch{}try{const e=this.components.peerId.publicKey??new Uint8Array(0),s=await this.components.peerStore.get(this.components.peerId),i=this.components.addressManager.getAddresses().map((e=>e.decapsulateCode((0,Zn.a_)("p2p").code)));let a=s.peerRecordEnvelope;if(i.length>0&&null==a){const e=new Qm.K({peerId:this.components.peerId,multiaddrs:i}),t=await Qm.X.seal(e,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(t),a=t.marshal().subarray()}const o=gL.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:e,listenAddrs:i.map((e=>e.bytes)),signedPeerRecord:a,observedAddr:t.remoteAddr.bytes,protocols:s.protocols}),c=(0,Kw.D7)(n,r.signal),d=(0,ki.zG)([o],Zw.c());await c.sink(d)}catch(e){vL.error("could not respond to identify request",e)}finally{n.close(),r.clear()}}async _handlePush(e){const{connection:t,stream:n}=e,r=new $n.TimeoutController(this.init.timeout);try{(0,zM.setMaxListeners)?.(1/0,r.signal)}catch{}let s;try{const e=(0,Kw.D7)(n,r.signal),t=await(0,ki.zG)([],e,Zw.J({maxDataLength:this.init.maxIdentifyMessageSize??8192}),(async e=>await(0,wu.Z)(e)));null!=t&&(s=gL.decode(t))}catch(e){return vL.error("received invalid message",e)}finally{n.close(),r.clear()}if(null==s)return vL.error("received invalid message");const i=t.remotePeer;if(this.components.peerId.equals(i))vL("received push from ourselves?");else{if(vL("received push from %p",i),null!=s.signedPeerRecord){vL("received signedPeerRecord in push");try{const e=await Qm.X.openAndCertify(s.signedPeerRecord,Qm.K.DOMAIN);if(await this.components.peerStore.addressBook.consumePeerRecord(e))return vL("consumed signedPeerRecord sent in push"),void await this.components.peerStore.protoBook.set(i,s.protocols);vL("failed to consume signedPeerRecord sent in push")}catch(e){vL("received invalid envelope, discard it and fallback to listenAddrs is available",e)}}else vL("did not receive signedPeerRecord in push");try{await this.components.peerStore.addressBook.set(i,s.listenAddrs.map((e=>(0,Zn.HM)(e))))}catch(e){vL.error("received invalid addrs",e)}try{await this.components.peerStore.protoBook.set(i,s.protocols)}catch(e){vL.error("received invalid protocols",e)}vL("handled push from %p",i)}}static getCleanMultiaddr(e){if(null!=e&&e.length>0)try{return(0,Zn.HM)(e)}catch{}}}var ML,EL;!function(e){let t;e.codec=()=>(null==t&&(t=(0,Jr.yw)(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),!0!==n.writeDefaults&&""===e.identifier||(t.uint32(10),t.string(e.identifier)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={identifier:""},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();t>>>3==1?n.identifier=e.string():e.skipType(7&t)}return n}))),t),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(ML||(ML={})),function(e){let t,n,r;!function(e){e.OK="OK",e.NOT_FOUND="NOT_FOUND",e.ERROR="ERROR"}(t=e.StatusCode||(e.StatusCode={})),function(e){e[e.OK=0]="OK",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.ERROR=2]="ERROR"}(n||(n={})),function(e){e.codec=()=>(0,Jr.Ji)(n)}(t=e.StatusCode||(e.StatusCode={})),e.codec=()=>(null==r&&(r=(0,Jr.yw)(((t,r,s={})=>{!1!==s.lengthDelimited&&r.fork(),(!0===s.writeDefaults||null!=t.status&&0!==n[t.status])&&(r.uint32(8),e.StatusCode.codec().encode(t.status,r)),(!0===s.writeDefaults||null!=t.data&&t.data.byteLength>0)&&(r.uint32(18),r.bytes(t.data)),!1!==s.lengthDelimited&&r.ldelim()}),((n,r)=>{const s={status:t.OK,data:new Uint8Array(0)},i=null==r?n.len:n.pos+r;for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:s.status=e.StatusCode.codec().decode(n);break;case 2:s.data=n.bytes();break;default:n.skipType(7&t)}}return s}))),r),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(EL||(EL={}));const LL=(0,j.kg)("libp2p:fetch");class SL{constructor(e,t){this.started=!1,this.components=e,this.protocol=`/${t.protocolPrefix??"libp2p"}/fetch/0.0.1`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=t}async start(){await this.components.registrar.handle(this.protocol,(e=>{this.handleMessage(e).catch((e=>{LL.error(e)})).finally((()=>{e.stream.close()}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(e,t,n={}){LL("dialing %s to %p",this.protocol,e);const r=await this.components.connectionManager.openConnection(e,n);let s,i,a=n.signal;if(null==a){s=new $n.TimeoutController(this.init.timeout),a=s.signal;try{(0,zM.setMaxListeners)?.(1/0,s.signal)}catch{}}try{i=await r.newStream([this.protocol],{signal:a});const e=(0,Kw.D7)(i,a),n=await(0,ki.zG)([ML.encode({identifier:t})],Zw.c(),e,Zw.J(),(async function(e){const t=await(0,wu.Z)(e);if(null==t)throw B(new Error("No data received"),OM.ERR_INVALID_MESSAGE);const n=EL.decode(t);switch(n.status){case EL.StatusCode.OK:return n.data;case EL.StatusCode.NOT_FOUND:return null;case EL.StatusCode.ERROR:{const e=(new TextDecoder).decode(n.data);throw B(new Error("Error in fetch protocol response: "+e),OM.ERR_INVALID_PARAMETERS)}default:throw B(new Error("Unknown response status"),OM.ERR_INVALID_MESSAGE)}}));return n??null}finally{null!=s&&s.clear(),null!=i&&i.close()}}async handleMessage(e){const{stream:t}=e,n=this;await(0,ki.zG)(t,Zw.J(),(async function*(e){const t=await(0,wu.Z)(e);if(null==t)throw B(new Error("No data received"),OM.ERR_INVALID_MESSAGE);const r=ML.decode(t);let s;const i=n._getLookupFunction(r.identifier);if(null!=i){const e=await i(r.identifier);s=null!=e?{status:EL.StatusCode.OK,data:e}:{status:EL.StatusCode.NOT_FOUND,data:new Uint8Array(0)}}else{const e=(new TextEncoder).encode("No lookup function registered for key: "+r.identifier);s={status:EL.StatusCode.ERROR,data:e}}yield EL.encode(s)}),Zw.c(),t)}_getLookupFunction(e){for(const t of this.lookupFunctions.keys())if(e.startsWith(t))return this.lookupFunctions.get(t)}registerLookupFunction(e,t){if(this.lookupFunctions.has(e))throw B(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),OM.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}unregisterLookupFunction(e,t){null!=t&&this.lookupFunctions.get(e)!==t||this.lookupFunctions.delete(e)}}const DL=(0,j.kg)("libp2p:ping");class TL{constructor(e,t){this.components=e,this.started=!1,this.protocol=`/${t.protocolPrefix}/ping/1.0.0`,this.init=t}async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){const{stream:t}=e;(0,ki.zG)(t,t).catch((e=>{DL.error(e)}))}async ping(e,t={}){DL("dialing %s to %p",this.protocol,e);const n=Date.now(),r=(0,wg.O6)(32),s=await this.components.connectionManager.openConnection(e,t);let i,a,o=t.signal;if(null==o){i=new $n.TimeoutController(this.init.timeout),o=i.signal;try{(0,zM.setMaxListeners)?.(1/0,i.signal)}catch{}}try{a=await s.newStream([this.protocol],{signal:o});const e=(0,Kw.D7)(a,o),t=await(0,ki.zG)([r],e,(async e=>await(0,wu.Z)(e))),c=Date.now();if(null==t||!(0,Vr.f)(r,t.subarray()))throw B(new Error("Received wrong ping ack"),OM.ERR_WRONG_PING_ACK);return c-n}finally{null!=i&&i.clear(),null!=a&&a.close()}}}var RL=n(22951),PL=n(9972),IL=n(99699),AL=n(90214);const YL=(0,j.kg)("libp2p:nat");function OL(e=1024,t=65535){return Math.floor(Math.random()*(t-e+1)+e)}class NL{constructor(e,t){if(this.components=e,this.started=!1,this.enabled=t.enabled,this.externalAddress=t.externalAddress,this.localAddress=t.localAddress,this.description=t.description??`libp2p@${wL} ${this.components.peerId.toString()}`,this.ttl=t.ttl??7200,this.keepAlive=t.keepAlive??!0,this.gateway=t.gateway,this.ttl<7200)throw B(new Error("NatManager ttl should be at least 7200 seconds"),OM.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){PL.jU||!this.enabled||this.started||(this.started=!0,this._start().catch((e=>{YL.error(e)})))}async _start(){const e=this.components.transportManager.getAddrs();for(const t of e){const{family:e,host:n,port:r,transport:s}=t.toOptions();if(!t.isThinWaistAddress()||"tcp"!==s)continue;if((0,AL.Y)(t))continue;if(4!==e)continue;const i=await this._getClient(),a=this.externalAddress??await i.externalIp();if(IL(a))throw new Error(`${a} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const o=OL();YL(`opening uPnP connection from ${a}:${o} to ${n}:${r}`),await i.map({publicPort:o,localPort:r,localAddress:this.localAddress,protocol:"TCP"===s.toUpperCase()?"TCP":"UDP"}),this.components.addressManager.addObservedAddr((0,Zn.uv)({family:4,address:a,port:o},s))}}async _getClient(){return null!=this.client||(this.client=await(0,RL.h)({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway})),this.client}async stop(){if(!PL.jU&&null!=this.client)try{await this.client.close(),this.client=void 0}catch(e){YL.error(e)}}}const xL=(0,j.kg)("libp2p:peer-record-updater");class CL{constructor(e){this.components=e,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.transportManager.addEventListener("listener:listening",this.update),this.components.transportManager.addEventListener("listener:close",this.update),this.components.addressManager.addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.transportManager.removeEventListener("listener:listening",this.update),this.components.transportManager.removeEventListener("listener:close",this.update),this.components.addressManager.removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then((async()=>{const e=new Qm.K({peerId:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((e=>e.decapsulateCode((0,Zn.a_)("p2p").code)))}),t=await Qm.X.seal(e,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(t)})).catch((e=>{xL.error("Could not update self peer record: %o",e)}))}}class HL{constructor(e){this.dht=e}async findPeer(e,t={}){for await(const n of this.dht.findPeer(e,t))if("FINAL_PEER"===n.name)return n.peer;throw B(new Error(YM.NOT_FOUND),OM.ERR_NOT_FOUND)}async*getClosestPeers(e,t={}){for await(const n of this.dht.getClosestPeers(e,t))"FINAL_PEER"===n.name&&(yield n.peer)}}var jL=n(87806);class BL{constructor(e){this.dht=e}async provide(e){await(0,$s.Z)(this.dht.provide(e))}async*findProviders(e,t={}){for await(const n of this.dht.findProviders(e,t))"PROVIDER"===n.name&&(yield*n.providers)}async put(e,t,n){await(0,$s.Z)(this.dht.put(e,t,n))}async get(e,t){for await(const n of this.dht.get(e,t))if("VALUE"===n.name)return n.value;throw B(new Error("Not found"),"ERR_NOT_FOUND")}}class zL{constructor(e={}){this._started=!1,this._peerId=e.peerId,this._addressManager=e.addressManager,this._peerStore=e.peerStore,this._upgrader=e.upgrader,this._metrics=e.metrics,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._connectionGater=e.connectionGater,this._contentRouting=e.contentRouting,this._peerRouting=e.peerRouting,this._datastore=e.datastore,this._connectionProtector=e.connectionProtector,this._dht=e.dht,this._pubsub=e.pubsub,this._dialer=e.dialer}isStarted(){return this._started}async beforeStart(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.beforeStart&&await e.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{await e.start()}))),this._started=!0}async afterStart(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.afterStart&&await e.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.beforeStop&&await e.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{await e.stop()}))),this._started=!1}async afterStop(){await Promise.all(Object.values(this).filter((e=>(0,ig.qK)(e))).map((async e=>{null!=e.afterStop&&await e.afterStop()})))}get peerId(){if(null==this._peerId)throw B(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this._peerId}set peerId(e){this._peerId=e}get addressManager(){if(null==this._addressManager)throw B(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this._addressManager}set addressManager(e){this._addressManager=e}get peerStore(){if(null==this._peerStore)throw B(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this._peerStore}set peerStore(e){this._peerStore=e}get upgrader(){if(null==this._upgrader)throw B(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this._upgrader}set upgrader(e){this._upgrader=e}get registrar(){if(null==this._registrar)throw B(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this._registrar}set registrar(e){this._registrar=e}get connectionManager(){if(null==this._connectionManager)throw B(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this._connectionManager}set connectionManager(e){this._connectionManager=e}get transportManager(){if(null==this._transportManager)throw B(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this._transportManager}set transportManager(e){this._transportManager=e}get connectionGater(){if(null==this._connectionGater)throw B(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this._connectionGater}set connectionGater(e){this._connectionGater=e}get contentRouting(){if(null==this._contentRouting)throw B(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this._contentRouting}set contentRouting(e){this._contentRouting=e}get peerRouting(){if(null==this._peerRouting)throw B(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this._peerRouting}set peerRouting(e){this._peerRouting=e}get datastore(){if(null==this._datastore)throw B(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this._datastore}set datastore(e){this._datastore=e}get connectionProtector(){return this._connectionProtector}set connectionProtector(e){this._connectionProtector=e}get dialer(){if(null==this._dialer)throw B(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this._dialer}set dialer(e){this._dialer=e}get metrics(){return this._metrics}set metrics(e){this._metrics=e}get dht(){return this._dht}set dht(e){this._dht=e}get pubsub(){return this._pubsub}set pubsub(e){this._pubsub=e}}const UL={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:e=>e},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:3e4,inboundUpgradeTimeout:3e4,resolvers:{dnsaddr:n(84694).I},addressSorter:TE.F},connectionGater:{},transportManager:{faultTolerance:oL.FATAL_ALL},metrics:{enabled:!1,computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:bL},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};var FL=n(9001),VL=n(44198);class WL extends r_.v{get[VL.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}get lan(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}get(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}findProviders(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}findPeer(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}getClosestPeers(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}provide(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}put(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}async getMode(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}async setMode(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}async refreshRoutingTable(){throw B(new Error(YM.DHT_DISABLED),OM.DHT_DISABLED)}}class $L extends r_.v{constructor(){super(...arguments),this.topicValidators=new Map}isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}get multicodecs(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}getPeers(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}getTopics(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}subscribe(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}unsubscribe(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}getSubscribers(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}async publish(){throw B(new Error(YM.PUBSUB_DISABLED),OM.ERR_PUBSUB_DISABLED)}}var GL=n(16395),qL=n(5181);const KL=(0,j.kg)("libp2p:dialer:dial-request");class ZL{constructor(e){const{addrs:t,dialAction:n,dialer:r}=e;this.addrs=t,this.dialer=r,this.dialAction=n}async run(e={}){const t=this.dialer.getTokens(this.addrs.length);if(t.length<1)throw B(new Error("No dial tokens available"),OM.ERR_NO_DIAL_TOKENS);const n=new qL;for(const e of t)n.push(e).catch((e=>{KL.error(e)}));const r=this.addrs.map((()=>{const e=new AbortController;try{(0,zM.setMaxListeners)?.(1/0,e.signal)}catch{}return e}));if(null!=e.signal)try{(0,zM.setMaxListeners)?.(1/0,e.signal)}catch{}let s=0,i=!1;try{return await Promise.any(this.addrs.map((async(a,o)=>{const c=await n.shift();if(i)throw this.dialer.releaseToken(t.splice(t.indexOf(c),1)[0]),B(new Error("dialAction already succeeded"),OM.ERR_ALREADY_SUCCEEDED);const d=r[o];if(null==d)throw B(new Error("dialAction did not come with an AbortController"),OM.ERR_INVALID_PARAMETERS);let l;try{const i=d.signal;l=await this.dialAction(a,{...e,signal:null!=e.signal?(0,ur.anySignal)([i,e.signal]):i}),r[o]=void 0}finally{s++,this.addrs.length-s>=t.length?n.push(c).catch((e=>{KL.error(e)})):this.dialer.releaseToken(t.splice(t.indexOf(c),1)[0])}if(null==l)throw B(new Error("dialAction led to empty object"),OM.ERR_TRANSPORT_DIAL_FAILED);return i=!0,l})))}finally{r.forEach((e=>{void 0!==e&&e.abort()})),t.forEach((e=>this.dialer.releaseToken(e)))}}}const JL=(0,j.kg)("libp2p:dialer"),QL="dialler";class XL{constructor(e,t={}){this.started=!1,this.addressSorter=t.addressSorter??TE.F,this.maxAddrsToDial=t.maxAddrsToDial??25,this.timeout=t.dialTimeout??3e4,this.maxDialsPerPeer=t.maxDialsPerPeer??4,this.tokens=[...new Array(t.maxParallelDials??100)].map(((e,t)=>t)),this.components=e,this.pendingDials=sL({component:QL,metric:"pending-dials",metrics:t.metrics}),this.pendingDialTargets=sL({component:QL,metric:"pending-dial-targets",metrics:e.metrics});for(const[e,n]of Object.entries(t.resolvers??{}))Zn.s_.set(e,n)}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(const e of this.pendingDials.values())try{e.controller.abort()}catch(e){JL.error(e)}this.pendingDials.clear();for(const e of this.pendingDialTargets.values())e.reject(new GL._("Dialer was destroyed"));this.pendingDialTargets.clear()}async dial(e,t={}){const{id:n,multiaddrs:r}=WM(e);if(this.components.peerId.equals(n))throw B(new Error("Tried to dial self"),OM.ERR_DIALED_SELF);if(JL("check multiaddrs %p",n),null!=r&&r.length>0&&(JL("storing multiaddrs %p",n,r),await this.components.peerStore.addressBook.add(n,r)),await this.components.connectionGater.denyDialPeer(n))throw B(new Error("The dial request is blocked by gater.allowDialPeer"),OM.ERR_PEER_DIAL_INTERCEPTED);JL("creating dial target for %p",n);const s=await this._createCancellableDialTarget(n,t);if(0===s.addrs.length)throw B(new Error("The dial request has no valid addresses"),OM.ERR_NO_VALID_ADDRESSES);const i=this.pendingDials.get(s.id)??this._createPendingDial(s,t);try{const e=await i.promise;return JL("dial succeeded to %s",s.id),e}catch(e){throw JL("dial failed to %s",s.id,e),i.controller.signal.aborted&&(e.code=OM.ERR_TIMEOUT),JL.error(e),e}finally{i.destroy()}}async _createCancellableDialTarget(e,t){const n=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,r=new Promise(((e,t)=>{this.pendingDialTargets.set(n,{resolve:e,reject:t})}));try{return await Promise.race([this._createDialTarget(e,t),r])}finally{this.pendingDialTargets.delete(n)}}async _createDialTarget(e,t){const n=this._resolve.bind(this),r=await(0,ki.zG)(await this.components.peerStore.addressBook.get(e),(t=>(0,vi.Z)(t,(async t=>!await this.components.connectionGater.denyDialMultiaddr(e,t.multiaddr)))),(e=>(0,jm.Z)(e,this.addressSorter)),(async function*(e){for await(const r of e)yield*await n(r.multiaddr,t)}),(e=>(0,vi.Z)(e,(e=>Boolean(this.components.transportManager.transportForMultiaddr(e))))),(t=>(0,bi.Z)(t,(t=>e.toString()===t.getPeerId()?t:t.encapsulate(`/p2p/${e.toString()}`)))),(async e=>await(0,Di.Z)(e)));if(r.length>this.maxAddrsToDial)throw await this.components.peerStore.delete(e),B(new Error("dial with more addresses than allowed"),OM.ERR_TOO_MANY_ADDRESSES);return{id:e.toString(),addrs:r}}_createPendingDial(e,t={}){const n=new ZL({addrs:e.addrs,dialAction:async(e,t={})=>{if(!0===t.signal?.aborted)throw B(new Error("already aborted"),OM.ERR_ALREADY_ABORTED);return await this.components.transportManager.dial(e,t).catch((t=>{throw JL.error("dial to %s failed",e,t),t}))},dialer:this}),r=new $n.TimeoutController(this.timeout),s=[r.signal];null!=t.signal&&s.push(t.signal);const i=(0,ur.anySignal)(s);try{(0,zM.setMaxListeners)?.(1/0,i)}catch{}const a={dialRequest:n,controller:r,promise:n.run({...t,signal:i}),destroy:()=>{r.clear(),this.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,a),a}getTokens(e){const t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),n=this.tokens.splice(0,t);return JL("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),n}releaseToken(e){this.tokens.includes(e)||(JL("token %d released",e),this.tokens.push(e))}async _resolve(e,t){if(!e.protoNames().includes("dnsaddr"))return[e];const n=await this._resolveRecord(e,t);return(await Promise.all(n.map((async e=>await this._resolve(e,t))))).flat().reduce(((e,t)=>(null==e.find((e=>e.equals(t)))&&e.push(t),e)),[])}async _resolveRecord(e,t){try{return e=(0,Zn.HM)(e.toString()),await e.resolve(t)}catch(t){return JL.error(`multiaddr ${e.toString()} could not be resolved`,t),[]}}}const eS=(0,j.kg)("libp2p");class tS extends r_.v{constructor(e){super(),this.started=!1,this.peerId=e.peerId;const t=this.components=new zL({peerId:e.peerId,datastore:e.datastore??new As.a,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...e.connectionGater}});t.peerStore=new jL.o(t,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore}),this.services=[t],e.metrics.enabled&&(this.metrics=this.components.metrics=new tL(e.metrics)),this.peerStore=this.components.peerStore,this.peerStore.addEventListener("peer",(e=>{const{detail:t}=e;this.dispatchEvent(new r_.A("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&(this.components.connectionProtector=e.connectionProtector(t)),this.components.upgrader=new yL(this.components,{connectionEncryption:(e.connectionEncryption??[]).map((e=>this.configureComponent(e(this.components)))),muxers:(e.streamMuxers??[]).map((e=>this.configureComponent(e(this.components)))),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout}),this.components.dialer=new XL(this.components,e.connectionManager),this.connectionManager=this.components.connectionManager=new oE(this.components,e.connectionManager),this.registrar=this.components.registrar=new fL(this.components),this.components.transportManager=new aL(this.components,e.transportManager),this.components.addressManager=new GM(this.components,e.addresses),this.configureComponent(new CL(this.components)),this.configureComponent(new lE(this.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));const n=qE.generateOptions();this.keychain=this.configureComponent(new qE(this.components,{...n,...e.keychain})),this.services.push(new NL(this.components,e.nat)),e.transports.forEach((e=>{this.components.transportManager.add(this.configureComponent(e(this.components)))})),this.identifyService=new kL(this.components,{...e.identify}),this.configureComponent(this.identifyService),null!=e.dht?this.dht=this.components.dht=e.dht(this.components):this.dht=new WL,null!=e.pubsub?this.pubsub=this.components.pubsub=e.pubsub(this.components):this.pubsub=new $L;const r=(e.peerRouters??[]).map((e=>this.configureComponent(e(this.components))));null!=e.dht&&(r.push(this.configureComponent(new HL(this.dht))),this.dht.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))),this.peerRouting=this.components.peerRouting=this.configureComponent(new FM(this.components,{...e.peerRouting,routers:r}));const s=(e.contentRouters??[]).map((e=>this.configureComponent(e(this.components))));null!=e.dht&&s.push(this.configureComponent(new BL(this.dht))),this.contentRouting=this.components.contentRouting=this.configureComponent(new VM(this.components,{routers:s})),e.relay.enabled&&(this.components.transportManager.add(this.configureComponent(new ME(this.components,e.relay))),this.configureComponent(new YE(this.components,{addressSorter:e.connectionManager.addressSorter,...e.relay}))),this.fetchService=this.configureComponent(new SL(this.components,{...e.fetch})),this.pingService=this.configureComponent(new TL(this.components,{...e.ping}));for(const t of e.peerDiscovery??[])this.configureComponent(t(this.components)).addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))}configureComponent(e){return(0,ig.qK)(e)&&this.services.push(e),e}async start(){if(!this.started){this.started=!0,eS("libp2p is starting");try{await Promise.all(this.services.map((async e=>{null!=e.beforeStart&&await e.beforeStart()}))),await Promise.all(this.services.map((e=>e.start()))),await Promise.all(this.services.map((async e=>{null!=e.afterStart&&await e.afterStart()}))),eS("libp2p has started")}catch(e){throw eS.error("An error occurred starting libp2p",e),await this.stop(),e}}}async stop(){this.started&&(eS("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map((async e=>{null!=e.beforeStop&&await e.beforeStop()}))),await Promise.all(this.services.map((e=>e.stop()))),await Promise.all(this.services.map((async e=>{null!=e.afterStop&&await e.afterStop()}))),eS("libp2p has stopped"))}isStarted(){return this.started}getConnections(e){return this.components.connectionManager.getConnections(e)}getPeers(){const e=new eE.fd;for(const t of this.components.connectionManager.getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e,t={}){const{id:n,multiaddrs:r}=WM(e);return await this.components.peerStore.addressBook.add(n,r),await this.components.connectionManager.openConnection(n,t)}async dialProtocol(e,t,n={}){if(null==t)throw B(new Error("no protocols were provided to open a stream"),OM.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(0===(t=Array.isArray(t)?t:[t]).length)throw B(new Error("no protocols were provided to open a stream"),OM.ERR_INVALID_PROTOCOLS_FOR_STREAM);const r=await this.dial(e,n);return await r.newStream(t,n)}getMultiaddrs(){return this.components.addressManager.getAddresses()}async hangUp(e){const{id:t}=WM(e);await this.components.connectionManager.closeConnections(t)}async getPublicKey(e,t={}){if(eS("getPublicKey %p",e),null!=e.publicKey)return e.publicKey;const n=await this.peerStore.get(e);if(null!=n.pubKey)return n.pubKey;if(null==this.dht)throw B(new Error("Public key was not in the peer store and the DHT is not enabled"),OM.ERR_NO_ROUTERS_AVAILABLE);const r=(0,Qr.z)([(0,Wn.m)("/pk/"),e.multihash.digest]);for await(const n of this.dht.get(r,t))if("VALUE"===n.name){const t=(0,$r.unmarshalPublicKey)(n.value);return await this.peerStore.keyBook.set(e,n.value),t.bytes}throw B(new Error(`Node not responding with its public key: ${e.toString()}`),OM.ERR_INVALID_RECORD)}async fetch(e,t,n={}){const{id:r,multiaddrs:s}=WM(e);return null!=s&&await this.components.peerStore.addressBook.add(r,s),await this.fetchService.fetch(r,t,n)}async ping(e,t={}){const{id:n,multiaddrs:r}=WM(e);return r.length>0&&await this.components.peerStore.addressBook.add(n,r),await this.pingService.ping(n,t)}async handle(e,t,n){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.registrar.handle(e,t,n)})))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.registrar.unhandle(e)})))}onDiscoveryPeer(e){const{detail:t}=e;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.peerStore.addressBook.add(t.id,t.multiaddrs).catch((e=>eS.error(e))),t.protocols.length>0&&this.components.peerStore.protoBook.set(t.id,t.protocols).catch((e=>eS.error(e))),this.dispatchEvent(new r_.A("peer:discovery",{detail:t}))):eS.error(new Error(OM.ERR_DISCOVERED_SELF))}}var nS=n(26665);const rS="/dht/provider",sS=20,iS=3,aS=Number(3e5),oS=Number(3e4),cS=Number(3e5),dS=Number(3e4),lS=Number(3e4),uS=(0,Wn.m)("/pk/");function hS(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,n]]=e.stringTuples();return(4===t||6===t)&&null!=n&&!IL(n)}))}}function pS(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,n]]=e.stringTuples();return(4===t||6===t)&&null!=n&&IL(n)}))}}async function fS(e){return(await ji.sha256.digest(e)).digest}async function mS(e){return await fS(e.toBytes())}function _S(e){return new lr.s(`/dht/record/${(0,Xn.B)(e,"base32")}`,!1)}function yS(e,t){const n=new Date;return new Fs(e,t,n).serialize()}const gS="routing-table-size";class wS{constructor(e,t){const{kBucketSize:n,pingTimeout:r,lan:s,pingConcurrency:i,protocol:a,tagName:o,tagValue:c}=t;this.components=e,this.log=(0,j.kg)(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table`),this.kBucketSize=n??20,this.pingTimeout=r??1e4,this.pingConcurrency=i??10,this.lan=s,this.running=!1,this.protocol=a,this.tagName=o??"kad-close",this.tagValue=c??50;const d=()=>{this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:"ping-queue-size",value:this.pingQueue.size}),this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:"ping-running",value:this.pingQueue.pending})};this.pingQueue=new Pr.Z({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",d),this.pingQueue.addListener("next",d),this._onPing=this._onPing.bind(this)}isStarted(){return this.running}async start(){this.running=!0;const e=new nS({localNodeId:await mS(this.components.peerId),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});this.kb=e,e.on("ping",this._onPing),this._tagPeers(e)}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_tagPeers(e){let t=new eE.fd;const n=function(e,t=100){let n;return()=>{clearTimeout(n),n=setTimeout((()=>e()),t)}}((()=>{const n=new eE.fd(e.closest(e.localNodeId,20).map((e=>e.peer))),r=n.difference(t),s=t.difference(n);Promise.resolve().then((async()=>{for(const e of r)await this.components.peerStore.tagPeer(e,this.tagName,{value:this.tagValue});for(const e of s)await this.components.peerStore.unTagPeer(e,this.tagName)})).catch((e=>{this.log.error("Could not update peer tags",e)})),t=n}));e.on("added",(()=>{n()})),e.on("removed",(()=>{n()}))}_onPing(e,t){this.pingQueue.add((async()=>{if(!this.running)return;let n=0;try{await Promise.all(e.map((async e=>{let t;try{t=new $n.TimeoutController(this.pingTimeout);const r={signal:t.signal};this.log("pinging old contact %p",e.peer);const s=await this.components.connectionManager.openConnection(e.peer,r);(await s.newStream(this.protocol,r)).close(),n++}catch(t){this.running&&null!=this.kb&&(this.log.error("could not ping peer %p",e.peer,t),this.log("evicting old contact after ping failed %p",e),this.kb.remove(e.id))}finally{null!=t&&t.clear(),this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:gS,value:this.size})}}))),this.running&&n<e.length&&null!=this.kb&&(this.log("adding new contact %p",t.peer),this.kb.add(t))}catch(e){this.log.error("could not process k-bucket ping event",e)}})).catch((e=>{this.log.error("could not process k-bucket ping event",e)}))}get size(){return null==this.kb?0:this.kb.count()}async find(e){const t=await mS(e),n=this.closestPeer(t);if(null!=n&&e.equals(n))return n}closestPeer(e){const t=this.closestPeers(e,1);if(t.length>0)return t[0]}closestPeers(e,t=this.kBucketSize){return null==this.kb?[]:this.kb.closest(e,t).map((e=>e.peer))}async add(e){if(null==this.kb)throw new Error("RoutingTable is not started");const t=await mS(e);this.kb.add({id:t,peer:e}),this.log("added %p with kad id %b",e,t),this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:gS,value:this.size})}async remove(e){if(null==this.kb)throw new Error("RoutingTable is not started");const t=await mS(e);this.kb.remove(t),this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:gS,value:this.size})}}var bS=n(93889),vS=n(36565);function kS(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");const n=(0,bS.E)(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return(0,vS.P)(n)}const MS=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782];class ES{constructor(e){const{peerRouting:t,routingTable:n,refreshInterval:r,refreshQueryTimeout:s,lan:i}=e;this.log=(0,j.kg)(`libp2p:kad-dht:${i?"lan":"wan"}:routing-table:refresh`),this.peerRouting=t,this.routingTable=n,this.refreshInterval=r??cS,this.refreshQueryTimeout=s??dS,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1){this.log("refreshing routing table");const t=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(t);this.log(`max common prefix length ${t}`),this.log(`tracked CPLs [ ${n.map((e=>e.toISOString())).join(", ")} ]`),Promise.all(n.map((async(r,s)=>{try{if(await this._refreshCommonPrefixLength(s,r,e),0===this._numPeersForCpl(t)){const t=Math.min(2*(s+1),n.length-1);for(let n=s+1;n<t+1;n++)try{await this._refreshCommonPrefixLength(n,r,e)}catch(e){this.log.error(e)}}}catch(e){this.log.error(e)}}))).catch((e=>{this.log.error(e)})).then((()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()})).catch((e=>{this.log.error(e)}))}async _refreshCommonPrefixLength(e,t,n){if(!n&&t.getTime()>Date.now()-this.refreshInterval)return void this.log("not running refresh for cpl %s as time since last refresh not above interval",e);const r=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,r,this.routingTable.size);const s=new $n.TimeoutController(this.refreshQueryTimeout);try{const t=await Pp(this.peerRouting.getClosestPeers(r.toBytes(),{signal:s.signal}));this.log(`found ${t} peers that were close to imaginary peer %p`,r),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,r,this.routingTable.size)}finally{s.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>15&&(e=15);const t=[];for(let n=0;n<=e;n++)t[n]=this.commonPrefixLengthRefreshedAt[n]??new Date;return t}async _generateRandomPeerId(e){if(null==this.routingTable.kb)throw new Error("Routing table not started");const t=(0,wg.O6)(2),n=(t[1]<<8)+t[0],r=await this._makePeerId(this.routingTable.kb.localNodeId,n,e);return(0,Nr.cv)(r)}async _makePeerId(e,t,n){if(n>15)throw new Error("Cannot generate peer ID for common prefix length greater than 15");const r=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1),s=65535<<16-(n+1),i=MS[(r^32768>>n)&s|t&~s],a=new ArrayBuffer(34),o=new DataView(a,0,a.byteLength);return o.setUint8(0,ji.sha256.code),o.setUint8(1,32),o.setUint32(2,i,!1),new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}_maxCommonPrefix(){let e=0;for(const t of this._prefixLengths())t>e&&(e=t);return e}_numPeersForCpl(e){let t=0;for(const n of this._prefixLengths())n===e&&t++;return t}*_prefixLengths(){if(null!=this.routingTable.kb)for(const{id:e}of this.routingTable.kb.toIterable()){const t=kS(this.routingTable.kb.localNodeId,e);let n=0;for(const e of t){if(0!==e)break;n++}yield n}}}var LS,SS;!function(e){let t;e.codec=()=>(null==t&&(t=(0,Jr.yw)(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.key&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),null!=e.author&&(t.uint32(26),t.bytes(e.author)),null!=e.signature&&(t.uint32(34),t.bytes(e.signature)),null!=e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.key=e.bytes();break;case 2:n.value=e.bytes();break;case 3:n.author=e.bytes();break;case 4:n.signature=e.bytes();break;case 5:n.timeReceived=e.string();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(LS||(LS={})),function(e){let t,n,r,s,i,a;!function(e){e.PUT_VALUE="PUT_VALUE",e.GET_VALUE="GET_VALUE",e.ADD_PROVIDER="ADD_PROVIDER",e.GET_PROVIDERS="GET_PROVIDERS",e.FIND_NODE="FIND_NODE",e.PING="PING"}(t=e.MessageType||(e.MessageType={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(n||(n={})),function(e){e.codec=()=>(0,Jr.Ji)(n)}(t=e.MessageType||(e.MessageType={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTED="CONNECTED",e.CAN_CONNECT="CAN_CONNECT",e.CANNOT_CONNECT="CANNOT_CONNECT"}(r=e.ConnectionType||(e.ConnectionType={})),function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTED=1]="CONNECTED",e[e.CAN_CONNECT=2]="CAN_CONNECT",e[e.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(s||(s={})),function(e){e.codec=()=>(0,Jr.Ji)(s)}(r=e.ConnectionType||(e.ConnectionType={})),function(t){let n;t.codec=()=>(null==n&&(n=(0,Jr.yw)(((t,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=t.id&&(n.uint32(10),n.bytes(t.id)),null==t.addrs)throw new Error('Protocol error: required field "addrs" was not found in object');for(const e of t.addrs)n.uint32(18),n.bytes(e);null!=t.connection&&(n.uint32(24),e.ConnectionType.codec().encode(t.connection,n)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={addrs:[]},s=null==n?t.len:t.pos+n;for(;t.pos<s;){const n=t.uint32();switch(n>>>3){case 1:r.id=t.bytes();break;case 2:r.addrs.push(t.bytes());break;case 3:r.connection=e.ConnectionType.codec().decode(t);break;default:t.skipType(7&n)}}return r}))),n),t.encode=e=>(0,Jr.LE)(e,t.codec()),t.decode=e=>(0,Jr.C6)(e,t.codec())}(i=e.Peer||(e.Peer={})),e.codec=()=>(null==a&&(a=(0,Jr.yw)(((t,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=t.type&&(n.uint32(8),e.MessageType.codec().encode(t.type,n)),null!=t.clusterLevelRaw&&(n.uint32(80),n.int32(t.clusterLevelRaw)),null!=t.key&&(n.uint32(18),n.bytes(t.key)),null!=t.record&&(n.uint32(26),n.bytes(t.record)),null==t.closerPeers)throw new Error('Protocol error: required field "closerPeers" was not found in object');for(const r of t.closerPeers)n.uint32(66),e.Peer.codec().encode(r,n);if(null==t.providerPeers)throw new Error('Protocol error: required field "providerPeers" was not found in object');for(const r of t.providerPeers)n.uint32(74),e.Peer.codec().encode(r,n);!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={closerPeers:[],providerPeers:[]},s=null==n?t.len:t.pos+n;for(;t.pos<s;){const n=t.uint32();switch(n>>>3){case 1:r.type=e.MessageType.codec().decode(t);break;case 10:r.clusterLevelRaw=t.int32();break;case 2:r.key=t.bytes();break;case 3:r.record=t.bytes();break;case 8:r.closerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;case 9:r.providerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;default:t.skipType(7&n)}}return r}))),a),e.encode=t=>(0,Jr.LE)(t,e.codec()),e.decode=t=>(0,Jr.C6)(t,e.codec())}(SS||(SS={}));const DS=SS.MessageType,TS=SS.ConnectionType,RS=Object.keys(DS);class PS{constructor(e,t,n){if(!(t instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=t,this.clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const e=this.clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this.clusterLevelRaw=e}serialize(){return SS.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(IS),providerPeers:this.providerPeers.map(IS),record:null==this.record?void 0:this.record.serialize().subarray()})}static deserialize(e){const t=SS.decode(e),n=new PS(t.type??SS.MessageType.PUT_VALUE,t.key??Uint8Array.from([]),t.clusterLevelRaw??0);return n.closerPeers=t.closerPeers.map(AS),n.providerPeers=t.providerPeers.map(AS),null!=t.record?.length&&(n.record=Fs.deserialize(t.record)),n}}function IS(e){return{id:e.id.toBytes(),addrs:(e.multiaddrs??[]).map((e=>e.bytes)),connection:TS.CONNECTED}}function AS(e){if(null==e.id)throw new Error("Invalid peer in message");return{id:(0,Nr.cv)(e.id),multiaddrs:(e.addrs??[]).map((e=>(0,Zn.HM)(e))),protocols:[]}}function YS(e){return{...e,name:"SENDING_QUERY",type:0,messageName:e.type,messageType:RS.indexOf(e.type.toString())}}function OS(e){return{...e,name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]}}function NS(e){return{...e,name:"FINAL_PEER",type:2}}function xS(e){return{...e,name:"QUERY_ERROR",type:3}}function CS(e){return{...e,name:"PROVIDER",type:4}}function HS(e){return{...e,name:"VALUE",type:5}}function jS(e){return{...e,name:"DIALING_PEER",type:7}}class BS extends r_.v{constructor(e,t){super();const{protocol:n,lan:r}=t;this.components=e,this.log=(0,j.kg)(`libp2p:kad-dht:${r?"lan":"wan"}:network`),this.running=!1,this.protocol=n}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,t,n={}){if(this.running){this.log("sending %s to %p",t.type,e),yield jS({peer:e}),yield YS({to:e,type:t.type});try{const r=await this.components.connectionManager.openConnection(e,n),s=await r.newStream(this.protocol,n),i=await this._writeReadMessage(s,t.serialize(),n);yield OS({from:e,messageType:i.type,closer:i.closerPeers,providers:i.providerPeers,record:i.record})}catch(t){yield xS({from:e,error:t})}finally{null!=s&&s.close()}}}async*sendMessage(e,t,n={}){if(this.running){this.log("sending %s to %p",t.type,e),yield jS({peer:e}),yield YS({to:e,type:t.type});try{const r=await this.components.connectionManager.openConnection(e,n),s=await r.newStream(this.protocol,n);await this._writeMessage(s,t.serialize(),n),yield OS({from:e,messageType:t.type})}catch(t){yield xS({from:e,error:t})}finally{null!=s&&s.close()}}}async _writeMessage(e,t,n){null!=n.signal&&(e=(0,Kw.D7)(e,n.signal)),await(0,ki.zG)([t],Zw.c(),e,$s.Z)}async _writeReadMessage(e,t,n){null!=n.signal&&(e=(0,Kw.D7)(e,n.signal));const r=await(0,ki.zG)([t],Zw.c(),e,Zw.J(),(async e=>{const t=await(0,wu.Z)(e);if(null!=t)return t;throw B(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED")})),s=PS.deserialize(r);return s.closerPeers.forEach((e=>{this.dispatchEvent(new r_.A("peer",{detail:e}))})),s.providerPeers.forEach((e=>{this.dispatchEvent(new r_.A("peer",{detail:e}))})),s}}function zS(e,t){const n=t.key,r=(0,Xn.B)(n).split("/");if(r.length<3)return;const s=e[r[1].toString()];if(null==s)throw B(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE");return s(n,t.value)}const US={pk:async(e,t)=>{if(!(e instanceof Uint8Array))throw B(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(e.byteLength<5)throw B(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if("/pk/"!==(0,Xn.B)(e.subarray(0,4)))throw B(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");const n=e.slice(4),r=await ji.sha256.digest(t);if(!(0,Vr.f)(n,r.bytes))throw B(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")}},FS={pk:function(e,t){return 0}};class VS{constructor(e,t){const{validators:n,selectors:r,peerRouting:s,queryManager:i,routingTable:a,network:o,lan:c}=t;this.components=e,this.log=(0,j.kg)(`libp2p:kad-dht:${c?"lan":"wan"}:content-fetching`),this.validators=n,this.selectors=r,this.peerRouting=s,this.queryManager=i,this.routingTable=a,this.network=o}async putLocal(e,t){const n=_S(e);await this.components.datastore.put(n,t)}async getLocal(e){this.log("getLocal %b",e);const t=_S(e);this.log("fetching record for key %k",t);const n=await this.components.datastore.get(t);this.log("found %k in local datastore",t);const r=Fs.deserialize(n);return await zS(this.validators,r),r}async*sendCorrectionRecord(e,t,n,r={}){this.log("sendCorrection for %b",e);const s=await yS(e,n);for(const{value:i,from:a}of t){if((0,Vr.f)(i,n)){this.log("record was ok");continue}if(this.components.peerId.equals(a)){try{const t=_S(e);this.log(`Storing corrected record for key ${t.toString()}`),await this.components.datastore.put(t,s.subarray())}catch(e){this.log.error("Failed error correcting self",e)}continue}let t=!1;const o=new PS(DS.PUT_VALUE,e,0);o.record=Fs.deserialize(s);for await(const e of this.network.sendRequest(a,o,r))"PEER_RESPONSE"===e.name&&null!=e.record&&(0,Vr.f)(e.record.value,Fs.deserialize(s).value)&&(t=!0),yield e;t||(yield xS({from:a,error:B(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(e,t,n={}){this.log("put key %b value %b",e,t);const r=await yS(e,t),s=_S(e);this.log(`storing record for key ${s.toString()}`),await this.components.datastore.put(s,r.subarray()),yield*(0,ki.zG)(this.peerRouting.getClosestPeers(e,{signal:n.signal}),(t=>(0,bi.Z)(t,(t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const s=[],i=new PS(DS.PUT_VALUE,e,0);i.record=Fs.deserialize(r),this.log("send put to %p",t.peer.id);for await(const e of this.network.sendRequest(t.peer.id,i,n))s.push(e),"PEER_RESPONSE"===e.name&&(null!=e.record&&(0,Vr.f)(e.record.value,Fs.deserialize(r).value)||s.push(xS({from:t.peer.id,error:B(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return s}))),(e=>wi(e,{ordered:!1,concurrency:iS})),(async function*(e){for await(const t of e)yield*t}))}async*get(e,t={}){this.log("get %b",e);const n=[];for await(const r of this.getMany(e,t))"VALUE"===r.name&&n.push(r),yield r;if(0===n.length)return;const r=n.map((e=>e.value));let s=0;try{s=function(e,t,n){if(0===n.length)throw B(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED");const r=(0,Xn.B)(t).split("/");if(r.length<3)throw B(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY");const s=e[r[1].toString()];if(null==s){const e=`Unrecognized key prefix: ${r[1]}`;throw B(new Error(e),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===n.length?0:s(t,n)}(this.selectors,e,r)}catch(e){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==e.code)throw e}const i=r[s];if(this.log("GetValue %b %b",e,i),null==i)throw B(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,n,i,t),yield n[s]}async*getMany(e,t={}){this.log("getMany values for %b",e);try{const t=await this.getLocal(e);yield HS({value:t.value,from:this.components.peerId})}catch(t){this.log("error getting local value for %b",e,t)}const n=await fS(e),r=this.routingTable.closestPeers(n);this.log("found %d peers in routing table",r.length);const s=this;yield*this.queryManager.run(e,r,(async function*({peer:t,signal:n}){for await(const r of s.peerRouting.getValueOrPeers(t,e,{signal:n}))yield r,"PEER_RESPONSE"===r.name&&null!=r.record&&(yield HS({from:t,value:r.record.value}))}),t)}}class WS{constructor(e,t){const{network:n,peerRouting:r,queryManager:s,routingTable:i,providers:a,lan:o}=t;this.components=e,this.log=(0,j.kg)(`libp2p:kad-dht:${o?"lan":"wan"}:content-routing`),this.network=n,this.peerRouting=r,this.queryManager=s,this.routingTable=i,this.providers=a}async*provide(e,t,n={}){this.log("provide %s",e),await this.providers.addProvider(e,this.components.peerId);const r=new PS(DS.ADD_PROVIDER,e.bytes,0);r.providerPeers=[{id:this.components.peerId,multiaddrs:t,protocols:[]}];let s=0;const i=t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const i=[];this.log("putProvider %s to %p",e,t.peer.id);try{this.log("sending provider record for %s to %p",e,t.peer.id);for await(const a of this.network.sendMessage(t.peer.id,r,n))"PEER_RESPONSE"===a.name&&(this.log("sent provider record for %s to %p",e,t.peer.id),s++),i.push(a)}catch(e){this.log.error("error sending provide record to peer %p",t.peer.id,e),i.push(xS({from:t.peer.id,error:e}))}return i};yield*(0,ki.zG)(this.peerRouting.getClosestPeers(e.multihash.bytes,n),(e=>(0,bi.Z)(e,(e=>i(e)))),(e=>wi(e,{ordered:!1,concurrency:iS})),(async function*(e){for await(const t of e)yield*t})),this.log("sent provider records to %d peers",s)}async*findProviders(e,t){const n=this.routingTable.kBucketSize,r=e.multihash.bytes,s=await fS(r),i=this;this.log("findProviders %c",e);const a=await this.providers.getProviders(e);if(a.length>0){const e=[];for(const t of a.slice(0,n))e.push({id:t,multiaddrs:(await this.components.peerStore.addressBook.get(t)??[]).map((e=>e.multiaddr)),protocols:[]});yield OS({from:this.components.peerId,messageType:DS.GET_PROVIDERS,providers:e}),yield CS({from:this.components.peerId,providers:e})}if(a.length>=n)return;const o=async function*({peer:e,signal:t}){const n=new PS(DS.GET_PROVIDERS,r,0);yield*i.network.sendRequest(e,n,{signal:t})},c=new Set(a.map((e=>e.toString())));for await(const i of this.queryManager.run(r,this.routingTable.closestPeers(s),o,t))if(yield i,"PEER_RESPONSE"===i.name){this.log("Found %d provider entries for %c and %d closer peers",i.providers.length,e,i.closer.length);const t=[];for(const e of i.providers)c.has(e.id.toString())||(c.add(e.id.toString()),t.push(e));if(t.length>0&&(yield CS({from:i.from,providers:t})),c.size===n)return}}}class $S{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((e=>e.peerId))}async add(e){if(null!=this.peerDistances.find((t=>t.peerId.equals(e))))return;const t=await mS(e),n={peerId:e,distance:kS(this.originDhtKey,t)};this.peerDistances.push(n),this.peerDistances.sort(((e,t)=>Gp(e.distance,t.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(0===e.length)return!1;if(0===this.length)return!0;const t=await Promise.all(e.map(mS)),n=this.peerDistances[this.peerDistances.length-1].distance;for(const e of t)if(Gp(kS(this.originDhtKey,e),n)<0)return!0;return!1}}class GS{constructor(e,t){const{routingTable:n,network:r,validators:s,queryManager:i,lan:a}=t;this.components=e,this.routingTable=n,this.network=r,this.validators=s,this.queryManager=i,this.log=(0,j.kg)(`libp2p:kad-dht:${a?"lan":"wan"}:peer-routing`)}async findPeerLocal(e){let t;const n=await this.routingTable.find(e);if(null!=n){this.log("findPeerLocal found %p in routing table",e);try{t=await this.components.peerStore.get(n)}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}}if(null==t)try{t=await this.components.peerStore.get(e)}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}if(null!=t)return this.log("findPeerLocal found %p in peer store",e),{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}async*_getValueSingle(e,t,n={}){const r=new PS(DS.GET_VALUE,t,0);yield*this.network.sendRequest(e,r,n)}async*getPublicKeyFromNode(e,t={}){const n=function(e){return(0,Qr.z)([uS,e.toBytes()])}(e);for await(const r of this._getValueSingle(e,n,t))if(yield r,"PEER_RESPONSE"===r.name&&null!=r.record){const t=await(0,Nr.y5)(wg.XP.marshalPublicKey({bytes:r.record.value}));if(!t.equals(e))throw B(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(null==t.publicKey)throw B(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");yield HS({from:e,value:t.publicKey})}throw B(new Error(`Node not responding with its public key: ${e.toString()}`),"ERR_INVALID_RECORD")}async*findPeer(e,t={}){this.log("findPeer %p",e);const n=await this.findPeerLocal(e);if(null!=n)return this.log("found local"),void(yield NS({from:this.components.peerId,peer:n}));const r=await mS(e),s=this.routingTable.closestPeers(r);if(null!=s.find((t=>t.equals(e))))try{const t=await this.components.peerStore.get(e);return this.log("found in peerStore"),void(yield NS({from:this.components.peerId,peer:{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}))}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}const i=this,a=async function*({peer:t,signal:n}){const r=new PS(DS.FIND_NODE,e.toBytes(),0);for await(const s of i.network.sendRequest(t,r,{signal:n}))if(yield s,"PEER_RESPONSE"===s.name){const t=s.closer.find((t=>t.id.equals(e)));null!=t&&(yield NS({from:s.from,peer:t}))}};let o=!1;for await(const n of this.queryManager.run(e.toBytes(),s,a,t))"FINAL_PEER"===n.name&&(o=!0),yield n;o||(yield xS({from:this.components.peerId,error:B(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(e,t={}){this.log("getClosestPeers to %b",e);const n=await fS(e),r=this.routingTable.closestPeers(n),s=this,i=new $S(n,this.routingTable.kBucketSize);await Promise.all(r.map((async e=>await i.add(e))));const a=async function*({peer:t,signal:n}){s.log("closerPeersSingle %s from %p",(0,Xn.B)(e,"base32"),t);const r=new PS(DS.FIND_NODE,e,0);yield*s.network.sendRequest(t,r,{signal:n})};for await(const n of this.queryManager.run(e,r,a,t))yield n,"PEER_RESPONSE"===n.name&&await Promise.all(n.closer.map((async e=>await i.add(e.id))));this.log("found %d peers close to %b",i.length,e);for(const e of i.peers)yield NS({from:this.components.peerId,peer:{id:e,multiaddrs:(await this.components.peerStore.addressBook.get(e)??[]).map((e=>e.multiaddr)),protocols:[]}})}async*getValueOrPeers(e,t,n={}){for await(const r of this._getValueSingle(e,t,n)){if("PEER_RESPONSE"===r.name&&null!=r.record)try{await this._verifyRecordOnline(r.record)}catch(e){const t="invalid record received, discarded";this.log(t),yield xS({from:r.from,error:B(new Error(t),"ERR_INVALID_RECORD")});continue}yield r}}async _verifyRecordOnline(e){if(null==e.timeReceived)throw B(new Error("invalid record received"),"ERR_INVALID_RECORD");await zS(this.validators,new Fs(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,t){const n=await fS(e),r=this.routingTable.closestPeers(n),s=[];for(const e of r)if(!e.equals(t))try{const t=await this.components.peerStore.addressBook.get(e),n=await this.components.peerStore.protoBook.get(e);s.push({id:e,multiaddrs:t.map((e=>e.multiaddr)),protocols:n})}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}return s.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",s.length,e,t):this.log("getCloserPeersOffline could not find peer closer to %b than %p",e,t),s}}const qS=(0,j.kg)("libp2p:kad-dht:providers");class KS{constructor(e,t={}){const{cacheSize:n,cleanupInterval:r,provideValidity:s}=t;this.components=e,this.cleanupInterval=r??36e5,this.provideValidity=s??864e5,this.cache=Rr(n??256),this.syncQueue=new Pr.Z({concurrency:1}),this.started=!1}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval((()=>{this._cleanup().catch((e=>{qS.error(e)}))}),this.cleanupInterval))}async stop(){this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){return await this.syncQueue.add((async()=>{const e=Date.now();let t=0,n=0;const r=new Map,s=this.components.datastore.batch(),i=this.components.datastore.query({prefix:rS});for await(const e of i)try{const{cid:i,peerId:a}=JS(e.key),o=QS(e.value).getTime(),c=Date.now(),d=c-o,l=d>this.provideValidity;if(qS("comparing: %d - %d = %d > %d %s",c,o,d,this.provideValidity,l?"(expired)":""),l){n++,s.delete(e.key);const t=r.get(i)??new Set;t.add(a),r.set(i,t)}t++}catch(e){qS.error(e.message)}r.size>0?(qS("deleting %d / %d entries",n,t),await s.commit()):qS("nothing to delete");for(const[e,t]of r){const n=ZS(e),r=this.cache.get(n);if(null!=r){for(const e of t)r.delete(e);0===r.size?this.cache.remove(n):this.cache.set(n,r)}}qS("Cleanup successful (%dms)",Date.now()-e)}))}async _getProvidersMap(e){const t=ZS(e);let n=this.cache.get(t);return null==n&&(n=await async function(e,t){const n=new Map,r=e.query({prefix:ZS(t)});for await(const e of r){const{peerId:t}=JS(e.key);n.set(t,QS(e.value))}return n}(this.components.datastore,e),this.cache.set(t,n)),n}async addProvider(e,t){return await this.syncQueue.add((async()=>{qS("%p provides %s",t,e);const n=await this._getProvidersMap(e);qS("loaded %s provs",n.size);const r=new Date;n.set(t.toString(),r);const s=ZS(e);this.cache.set(s,n),await async function(e,t,n,r){const s=[ZS(t),"/",n.toString()].join(""),i=new lr.s(s),a=Uint8Array.from(Xl.encode(r.getTime()));return await e.put(i,a)}(this.components.datastore,e,t,r)}))}async getProviders(e){return await this.syncQueue.add((async()=>(qS("get providers for %s",e),[...(await this._getProvidersMap(e)).keys()].map((e=>(0,Nr.jE)(e))))))}}function ZS(e){const t="string"==typeof e?e:(0,Xn.B)(e.multihash.bytes,"base32");return`${rS}/${t}`}function JS(e){const t=e.toString().split("/");if(5!==t.length)throw new Error(`incorrectly formatted provider entry key in datastore: ${e.toString()}`);return{cid:t[3],peerId:t[4]}}function QS(e){return new Date(Xl.decode(e))}const XS=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");const eD="running-queries";class tD{constructor(e,t){const{lan:n=!1,disjointPaths:r=sS,alpha:s=iS}=t;this.components=e,this.disjointPaths=r??sS,this.controllers=new Set,this.running=!1,this.alpha=s??iS,this.lan=n,this.queries=0}isStarted(){return this.running}async start(){this.running=!0}async stop(){this.running=!1;for(const e of this.controllers)e.abort();this.controllers.clear()}async*run(e,t,n,r={}){if(!this.running)throw new Error("QueryManager not started");let s;if(null==r.signal){s=new $n.TimeoutController(lS),r.signal=s.signal;try{null!=zM.setMaxListeners&&(0,zM.setMaxListeners)(1/0,s.signal)}catch{}}const i=new AbortController;this.controllers.add(i);const a=[i.signal];null!=r.signal&&a.push(r.signal);const o=(0,ur.anySignal)(a);try{null!=zM.setMaxListeners&&(0,zM.setMaxListeners)(1/0,o)}catch{}const c=(0,j.kg)(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+(0,Xn.B)(e,"base58btc")),d=t.slice(0,Math.min(this.disjointPaths,t.length)),l=Date.now(),u=new r_.v;try{if(c("query:start"),this.queries++,this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:eD,value:this.queries}),0===t.length)return void c.error("Running query with no peers");const a=new eE.fd,h=d.map(((t,s)=>async function*(e){const{key:t,startingPeer:n,ourPeerId:r,signal:s,query:i,alpha:a,pathIndex:o,numPaths:c,cleanUp:d,queryFuncTimeout:l,log:u,peersSeen:h}=e,p=new Pr.Z({concurrency:a}),f=await fS(t);!function e(n,a){if(null==n)return;h.add(n);const d=BigInt("0x"+(0,Xn.B)(kS(a,f),"base16"));p.add((async()=>{let a;const m=[s];null!=l&&(a=new $n.TimeoutController(l),m.push(a.signal));const _=(0,ur.anySignal)(m);try{for await(const s of i({key:t,peer:n,signal:_,pathIndex:o,numPaths:c})){if(_.aborted)return;if("PEER_RESPONSE"===s.name)for(const i of s.closer){if(h.has(i.id)){u("already seen %p in query",i.id);continue}if(r.equals(i.id)){u("not querying ourselves");continue}const s=await mS(i.id);BigInt("0x"+(0,Xn.B)(kS(s,f),"base16"))>d?u("skipping %p as they are not closer to %b than %p",i.id,t,n):(u("querying closer peer %p",i.id),e(i.id,s))}p.emit("completed",s)}a?.clear()}catch(e){s.aborted?p.emit("error",e):p.emit("completed",xS({from:n,error:e}))}finally{a?.clear()}}),{priority:XS-d}).catch((e=>{u.error(e)}))}(n,await mS(n)),yield*async function*(e,t,n,r){let s=(0,yi.Z)(),i=!0;const a=[],o=()=>{i&&(r("clean up queue, results %d, queue size %d, pending tasks %d",a.length,e.size,e.pending),i=!1,e.clear(),a.splice(0,a.length))};for(e.on("completed",(e=>{a.push(e),s.resolve()})),e.on("error",(e=>{r("queue error",e),o(),s.reject(e)})),e.on("idle",(()=>{r("queue idle"),i=!1,s.resolve()})),t.addEventListener("abort",(()=>{r("abort queue");const e=i;o(),e&&s.reject(B(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),n.addEventListener("cleanup",(()=>{o(),s.resolve()}));i;)for(await s.promise,s=(0,yi.Z)();a.length>0;){const e=a.shift();null!=e&&(yield e)}yield*a}(p,s,d,u)}({key:e,startingPeer:t,ourPeerId:this.components.peerId,signal:o,query:n,pathIndex:s,numPaths:d.length,alpha:this.alpha,cleanUp:u,queryFuncTimeout:r.queryFuncTimeout,log:c,peersSeen:a})));for await(const e of(0,Pm.Z)(...h))yield e,"QUERY_ERROR"===e.name&&c("error",e.error)}catch(e){if(this.running||"ERR_QUERY_ABORTED"!==e.code)throw e}finally{this.controllers.delete(i),null!=s&&s.clear(),this.queries--,this.components.metrics?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:eD,value:this.queries}),u.dispatchEvent(new r_.A("cleanup")),c("query:done in %dms",Date.now()-l)}}}const nD=(0,j.kg)("libp2p:kad-dht:rpc:handlers:add-provider");class rD{constructor(e){const{providers:t}=e;this.providers=t}async handle(e,t){if(nD("start"),null==t.key||0===t.key.length)throw B(new Error("Missing key"),"ERR_MISSING_KEY");let n;try{n=te.k.decode(t.key)}catch(e){throw B(new Error("Invalid CID"),"ERR_INVALID_CID")}null!=t.providerPeers&&0!==t.providerPeers.length||nD.error("no providers found in message"),await Promise.all(t.providerPeers.map((async t=>{t.id.equals(e)?t.multiaddrs.length<1?nD("no valid addresses for provider %p. Ignore",e):(nD("received provider %p for %s (addrs %s)",e,n,t.multiaddrs.map((e=>e.toString()))),await this.providers.addProvider(n,t.id)):nD("invalid provider peer %p from %p",t.id,e)})))}}var sD=n(5629);const iD=(0,j.kg)("libp2p:kad-dht:rpc:handlers:find-node");class aD{constructor(e,t){const{peerRouting:n,lan:r}=t;this.components=e,this.peerRouting=n,this.lan=Boolean(r)}async handle(e,t){iD("incoming request from %p for peers closer to %b",e,t.key);let n=[];n=(0,sD.fS)(this.components.peerId.toBytes(),t.key)?[{id:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map((e=>e.decapsulateCode((0,Zn.a_)("p2p").code))),protocols:[]}]:await this.peerRouting.getCloserPeersOffline(t.key,e),n=n.map(this.lan?pS:hS).filter((({multiaddrs:e})=>e.length));const r=new PS(t.type,new Uint8Array(0),t.clusterLevel);return n.length>0?r.closerPeers=n:iD("could not find any peers closer to %b than %p",t.key,e),r}}const oD=(0,j.kg)("libp2p:kad-dht:rpc:handlers:get-providers");class cD{constructor(e,t){const{peerRouting:n,providers:r,lan:s}=t;this.components=e,this.peerRouting=n,this.providers=r,this.lan=Boolean(s)}async handle(e,t){let n;try{n=te.k.decode(t.key)}catch(e){throw B(new Error("Invalid CID"),"ERR_INVALID_CID")}oD("%p asking for providers for %s",e,n);const[r,s]=await Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(t.key,e)]),i=await this._getPeers(r),a=await this._getPeers(s.map((({id:e})=>e))),o=new PS(t.type,t.key,t.clusterLevel);return i.length>0&&(o.providerPeers=i),a.length>0&&(o.closerPeers=a),oD("got %s providers %s closerPeers",i.length,a.length),o}async _getAddresses(e){return(await this.components.peerStore.addressBook.get(e)).map((e=>e.multiaddr))}async _getPeers(e){const t=[],n=this.lan?pS:hS;for(const r of e){const e=n({id:r,multiaddrs:await this._getAddresses(r),protocols:[]});e.multiaddrs.length>0&&t.push(e)}return t}}const dD=(0,j.kg)("libp2p:kad-dht:rpc:handlers:get-value");class lD{constructor(e,t){const{peerRouting:n}=t;this.components=e,this.peerRouting=n}async handle(e,t){const n=t.key;if(dD("%p asked for key %b",e,n),null==n||0===n.length)throw B(new Error("Invalid key"),"ERR_INVALID_KEY");const r=new PS(DS.GET_VALUE,n,t.clusterLevel);if(function(e){return"/pk/"===(0,Xn.B)(e.subarray(0,4))}(n)){dD("is public key");const e=function(e){return(0,Nr.cv)(e.subarray(4))}(n);let t;try{const n=await this.components.peerStore.keyBook.get(e);if(null==n)throw B(new Error("No public key found in key book"),"ERR_NOT_FOUND");t=n}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}if(null!=t)return dD("returning found public key"),r.record=new Fs(n,t,new Date),r}const[s,i]=await Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(t.key,e)]);return null!=s&&(dD("had record for %b in local datastore",n),r.record=s),i.length>0&&(dD("had %s closer peers in routing table",i.length),r.closerPeers=i),r}async _checkLocalDatastore(e){dD("checkLocalDatastore looking for %b",e);const t=_S(e);let n;try{n=await this.components.datastore.get(t)}catch(e){if("ERR_NOT_FOUND"===e.code)return;throw e}const r=Fs.deserialize(n);if(null==r)throw B(new Error("Invalid record"),"ERR_INVALID_RECORD");if(!(null==r.timeReceived||Date.now()-r.timeReceived.getTime()>1296e5))return r;await this.components.datastore.delete(t)}}const uD=(0,j.kg)("libp2p:kad-dht:rpc:handlers:ping");class hD{async handle(e,t){return uD("ping from %p",e),t}}class pD{constructor(e,t){const{validators:n}=t;this.components=e,this.log=(0,j.kg)("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=n}async handle(e,t){const n=t.key;this.log("%p asked us to store value for key %b",e,n);const r=t.record;if(null==r){const t=`Empty record from: ${e.toString()}`;throw this.log.error(t),B(new Error(t),"ERR_EMPTY_RECORD")}try{await zS(this.validators,r),r.timeReceived=new Date;const e=_S(r.key);await this.components.datastore.put(e,r.serialize().subarray()),this.log("put record for %b into datastore under key %k",n,e)}catch(e){this.log("did not put record for key %b into datastore %o",n,e)}return t}}class fD{constructor(e,t){const{providers:n,peerRouting:r,validators:s,lan:i}=t;this.log=(0,j.kg)("libp2p:kad-dht:rpc"),this.routingTable=t.routingTable,this.handlers={[DS.GET_VALUE]:new lD(e,{peerRouting:r}),[DS.PUT_VALUE]:new pD(e,{validators:s}),[DS.FIND_NODE]:new aD(e,{peerRouting:r,lan:i}),[DS.ADD_PROVIDER]:new rD({providers:n}),[DS.GET_PROVIDERS]:new cD(e,{peerRouting:r,providers:n,lan:i}),[DS.PING]:new hD}}async handleMessage(e,t){try{await this.routingTable.add(e)}catch(e){this.log.error("Failed to update the kbucket store",e)}const n=this.handlers[t.type];if(null!=n)return await n.handle(e,t);this.log.error(`no handler found for message type: ${t.type}`)}onIncomingStream(e){Promise.resolve().then((async()=>{const{stream:t,connection:n}=e,r=n.remotePeer;try{await this.routingTable.add(r)}catch(e){this.log.error(e)}const s=this;await(0,ki.zG)(t,Zw.J(),(async function*(e){for await(const t of e){const e=PS.deserialize(t);s.log("incoming %s from %p",e.type,r);const n=await s.handleMessage(r,e);null!=n&&(yield n.serialize())}}),Zw.c(),t)})).catch((e=>{this.log.error(e)}))}}class mD extends r_.v{constructor(e,t){super();const{protocol:n,lan:r}=t;this.components=e,this.log=(0,j.kg)("libp2p:kad-dht:topology-listener:"+(r?"lan":"wan")),this.running=!1,this.protocol=n}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;const e=n_({onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new r_.A("peer",{detail:e}))}});this.registrarId=await this.components.registrar.register(this.protocol,e)}stop(){this.running=!1,null!=this.registrarId&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}class _D{constructor(e,t){const{peerRouting:n,lan:r,count:s,interval:i,queryTimeout:a}=t;this.components=e,this.log=(0,j.kg)(`libp2p:kad-dht:${r?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=n,this.count=s??sS,this.interval=i??aS,this.queryTimeout=a??oS}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}_querySelf(){Promise.resolve().then((async()=>{const e=new $n.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;const t=(0,ur.anySignal)([this.controller.signal,e.signal]);try{null!=zM.setMaxListeners&&(0,zM.setMaxListeners)(1/0,t)}catch{}const n=await(0,ki.zG)(this.peerRouting.getClosestPeers(this.components.peerId.toBytes(),{signal:t}),(e=>async function*(e,t){let n=0;if(!(t<1))for await(const r of e)if(yield r,n++,n===t)return}(e,this.count)),(async e=>await Pp(e)));this.log("query ran successfully - found %d peers",n)}catch(e){this.log("query error",e)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),e.clear()}})).catch((e=>{this.log("query error",e)}))}}class yD extends r_.v{constructor(e,t){super();const{kBucketSize:n,clientMode:r,validators:s,selectors:i,querySelfInterval:a,lan:o,protocolPrefix:c,pingTimeout:d,pingConcurrency:l,maxInboundStreams:u,maxOutboundStreams:h}=t;this.running=!1,this.components=e,this.lan=Boolean(o),this.log=(0,j.kg)("libp2p:kad-dht:"+(!0===o?"lan":"wan")),this.protocol=`${c??"/ipfs"}${!0===o?"/lan":""}/kad/1.0.0`,this.kBucketSize=n??20,this.clientMode=r??!0,this.maxInboundStreams=u??32,this.maxOutboundStreams=h??64,this.routingTable=new wS(e,{kBucketSize:n,lan:this.lan,pingTimeout:d,pingConcurrency:l,protocol:this.protocol}),this.providers=new KS(e),this.validators={...US,...s},this.selectors={...FS,...i},this.network=new BS(e,{protocol:this.protocol,lan:this.lan}),this.queryManager=new tD(e,{disjointPaths:Math.ceil(this.kBucketSize/2),lan:o}),this.peerRouting=new GS(e,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new VS(e,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new WS(e,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new ES({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new fD(e,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new mD(e,{protocol:this.protocol,lan:this.lan}),this.querySelf=new _D(e,{peerRouting:this.peerRouting,interval:a,lan:this.lan}),this.network.addEventListener("peer",(e=>{const t=e.detail;this.onPeerConnect(t).catch((e=>{this.log.error("could not add %p to routing table",t.id,e)})),this.dispatchEvent(new r_.A("peer",{detail:t}))})),this.topologyListener.addEventListener("peer",(e=>{const t=e.detail;Promise.resolve().then((async()=>{const e=await this.components.peerStore.addressBook.get(t),n={id:t,multiaddrs:e.map((e=>e.multiaddr)),protocols:[]};await this.onPeerConnect(n)})).catch((e=>{this.log.error("could not add %p to routing table",t,e)}))}))}get[VL.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}async onPeerConnect(e){if(this.log("peer %p connected with protocols %s",e.id,e.protocols),0!==(e=this.lan?pS(e):hS(e)).multiaddrs.length)try{await this.routingTable.add(e.id)}catch(t){this.log.error("could not add %p to routing table",e.id,t)}else this.log("ignoring %p as they do not have any %s addresses in %s",e.id,this.lan?"private":"public",e.multiaddrs.map((e=>e.toString())))}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(e){await this.components.registrar.unhandle(this.protocol),"client"===e?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(e,t,n={}){yield*this.contentFetching.put(e,t,n)}async*get(e,t={}){yield*this.contentFetching.get(e,t)}async*provide(e,t={}){yield*this.contentRouting.provide(e,this.components.addressManager.getAddresses(),t)}async*findProviders(e,t={}){yield*this.contentRouting.findProviders(e,t)}async*findPeer(e,t={}){yield*this.peerRouting.findPeer(e,t)}async*getClosestPeers(e,t={}){yield*this.peerRouting.getClosestPeers(e,t)}async refreshRoutingTable(){await this.routingTableRefresh.refreshTable(!0)}}const gD=(0,j.kg)("libp2p:kad-dht");class wD extends r_.v{constructor(e,t,n){super(),this.components=e,this.wan=t,this.lan=n,this.wan.addEventListener("peer",(e=>{this.dispatchEvent(new r_.A("peer",{detail:e.detail}))})),this.lan.addEventListener("peer",(e=>{this.dispatchEvent(new r_.A("peer",{detail:e.detail}))}))}get[VL.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(e){await this.wan.setMode(e)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(e,t,n={}){for await(const r of(0,Pm.Z)(this.lan.put(e,t,n),this.wan.put(e,t,n)))yield r}async*get(e,t={}){let n=!1,r=!1;for await(const s of(0,Pm.Z)(this.lan.get(e,t),this.wan.get(e,t)))yield s,"DIALING_PEER"===s.name&&(n=!0),"VALUE"===s.name&&(n=!0,null!=s.value&&(r=!0)),"SENDING_QUERY"===s.name&&(n=!0);if(!n)throw B(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");r||(yield xS({from:this.components.peerId,error:B(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(e,t={}){let n=0,r=0;const s=[],i=[this.lan];"server"===await this.wan.getMode()&&i.push(this.wan);for await(const a of(0,Pm.Z)(...i.map((n=>n.provide(e,t)))))yield a,"SENDING_QUERY"===a.name&&n++,"QUERY_ERROR"===a.name&&s.push(a.error),"PEER_RESPONSE"===a.name&&"ADD_PROVIDER"===a.messageName&&(gD("sent provider record for %s to %p",e,a.from),r++);if(0===r){if(s.length>0)throw B(new Error(`Failed to provide to ${s.length} of ${n} peers`),"ERR_PROVIDES_FAILED",{errors:s});throw B(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}}async*findProviders(e,t={}){yield*(0,Pm.Z)(this.lan.findProviders(e,t),this.wan.findProviders(e,t))}async*findPeer(e,t={}){let n=!1;for await(const r of(0,Pm.Z)(this.lan.findPeer(e,t),this.wan.findPeer(e,t)))yield r,"SENDING_QUERY"!==r.name&&"FINAL_PEER"!==r.name||(n=!0);if(!n)throw B(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(e,t={}){yield*(0,Pm.Z)(this.lan.getClosestPeers(e,t),this.wan.getClosestPeers(e,t))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}class bD extends wD{constructor(e,t){super(e,new yD(e,{protocolPrefix:"/ipfs",...t,lan:!1}),new yD(e,{protocolPrefix:"/ipfs",...t,clientMode:!1,lan:!0}))}}var vD=n(49830),kD=n(66461),MD=n(39748),ED=n(77955);const LD=C.Z.bind({ignoreUndefined:!0,concatArrays:!0});function SD({options:e={},peerId:t,multiaddrs:n=[],repo:o,keychainConfig:c={},config:d={}}){const{datastore:l}=o,u=function({options:e,config:t,datastore:n,keychainConfig:o,peerId:c,multiaddrs:d}){const l={datastore:n,peerId:c},u={addresses:{listen:d.map((e=>e.toString())),announce:Ps(e,"addresses.announce",Ps(t,"Addresses.Announce",[])),noAnnounce:Ps(e,"addresses.noAnnounce",Ps(t,"Addresses.NoAnnounce",[]))},connectionManager:Ps(e,"connectionManager",{maxConnections:Ps(e,"config.Swarm.ConnMgr.HighWater",Ps(t,"Swarm.ConnMgr.HighWater")),minConnections:Ps(e,"config.Swarm.ConnMgr.LowWater",Ps(t,"Swarm.ConnMgr.LowWater"))}),keychain:o,identify:{host:{agentVersion:`js-ipfs/${jl}`}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[(0,MD.R)({maxInboundStreams:256,maxOutboundStreams:1024})],connectionEncryption:[(0,ED.t)()],relay:{enabled:Ps(e,"relay.enabled",Ps(t,"relay.enabled",!0)),hop:{enabled:Ps(e,"relay.hop.enabled",Ps(t,"relay.hop.enabled",!1)),active:Ps(e,"relay.hop.active",Ps(t,"relay.hop.active",!1))}},nat:{enabled:!Ps(t,"Swarm.DisableNatPortMap",!1)}};var h;Ps(e,"config.Pubsub.Enabled",Ps(t,"Pubsub.Enabled",!0))&&(u.pubsub=(()=>{const e=Ps(t,"Pubsub.Router")||"gossipsub",n={gossipsub:e=>{const t=new Xw({allowPublishToZeroPeers:!0,fallbackToFloodsub:!0,emitSelf:!0,maxInboundStreams:64,maxOutboundStreams:128});return t.init({getPeerId:()=>e.peerId,getPeerStore:()=>e.peerStore,getRegistrar:()=>e.registrar,getConnectionManager:()=>e.connectionManager}),t}};if(!n[e])throw B(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${e} router.`),"ERR_NOT_SUPPORTED");return n[e]})()),"none"!==Ps(t,"Routing.Type","dhtclient")&&(u.dht=(h={clientMode:"dhtserver"!==Ps(t,"Routing.Type","dht"),kBucketSize:Ps(e,"dht.kBucketSize",20),validators:{ipns:gs},selectors:{ipns:Is}},e=>new bD(e,h)));const p=Ps(e,"config.Bootstrap",Ps(t,"Bootstrap",[]));p.length>0&&u.peerDiscovery?.push((0,vD.U)({list:p}));let f=Ps(e,"libp2p",void 0);"function"==typeof f&&(f=void 0);const m=LD(l,function(){const e=(0,xM.n)();return{transports:[e.transport],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1},metrics:{enabled:!0}}}(),u,f),_=Ps(e,"config.Addresses.Delegates",Ps(t,"Addresses.Delegates",[]));if(_.length>0){const e=_[Math.floor(Math.random()*_.length)],t=(0,Zn.HM)(e).toOptions(),n=function(e={}){const t={name:xn.identity.name,code:xn.identity.code,encode:e=>e,decode:e=>e},n=Object.values(Cn.gh);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((e=>n.push(e)));const o=new lb({bases:n,loadBase:e.ipld&&e.ipld.loadBase}),c=Object.values(Cn.QB);[r,s,i,a,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>c.push(e)));const d=new hb({codecs:c,loadCodec:e.ipld&&e.ipld.loadCodec}),l=Object.values(Cn.kq);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((e=>l.push(e)));const u=new fb({hashers:l,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:yM(e),addAll:pM(e),bitswap:Yb(e),block:Vb(e),bootstrap:Zb(e),cat:gM(e),commands:wM(e),config:av(e),dag:pv(d,e),dht:vv(e),diag:Lv(e),dns:bM(e),files:Bv(e),get:kM(e),getEndpointConfig:vM(e),id:MM(e),isOnline:EM(e),key:qv(e),log:Qv(e),ls:LM(e),mount:DM(e),name:ik(e),object:yk(d,e),pin:zk(e),ping:TM(e),pubsub:Qk(e),refs:eM(e),repo:sM(e),resolve:RM(e),start:PM(e),stats:aM(e),stop:IM(e),swarm:hM(e),version:AM(e),bases:o,codecs:d,hashers:u}}({host:t.host,protocol:443===parseInt(t.port)?"https":"http",port:t.port});m.contentRouters?.push((y=n,()=>new cb(y))),m.peerRouters?.push(function(e){return()=>new rb(e)}(n))}var y;return Ps(e,"config.Discovery.MDNS.Enabled",Ps(t,"Discovery.MDNS.Enabled",!0))||(m.peerDiscovery=m.peerDiscovery?.filter((e=>{try{if("function"==typeof e)return"@libp2p/mdns"!==e({})[Symbol.toStringTag]}catch{}return!0}))),null==m.transports&&(m.transports=[]),null==m.transports.find((e=>{try{if("function"==typeof e)return"@libp2p/websockets"===e({})[Symbol.toStringTag]}catch{}return!1}))&&m.transports.push((0,kD.E)()),m}({options:e,config:d,datastore:l,keychainConfig:c,peerId:t,multiaddrs:n});return"function"==typeof e.libp2p?e.libp2p({libp2pOptions:u,options:e,config:d,datastore:l,peerId:t}):async function(e){return await async function(e){return null==e.peerId&&(e.peerId=await(0,FL.n9)()),new tS(function(e){const t=(0,C.Z)(UL,e);if(null==t.transports||t.transports.length<1)throw B(new Error(YM.ERR_TRANSPORTS_REQUIRED),OM.ERR_TRANSPORTS_REQUIRED);if(null==t.connectionEncryption||0===t.connectionEncryption.length)throw B(new Error(YM.CONN_ENCRYPTION_REQUIRED),OM.CONN_ENCRYPTION_REQUIRED);if(null===t.connectionProtector&&null!=globalThis.process?.env?.LIBP2P_FORCE_PNET)throw B(new Error(YM.ERR_PROTECTOR_REQUIRED),OM.ERR_PROTECTOR_REQUIRED);return t.identify.host.agentVersion===bL&&(PL.UG||PL.$l?t.identify.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(PL.jU||PL.n2||PL.iP||PL.b$)&&(t.identify.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`)),t}(e))}(e)}(u)}const DD=C.Z.bind({ignoreUndefined:!0}),TD=(0,j.kg)("ipfs:components:peer:storage");class RD{constructor(e,t,n,r,s){this.print=r,this.peerId=e,this.keychain=t,this.repo=n,this.print=r,this.isNew=s}static async start(e,t,n){const{repoAutoMigrate:r,repo:s,onMigrationProgress:i}=n,a="string"==typeof s||null==s?Jm(e,t,{path:s,autoMigrate:r,onMigrationProgress:i}):s,{peerId:o,keychain:c,isNew:d}=await PD(e,a,n);return new RD(o,c,a,e,d)}}const PD=async(e,t,n)=>{if(!t.closed)return{...await ND(t,n),isNew:!1};try{return await t.open(),{...await ND(t,n),isNew:!1}}catch(r){if(r.code!==im)throw r;if(n.init&&!1===n.init.allowNew)throw new Vn("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await ID(e,t,n),isNew:!0}}},ID=async(e,t,n)=>{const r=n.init||{},s=await t.exists();if(TD("repo exists?",s),!0===s)throw new Error("repo already exists");const i=r.privateKey?await AD(r.privateKey):await YD(e,r),a=OD(i);TD("peer identity: %s",a.PeerID);const o={...DD(CD({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}},r.profiles),n.config),Identity:a};await t.init(o),await t.open(),TD("repo opened");const c={pass:n.pass};try{c.dek=await t.config.get("Keychain.DEK")}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}const d=await SD({options:void 0,multiaddrs:void 0,peerId:i,repo:t,config:o,keychainConfig:c});return await t.datastore.has(new lr.s("/info/self"))||await d.keychain.importPeer("self",i),await t.config.set("Keychain",{DEK:d.keychain.init.dek}),{peerId:i,keychain:d.keychain}},AD=async e=>{if(TD("using user-supplied private-key"),(0,Ur.I)(e))return e;const t=(0,Wn.m)(e,"base64pad"),n=await(0,$r.unmarshalPrivateKey)(t);return await(0,Nr.y5)(n.public.bytes,n.bytes)},YD=(e,{algorithm:t="Ed25519",bits:n=2048})=>{if(e("generating %s keypair...",t),"Ed25519"===t)return(0,FL.n9)();if("RSA"===t)return(0,FL.W$)({bits:n});throw B(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},OD=e=>{if(null==e.privateKey)throw B(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:(0,Xn.B)(e.privateKey,"base64pad")}},ND=async(e,t)=>{const n=t.config,r=t.init&&t.init.profiles||[],s=t.pass,i=await e.config.getAll(),a=xD(CD(i,r),n);if(i!==a&&await e.config.replace(a),!a.Identity||!a.Identity.PrivKey)throw new Hn("No private key was found in the config, please intialize the repo");const o=(0,Wn.m)(a.Identity.PrivKey,"base64pad"),c=await(0,$r.unmarshalPrivateKey)(o),d=await(0,Nr.y5)(c.public.bytes,c.bytes);return{peerId:d,keychain:(await SD({options:void 0,multiaddrs:void 0,peerId:d,repo:e,config:a,keychainConfig:{pass:s,...a.Keychain}})).keychain}},xD=(e,t)=>t?DD(e,t):e,CD=(e,t)=>(t||[]).reduce(((e,t)=>{const n=Fl[t];if(!n)throw new Error(`Could not find profile with name '${t}'`);return TD("applying profile %s",t),n.transform(e)}),e);var HD=n(56566);const jD=function(e){let t=new Uint8Array(e.reduce(((e,t)=>e+Xl.encodingLength(t)),0)),n=0;for(const r of e)t=Xl.encode(r,t,n),n+=Xl.encodingLength(r);return t};class BD{constructor(e,t,n){this._refCounter=1,this.cid=e,this.priority=t||1,this.wantType=n}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(Gn.base58btc)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}const zD=z.Reader,UD=z.Writer,FD=z.util,VD=z.roots["ipfs-bitswap"]||(z.roots["ipfs-bitswap"]={}),WD=VD.Message=(()=>{function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.wantlist=null,e.prototype.blocks=FD.emptyArray,e.prototype.payload=FD.emptyArray,e.prototype.blockPresences=FD.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=UD.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&VD.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var n=0;n<e.blocks.length;++n)t.uint32(18).bytes(e.blocks[n]);if(null!=e.payload&&e.payload.length)for(n=0;n<e.payload.length;++n)VD.Message.Block.encode(e.payload[n],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(n=0;n<e.blockPresences.length;++n)VD.Message.BlockPresence.encode(e.blockPresences[n],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof zD||(e=zD.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new VD.Message;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.wantlist=VD.Message.Wantlist.decode(e,e.uint32());break;case 2:r.blocks&&r.blocks.length||(r.blocks=[]),r.blocks.push(e.bytes());break;case 3:r.payload&&r.payload.length||(r.payload=[]),r.payload.push(VD.Message.Block.decode(e,e.uint32()));break;case 4:r.blockPresences&&r.blockPresences.length||(r.blockPresences=[]),r.blockPresences.push(VD.Message.BlockPresence.decode(e,e.uint32()));break;case 5:r.pendingBytes=e.int32();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof VD.Message)return e;var t=new VD.Message;if(null!=e.wantlist){if("object"!=typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=VD.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var n=0;n<e.blocks.length;++n)"string"==typeof e.blocks[n]?FD.base64.decode(e.blocks[n],t.blocks[n]=FD.newBuffer(FD.base64.length(e.blocks[n])),0):e.blocks[n].length>=0&&(t.blocks[n]=e.blocks[n])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");for(t.payload=[],n=0;n<e.payload.length;++n){if("object"!=typeof e.payload[n])throw TypeError(".Message.payload: object expected");t.payload[n]=VD.Message.Block.fromObject(e.payload[n])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");for(t.blockPresences=[],n=0;n<e.blockPresences.length;++n){if("object"!=typeof e.blockPresences[n])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[n]=VD.Message.BlockPresence.fromObject(e.blockPresences[n])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocks=[],n.payload=[],n.blockPresences=[]),t.defaults&&(n.wantlist=null,n.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(n.wantlist=VD.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){n.blocks=[];for(var r=0;r<e.blocks.length;++r)n.blocks[r]=t.bytes===String?FD.base64.encode(e.blocks[r],0,e.blocks[r].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[r]):e.blocks[r]}if(e.payload&&e.payload.length)for(n.payload=[],r=0;r<e.payload.length;++r)n.payload[r]=VD.Message.Block.toObject(e.payload[r],t);if(e.blockPresences&&e.blockPresences.length)for(n.blockPresences=[],r=0;r<e.blockPresences.length;++r)n.blockPresences[r]=VD.Message.BlockPresence.toObject(e.blockPresences[r],t);return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(n.pendingBytes=e.pendingBytes),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message"},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.entries=FD.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=UD.create()),null!=e.entries&&e.entries.length)for(var n=0;n<e.entries.length;++n)VD.Message.Wantlist.Entry.encode(e.entries[n],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof zD||(e=zD.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new VD.Message.Wantlist;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.entries&&r.entries.length||(r.entries=[]),r.entries.push(VD.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:r.full=e.bool();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof VD.Message.Wantlist)return e;var t=new VD.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var n=0;n<e.entries.length;++n){if("object"!=typeof e.entries[n])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[n]=VD.Message.Wantlist.Entry.fromObject(e.entries[n])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.entries=[]),t.defaults&&(n.full=!1),e.entries&&e.entries.length){n.entries=[];for(var r=0;r<e.entries.length;++r)n.entries[r]=VD.Message.Wantlist.Entry.toObject(e.entries[r],t)}return null!=e.full&&e.hasOwnProperty("full")&&(n.full=e.full),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist"},e.WantType=function(){const e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.block=FD.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=UD.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof zD||(e=zD.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new VD.Message.Wantlist.Entry;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.block=e.bytes();break;case 2:r.priority=e.int32();break;case 3:r.cancel=e.bool();break;case 4:r.wantType=e.int32();break;case 5:r.sendDontHave=e.bool();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof VD.Message.Wantlist.Entry)return e;var t=new VD.Message.Wantlist.Entry;switch(null!=e.block&&("string"==typeof e.block?FD.base64.decode(e.block,t.block=FD.newBuffer(FD.base64.length(e.block)),0):e.block.length>=0&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.block="":(n.block=[],t.bytes!==Array&&(n.block=FD.newBuffer(n.block))),n.priority=0,n.cancel=!1,n.wantType=t.enums===String?"Block":0,n.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(n.block=t.bytes===String?FD.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(n.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(n.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(n.wantType=t.enums===String?VD.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(n.sendDontHave=e.sendDontHave),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist.Entry"},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.prefix=FD.newBuffer([]),e.prototype.data=FD.newBuffer([]),e.encode=function(e,t){return t||(t=UD.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof zD||(e=zD.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new VD.Message.Block;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.prefix=e.bytes();break;case 2:r.data=e.bytes();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof VD.Message.Block)return e;var t=new VD.Message.Block;return null!=e.prefix&&("string"==typeof e.prefix?FD.base64.decode(e.prefix,t.prefix=FD.newBuffer(FD.base64.length(e.prefix)),0):e.prefix.length>=0&&(t.prefix=e.prefix)),null!=e.data&&("string"==typeof e.data?FD.base64.decode(e.data,t.data=FD.newBuffer(FD.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.prefix="":(n.prefix=[],t.bytes!==Array&&(n.prefix=FD.newBuffer(n.prefix))),t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=FD.newBuffer(n.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(n.prefix=t.bytes===String?FD.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?FD.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Block"},e}(),e.BlockPresenceType=function(){const e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cid=FD.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=UD.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof zD||(e=zD.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new VD.Message.BlockPresence;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.cid=e.bytes();break;case 2:r.type=e.int32();break;default:e.skipType(7&s)}}return r},e.fromObject=function(e){if(e instanceof VD.Message.BlockPresence)return e;var t=new VD.Message.BlockPresence;switch(null!=e.cid&&("string"==typeof e.cid?FD.base64.decode(e.cid,t.cid=FD.newBuffer(FD.base64.length(e.cid)),0):e.cid.length>=0&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.cid="":(n.cid=[],t.bytes!==Array&&(n.cid=FD.newBuffer(n.cid))),n.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(n.cid=t.bytes===String?FD.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?VD.Message.BlockPresenceType[e.type]:e.type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,z.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.BlockPresence"},e}(),e})(),$D=WD.Wantlist.WantType.Block,GD=WD.Wantlist.WantType.Have;class qD{constructor(e,t){this.set=t?sL({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:t.metrics}):new Map,this._stats=e}get length(){return this.set.size}add(e,t,n){const r=e.toString(Gn.base58btc),s=this.set.get(r);s?(s.inc(),s.priority=t,s.wantType===GD&&n===$D&&(s.wantType=n)):(this.set.set(r,new BD(e,t,n)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.toString(Gn.base58btc),n=this.set.get(t);n&&(n.dec(),n.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map((e=e=>e[1].key,t=Array.from(this.set.entries()),Array.prototype.slice.call(t,0).sort(((t,n)=>{const r=e(t),s=e(n);return r<s?-1:r>s?1:0}))));var e,t}contains(e){const t=e.toString(Gn.base58btc);return this.set.has(t)}get(e){const t=e.toString(Gn.base58btc);return this.set.get(t)}}qD.Entry=BD;const KD=qD.Entry;class ZD{constructor(e,t,n,r,s){this.entry=new KD(e,t,n),this.cancel=Boolean(r),this.sendDontHave=Boolean(s)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(Gn.base58btc)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}const JD=(e,t)=>{const n=["bitswap"];return t&&n.push(t),e&&n.push(`${e.toString().slice(0,8)}`),Object.assign(Rp(n.join(":")),{error:Rp(n.concat(["error"]).join(":"))})},QD=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e){const e=t.get(n);if(void 0===e)return!1;if(r instanceof Uint8Array&&e instanceof Uint8Array&&!(0,Vr.f)(r,e))return!1;if(r instanceof ZD&&e instanceof ZD&&!r.equals(e))return!1}return!0};class XD{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}addEntry(e,t,n,r,s){null==n&&(n=XD.WantType.Block);const i=e.toString(Gn.base58btc),a=this.wantlist.get(i);a?(a.wantType===n&&(a.priority=t),r&&(a.cancel=Boolean(r)),s&&(a.sendDontHave=Boolean(s)),n===XD.WantType.Block&&a.wantType===XD.WantType.Have&&(a.wantType=n)):this.wantlist.set(i,new ZD(e,t,n,r,s))}addBlock(e,t){const n=e.toString(Gn.base58btc);this.blocks.set(n,t)}addHave(e){const t=e.toString(Gn.base58btc);this.blockPresences.has(t)||this.blockPresences.set(t,XD.BlockPresenceType.Have)}addDontHave(e){const t=e.toString(Gn.base58btc);this.blockPresences.has(t)||this.blockPresences.set(t,XD.BlockPresenceType.DontHave)}cancel(e){const t=e.toString(Gn.base58btc);this.wantlist.delete(t),this.addEntry(e,0,XD.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}))),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return WD.encode(e).finish()}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}))),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(const[t,n]of this.blocks.entries()){const r=te.k.parse(t),s=r.version,i=r.code,a=r.multihash.code,o=r.multihash.digest.length,c=jD([s,i,a,o]);e.payload.push(new WD.Block({prefix:c,data:n}))}for(const[t,n]of this.blockPresences)e.blockPresences.push(new WD.BlockPresence({cid:te.k.parse(t).bytes,type:n}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),WD.encode(e).finish()}equals(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&QD(this.wantlist,e.wantlist)&&QD(this.blocks,e.blocks)&&QD(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}XD.deserialize=async(e,t)=>{const n=WD.decode(e),r=n.wantlist&&n.wantlist.full||!1,s=new XD(r);return n.wantlist&&n.wantlist.entries&&n.wantlist.entries.forEach((e=>{if(!e.block)return;const t=te.k.decode(e.block);s.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))})),n.blockPresences&&n.blockPresences.forEach((e=>{if(!e.cid)return;const t=te.k.decode(e.cid);e.type===XD.BlockPresenceType.Have?s.addHave(t):s.addDontHave(t)})),n.blocks.length>0?(await Promise.all(n.blocks.map((async e=>{const t=await ji.sha256.digest(e),n=te.k.createV0(t);s.addBlock(n,e)}))),s):n.payload.length>0?(await Promise.all(n.payload.map((async e=>{if(!e.prefix||!e.data)return;const n=HD(e.prefix),r=n[0],i=n[1],a=n[2],o=a===ji.sha256.code?ji.sha256:t&&await t.getHasher(a);if(!o)throw B(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");const c=await o.digest(e.data),d=te.k.create(r,i,c);s.addBlock(d,e.data)}))),s.setPendingBytes(n.pendingBytes),s):s},XD.blockPresenceSize=e=>e.bytes.length+1,XD.Entry=ZD,XD.WantType={Block:WD.Wantlist.WantType.Block,Have:WD.Wantlist.WantType.Have},XD.BlockPresenceType={Have:WD.BlockPresenceType.Have,DontHave:WD.BlockPresenceType.DontHave};const eT=Math.pow(2,31)-1;class tT{constructor(e,t,n){var r,s,i,a,o,c,d;this.peerId=t,this.network=n,this.refcnt=1,this._entries=[],this._log=JD(e,"msgqueue"),this.sendEntries=(r=this._sendEntries.bind(this),s=1,a=null,o=null,c=function(){a&&(clearTimeout(a),o=null,a=null)},d=function(){if(!s)return r.apply(this,arguments);var e=this,t=arguments,n=i&&!a;return c(),o=function(){r.apply(e,t)},a=setTimeout((function(){if(a=null,!n){var e=o;return o=null,e()}}),s),n?o():void 0},d.cancel=c,d.flush=function(){var e=o;c(),e&&e()},d)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new XD(!1);this._entries.forEach((t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(e){return void this._log.error("cant connect to peer %s: %s",this.peerId.toString(),e.message)}this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,e).catch((e=>{this._log.error("send error: %s",e.message)}))}}class nT{constructor(e,t,n,r){this.peers=sL({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:r.metrics}),this.wantlist=new qD(n,r),this.network=t,this._stats=n,this._peerId=e,this._log=JD(e,"want")}_addEntries(e,t,n){const r=e.map(((e,n)=>new XD.Entry(e,eT-n,XD.WantType.Block,t)));r.forEach((e=>{e.cancel?n?this.wantlist.removeForce(e.cid.toString(Gn.base58btc)):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))}));for(const e of this.peers.values())e.addEntries(r)}_startPeerHandler(e){let t=this.peers.get(e.toString());if(t)return void t.refcnt++;t=new tT(this._peerId,e,this.network);const n=new XD(!0);for(const e of this.wantlist.entries())n.addEntry(e[1].cid,e[1].priority);return t.addMessage(n),this.peers.set(e.toString(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}wantBlocks(e,t={}){this._addEntries(e,!1),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.cancelWants(e)}))}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach((e=>this.disconnected(e.peerId)))}}const rT="/ipfs/bitswap/1.0.0",sT="/ipfs/bitswap/1.1.0",iT="/ipfs/bitswap/1.2.0";class aT{constructor(e,t,n,r={}){this._log=JD(e.peerId,"network"),this._libp2p=e,this._bitswap=t,this._protocols=[rT],r.b100Only||(this._protocols.unshift(sT),this._protocols.unshift(iT)),this._stats=n,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=r.hashLoader,this._maxInboundStreams=r.maxInboundStreams??32,this._maxOutboundStreams=r.maxOutboundStreams??128,this._incomingStreamTimeout=r.incomingStreamTimeout??3e4}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection,{maxInboundStreams:this._maxInboundStreams,maxOutboundStreams:this._maxOutboundStreams});const e=n_({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect});this._registrarIds=[];for(const t of this._protocols)this._registrarIds.push(await this._libp2p.registrar.register(t,e));this._libp2p.getConnections().forEach((e=>{this._onPeerConnect(e.remotePeer)}))}async stop(){if(this._running=!1,await this._libp2p.unhandle(this._protocols),null!=this._registrarIds){for(const e of this._registrarIds)this._libp2p.registrar.unregister(e);this._registrarIds=[]}}_onConnection({stream:e,connection:t}){if(!this._running)return;const n=new $n.TimeoutController(this._incomingStreamTimeout);Promise.resolve().then((async()=>{this._log("incoming new bitswap %s connection from %p",e.stat.protocol,t.remotePeer),await(0,ki.zG)((0,Kw.wJ)(e.source,n.signal),Zw.J(),(async e=>{for await(const r of e){try{const e=await XD.deserialize(r.subarray(),this._hashLoader);await this._bitswap._receiveMessage(t.remotePeer,e)}catch(e){this._bitswap._receiveError(e);break}n.reset()}}))})).catch((t=>{this._log(t),e.abort(t)})).finally((()=>{n.clear(),e.close()}))}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,t={}){return this._libp2p.contentRouting.findProviders(e,t)}async findAndConnect(e,t){const n=[];let r=0;for await(const s of this.findProviders(e,t))if(this._log(`connecting to provider ${s.id}`),n.push(this.connectTo(s.id,t).catch((e=>{this._log.error(e)}))),r++,3===r)break;await Promise.all(n)}async provide(e,t){await this._libp2p.contentRouting.provide(e,t)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");const n=e.toString();this._log("sendMessage to %s",n,t);const r=await this._libp2p.dial(e),s=await r.newStream([iT,sT,rT]);await async function(e,t,n){try{let n;switch(e.stat.protocol){case rT:n=t.serializeToBitswap100();break;case sT:case iT:n=t.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+e.stat.protocol)}await(0,ki.zG)([n],Zw.c(),e)}catch(e){n(e)}finally{e.close()}}(s,t,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e,t){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,t)}_updateSentStats(e,t){const n=e.toString();if(this._stats){for(const e of t.values())this._stats.push(n,"dataSent",e.length);this._stats.push(n,"blocksSent",t.size)}}}class oT{constructor(e){this.partner=e,this.wantlist=new qD,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t,n){this.wantlist.add(e,t,n)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}class cT extends Map{constructor(e,t){super(),this._cmp=t||this._defaultSort,this._keys=[];for(const[t,n]of e||[])this.set(t,n)}update(e){if(e<0||e>=this._keys.length)return;const t=this._keys[e];this._keys.splice(e,1);const n=this._find(t);this._keys.splice(n,0,t)}set(e,t){if(this.has(e)){const t=this.indexOf(e);this._keys.splice(t,1)}super.set(e,t);const n=this._find(e);return this._keys.splice(n,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;const t=this.indexOf(e);return this._keys.splice(t,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;const t=this._find(e);if(this._keys[t]===e)return t;for(let n=1;n<this._keys.length;n++){if(this._keys[t+n]===e)return t+n;if(this._keys[t-n]===e)return t-n}return-1}_find(e){let t=0,n=this._keys.length;for(;t<n;){const r=t+n>>>1,s=this._kCmp(this._keys[r],e);if(s<0)t=r+1;else{if(!(s>0))return r;n=r}}return t}*keys(){for(const e of this._keys)yield e}*values(){for(const e of this._keys)yield this.get(e)}*entries(){for(const e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,t){if(e)for(const n of this._keys)e.apply(t,[[n,this.get(n)]])}_defaultSort(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}_kCmp(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}const dT={hasNewInfo:()=>!1,merge(){}};class lT{constructor(e=dT){this._taskMerger=e,this._byPeer=new cT([],uT.compare)}pushTasks(e,t){let n=this._byPeer.get(e.toString());n||(n=new uT(e,this._taskMerger)),n.pushTasks(t),this._byPeer.set(e.toString(),n)}popTasks(e){const t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};const{tasks:n,pendingSize:r}=t.popTasks(e);if(0===n.length)return{tasks:n,pendingSize:r};const s=t.peerId;return t.isIdle()?this._byPeer.delete(s.toString()):this._byPeer.update(0),{peerId:s,tasks:n,pendingSize:r}}_head(){if(0!==this._byPeer.size)for(const[,e]of this._byPeer)return e}remove(e,t){const n=this._byPeer.get(t.toString());n&&n.remove(e)}tasksDone(e,t){const n=this._byPeer.get(e.toString());if(!n)return;const r=this._byPeer.indexOf(e.toString());for(const e of t)n.taskDone(e);this._byPeer.update(r)}}class uT{constructor(e,t){this.peerId=e,this._taskMerger=t,this._activeTotalSize=0,this._pending=new hT,this._active=new Set}pushTasks(e){for(const t of e)this._pushTask(t)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;const t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){const t=[];for(const n of this._active)n.topic===e.topic&&t.push(n);return 0===t.length||this._taskMerger.hasNewInfo(e,t)}popTasks(e){let t=0;const n=[],r=this._pending.tasks();for(let s=0;s<r.length&&t<e;s++){const e=r[s];n.push(e),t+=e.size,this._pending.delete(e.topic),this._activeTotalSize+=e.size,this._active.add(e)}return{tasks:n,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return 0===this._pending.length&&0===this._active.size}static compare(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}class hT{constructor(){this._tasks=new cT([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce(((e,t)=>e+t.task.size),0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map((e=>e.task))}updatePriority(e,t){const n=this._tasks.get(e);if(!n)return;const r=this._tasks.indexOf(e);n.task.priority=t,this._tasks.update(r)}_compare(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}const pT={hasNewInfo(e,t){let n=!1,r=!1;for(const e of t)e.data.haveBlock&&(n=!0),e.data.isWantBlock&&(r=!0);return!(r||!e.data.isWantBlock)||!(n||!e.data.haveBlock)},merge(e,t){const n=e.data,r=t.data;!r.haveBlock&&n.haveBlock&&(r.haveBlock=n.haveBlock,r.blockSize=n.blockSize),!r.isWantBlock&&n.isWantBlock&&(r.isWantBlock=!0,r.haveBlock&&!n.haveBlock||(r.haveBlock=n.haveBlock,t.size=e.size)),r.isWantBlock&&r.haveBlock&&(t.size=r.blockSize)}},fT=XD.WantType;class mT{constructor(e,t,n,r,s,i={}){this._log=JD(e,"engine"),this.blockstore=t,this.network=n,this._stats=r,this._opts=this._processOpts(i),this.ledgerMap=sL({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:s.metrics}),this._running=!1,this._requestQueue=new lT(pT)}_processOpts(e){return{maxSizeReplaceHasWithBlock:1024,targetMessageSize:16384,...e}}_scheduleProcessTasks(){setTimeout((()=>{this._processTasks()}))}async _processTasks(){if(!this._running)return;const{peerId:e,tasks:t,pendingSize:n}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(0===t.length)return;const r=new XD(!1);r.setPendingBytes(n);const s=[],i=new Map;for(const e of t){const t=te.k.parse(e.topic);e.data.haveBlock?e.data.isWantBlock?(s.push(t),i.set(e.topic,e.data)):r.addHave(t):r.addDontHave(t)}const a=await this._getBlocks(s);for(const[e,t]of i){const n=te.k.parse(e),s=a.get(e);s?r.addBlock(n,s):t.sendDontHave&&r.addDontHave(n)}if(r.empty)return e&&this._requestQueue.tasksDone(e,t),void this._scheduleProcessTasks();try{e&&await this.network.sendMessage(e,r);for(const[t,n]of a.entries())e&&this.messageSent(e,te.k.parse(t),n)}catch(e){this._log.error(e)}e&&this._requestQueue.tasksDone(e,t),this._scheduleProcessTasks()}wantlistForPeer(e){const t=e.toString(),n=this.ledgerMap.get(t);return n?n.wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toString(),n=this.ledgerMap.get(t);return n?{peer:n.partner,value:n.debtRatio(),sent:n.accounting.bytesSent,recv:n.accounting.bytesRecv,exchanged:n.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((e=>e.partner))}receivedBlocks(e){if(e.length){for(const t of this.ledgerMap.values())for(const n of e){const e=t.wantlistContains(n.cid);if(!e)continue;const r=n.data.length,s=this._sendAsBlock(e.wantType,r);let i=r;s||(i=XD.blockPresenceSize(e.cid)),this._requestQueue.pushTasks(t.partner,[{topic:e.cid.toString(Gn.base58btc),priority:e.priority,size:i,data:{blockSize:r,isWantBlock:s,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,t){const n=this._findOrCreate(e);if(t.empty)return;if(t.full&&(n.wantlist=new qD),this._updateBlockAccounting(t.blocks,n),0===t.wantlist.size)return void this._scheduleProcessTasks();const r=[],s=[];t.wantlist.forEach((e=>{e.cancel?(n.cancelWant(e.cid),r.push(e.cid)):(n.wants(e.cid,e.priority,e.wantType),s.push(e))})),this._cancelWants(e,r),await this._addWants(e,s),this._scheduleProcessTasks()}_cancelWants(e,t){for(const n of t)this._requestQueue.remove(n.toString(Gn.base58btc),e)}async _addWants(e,t){const n=await this._getBlockSizes(t.map((e=>e.cid))),r=[];for(const s of t){const t=s.cid.toString(Gn.base58btc),i=n.get(t);if(null==i)s.sendDontHave&&r.push({topic:t,priority:s.priority,size:XD.blockPresenceSize(s.cid),data:{isWantBlock:s.wantType===fT.Block,blockSize:0,haveBlock:!1,sendDontHave:s.sendDontHave}});else{const e=this._sendAsBlock(s.wantType,i);let n=i;e||(n=XD.blockPresenceSize(s.cid)),r.push({topic:t,priority:s.priority,size:n,data:{isWantBlock:e,blockSize:i,haveBlock:!0,sendDontHave:s.sendDontHave}})}this._requestQueue.pushTasks(e,r)}}_sendAsBlock(e,t){return e===fT.Block||t<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){const t=await this._getBlocks(e);return new Map([...t].map((([e,t])=>[e,t.length])))}async _getBlocks(e){const t=new Map;return await Promise.all(e.map((async e=>{try{const n=await this.blockstore.get(e);t.set(e.toString(Gn.base58btc),n)}catch(t){"ERR_NOT_FOUND"!==t.code&&this._log.error("failed to query blockstore for %s: %s",e,t)}}))),t}_updateBlockAccounting(e,t){for(const n of e.values())this._log("got block (%s bytes)",n.length),t.receivedBytes(n.length)}messageSent(e,t,n){const r=this._findOrCreate(e);r.sentBytes(n.length),r.wantlist.remove(t)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){this.ledgerMap.delete(e.toString())}_findOrCreate(e){const t=e.toString(),n=this.ledgerMap.get(t);if(n)return n;const r=new oT(e);return this.ledgerMap.set(t,r),this._stats&&this._stats.push(t,"peerCount",1),r}start(){this._running=!0}stop(){this._running=!1}}const _T=e=>`unwant:${(0,Xn.B)(e.multihash.bytes,"base64")}`,yT=e=>`block:${(0,Xn.B)(e.multihash.bytes,"base64")}`;class gT extends zM.EventEmitter{constructor(e){super(),this.setMaxListeners(1e3),this._log=JD(e,"notif")}hasBlock(e,t){const n=yT(e);this._log(n),this.emit(n,t)}wantBlock(e,t={}){if(!e)throw new Error("Not a valid cid");const n=yT(e),r=_T(e);return this._log(`wantBlock:${e}`),new Promise(((s,i)=>{const a=()=>{this.removeListener(n,o),i(new Error(`Block for ${e} unwanted`))},o=e=>{this.removeListener(r,a),s(e)};this.once(r,a),this.once(n,o),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.removeListener(n,o),this.removeListener(r,a),i(new Error(`Want for ${e} aborted`))}))}))}unwantBlock(e){const t=_T(e);this._log(t),this.emit(t)}}var wT=n(3024);class bT extends zM.EventEmitter{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach((e=>{this._stats[e]=BigInt(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach((t=>{(this._movingAverages[e][t]=wT(t)).push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;t&&Object.keys(this._stats).forEach((n=>{this._updateFrequencyFor(n,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,n){const r=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const s=r/t*1e3;let i=this._movingAverages[e];i||(i=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((e=>{let t=i[e];t||(t=i[e]=wT(e)),t.push(n,s)}))}_applyOp(e){const t=e[0],n=e[1];if("number"!=typeof n)throw new Error(`invalid increment number: ${n}`);Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(n),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=n}}const vT={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]};class kT extends zM.EventEmitter{constructor(e,t=[],n=vT){super();const r=Object.assign({},vT,n);if("number"!=typeof r.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof r.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=t,this._options=r,this._enabled=this._options.enabled,this._global=new bT(t,r),this._global.on("update",(e=>this.emit("update",e))),this._peers=sL({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:e.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){const t="string"!=typeof e&&e.toString?e.toString():`${e}`;return this._peers.get(t)}push(e,t,n){if(this._enabled&&(this._global.push(t,n),e)){let r=this._peers.get(e);r||(r=new bT(this._initialCounters,this._options),this._peers.set(e,r)),r.push(t,n)}}disconnected(e){const t=e.toString(),n=this._peers.get(t);n&&(n.stop(),this._peers.delete(t))}}const MT={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},ET=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];class LT extends $m{constructor(e,t,n={}){super(),this._libp2p=e,this._log=JD(this.peerId),this._options=Object.assign({},MT,n),this._stats=new kT(e,ET,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new aT(e,this,this._stats,{hashLoader:n.hashLoader,maxInboundStreams:n.maxInboundStreams,maxOutboundStreams:n.maxOutboundStreams,incomingStreamTimeout:n.incomingStreamTimeout}),this.blockstore=t,this.engine=new mT(this.peerId,t,this.network,this._stats,e),this.wm=new nT(this.peerId,this.network,this._stats,e),this.notifications=new gT(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch(e){this._log("failed to receive message",t)}if(0===t.blocks.size)return;const n=[];for(const[e,r]of t.blocks.entries()){const t=te.k.parse(e);n.push({wasWanted:this.wm.wantlist.contains(t),cid:t,data:r})}this.wm.cancelWants(n.filter((({wasWanted:e})=>e)).map((({cid:e})=>e))),await Promise.all(n.map((({cid:t,wasWanted:n,data:r})=>this._handleReceivedBlock(e,t,r,n))))}async _handleReceivedBlock(e,t,n,r){this._log("received block");const s=await this.blockstore.has(t);this._updateReceiveCounters(e.toString(),t,n,s),r&&await this.put(t,n)}_updateReceiveCounters(e,t,n,r){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",n.length),r&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",n.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,t){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,t={}){const n=(e,t)=>(this.wm.wantBlocks([e],t),this.notifications.wantBlock(e,t));let r=!1;const s=async(e,t)=>{try{return await this.blockstore.get(e,t)}catch(s){if("ERR_NOT_FOUND"!==s.code)throw s;return r||(r=!0,this.network.findAndConnect(e,t).catch((e=>this._log.error(e)))),n(e,t)}},i=new AbortController,a=t.signal?(0,ur.anySignal)([t.signal,i.signal]):i.signal;try{return await Promise.race([this.notifications.wantBlock(e,{signal:a}),s(e,{signal:a})])}finally{i.abort()}}async*getMany(e,t={}){for await(const n of e)yield this.get(n,t)}unwant(e){const t=Array.isArray(e)?e:[e];this.wm.unwantBlocks(t),t.forEach((e=>this.notifications.unwantBlock(e)))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,t,n){await this.blockstore.put(e,t),this._sendHaveBlockNotifications(e,t)}async*putMany(e,t){for await(const{key:n,value:r}of this.blockstore.putMany(e,t))this._sendHaveBlockNotifications(n,r),yield{key:n,value:r}}_sendHaveBlockNotifications(e,t){this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((e=>{this._log.error("Failed to provide: %s",e.message)}))}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}}function ST(e){return e=e||new Error("Not Found"),B(e,"ERR_NOT_FOUND")}function DT(e){return e=e||new Error("Aborted"),B(e,"ERR_ABORTED")}class TT extends $m{constructor(e,t){super(),this.child=e,this.bitswap=t}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,t,n={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,t,n):await this.child.put(e,t,n))}async*putMany(e,t={}){const n=(0,vi.Z)(e,(async({key:e})=>!await this.has(e)));this.bitswap.isStarted()?yield*this.bitswap.putMany(n,t):yield*this.child.putMany(n,t)}async get(e,t={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,t):this.child.get(e,t)}async*getMany(e,t={}){const n=(0,Ss.d)({objectMode:!0}),r=(0,Ss.d)({objectMode:!0});Promise.resolve().then((async()=>{for await(const t of e)!await this.has(t)&&this.bitswap.isStarted()?n.push(t):r.push(t);n.end(),r.end()})),yield*(0,Pm.Z)(this.bitswap.getMany(n,t),this.child.getMany(r,t))}async delete(e,t){await this.child.delete(e,t)}async*deleteMany(e,t){yield*this.child.deleteMany(e,t)}async has(e,t={}){return this.child.has(e,t)}async*query(e,t={}){yield*this.child.query(e,t)}async*queryKeys(e,t={}){yield*this.child.queryKeys(e,t)}}class RT{constructor(e,t,n,r,s){this.peerId=e,this.libp2p=t,this.bitswap=n,this.repo=r,this.blockstore=s}static async start({peerId:e,repo:t,print:n,hashers:r,options:s}){t.closed&&await t.open();const i=await t.config.getAll(),a=await SD({options:s,repo:t,peerId:e,multiaddrs:PT(e,i),config:i,keychainConfig:void 0});await a.start();for(const e of a.getMultiaddrs())n(`Swarm listening on ${e.toString()}`);const o=((e,t,n={})=>new LT(e,t,n))(a,t.blocks,{statsEnabled:!0,hashLoader:r,maxInboundStreams:1024,maxOutboundStreams:1024});await o.start();const c=new TT(t.blocks,o);return t.blocks=c,t.pins.blockstore=c,new RT(e,a,o,t,c)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await e.bitswap.stop(),await e.libp2p.stop()}}const PT=(e,t)=>{const n=e.toString(),r=[],s=t.Addresses&&t.Addresses.Swarm||[];for(const e of s){let t=(0,Zn.HM)(e);if(t.protoCodes().includes(IT))throw B(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");const s=t.getPeerId();s&&s!==n&&(t=t.encapsulate(`/p2p/${n}`)),r.push(t)}return r},IT=479;class AT{constructor({network:e}){this.addrs=function({network:e}){return yr((async function(t={}){const n=[],{libp2p:r}=await e.use(t);return await r.peerStore.forEach((e=>{n.push({id:e.id,addrs:e.addresses.map((e=>e.multiaddr))})})),n}))}({network:e}),this.connect=function({network:e}){return yr((async function(t,n={}){const{libp2p:r}=await e.use(n);await r.dial(t,n)}))}({network:e}),this.disconnect=function({network:e}){return yr((async function(t,n={}){const{libp2p:r}=await e.use(n);await r.hangUp(t)}))}({network:e}),this.localAddrs=function({network:e}){return yr((async function(t={}){const{libp2p:n}=await e.use(t);return n.getMultiaddrs()}))}({network:e}),this.peers=function({network:e}){return yr((async function(t={}){const{libp2p:n}=await e.use(t);if(t.verbose){const e=[];for(const r of n.getConnections()){const n={addr:r.remoteAddr,peer:r.remotePeer};(t.verbose||t.direction)&&(n.direction=r.stat.direction),t.verbose&&(n.muxer=r.stat.multiplexer,n.latency="n/a",n.streams=[]),e.push(n)}return e}const r=new Map;for(const e of n.getConnections()){const t={addr:e.remoteAddr,peer:e.remotePeer};r.set(e.remotePeer.toString(),t)}return Array.from(r.values())}))}({network:e})}}const YT={success:!0,time:0,text:""},OT="/ipns/";function NT(e){let t;if(e.startsWith(OT)&&(e=e.substring(OT.length)),"1"!==e[0]&&"Q"!==e[0]||(e=`z${e}`),"z"===e[0]&&(t=Gn.base58btc.decode(e)),"k"===e[0]&&(t=Xs.base36.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=(0,Qr.z)([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return(0,Qr.z)([(0,Wn.m)(OT),t.subarray(2)])}const xT=async(e,t,n)=>{const r=await e.use(n);if(null!=r.libp2p.dht)return r;{const e=async function*(){yield{from:t,name:"QUERY_ERROR",type:3,error:new Vn("dht not enabled")}};return{libp2p:{dht:{get:e,put:e,findProviders:e,findPeer:e,provide:e,getClosestPeers:e}}}}},CT=async()=>{throw new Vn("pubsub not enabled")};var HT=n(82784);const jT=C.Z.bind({ignoreUndefined:!0}),BT=(0,j.kg)("ipfs");class zT{constructor({print:e,storage:t,codecs:n,options:r}){const{peerId:s,repo:i,keychain:a}=t,o=Tr.create(RT),c=Ou(r.preload),d=yr((async(e,t={recursive:!0})=>{if("string"!=typeof e)throw new Error("Invalid arguments, domain must be a string");return async function(e,t){return(async(e,t={})=>{const n=new URLSearchParams(t);n.set("arg",e);const r=n.toString();if(!t.nocache&&Ar.has(r)){const e=Ar.get(r);return Or(e)}const s=await Yr.add((async()=>{const e=await Ir.get("https://ipfs.io/api/v0/dns",{searchParams:n}),t=new URL(e.url).search.slice(1),r=await e.json();return Ar.set(t,r,6e4),r}));return Or(s)})(e,t)}(e=function(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}(e),t)})),l=function({network:e}){return()=>{const t=e.try();return null!=t&&Boolean(t.libp2p.isStarted())}}({network:o}),u=new Zs(r),h=Object.values(Cn.kq);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach((e=>h.push(e))),this.hashers=new fb({hashers:h,loadHasher:r.ipld&&r.ipld.loadHasher});const p=Object.values(Cn.gh);(r.ipld&&r.ipld.bases?r.ipld.bases:[]).forEach((e=>p.push(e))),this.bases=new lb({bases:p,loadBase:r.ipld&&r.ipld.loadBase});const f=new zr({repo:i,codecs:n}),m=new Ei({codecs:n,hashers:this.hashers,preload:c,repo:i}),_=new ai({dns:d,ipns:u,repo:i,codecs:n,peerId:s,isOnline:l,keychain:a,options:r}),y=function({repo:e,codecs:t,bases:n,name:r}){return yr((async function(s,i={}){if(!cr(s))throw new Error("invalid argument "+s);if(dr(s))for await(const e of r.resolve(s,i))s=e;const[,a,o,...c]=s.split("/"),d=i.cidBase?await n.getBase(i.cidBase):void 0,l=function(e){try{return(0,Nr.jE)(e).toBytes()}catch{return te.k.parse(e).bytes}}(o);if(0===c.length)return`/${a}/${d?d.encoder.encode(l):o}`;const u=te.k.decode(l);s=c.join("/");const h=Dr(u,s,t,e,i);let p=u,f=s;for await(const e of h)te.k.asCID(e.value)&&(p=e.value,f=e.remainderPath);return`/ipfs/${p.toString(d&&d.encoder)}${f?"/"+f:""}`}))}({repo:i,codecs:n,bases:this.bases,name:_}),g=new Tu({repo:i,codecs:n,hashers:this.hashers,preload:c}),w=Object.assign(function({repo:e,codecs:t,resolve:n,preload:r}){return async function*(s,i={}){if(0===i.maxDepth)return;if(i.edges&&i.format&&i.format!==ci)throw new Error("Cannot set edges to true and also specify format");if(i.format=i.edges?"<src> -> <dst>":i.format,"number"!=typeof i.maxDepth&&(i.maxDepth=i.recursive?1/0:1),i.timeout){const e=[new $n.TimeoutController(i.timeout).signal];i.signal&&e.push(i.signal),i.signal=(0,ur.anySignal)(e)}const a=(Array.isArray(s)?s:[s]).map((e=>function(e,t,n){const{cid:r,path:s}=wr(t);return!1!==n.preload&&e(r),`/ipfs/${r}${s||""}`}(r,e,i)));for(const r of a)try{yield*di(n,e,t,r,i)}catch(e){yield{ref:"",err:e.message}}}}({repo:i,codecs:n,resolve:y,preload:c}),{local:hi({repo:t.repo})}),{add:b,addAll:v,cat:k,get:M,ls:E}=new Hl({preload:c,repo:i,options:r.EXPERIMENTAL,hashers:this.hashers}),L=function({repo:e,preload:t,hashers:n,options:r}){const s=function(e){const{repoOwner:t}=Object.assign({},fp||{},e),n=Hu(t),r={};return pp({options:e,mfs:r,operations:lp,lock:e=>n.readLock(e)}),pp({options:e,mfs:r,operations:up,lock:e=>n.writeLock(e)}),Object.keys(hp).forEach((t=>{r[t]=hp[t](e)})),r}({repo:e,repoOwner:!1!==r.repoOwner,hashers:n}),i=e=>(...n)=>{const r=n.filter((e=>sr(e,er)||rr(e)));if(r.length){const e=n[n.length-1];e&&!1!==e.preload&&r.forEach((e=>t(e)))}return e(...n)};return{...s,chmod:s.chmod,cp:i(s.cp),mkdir:s.mkdir,stat:i(s.stat),rm:s.rm,read:i(s.read),touch:s.touch,write:s.write,mv:i(s.mv),flush:s.flush,ls:i((async function*(...e){for await(const t of s.ls(...e))yield{...t,size:t.size||0}}))}}({repo:i,preload:c,hashers:this.hashers,options:r}),S=function({preload:e,files:t,options:n={}}){if(n.interval=n.interval||3e4,!n.enabled){Nu("MFS preload disabled");const e=async()=>{};return{start:e,stop:e}}let r,s="";const i=async()=>{try{const a=await t.stat("/"),o=a.cid.toString();s!==o&&(Nu(`preloading updated MFS root ${s} -> ${a.cid}`),await e(a.cid),s=o)}catch(e){Nu.error("failed to preload MFS root",e)}finally{r=setTimeout(i,n.interval)}};return{async start(){const e=await t.stat("/");s=e.cid.toString(),Nu(`monitoring MFS root ${e.cid}`),r=setTimeout(i,n.interval)},stop(){clearTimeout(r)}}}({files:L,preload:c,options:r.preload});this.preload=c,this.name=_,this.ipns=u,this.pin=f,this.resolve=y,this.block=m,this.refs=w,this.start=function({network:e,preload:t,peerId:n,keychain:r,repo:s,ipns:i,mfsPreload:a,print:o,hashers:c,options:d}){return async()=>{const{libp2p:l}=await Tr.start(e,{peerId:n,repo:s,print:o,hashers:c,options:d});await Promise.all([i.startOnline({keychain:r,libp2p:l,peerId:n,repo:s}),t.start(),a.start()])}}({network:o,peerId:s,repo:i,preload:c,ipns:u,mfsPreload:S,print:e,keychain:a,hashers:this.hashers,options:r}),this.stop=function({network:e,preload:t,ipns:n,repo:r,mfsPreload:s}){return async()=>{await Promise.all([t.stop(),n.stop(),s.stop()]),await Tr.stop(e),await r.close()}}({network:o,preload:c,mfsPreload:S,ipns:u,repo:i}),this.dht=function({network:e,repo:t,peerId:n}){const{get:r,put:s,findProvs:i,findPeer:a,provide:o,query:c}={async*get(t,r={}){const{libp2p:s}=await xT(e,n,r),i=t instanceof Uint8Array?t:NT(t);if(null==s.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.get(i,r)},async*put(t,r,s){const{libp2p:i}=await xT(e,n,s),a=t instanceof Uint8Array?t:NT(t);if(null==i.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.put(a,r,s)},async*findProvs(t,r={}){const{libp2p:s}=await xT(e,n,r);if(null==s.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.findProviders(t,{signal:r.signal})},async*findPeer(t,r={}){const{libp2p:s}=await xT(e,n,r);if(null==s.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.findPeer(t,{signal:r.signal})},async*provide(r,s={recursive:!1}){const{libp2p:i}=await xT(e,n,s);if(!await t.blocks.has(r))throw B(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(s.recursive)throw B(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");if(null==i.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.provide(r)},async*query(t,r={}){const{libp2p:s}=await xT(e,n,r);let i;const a=te.k.asCID(t);if(i=null!=a?a.multihash.bytes:(0,Nr.jE)(t.toString()).toBytes(),null==s.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.getClosestPeers(i,r)}};return{get:yr(r),put:yr(s),findProvs:yr(i),findPeer:yr(a),provide:yr(o),query:yr(c)}}({network:o,repo:i,peerId:s}),this.pubsub=function({network:e,config:t}){const n=Ps(t||{},"Pubsub.Enabled",!0),r={};let s;return{subscribe:n?yr((async function(t,n,i={}){const{libp2p:a}=await e.use(i);a.pubsub.subscribe(t),null==s&&(s=e=>{const t=e.detail;r[t.topic]&&r[t.topic].forEach((e=>{"function"!=typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},a.pubsub.addEventListener("message",s)),null!=n&&(null==r[t]&&(r[t]=[]),r[t].push(n))})):CT,unsubscribe:n?yr((async function(t,n,i={}){const{libp2p:a}=await e.use(i);null!=n&&null!=r[t]&&(r[t]=r[t].filter((e=>e!==n)),0===r[t].length&&delete r[t]),"function"!=typeof n&&delete r[t],null==r[t]&&a.pubsub.unsubscribe(t),0===Object.keys(r).length&&(a.pubsub.removeEventListener("message",s),s=void 0)})):CT,publish:n?yr((async function(t,n,r={}){const{libp2p:s}=await e.use(r);if(!n)throw B(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await s.pubsub.publish(t,n)})):CT,ls:n?yr((async function(t={}){const{libp2p:n}=await e.use(t);return n.pubsub.getTopics()})):CT,peers:n?yr((async function(t,n={}){const{libp2p:r}=await e.use(n);return r.pubsub.getSubscribers(t)})):CT}}({network:o,config:r.config}),this.dns=d,this.isOnline=l,this.id=function({peerId:e,network:t}){return yr((async function(n={}){const r=t.try();if(!r){if(n.peerId)throw new zn;if(null==e.publicKey)throw B(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");return{id:e,publicKey:(0,Xn.B)(e.publicKey,"base64pad"),addresses:[],agentVersion:`js-ipfs/${jl}`,protocolVersion:"9000",protocols:[]}}const{libp2p:s}=r,i=n.peerId?n.peerId:e,a=await async function(e,t,n){let r=await t.peerStore.get(e);r||(r=await async function(e,t,n){if(null==t.dht)throw B(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");for await(const r of t.dht.findPeer(e,n))if("FINAL_PEER"===r.name)break;const r=await t.peerStore.get(e);if(!r)throw B(new Error("Could not find peer"),"ERR_NOT_FOUND");return r}(e,t,n));let s=e.publicKey?e.publicKey:await t.peerStore.keyBook.get(e);if(null==s)try{s=await t.getPublicKey(e,n)}catch(t){Bl.error("Could not load public key for",e.toString(),t)}return{...r,publicKey:s,metadata:r.metadata||new Map,addresses:r.addresses.map((e=>e.multiaddr))}}(i,s,n),o=(0,Xn.B)(a.metadata.get("AgentVersion")||new Uint8Array),c=(0,Xn.B)(a.metadata.get("ProtocolVersion")||new Uint8Array),d=a.id.toString();return{id:i,publicKey:a.publicKey?(0,Xn.B)(a.publicKey,"base64pad"):"",addresses:(a.addresses||[]).map((e=>{const t=e.toString();return t.endsWith(`/p2p/${d}`)?t:`${t}/p2p/${d}`})).sort().map((e=>(0,Zn.HM)(e))),agentVersion:o,protocolVersion:c,protocols:(a.protocols||[]).sort()}}))}({network:o,peerId:s}),this.version=function({repo:e}){return yr((async function(t={}){const n=await e.version.get();return{version:jl,commit:"e8b7b66bfa98c2a1c0d0bfc19f698d7d00b6c888",repo:`${n}`,"ipfs-core":jl,"interface-ipfs-core":"^0.157.0"}}))}({repo:i}),this.bitswap=new fi({network:o}),this.bootstrap=new _i({repo:i}),this.config=function({repo:e}){return{getAll:yr((async function(t={}){return e.config.getAll(t)})),get:yr((async function(t,n){return t?e.config.get(t,n):Promise.reject(new Error("key argument is required"))})),set:yr((async function(t,n,r){return e.config.set(t,n,r)})),replace:yr((async function(t,n){return e.config.replace(t,n)})),profiles:{apply:yr((async function(t,n={dryRun:!1}){const{dryRun:r}=n,s=Fl[t];if(!s)throw new Error(`No profile with name '${t}' exists`);try{const t=await e.config.getAll(n);let i=JSON.parse(JSON.stringify(t));return i=s.transform(i),r||await e.config.replace(i,n),delete t.Identity.PrivKey,delete i.Identity.PrivKey,{original:t,updated:i}}catch(e){throw Vl(e),new Error(`Could not apply profile '${t}' to config: ${e.message}`)}})),list:yr(Wl)}}}({repo:i}),this.ping=function({network:e}){return yr((async function*(t,n={}){const{libp2p:r}=await e.use();n.count=n.count||10;const s=await r.peerStore.get(t);let i=s&&s.id;if(!i){yield{...YT,text:`Looking up peer ${t}`};const e=await r.peerRouting.findPeer(t);i=e&&e.id}if(!i)throw new Error("Peer was not found");yield{...YT,text:`PING ${i.toString()}`};let a=0,o=0;for(let e=0;e<n.count;e++)try{const e=await r.ping(i);o+=e,a++,yield{...YT,time:e}}catch(e){yield{...YT,success:!1,text:e.toString()}}if(a){const e=o/a;yield{...YT,text:`Average latency: ${e}ms`}}}))}({network:o}),this.add=b,this.addAll=v,this.cat=k,this.get=M,this.ls=E,this.dag=g,this.files=L,this.key=new _p({keychain:a}),this.object=new kp({preload:c,codecs:n,repo:i}),this.repo=new Lp({repo:i,hashers:this.hashers}),this.stats=new Dp({repo:i,network:o}),this.swarm=new AT({network:o}),Object.defineProperty(this,"libp2p",{get(){const e=o.try();return e?e.libp2p:void 0}});const D=()=>Promise.reject(B(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED"));this.commands=D,this.diag={cmds:D,net:D,sys:D},this.log={level:D,ls:D,tail:async function*(){throw B(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}},this.mount=D,this.codecs=n}async init(){throw new Bn}}n(52596);const UT=async function(e={}){const t=(e=jT({start:!0,EXPERIMENTAL:{},preload:{enabled:!H.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}},e)).init||{},n={name:xn.identity.name,code:xn.identity.code,encode:e=>e,decode:e=>e},o=Object.values(Cn.QB);[r,s,i,a,n].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>o.push(e)));const c=new hb({codecs:o,loadCodec:e.ipld&&e.ipld.loadCodec}),d=e.silent?BT:HT.log;BT("creating repo");const l=await RD.start(d,c,e);BT("getting repo config");const u=await l.repo.config.getAll(),h=new zT({storage:l,print:d,codecs:c,options:{...e,config:u}});if(BT("starting preload"),await h.preload.start(),BT("starting storage"),h.ipns.startOffline(l),l.isNew&&!t.emptyRepo){const e=await(async e=>{const t=Se({Data:new ee({type:"directory"}).marshal(),Links:[]}),n=await e.block.put(t,{mhtype:"sha2-256",format:"dag-pb"});return await e.pin.add(n),n})(h);if(BT("adding default assets"),await void h.addAll,BT("initializing IPNS keyspace"),null==l.peerId.publicKey)throw B(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");const t=new $n.TimeoutController(3e4);try{await h.ipns.initializeKeyspace(l.peerId,(0,Wn.m)(`/ipfs/${e}`),{signal:t.signal})}finally{t.clear()}}return!1!==e.start&&(BT("starting node"),await h.start()),h}}}]);
//# sourceMappingURL=vendors-node_modules_mui_icons-material_esm_Close_js-node_modules_mui_icons-material_esm_Cont-bec458.46280c4e.js.map